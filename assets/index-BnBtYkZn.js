var Sf=Object.defineProperty;var ju=r=>{throw TypeError(r)};var Ef=(r,n,e)=>n in r?Sf(r,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[n]=e;var Uu=(r,n,e)=>Ef(r,typeof n!="symbol"?n+"":n,e),ml=(r,n,e)=>n.has(r)||ju("Cannot "+e);var jn=(r,n,e)=>(ml(r,n,"read from private field"),e?e.call(r):n.get(r)),vl=(r,n,e)=>n.has(r)?ju("Cannot add the same private member more than once"):n instanceof WeakSet?n.add(r):n.set(r,e),Fo=(r,n,e,i)=>(ml(r,n,"write to private field"),i?i.call(r,e):n.set(r,e),e),_l=(r,n,e)=>(ml(r,n,"access private method"),e);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function e(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=e(s);fetch(s.href,o)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function getAugmentedNamespace(r){if(r.__esModule)return r;var n=r.default;if(typeof n=="function"){var e=function i(){return this instanceof i?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};e.prototype=n.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(r).forEach(function(i){var s=Object.getOwnPropertyDescriptor(r,i);Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:function(){return r[i]}})}),e}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production_min;function requireReact_production_min(){if(hasRequiredReact_production_min)return react_production_min;hasRequiredReact_production_min=1;var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),u=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),S=Symbol.iterator;function X(qe){return qe===null||typeof qe!="object"?null:(qe=S&&qe[S]||qe["@@iterator"],typeof qe=="function"?qe:null)}var he={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ce=Object.assign,Ee={};function xe(qe,Ke,st){this.props=qe,this.context=Ke,this.refs=Ee,this.updater=st||he}xe.prototype.isReactComponent={},xe.prototype.setState=function(qe,Ke){if(typeof qe!="object"&&typeof qe!="function"&&qe!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,qe,Ke,"setState")},xe.prototype.forceUpdate=function(qe){this.updater.enqueueForceUpdate(this,qe,"forceUpdate")};function be(){}be.prototype=xe.prototype;function we(qe,Ke,st){this.props=qe,this.context=Ke,this.refs=Ee,this.updater=st||he}var ve=we.prototype=new be;ve.constructor=we,Ce(ve,xe.prototype),ve.isPureReactComponent=!0;var ke=Array.isArray,De=Object.prototype.hasOwnProperty,Oe={current:null},Le={key:!0,ref:!0,__self:!0,__source:!0};function Ae(qe,Ke,st){var ut,nt={},vt=null,it=null;if(Ke!=null)for(ut in Ke.ref!==void 0&&(it=Ke.ref),Ke.key!==void 0&&(vt=""+Ke.key),Ke)De.call(Ke,ut)&&!Le.hasOwnProperty(ut)&&(nt[ut]=Ke[ut]);var Ve=arguments.length-2;if(Ve===1)nt.children=st;else if(1<Ve){for(var ht=Array(Ve),ct=0;ct<Ve;ct++)ht[ct]=arguments[ct+2];nt.children=ht}if(qe&&qe.defaultProps)for(ut in Ve=qe.defaultProps,Ve)nt[ut]===void 0&&(nt[ut]=Ve[ut]);return{$$typeof:r,type:qe,key:vt,ref:it,props:nt,_owner:Oe.current}}function Ie(qe,Ke){return{$$typeof:r,type:qe.type,key:Ke,ref:qe.ref,props:qe.props,_owner:qe._owner}}function Ue(qe){return typeof qe=="object"&&qe!==null&&qe.$$typeof===r}function ze(qe){var Ke={"=":"=0",":":"=2"};return"$"+qe.replace(/[=:]/g,function(st){return Ke[st]})}var Ye=/\/+/g;function Xe(qe,Ke){return typeof qe=="object"&&qe!==null&&qe.key!=null?ze(""+qe.key):Ke.toString(36)}function tt(qe,Ke,st,ut,nt){var vt=typeof qe;(vt==="undefined"||vt==="boolean")&&(qe=null);var it=!1;if(qe===null)it=!0;else switch(vt){case"string":case"number":it=!0;break;case"object":switch(qe.$$typeof){case r:case n:it=!0}}if(it)return it=qe,nt=nt(it),qe=ut===""?"."+Xe(it,0):ut,ke(nt)?(st="",qe!=null&&(st=qe.replace(Ye,"$&/")+"/"),tt(nt,Ke,st,"",function(ct){return ct})):nt!=null&&(Ue(nt)&&(nt=Ie(nt,st+(!nt.key||it&&it.key===nt.key?"":(""+nt.key).replace(Ye,"$&/")+"/")+qe)),Ke.push(nt)),1;if(it=0,ut=ut===""?".":ut+":",ke(qe))for(var Ve=0;Ve<qe.length;Ve++){vt=qe[Ve];var ht=ut+Xe(vt,Ve);it+=tt(vt,Ke,st,ht,nt)}else if(ht=X(qe),typeof ht=="function")for(qe=ht.call(qe),Ve=0;!(vt=qe.next()).done;)vt=vt.value,ht=ut+Xe(vt,Ve++),it+=tt(vt,Ke,st,ht,nt);else if(vt==="object")throw Ke=String(qe),Error("Objects are not valid as a React child (found: "+(Ke==="[object Object]"?"object with keys {"+Object.keys(qe).join(", ")+"}":Ke)+"). If you meant to render a collection of children, use an array instead.");return it}function lt(qe,Ke,st){if(qe==null)return qe;var ut=[],nt=0;return tt(qe,ut,"","",function(vt){return Ke.call(st,vt,nt++)}),ut}function _t(qe){if(qe._status===-1){var Ke=qe._result;Ke=Ke(),Ke.then(function(st){(qe._status===0||qe._status===-1)&&(qe._status=1,qe._result=st)},function(st){(qe._status===0||qe._status===-1)&&(qe._status=2,qe._result=st)}),qe._status===-1&&(qe._status=0,qe._result=Ke)}if(qe._status===1)return qe._result.default;throw qe._result}var bt={current:null},rt={transition:null},He={ReactCurrentDispatcher:bt,ReactCurrentBatchConfig:rt,ReactCurrentOwner:Oe};function We(){throw Error("act(...) is not supported in production builds of React.")}return react_production_min.Children={map:lt,forEach:function(qe,Ke,st){lt(qe,function(){Ke.apply(this,arguments)},st)},count:function(qe){var Ke=0;return lt(qe,function(){Ke++}),Ke},toArray:function(qe){return lt(qe,function(Ke){return Ke})||[]},only:function(qe){if(!Ue(qe))throw Error("React.Children.only expected to receive a single React element child.");return qe}},react_production_min.Component=xe,react_production_min.Fragment=e,react_production_min.Profiler=s,react_production_min.PureComponent=we,react_production_min.StrictMode=i,react_production_min.Suspense=d,react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=He,react_production_min.act=We,react_production_min.cloneElement=function(qe,Ke,st){if(qe==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+qe+".");var ut=Ce({},qe.props),nt=qe.key,vt=qe.ref,it=qe._owner;if(Ke!=null){if(Ke.ref!==void 0&&(vt=Ke.ref,it=Oe.current),Ke.key!==void 0&&(nt=""+Ke.key),qe.type&&qe.type.defaultProps)var Ve=qe.type.defaultProps;for(ht in Ke)De.call(Ke,ht)&&!Le.hasOwnProperty(ht)&&(ut[ht]=Ke[ht]===void 0&&Ve!==void 0?Ve[ht]:Ke[ht])}var ht=arguments.length-2;if(ht===1)ut.children=st;else if(1<ht){Ve=Array(ht);for(var ct=0;ct<ht;ct++)Ve[ct]=arguments[ct+2];ut.children=Ve}return{$$typeof:r,type:qe.type,key:nt,ref:vt,props:ut,_owner:it}},react_production_min.createContext=function(qe){return qe={$$typeof:u,_currentValue:qe,_currentValue2:qe,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},qe.Provider={$$typeof:o,_context:qe},qe.Consumer=qe},react_production_min.createElement=Ae,react_production_min.createFactory=function(qe){var Ke=Ae.bind(null,qe);return Ke.type=qe,Ke},react_production_min.createRef=function(){return{current:null}},react_production_min.forwardRef=function(qe){return{$$typeof:l,render:qe}},react_production_min.isValidElement=Ue,react_production_min.lazy=function(qe){return{$$typeof:y,_payload:{_status:-1,_result:qe},_init:_t}},react_production_min.memo=function(qe,Ke){return{$$typeof:m,type:qe,compare:Ke===void 0?null:Ke}},react_production_min.startTransition=function(qe){var Ke=rt.transition;rt.transition={};try{qe()}finally{rt.transition=Ke}},react_production_min.unstable_act=We,react_production_min.useCallback=function(qe,Ke){return bt.current.useCallback(qe,Ke)},react_production_min.useContext=function(qe){return bt.current.useContext(qe)},react_production_min.useDebugValue=function(){},react_production_min.useDeferredValue=function(qe){return bt.current.useDeferredValue(qe)},react_production_min.useEffect=function(qe,Ke){return bt.current.useEffect(qe,Ke)},react_production_min.useId=function(){return bt.current.useId()},react_production_min.useImperativeHandle=function(qe,Ke,st){return bt.current.useImperativeHandle(qe,Ke,st)},react_production_min.useInsertionEffect=function(qe,Ke){return bt.current.useInsertionEffect(qe,Ke)},react_production_min.useLayoutEffect=function(qe,Ke){return bt.current.useLayoutEffect(qe,Ke)},react_production_min.useMemo=function(qe,Ke){return bt.current.useMemo(qe,Ke)},react_production_min.useReducer=function(qe,Ke,st){return bt.current.useReducer(qe,Ke,st)},react_production_min.useRef=function(qe){return bt.current.useRef(qe)},react_production_min.useState=function(qe){return bt.current.useState(qe)},react_production_min.useSyncExternalStore=function(qe,Ke,st){return bt.current.useSyncExternalStore(qe,Ke,st)},react_production_min.useTransition=function(){return bt.current.useTransition()},react_production_min.version="18.3.1",react_production_min}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production_min()),react.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production_min;function requireReactJsxRuntime_production_min(){if(hasRequiredReactJsxRuntime_production_min)return reactJsxRuntime_production_min;hasRequiredReactJsxRuntime_production_min=1;var r=requireReact(),n=Symbol.for("react.element"),e=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function u(l,d,m){var y,S={},X=null,he=null;m!==void 0&&(X=""+m),d.key!==void 0&&(X=""+d.key),d.ref!==void 0&&(he=d.ref);for(y in d)i.call(d,y)&&!o.hasOwnProperty(y)&&(S[y]=d[y]);if(l&&l.defaultProps)for(y in d=l.defaultProps,d)S[y]===void 0&&(S[y]=d[y]);return{$$typeof:n,type:l,key:X,ref:he,props:S,_owner:s.current}}return reactJsxRuntime_production_min.Fragment=e,reactJsxRuntime_production_min.jsx=u,reactJsxRuntime_production_min.jsxs=u,reactJsxRuntime_production_min}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production_min()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production_min;function requireScheduler_production_min(){return hasRequiredScheduler_production_min||(hasRequiredScheduler_production_min=1,function(r){function n(rt,He){var We=rt.length;rt.push(He);e:for(;0<We;){var qe=We-1>>>1,Ke=rt[qe];if(0<s(Ke,He))rt[qe]=He,rt[We]=Ke,We=qe;else break e}}function e(rt){return rt.length===0?null:rt[0]}function i(rt){if(rt.length===0)return null;var He=rt[0],We=rt.pop();if(We!==He){rt[0]=We;e:for(var qe=0,Ke=rt.length,st=Ke>>>1;qe<st;){var ut=2*(qe+1)-1,nt=rt[ut],vt=ut+1,it=rt[vt];if(0>s(nt,We))vt<Ke&&0>s(it,nt)?(rt[qe]=it,rt[vt]=We,qe=vt):(rt[qe]=nt,rt[ut]=We,qe=ut);else if(vt<Ke&&0>s(it,We))rt[qe]=it,rt[vt]=We,qe=vt;else break e}}return He}function s(rt,He){var We=rt.sortIndex-He.sortIndex;return We!==0?We:rt.id-He.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;r.unstable_now=function(){return o.now()}}else{var u=Date,l=u.now();r.unstable_now=function(){return u.now()-l}}var d=[],m=[],y=1,S=null,X=3,he=!1,Ce=!1,Ee=!1,xe=typeof setTimeout=="function"?setTimeout:null,be=typeof clearTimeout=="function"?clearTimeout:null,we=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ve(rt){for(var He=e(m);He!==null;){if(He.callback===null)i(m);else if(He.startTime<=rt)i(m),He.sortIndex=He.expirationTime,n(d,He);else break;He=e(m)}}function ke(rt){if(Ee=!1,ve(rt),!Ce)if(e(d)!==null)Ce=!0,_t(De);else{var He=e(m);He!==null&&bt(ke,He.startTime-rt)}}function De(rt,He){Ce=!1,Ee&&(Ee=!1,be(Ae),Ae=-1),he=!0;var We=X;try{for(ve(He),S=e(d);S!==null&&(!(S.expirationTime>He)||rt&&!ze());){var qe=S.callback;if(typeof qe=="function"){S.callback=null,X=S.priorityLevel;var Ke=qe(S.expirationTime<=He);He=r.unstable_now(),typeof Ke=="function"?S.callback=Ke:S===e(d)&&i(d),ve(He)}else i(d);S=e(d)}if(S!==null)var st=!0;else{var ut=e(m);ut!==null&&bt(ke,ut.startTime-He),st=!1}return st}finally{S=null,X=We,he=!1}}var Oe=!1,Le=null,Ae=-1,Ie=5,Ue=-1;function ze(){return!(r.unstable_now()-Ue<Ie)}function Ye(){if(Le!==null){var rt=r.unstable_now();Ue=rt;var He=!0;try{He=Le(!0,rt)}finally{He?Xe():(Oe=!1,Le=null)}}else Oe=!1}var Xe;if(typeof we=="function")Xe=function(){we(Ye)};else if(typeof MessageChannel<"u"){var tt=new MessageChannel,lt=tt.port2;tt.port1.onmessage=Ye,Xe=function(){lt.postMessage(null)}}else Xe=function(){xe(Ye,0)};function _t(rt){Le=rt,Oe||(Oe=!0,Xe())}function bt(rt,He){Ae=xe(function(){rt(r.unstable_now())},He)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(rt){rt.callback=null},r.unstable_continueExecution=function(){Ce||he||(Ce=!0,_t(De))},r.unstable_forceFrameRate=function(rt){0>rt||125<rt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ie=0<rt?Math.floor(1e3/rt):5},r.unstable_getCurrentPriorityLevel=function(){return X},r.unstable_getFirstCallbackNode=function(){return e(d)},r.unstable_next=function(rt){switch(X){case 1:case 2:case 3:var He=3;break;default:He=X}var We=X;X=He;try{return rt()}finally{X=We}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(rt,He){switch(rt){case 1:case 2:case 3:case 4:case 5:break;default:rt=3}var We=X;X=rt;try{return He()}finally{X=We}},r.unstable_scheduleCallback=function(rt,He,We){var qe=r.unstable_now();switch(typeof We=="object"&&We!==null?(We=We.delay,We=typeof We=="number"&&0<We?qe+We:qe):We=qe,rt){case 1:var Ke=-1;break;case 2:Ke=250;break;case 5:Ke=1073741823;break;case 4:Ke=1e4;break;default:Ke=5e3}return Ke=We+Ke,rt={id:y++,callback:He,priorityLevel:rt,startTime:We,expirationTime:Ke,sortIndex:-1},We>qe?(rt.sortIndex=We,n(m,rt),e(d)===null&&rt===e(m)&&(Ee?(be(Ae),Ae=-1):Ee=!0,bt(ke,We-qe))):(rt.sortIndex=Ke,n(d,rt),Ce||he||(Ce=!0,_t(De))),rt},r.unstable_shouldYield=ze,r.unstable_wrapCallback=function(rt){var He=X;return function(){var We=X;X=He;try{return rt.apply(this,arguments)}finally{X=We}}}}(scheduler_production_min)),scheduler_production_min}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production_min()),scheduler.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production_min;function requireReactDom_production_min(){if(hasRequiredReactDom_production_min)return reactDom_production_min;hasRequiredReactDom_production_min=1;var r=requireReact(),n=requireScheduler();function e(a){for(var f="https://reactjs.org/docs/error-decoder.html?invariant="+a,_e=1;_e<arguments.length;_e++)f+="&args[]="+encodeURIComponent(arguments[_e]);return"Minified React error #"+a+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,s={};function o(a,f){u(a,f),u(a+"Capture",f)}function u(a,f){for(s[a]=f,a=0;a<f.length;a++)i.add(f[a])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},S={};function X(a){return d.call(S,a)?!0:d.call(y,a)?!1:m.test(a)?S[a]=!0:(y[a]=!0,!1)}function he(a,f,_e,Me){if(_e!==null&&_e.type===0)return!1;switch(typeof f){case"function":case"symbol":return!0;case"boolean":return Me?!1:_e!==null?!_e.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function Ce(a,f,_e,Me){if(f===null||typeof f>"u"||he(a,f,_e,Me))return!0;if(Me)return!1;if(_e!==null)switch(_e.type){case 3:return!f;case 4:return f===!1;case 5:return isNaN(f);case 6:return isNaN(f)||1>f}return!1}function Ee(a,f,_e,Me,Ne,je,Ze){this.acceptsBooleans=f===2||f===3||f===4,this.attributeName=Me,this.attributeNamespace=Ne,this.mustUseProperty=_e,this.propertyName=a,this.type=f,this.sanitizeURL=je,this.removeEmptyString=Ze}var xe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){xe[a]=new Ee(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var f=a[0];xe[f]=new Ee(f,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){xe[a]=new Ee(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){xe[a]=new Ee(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){xe[a]=new Ee(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){xe[a]=new Ee(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){xe[a]=new Ee(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){xe[a]=new Ee(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){xe[a]=new Ee(a,5,!1,a.toLowerCase(),null,!1,!1)});var be=/[\-:]([a-z])/g;function we(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var f=a.replace(be,we);xe[f]=new Ee(f,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var f=a.replace(be,we);xe[f]=new Ee(f,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var f=a.replace(be,we);xe[f]=new Ee(f,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){xe[a]=new Ee(a,1,!1,a.toLowerCase(),null,!1,!1)}),xe.xlinkHref=new Ee("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){xe[a]=new Ee(a,1,!1,a.toLowerCase(),null,!0,!0)});function ve(a,f,_e,Me){var Ne=xe.hasOwnProperty(f)?xe[f]:null;(Ne!==null?Ne.type!==0:Me||!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(Ce(f,_e,Ne,Me)&&(_e=null),Me||Ne===null?X(f)&&(_e===null?a.removeAttribute(f):a.setAttribute(f,""+_e)):Ne.mustUseProperty?a[Ne.propertyName]=_e===null?Ne.type===3?!1:"":_e:(f=Ne.attributeName,Me=Ne.attributeNamespace,_e===null?a.removeAttribute(f):(Ne=Ne.type,_e=Ne===3||Ne===4&&_e===!0?"":""+_e,Me?a.setAttributeNS(Me,f,_e):a.setAttribute(f,_e))))}var ke=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,De=Symbol.for("react.element"),Oe=Symbol.for("react.portal"),Le=Symbol.for("react.fragment"),Ae=Symbol.for("react.strict_mode"),Ie=Symbol.for("react.profiler"),Ue=Symbol.for("react.provider"),ze=Symbol.for("react.context"),Ye=Symbol.for("react.forward_ref"),Xe=Symbol.for("react.suspense"),tt=Symbol.for("react.suspense_list"),lt=Symbol.for("react.memo"),_t=Symbol.for("react.lazy"),bt=Symbol.for("react.offscreen"),rt=Symbol.iterator;function He(a){return a===null||typeof a!="object"?null:(a=rt&&a[rt]||a["@@iterator"],typeof a=="function"?a:null)}var We=Object.assign,qe;function Ke(a){if(qe===void 0)try{throw Error()}catch(_e){var f=_e.stack.trim().match(/\n( *(at )?)/);qe=f&&f[1]||""}return`
`+qe+a}var st=!1;function ut(a,f){if(!a||st)return"";st=!0;var _e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(f)if(f=function(){throw Error()},Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(Rt){var Me=Rt}Reflect.construct(a,[],f)}else{try{f.call()}catch(Rt){Me=Rt}a.call(f.prototype)}else{try{throw Error()}catch(Rt){Me=Rt}a()}}catch(Rt){if(Rt&&Me&&typeof Rt.stack=="string"){for(var Ne=Rt.stack.split(`
`),je=Me.stack.split(`
`),Ze=Ne.length-1,ot=je.length-1;1<=Ze&&0<=ot&&Ne[Ze]!==je[ot];)ot--;for(;1<=Ze&&0<=ot;Ze--,ot--)if(Ne[Ze]!==je[ot]){if(Ze!==1||ot!==1)do if(Ze--,ot--,0>ot||Ne[Ze]!==je[ot]){var dt=`
`+Ne[Ze].replace(" at new "," at ");return a.displayName&&dt.includes("<anonymous>")&&(dt=dt.replace("<anonymous>",a.displayName)),dt}while(1<=Ze&&0<=ot);break}}}finally{st=!1,Error.prepareStackTrace=_e}return(a=a?a.displayName||a.name:"")?Ke(a):""}function nt(a){switch(a.tag){case 5:return Ke(a.type);case 16:return Ke("Lazy");case 13:return Ke("Suspense");case 19:return Ke("SuspenseList");case 0:case 2:case 15:return a=ut(a.type,!1),a;case 11:return a=ut(a.type.render,!1),a;case 1:return a=ut(a.type,!0),a;default:return""}}function vt(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case Le:return"Fragment";case Oe:return"Portal";case Ie:return"Profiler";case Ae:return"StrictMode";case Xe:return"Suspense";case tt:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case ze:return(a.displayName||"Context")+".Consumer";case Ue:return(a._context.displayName||"Context")+".Provider";case Ye:var f=a.render;return a=a.displayName,a||(a=f.displayName||f.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case lt:return f=a.displayName||null,f!==null?f:vt(a.type)||"Memo";case _t:f=a._payload,a=a._init;try{return vt(a(f))}catch{}}return null}function it(a){var f=a.type;switch(a.tag){case 24:return"Cache";case 9:return(f.displayName||"Context")+".Consumer";case 10:return(f._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=f.render,a=a.displayName||a.name||"",f.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return f;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return vt(f);case 8:return f===Ae?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f}return null}function Ve(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function ht(a){var f=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function ct(a){var f=ht(a)?"checked":"value",_e=Object.getOwnPropertyDescriptor(a.constructor.prototype,f),Me=""+a[f];if(!a.hasOwnProperty(f)&&typeof _e<"u"&&typeof _e.get=="function"&&typeof _e.set=="function"){var Ne=_e.get,je=_e.set;return Object.defineProperty(a,f,{configurable:!0,get:function(){return Ne.call(this)},set:function(Ze){Me=""+Ze,je.call(this,Ze)}}),Object.defineProperty(a,f,{enumerable:_e.enumerable}),{getValue:function(){return Me},setValue:function(Ze){Me=""+Ze},stopTracking:function(){a._valueTracker=null,delete a[f]}}}}function St(a){a._valueTracker||(a._valueTracker=ct(a))}function Ct(a){if(!a)return!1;var f=a._valueTracker;if(!f)return!0;var _e=f.getValue(),Me="";return a&&(Me=ht(a)?a.checked?"true":"false":a.value),a=Me,a!==_e?(f.setValue(a),!0):!1}function Dt(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function Tt(a,f){var _e=f.checked;return We({},f,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:_e??a._wrapperState.initialChecked})}function At(a,f){var _e=f.defaultValue==null?"":f.defaultValue,Me=f.checked!=null?f.checked:f.defaultChecked;_e=Ve(f.value!=null?f.value:_e),a._wrapperState={initialChecked:Me,initialValue:_e,controlled:f.type==="checkbox"||f.type==="radio"?f.checked!=null:f.value!=null}}function sr(a,f){f=f.checked,f!=null&&ve(a,"checked",f,!1)}function Lt(a,f){sr(a,f);var _e=Ve(f.value),Me=f.type;if(_e!=null)Me==="number"?(_e===0&&a.value===""||a.value!=_e)&&(a.value=""+_e):a.value!==""+_e&&(a.value=""+_e);else if(Me==="submit"||Me==="reset"){a.removeAttribute("value");return}f.hasOwnProperty("value")?yt(a,f.type,_e):f.hasOwnProperty("defaultValue")&&yt(a,f.type,Ve(f.defaultValue)),f.checked==null&&f.defaultChecked!=null&&(a.defaultChecked=!!f.defaultChecked)}function Kt(a,f,_e){if(f.hasOwnProperty("value")||f.hasOwnProperty("defaultValue")){var Me=f.type;if(!(Me!=="submit"&&Me!=="reset"||f.value!==void 0&&f.value!==null))return;f=""+a._wrapperState.initialValue,_e||f===a.value||(a.value=f),a.defaultValue=f}_e=a.name,_e!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,_e!==""&&(a.name=_e)}function yt(a,f,_e){(f!=="number"||Dt(a.ownerDocument)!==a)&&(_e==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+_e&&(a.defaultValue=""+_e))}var qt=Array.isArray;function Qt(a,f,_e,Me){if(a=a.options,f){f={};for(var Ne=0;Ne<_e.length;Ne++)f["$"+_e[Ne]]=!0;for(_e=0;_e<a.length;_e++)Ne=f.hasOwnProperty("$"+a[_e].value),a[_e].selected!==Ne&&(a[_e].selected=Ne),Ne&&Me&&(a[_e].defaultSelected=!0)}else{for(_e=""+Ve(_e),f=null,Ne=0;Ne<a.length;Ne++){if(a[Ne].value===_e){a[Ne].selected=!0,Me&&(a[Ne].defaultSelected=!0);return}f!==null||a[Ne].disabled||(f=a[Ne])}f!==null&&(f.selected=!0)}}function rr(a,f){if(f.dangerouslySetInnerHTML!=null)throw Error(e(91));return We({},f,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function It(a,f){var _e=f.value;if(_e==null){if(_e=f.children,f=f.defaultValue,_e!=null){if(f!=null)throw Error(e(92));if(qt(_e)){if(1<_e.length)throw Error(e(93));_e=_e[0]}f=_e}f==null&&(f=""),_e=f}a._wrapperState={initialValue:Ve(_e)}}function _r(a,f){var _e=Ve(f.value),Me=Ve(f.defaultValue);_e!=null&&(_e=""+_e,_e!==a.value&&(a.value=_e),f.defaultValue==null&&a.defaultValue!==_e&&(a.defaultValue=_e)),Me!=null&&(a.defaultValue=""+Me)}function cr(a){var f=a.textContent;f===a._wrapperState.initialValue&&f!==""&&f!==null&&(a.value=f)}function Vt(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gt(a,f){return a==null||a==="http://www.w3.org/1999/xhtml"?Vt(f):a==="http://www.w3.org/2000/svg"&&f==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var er,Yt=function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(f,_e,Me,Ne){MSApp.execUnsafeLocalFunction(function(){return a(f,_e,Me,Ne)})}:a}(function(a,f){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=f;else{for(er=er||document.createElement("div"),er.innerHTML="<svg>"+f.valueOf().toString()+"</svg>",f=er.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;f.firstChild;)a.appendChild(f.firstChild)}});function ar(a,f){if(f){var _e=a.firstChild;if(_e&&_e===a.lastChild&&_e.nodeType===3){_e.nodeValue=f;return}}a.textContent=f}var yr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Jt=["Webkit","ms","Moz","O"];Object.keys(yr).forEach(function(a){Jt.forEach(function(f){f=f+a.charAt(0).toUpperCase()+a.substring(1),yr[f]=yr[a]})});function br(a,f,_e){return f==null||typeof f=="boolean"||f===""?"":_e||typeof f!="number"||f===0||yr.hasOwnProperty(a)&&yr[a]?(""+f).trim():f+"px"}function Ot(a,f){a=a.style;for(var _e in f)if(f.hasOwnProperty(_e)){var Me=_e.indexOf("--")===0,Ne=br(_e,f[_e],Me);_e==="float"&&(_e="cssFloat"),Me?a.setProperty(_e,Ne):a[_e]=Ne}}var lr=We({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hr(a,f){if(f){if(lr[a]&&(f.children!=null||f.dangerouslySetInnerHTML!=null))throw Error(e(137,a));if(f.dangerouslySetInnerHTML!=null){if(f.children!=null)throw Error(e(60));if(typeof f.dangerouslySetInnerHTML!="object"||!("__html"in f.dangerouslySetInnerHTML))throw Error(e(61))}if(f.style!=null&&typeof f.style!="object")throw Error(e(62))}}function Ft(a,f){if(a.indexOf("-")===-1)return typeof f.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kt=null;function Xt(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var wr=null,fr=null,pr=null;function Mr(a){if(a=ys(a)){if(typeof wr!="function")throw Error(e(280));var f=a.stateNode;f&&(f=Js(f),wr(a.stateNode,a.type,f))}}function Pr(a){fr?pr?pr.push(a):pr=[a]:fr=a}function Tr(){if(fr){var a=fr,f=pr;if(pr=fr=null,Mr(a),f)for(a=0;a<f.length;a++)Mr(f[a])}}function jr(a,f){return a(f)}function Be(){}var Pe=!1;function Re(a,f,_e){if(Pe)return a(f,_e);Pe=!0;try{return jr(a,f,_e)}finally{Pe=!1,(fr!==null||pr!==null)&&(Be(),Tr())}}function Se(a,f){var _e=a.stateNode;if(_e===null)return null;var Me=Js(_e);if(Me===null)return null;_e=Me[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(Me=!Me.disabled)||(a=a.type,Me=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!Me;break e;default:a=!1}if(a)return null;if(_e&&typeof _e!="function")throw Error(e(231,f,typeof _e));return _e}var Te=!1;if(l)try{var Fe={};Object.defineProperty(Fe,"passive",{get:function(){Te=!0}}),window.addEventListener("test",Fe,Fe),window.removeEventListener("test",Fe,Fe)}catch{Te=!1}function Ge(a,f,_e,Me,Ne,je,Ze,ot,dt){var Rt=Array.prototype.slice.call(arguments,3);try{f.apply(_e,Rt)}catch(Ut){this.onError(Ut)}}var Je=!1,Qe=null,et=!1,pt=null,at={onError:function(a){Je=!0,Qe=a}};function Pt(a,f,_e,Me,Ne,je,Ze,ot,dt){Je=!1,Qe=null,Ge.apply(at,arguments)}function Bt(a,f,_e,Me,Ne,je,Ze,ot,dt){if(Pt.apply(this,arguments),Je){if(Je){var Rt=Qe;Je=!1,Qe=null}else throw Error(e(198));et||(et=!0,pt=Rt)}}function wt(a){var f=a,_e=a;if(a.alternate)for(;f.return;)f=f.return;else{a=f;do f=a,f.flags&4098&&(_e=f.return),a=f.return;while(a)}return f.tag===3?_e:null}function Mt(a){if(a.tag===13){var f=a.memoizedState;if(f===null&&(a=a.alternate,a!==null&&(f=a.memoizedState)),f!==null)return f.dehydrated}return null}function Zt(a){if(wt(a)!==a)throw Error(e(188))}function ft(a){var f=a.alternate;if(!f){if(f=wt(a),f===null)throw Error(e(188));return f!==a?null:a}for(var _e=a,Me=f;;){var Ne=_e.return;if(Ne===null)break;var je=Ne.alternate;if(je===null){if(Me=Ne.return,Me!==null){_e=Me;continue}break}if(Ne.child===je.child){for(je=Ne.child;je;){if(je===_e)return Zt(Ne),a;if(je===Me)return Zt(Ne),f;je=je.sibling}throw Error(e(188))}if(_e.return!==Me.return)_e=Ne,Me=je;else{for(var Ze=!1,ot=Ne.child;ot;){if(ot===_e){Ze=!0,_e=Ne,Me=je;break}if(ot===Me){Ze=!0,Me=Ne,_e=je;break}ot=ot.sibling}if(!Ze){for(ot=je.child;ot;){if(ot===_e){Ze=!0,_e=je,Me=Ne;break}if(ot===Me){Ze=!0,Me=je,_e=Ne;break}ot=ot.sibling}if(!Ze)throw Error(e(189))}}if(_e.alternate!==Me)throw Error(e(190))}if(_e.tag!==3)throw Error(e(188));return _e.stateNode.current===_e?a:f}function Nt(a){return a=ft(a),a!==null?ir(a):null}function ir(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var f=ir(a);if(f!==null)return f;a=a.sibling}return null}var xr=n.unstable_scheduleCallback,Cr=n.unstable_cancelCallback,Br=n.unstable_shouldYield,gr=n.unstable_requestPaint,tr=n.unstable_now,$r=n.unstable_getCurrentPriorityLevel,gt=n.unstable_ImmediatePriority,$t=n.unstable_UserBlockingPriority,nr=n.unstable_NormalPriority,Ht=n.unstable_LowPriority,Nr=n.unstable_IdlePriority,Dr=null,Ar=null;function Ur(a){if(Ar&&typeof Ar.onCommitFiberRoot=="function")try{Ar.onCommitFiberRoot(Dr,a,void 0,(a.current.flags&128)===128)}catch{}}var Fr=Math.clz32?Math.clz32:Rn,bn=Math.log,Gr=Math.LN2;function Rn(a){return a>>>=0,a===0?32:31-(bn(a)/Gr|0)|0}var mn=64,Rr=4194304;function Kr(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function rn(a,f){var _e=a.pendingLanes;if(_e===0)return 0;var Me=0,Ne=a.suspendedLanes,je=a.pingedLanes,Ze=_e&268435455;if(Ze!==0){var ot=Ze&~Ne;ot!==0?Me=Kr(ot):(je&=Ze,je!==0&&(Me=Kr(je)))}else Ze=_e&~Ne,Ze!==0?Me=Kr(Ze):je!==0&&(Me=Kr(je));if(Me===0)return 0;if(f!==0&&f!==Me&&!(f&Ne)&&(Ne=Me&-Me,je=f&-f,Ne>=je||Ne===16&&(je&4194240)!==0))return f;if(Me&4&&(Me|=_e&16),f=a.entangledLanes,f!==0)for(a=a.entanglements,f&=Me;0<f;)_e=31-Fr(f),Ne=1<<_e,Me|=a[_e],f&=~Ne;return Me}function dn(a,f){switch(a){case 1:case 2:case 4:return f+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zr(a,f){for(var _e=a.suspendedLanes,Me=a.pingedLanes,Ne=a.expirationTimes,je=a.pendingLanes;0<je;){var Ze=31-Fr(je),ot=1<<Ze,dt=Ne[Ze];dt===-1?(!(ot&_e)||ot&Me)&&(Ne[Ze]=dn(ot,f)):dt<=f&&(a.expiredLanes|=ot),je&=~ot}}function es(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function Is(){var a=mn;return mn<<=1,!(mn&4194240)&&(mn=64),a}function ts(a){for(var f=[],_e=0;31>_e;_e++)f.push(a);return f}function yi(a,f,_e){a.pendingLanes|=f,f!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,f=31-Fr(f),a[f]=_e}function No(a,f){var _e=a.pendingLanes&~f;a.pendingLanes=f,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=f,a.mutableReadLanes&=f,a.entangledLanes&=f,f=a.entanglements;var Me=a.eventTimes;for(a=a.expirationTimes;0<_e;){var Ne=31-Fr(_e),je=1<<Ne;f[Ne]=0,Me[Ne]=-1,a[Ne]=-1,_e&=~je}}function rs(a,f){var _e=a.entangledLanes|=f;for(a=a.entanglements;_e;){var Me=31-Fr(_e),Ne=1<<Me;Ne&f|a[Me]&f&&(a[Me]|=f),_e&=~Ne}}var Lr=0;function Ls(a){return a&=-a,1<a?4<a?a&268435455?16:536870912:4:1}var Bs,jo,wl,xl,bl,Uo=!1,$s=[],Qn=null,ei=null,ti=null,ns=new Map,is=new Map,ri=[],qu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sl(a,f){switch(a){case"focusin":case"focusout":Qn=null;break;case"dragenter":case"dragleave":ei=null;break;case"mouseover":case"mouseout":ti=null;break;case"pointerover":case"pointerout":ns.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":is.delete(f.pointerId)}}function ss(a,f,_e,Me,Ne,je){return a===null||a.nativeEvent!==je?(a={blockedOn:f,domEventName:_e,eventSystemFlags:Me,nativeEvent:je,targetContainers:[Ne]},f!==null&&(f=ys(f),f!==null&&jo(f)),a):(a.eventSystemFlags|=Me,f=a.targetContainers,Ne!==null&&f.indexOf(Ne)===-1&&f.push(Ne),a)}function Wu(a,f,_e,Me,Ne){switch(f){case"focusin":return Qn=ss(Qn,a,f,_e,Me,Ne),!0;case"dragenter":return ei=ss(ei,a,f,_e,Me,Ne),!0;case"mouseover":return ti=ss(ti,a,f,_e,Me,Ne),!0;case"pointerover":var je=Ne.pointerId;return ns.set(je,ss(ns.get(je)||null,a,f,_e,Me,Ne)),!0;case"gotpointercapture":return je=Ne.pointerId,is.set(je,ss(is.get(je)||null,a,f,_e,Me,Ne)),!0}return!1}function El(a){var f=wi(a.target);if(f!==null){var _e=wt(f);if(_e!==null){if(f=_e.tag,f===13){if(f=Mt(_e),f!==null){a.blockedOn=f,bl(a.priority,function(){wl(_e)});return}}else if(f===3&&_e.stateNode.current.memoizedState.isDehydrated){a.blockedOn=_e.tag===3?_e.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Fs(a){if(a.blockedOn!==null)return!1;for(var f=a.targetContainers;0<f.length;){var _e=zo(a.domEventName,a.eventSystemFlags,f[0],a.nativeEvent);if(_e===null){_e=a.nativeEvent;var Me=new _e.constructor(_e.type,_e);kt=Me,_e.target.dispatchEvent(Me),kt=null}else return f=ys(_e),f!==null&&jo(f),a.blockedOn=_e,!1;f.shift()}return!0}function Cl(a,f,_e){Fs(a)&&_e.delete(f)}function Ku(){Uo=!1,Qn!==null&&Fs(Qn)&&(Qn=null),ei!==null&&Fs(ei)&&(ei=null),ti!==null&&Fs(ti)&&(ti=null),ns.forEach(Cl),is.forEach(Cl)}function os(a,f){a.blockedOn===f&&(a.blockedOn=null,Uo||(Uo=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Ku)))}function as(a){function f(Ne){return os(Ne,a)}if(0<$s.length){os($s[0],a);for(var _e=1;_e<$s.length;_e++){var Me=$s[_e];Me.blockedOn===a&&(Me.blockedOn=null)}}for(Qn!==null&&os(Qn,a),ei!==null&&os(ei,a),ti!==null&&os(ti,a),ns.forEach(f),is.forEach(f),_e=0;_e<ri.length;_e++)Me=ri[_e],Me.blockedOn===a&&(Me.blockedOn=null);for(;0<ri.length&&(_e=ri[0],_e.blockedOn===null);)El(_e),_e.blockedOn===null&&ri.shift()}var Di=ke.ReactCurrentBatchConfig,Ns=!0;function Vu(a,f,_e,Me){var Ne=Lr,je=Di.transition;Di.transition=null;try{Lr=1,Ho(a,f,_e,Me)}finally{Lr=Ne,Di.transition=je}}function Yu(a,f,_e,Me){var Ne=Lr,je=Di.transition;Di.transition=null;try{Lr=4,Ho(a,f,_e,Me)}finally{Lr=Ne,Di.transition=je}}function Ho(a,f,_e,Me){if(Ns){var Ne=zo(a,f,_e,Me);if(Ne===null)oa(a,f,Me,js,_e),Sl(a,Me);else if(Wu(Ne,a,f,_e,Me))Me.stopPropagation();else if(Sl(a,Me),f&4&&-1<qu.indexOf(a)){for(;Ne!==null;){var je=ys(Ne);if(je!==null&&Bs(je),je=zo(a,f,_e,Me),je===null&&oa(a,f,Me,js,_e),je===Ne)break;Ne=je}Ne!==null&&Me.stopPropagation()}else oa(a,f,Me,null,_e)}}var js=null;function zo(a,f,_e,Me){if(js=null,a=Xt(Me),a=wi(a),a!==null)if(f=wt(a),f===null)a=null;else if(_e=f.tag,_e===13){if(a=Mt(f),a!==null)return a;a=null}else if(_e===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;a=null}else f!==a&&(a=null);return js=a,null}function kl(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($r()){case gt:return 1;case $t:return 4;case nr:case Ht:return 16;case Nr:return 536870912;default:return 16}default:return 16}}var ni=null,qo=null,Us=null;function Rl(){if(Us)return Us;var a,f=qo,_e=f.length,Me,Ne="value"in ni?ni.value:ni.textContent,je=Ne.length;for(a=0;a<_e&&f[a]===Ne[a];a++);var Ze=_e-a;for(Me=1;Me<=Ze&&f[_e-Me]===Ne[je-Me];Me++);return Us=Ne.slice(a,1<Me?1-Me:void 0)}function Hs(a){var f=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&f===13&&(a=13)):a=f,a===10&&(a=13),32<=a||a===13?a:0}function zs(){return!0}function Pl(){return!1}function Sn(a){function f(_e,Me,Ne,je,Ze){this._reactName=_e,this._targetInst=Ne,this.type=Me,this.nativeEvent=je,this.target=Ze,this.currentTarget=null;for(var ot in a)a.hasOwnProperty(ot)&&(_e=a[ot],this[ot]=_e?_e(je):je[ot]);return this.isDefaultPrevented=(je.defaultPrevented!=null?je.defaultPrevented:je.returnValue===!1)?zs:Pl,this.isPropagationStopped=Pl,this}return We(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var _e=this.nativeEvent;_e&&(_e.preventDefault?_e.preventDefault():typeof _e.returnValue!="unknown"&&(_e.returnValue=!1),this.isDefaultPrevented=zs)},stopPropagation:function(){var _e=this.nativeEvent;_e&&(_e.stopPropagation?_e.stopPropagation():typeof _e.cancelBubble!="unknown"&&(_e.cancelBubble=!0),this.isPropagationStopped=zs)},persist:function(){},isPersistent:zs}),f}var Oi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wo=Sn(Oi),ls=We({},Oi,{view:0,detail:0}),Xu=Sn(ls),Ko,Vo,cs,qs=We({},ls,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xo,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==cs&&(cs&&a.type==="mousemove"?(Ko=a.screenX-cs.screenX,Vo=a.screenY-cs.screenY):Vo=Ko=0,cs=a),Ko)},movementY:function(a){return"movementY"in a?a.movementY:Vo}}),Tl=Sn(qs),Gu=We({},qs,{dataTransfer:0}),Zu=Sn(Gu),Ju=We({},ls,{relatedTarget:0}),Yo=Sn(Ju),Qu=We({},Oi,{animationName:0,elapsedTime:0,pseudoElement:0}),eh=Sn(Qu),th=We({},Oi,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),rh=Sn(th),nh=We({},Oi,{data:0}),Ml=Sn(nh),ih={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ah(a){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(a):(a=oh[a])?!!f[a]:!1}function Xo(){return ah}var lh=We({},ls,{key:function(a){if(a.key){var f=ih[a.key]||a.key;if(f!=="Unidentified")return f}return a.type==="keypress"?(a=Hs(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?sh[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xo,charCode:function(a){return a.type==="keypress"?Hs(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Hs(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),ch=Sn(lh),uh=We({},qs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Al=Sn(uh),hh=We({},ls,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xo}),fh=Sn(hh),dh=We({},Oi,{propertyName:0,elapsedTime:0,pseudoElement:0}),ph=Sn(dh),gh=We({},qs,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),mh=Sn(gh),vh=[9,13,27,32],Go=l&&"CompositionEvent"in window,us=null;l&&"documentMode"in document&&(us=document.documentMode);var _h=l&&"TextEvent"in window&&!us,Dl=l&&(!Go||us&&8<us&&11>=us),Ol=" ",Il=!1;function Ll(a,f){switch(a){case"keyup":return vh.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bl(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Ii=!1;function yh(a,f){switch(a){case"compositionend":return Bl(f);case"keypress":return f.which!==32?null:(Il=!0,Ol);case"textInput":return a=f.data,a===Ol&&Il?null:a;default:return null}}function wh(a,f){if(Ii)return a==="compositionend"||!Go&&Ll(a,f)?(a=Rl(),Us=qo=ni=null,Ii=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return Dl&&f.locale!=="ko"?null:f.data;default:return null}}var xh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $l(a){var f=a&&a.nodeName&&a.nodeName.toLowerCase();return f==="input"?!!xh[a.type]:f==="textarea"}function Fl(a,f,_e,Me){Pr(Me),f=Xs(f,"onChange"),0<f.length&&(_e=new Wo("onChange","change",null,_e,Me),a.push({event:_e,listeners:f}))}var hs=null,fs=null;function bh(a){rc(a,0)}function Ws(a){var f=Ni(a);if(Ct(f))return a}function Sh(a,f){if(a==="change")return f}var Nl=!1;if(l){var Zo;if(l){var Jo="oninput"in document;if(!Jo){var jl=document.createElement("div");jl.setAttribute("oninput","return;"),Jo=typeof jl.oninput=="function"}Zo=Jo}else Zo=!1;Nl=Zo&&(!document.documentMode||9<document.documentMode)}function Ul(){hs&&(hs.detachEvent("onpropertychange",Hl),fs=hs=null)}function Hl(a){if(a.propertyName==="value"&&Ws(fs)){var f=[];Fl(f,fs,a,Xt(a)),Re(bh,f)}}function Eh(a,f,_e){a==="focusin"?(Ul(),hs=f,fs=_e,hs.attachEvent("onpropertychange",Hl)):a==="focusout"&&Ul()}function Ch(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Ws(fs)}function kh(a,f){if(a==="click")return Ws(f)}function Rh(a,f){if(a==="input"||a==="change")return Ws(f)}function Ph(a,f){return a===f&&(a!==0||1/a===1/f)||a!==a&&f!==f}var In=typeof Object.is=="function"?Object.is:Ph;function ds(a,f){if(In(a,f))return!0;if(typeof a!="object"||a===null||typeof f!="object"||f===null)return!1;var _e=Object.keys(a),Me=Object.keys(f);if(_e.length!==Me.length)return!1;for(Me=0;Me<_e.length;Me++){var Ne=_e[Me];if(!d.call(f,Ne)||!In(a[Ne],f[Ne]))return!1}return!0}function zl(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function ql(a,f){var _e=zl(a);a=0;for(var Me;_e;){if(_e.nodeType===3){if(Me=a+_e.textContent.length,a<=f&&Me>=f)return{node:_e,offset:f-a};a=Me}e:{for(;_e;){if(_e.nextSibling){_e=_e.nextSibling;break e}_e=_e.parentNode}_e=void 0}_e=zl(_e)}}function Wl(a,f){return a&&f?a===f?!0:a&&a.nodeType===3?!1:f&&f.nodeType===3?Wl(a,f.parentNode):"contains"in a?a.contains(f):a.compareDocumentPosition?!!(a.compareDocumentPosition(f)&16):!1:!1}function Kl(){for(var a=window,f=Dt();f instanceof a.HTMLIFrameElement;){try{var _e=typeof f.contentWindow.location.href=="string"}catch{_e=!1}if(_e)a=f.contentWindow;else break;f=Dt(a.document)}return f}function Qo(a){var f=a&&a.nodeName&&a.nodeName.toLowerCase();return f&&(f==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||f==="textarea"||a.contentEditable==="true")}function Th(a){var f=Kl(),_e=a.focusedElem,Me=a.selectionRange;if(f!==_e&&_e&&_e.ownerDocument&&Wl(_e.ownerDocument.documentElement,_e)){if(Me!==null&&Qo(_e)){if(f=Me.start,a=Me.end,a===void 0&&(a=f),"selectionStart"in _e)_e.selectionStart=f,_e.selectionEnd=Math.min(a,_e.value.length);else if(a=(f=_e.ownerDocument||document)&&f.defaultView||window,a.getSelection){a=a.getSelection();var Ne=_e.textContent.length,je=Math.min(Me.start,Ne);Me=Me.end===void 0?je:Math.min(Me.end,Ne),!a.extend&&je>Me&&(Ne=Me,Me=je,je=Ne),Ne=ql(_e,je);var Ze=ql(_e,Me);Ne&&Ze&&(a.rangeCount!==1||a.anchorNode!==Ne.node||a.anchorOffset!==Ne.offset||a.focusNode!==Ze.node||a.focusOffset!==Ze.offset)&&(f=f.createRange(),f.setStart(Ne.node,Ne.offset),a.removeAllRanges(),je>Me?(a.addRange(f),a.extend(Ze.node,Ze.offset)):(f.setEnd(Ze.node,Ze.offset),a.addRange(f)))}}for(f=[],a=_e;a=a.parentNode;)a.nodeType===1&&f.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof _e.focus=="function"&&_e.focus(),_e=0;_e<f.length;_e++)a=f[_e],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var Mh=l&&"documentMode"in document&&11>=document.documentMode,Li=null,ea=null,ps=null,ta=!1;function Vl(a,f,_e){var Me=_e.window===_e?_e.document:_e.nodeType===9?_e:_e.ownerDocument;ta||Li==null||Li!==Dt(Me)||(Me=Li,"selectionStart"in Me&&Qo(Me)?Me={start:Me.selectionStart,end:Me.selectionEnd}:(Me=(Me.ownerDocument&&Me.ownerDocument.defaultView||window).getSelection(),Me={anchorNode:Me.anchorNode,anchorOffset:Me.anchorOffset,focusNode:Me.focusNode,focusOffset:Me.focusOffset}),ps&&ds(ps,Me)||(ps=Me,Me=Xs(ea,"onSelect"),0<Me.length&&(f=new Wo("onSelect","select",null,f,_e),a.push({event:f,listeners:Me}),f.target=Li)))}function Ks(a,f){var _e={};return _e[a.toLowerCase()]=f.toLowerCase(),_e["Webkit"+a]="webkit"+f,_e["Moz"+a]="moz"+f,_e}var Bi={animationend:Ks("Animation","AnimationEnd"),animationiteration:Ks("Animation","AnimationIteration"),animationstart:Ks("Animation","AnimationStart"),transitionend:Ks("Transition","TransitionEnd")},ra={},Yl={};l&&(Yl=document.createElement("div").style,"AnimationEvent"in window||(delete Bi.animationend.animation,delete Bi.animationiteration.animation,delete Bi.animationstart.animation),"TransitionEvent"in window||delete Bi.transitionend.transition);function Vs(a){if(ra[a])return ra[a];if(!Bi[a])return a;var f=Bi[a],_e;for(_e in f)if(f.hasOwnProperty(_e)&&_e in Yl)return ra[a]=f[_e];return a}var Xl=Vs("animationend"),Gl=Vs("animationiteration"),Zl=Vs("animationstart"),Jl=Vs("transitionend"),Ql=new Map,ec="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ii(a,f){Ql.set(a,f),o(f,[a])}for(var na=0;na<ec.length;na++){var ia=ec[na],Ah=ia.toLowerCase(),Dh=ia[0].toUpperCase()+ia.slice(1);ii(Ah,"on"+Dh)}ii(Xl,"onAnimationEnd"),ii(Gl,"onAnimationIteration"),ii(Zl,"onAnimationStart"),ii("dblclick","onDoubleClick"),ii("focusin","onFocus"),ii("focusout","onBlur"),ii(Jl,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Oh=new Set("cancel close invalid load scroll toggle".split(" ").concat(gs));function tc(a,f,_e){var Me=a.type||"unknown-event";a.currentTarget=_e,Bt(Me,f,void 0,a),a.currentTarget=null}function rc(a,f){f=(f&4)!==0;for(var _e=0;_e<a.length;_e++){var Me=a[_e],Ne=Me.event;Me=Me.listeners;e:{var je=void 0;if(f)for(var Ze=Me.length-1;0<=Ze;Ze--){var ot=Me[Ze],dt=ot.instance,Rt=ot.currentTarget;if(ot=ot.listener,dt!==je&&Ne.isPropagationStopped())break e;tc(Ne,ot,Rt),je=dt}else for(Ze=0;Ze<Me.length;Ze++){if(ot=Me[Ze],dt=ot.instance,Rt=ot.currentTarget,ot=ot.listener,dt!==je&&Ne.isPropagationStopped())break e;tc(Ne,ot,Rt),je=dt}}}if(et)throw a=pt,et=!1,pt=null,a}function zr(a,f){var _e=f[fa];_e===void 0&&(_e=f[fa]=new Set);var Me=a+"__bubble";_e.has(Me)||(nc(f,a,2,!1),_e.add(Me))}function sa(a,f,_e){var Me=0;f&&(Me|=4),nc(_e,a,Me,f)}var Ys="_reactListening"+Math.random().toString(36).slice(2);function ms(a){if(!a[Ys]){a[Ys]=!0,i.forEach(function(_e){_e!=="selectionchange"&&(Oh.has(_e)||sa(_e,!1,a),sa(_e,!0,a))});var f=a.nodeType===9?a:a.ownerDocument;f===null||f[Ys]||(f[Ys]=!0,sa("selectionchange",!1,f))}}function nc(a,f,_e,Me){switch(kl(f)){case 1:var Ne=Vu;break;case 4:Ne=Yu;break;default:Ne=Ho}_e=Ne.bind(null,f,_e,a),Ne=void 0,!Te||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(Ne=!0),Me?Ne!==void 0?a.addEventListener(f,_e,{capture:!0,passive:Ne}):a.addEventListener(f,_e,!0):Ne!==void 0?a.addEventListener(f,_e,{passive:Ne}):a.addEventListener(f,_e,!1)}function oa(a,f,_e,Me,Ne){var je=Me;if(!(f&1)&&!(f&2)&&Me!==null)e:for(;;){if(Me===null)return;var Ze=Me.tag;if(Ze===3||Ze===4){var ot=Me.stateNode.containerInfo;if(ot===Ne||ot.nodeType===8&&ot.parentNode===Ne)break;if(Ze===4)for(Ze=Me.return;Ze!==null;){var dt=Ze.tag;if((dt===3||dt===4)&&(dt=Ze.stateNode.containerInfo,dt===Ne||dt.nodeType===8&&dt.parentNode===Ne))return;Ze=Ze.return}for(;ot!==null;){if(Ze=wi(ot),Ze===null)return;if(dt=Ze.tag,dt===5||dt===6){Me=je=Ze;continue e}ot=ot.parentNode}}Me=Me.return}Re(function(){var Rt=je,Ut=Xt(_e),zt=[];e:{var jt=Ql.get(a);if(jt!==void 0){var or=Wo,dr=a;switch(a){case"keypress":if(Hs(_e)===0)break e;case"keydown":case"keyup":or=ch;break;case"focusin":dr="focus",or=Yo;break;case"focusout":dr="blur",or=Yo;break;case"beforeblur":case"afterblur":or=Yo;break;case"click":if(_e.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":or=Tl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":or=Zu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":or=fh;break;case Xl:case Gl:case Zl:or=eh;break;case Jl:or=ph;break;case"scroll":or=Xu;break;case"wheel":or=mh;break;case"copy":case"cut":case"paste":or=rh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":or=Al}var mr=(f&4)!==0,Jr=!mr&&a==="scroll",xt=mr?jt!==null?jt+"Capture":null:jt;mr=[];for(var mt=Rt,Et;mt!==null;){Et=mt;var Wt=Et.stateNode;if(Et.tag===5&&Wt!==null&&(Et=Wt,xt!==null&&(Wt=Se(mt,xt),Wt!=null&&mr.push(vs(mt,Wt,Et)))),Jr)break;mt=mt.return}0<mr.length&&(jt=new or(jt,dr,null,_e,Ut),zt.push({event:jt,listeners:mr}))}}if(!(f&7)){e:{if(jt=a==="mouseover"||a==="pointerover",or=a==="mouseout"||a==="pointerout",jt&&_e!==kt&&(dr=_e.relatedTarget||_e.fromElement)&&(wi(dr)||dr[Wn]))break e;if((or||jt)&&(jt=Ut.window===Ut?Ut:(jt=Ut.ownerDocument)?jt.defaultView||jt.parentWindow:window,or?(dr=_e.relatedTarget||_e.toElement,or=Rt,dr=dr?wi(dr):null,dr!==null&&(Jr=wt(dr),dr!==Jr||dr.tag!==5&&dr.tag!==6)&&(dr=null)):(or=null,dr=Rt),or!==dr)){if(mr=Tl,Wt="onMouseLeave",xt="onMouseEnter",mt="mouse",(a==="pointerout"||a==="pointerover")&&(mr=Al,Wt="onPointerLeave",xt="onPointerEnter",mt="pointer"),Jr=or==null?jt:Ni(or),Et=dr==null?jt:Ni(dr),jt=new mr(Wt,mt+"leave",or,_e,Ut),jt.target=Jr,jt.relatedTarget=Et,Wt=null,wi(Ut)===Rt&&(mr=new mr(xt,mt+"enter",dr,_e,Ut),mr.target=Et,mr.relatedTarget=Jr,Wt=mr),Jr=Wt,or&&dr)t:{for(mr=or,xt=dr,mt=0,Et=mr;Et;Et=$i(Et))mt++;for(Et=0,Wt=xt;Wt;Wt=$i(Wt))Et++;for(;0<mt-Et;)mr=$i(mr),mt--;for(;0<Et-mt;)xt=$i(xt),Et--;for(;mt--;){if(mr===xt||xt!==null&&mr===xt.alternate)break t;mr=$i(mr),xt=$i(xt)}mr=null}else mr=null;or!==null&&ic(zt,jt,or,mr,!1),dr!==null&&Jr!==null&&ic(zt,Jr,dr,mr,!0)}}e:{if(jt=Rt?Ni(Rt):window,or=jt.nodeName&&jt.nodeName.toLowerCase(),or==="select"||or==="input"&&jt.type==="file")var vr=Sh;else if($l(jt))if(Nl)vr=Rh;else{vr=Ch;var Sr=Eh}else(or=jt.nodeName)&&or.toLowerCase()==="input"&&(jt.type==="checkbox"||jt.type==="radio")&&(vr=kh);if(vr&&(vr=vr(a,Rt))){Fl(zt,vr,_e,Ut);break e}Sr&&Sr(a,jt,Rt),a==="focusout"&&(Sr=jt._wrapperState)&&Sr.controlled&&jt.type==="number"&&yt(jt,"number",jt.value)}switch(Sr=Rt?Ni(Rt):window,a){case"focusin":($l(Sr)||Sr.contentEditable==="true")&&(Li=Sr,ea=Rt,ps=null);break;case"focusout":ps=ea=Li=null;break;case"mousedown":ta=!0;break;case"contextmenu":case"mouseup":case"dragend":ta=!1,Vl(zt,_e,Ut);break;case"selectionchange":if(Mh)break;case"keydown":case"keyup":Vl(zt,_e,Ut)}var Er;if(Go)e:{switch(a){case"compositionstart":var kr="onCompositionStart";break e;case"compositionend":kr="onCompositionEnd";break e;case"compositionupdate":kr="onCompositionUpdate";break e}kr=void 0}else Ii?Ll(a,_e)&&(kr="onCompositionEnd"):a==="keydown"&&_e.keyCode===229&&(kr="onCompositionStart");kr&&(Dl&&_e.locale!=="ko"&&(Ii||kr!=="onCompositionStart"?kr==="onCompositionEnd"&&Ii&&(Er=Rl()):(ni=Ut,qo="value"in ni?ni.value:ni.textContent,Ii=!0)),Sr=Xs(Rt,kr),0<Sr.length&&(kr=new Ml(kr,a,null,_e,Ut),zt.push({event:kr,listeners:Sr}),Er?kr.data=Er:(Er=Bl(_e),Er!==null&&(kr.data=Er)))),(Er=_h?yh(a,_e):wh(a,_e))&&(Rt=Xs(Rt,"onBeforeInput"),0<Rt.length&&(Ut=new Ml("onBeforeInput","beforeinput",null,_e,Ut),zt.push({event:Ut,listeners:Rt}),Ut.data=Er))}rc(zt,f)})}function vs(a,f,_e){return{instance:a,listener:f,currentTarget:_e}}function Xs(a,f){for(var _e=f+"Capture",Me=[];a!==null;){var Ne=a,je=Ne.stateNode;Ne.tag===5&&je!==null&&(Ne=je,je=Se(a,_e),je!=null&&Me.unshift(vs(a,je,Ne)),je=Se(a,f),je!=null&&Me.push(vs(a,je,Ne))),a=a.return}return Me}function $i(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function ic(a,f,_e,Me,Ne){for(var je=f._reactName,Ze=[];_e!==null&&_e!==Me;){var ot=_e,dt=ot.alternate,Rt=ot.stateNode;if(dt!==null&&dt===Me)break;ot.tag===5&&Rt!==null&&(ot=Rt,Ne?(dt=Se(_e,je),dt!=null&&Ze.unshift(vs(_e,dt,ot))):Ne||(dt=Se(_e,je),dt!=null&&Ze.push(vs(_e,dt,ot)))),_e=_e.return}Ze.length!==0&&a.push({event:f,listeners:Ze})}var Ih=/\r\n?/g,Lh=/\u0000|\uFFFD/g;function sc(a){return(typeof a=="string"?a:""+a).replace(Ih,`
`).replace(Lh,"")}function Gs(a,f,_e){if(f=sc(f),sc(a)!==f&&_e)throw Error(e(425))}function Zs(){}var aa=null,la=null;function ca(a,f){return a==="textarea"||a==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var ua=typeof setTimeout=="function"?setTimeout:void 0,Bh=typeof clearTimeout=="function"?clearTimeout:void 0,oc=typeof Promise=="function"?Promise:void 0,$h=typeof queueMicrotask=="function"?queueMicrotask:typeof oc<"u"?function(a){return oc.resolve(null).then(a).catch(Fh)}:ua;function Fh(a){setTimeout(function(){throw a})}function ha(a,f){var _e=f,Me=0;do{var Ne=_e.nextSibling;if(a.removeChild(_e),Ne&&Ne.nodeType===8)if(_e=Ne.data,_e==="/$"){if(Me===0){a.removeChild(Ne),as(f);return}Me--}else _e!=="$"&&_e!=="$?"&&_e!=="$!"||Me++;_e=Ne}while(_e);as(f)}function si(a){for(;a!=null;a=a.nextSibling){var f=a.nodeType;if(f===1||f===3)break;if(f===8){if(f=a.data,f==="$"||f==="$!"||f==="$?")break;if(f==="/$")return null}}return a}function ac(a){a=a.previousSibling;for(var f=0;a;){if(a.nodeType===8){var _e=a.data;if(_e==="$"||_e==="$!"||_e==="$?"){if(f===0)return a;f--}else _e==="/$"&&f++}a=a.previousSibling}return null}var Fi=Math.random().toString(36).slice(2),Un="__reactFiber$"+Fi,_s="__reactProps$"+Fi,Wn="__reactContainer$"+Fi,fa="__reactEvents$"+Fi,Nh="__reactListeners$"+Fi,jh="__reactHandles$"+Fi;function wi(a){var f=a[Un];if(f)return f;for(var _e=a.parentNode;_e;){if(f=_e[Wn]||_e[Un]){if(_e=f.alternate,f.child!==null||_e!==null&&_e.child!==null)for(a=ac(a);a!==null;){if(_e=a[Un])return _e;a=ac(a)}return f}a=_e,_e=a.parentNode}return null}function ys(a){return a=a[Un]||a[Wn],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function Ni(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(e(33))}function Js(a){return a[_s]||null}var da=[],ji=-1;function oi(a){return{current:a}}function qr(a){0>ji||(a.current=da[ji],da[ji]=null,ji--)}function Hr(a,f){ji++,da[ji]=a.current,a.current=f}var ai={},cn=oi(ai),vn=oi(!1),xi=ai;function Ui(a,f){var _e=a.type.contextTypes;if(!_e)return ai;var Me=a.stateNode;if(Me&&Me.__reactInternalMemoizedUnmaskedChildContext===f)return Me.__reactInternalMemoizedMaskedChildContext;var Ne={},je;for(je in _e)Ne[je]=f[je];return Me&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=f,a.__reactInternalMemoizedMaskedChildContext=Ne),Ne}function _n(a){return a=a.childContextTypes,a!=null}function Qs(){qr(vn),qr(cn)}function lc(a,f,_e){if(cn.current!==ai)throw Error(e(168));Hr(cn,f),Hr(vn,_e)}function cc(a,f,_e){var Me=a.stateNode;if(f=f.childContextTypes,typeof Me.getChildContext!="function")return _e;Me=Me.getChildContext();for(var Ne in Me)if(!(Ne in f))throw Error(e(108,it(a)||"Unknown",Ne));return We({},_e,Me)}function eo(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||ai,xi=cn.current,Hr(cn,a),Hr(vn,vn.current),!0}function uc(a,f,_e){var Me=a.stateNode;if(!Me)throw Error(e(169));_e?(a=cc(a,f,xi),Me.__reactInternalMemoizedMergedChildContext=a,qr(vn),qr(cn),Hr(cn,a)):qr(vn),Hr(vn,_e)}var Kn=null,to=!1,pa=!1;function hc(a){Kn===null?Kn=[a]:Kn.push(a)}function Uh(a){to=!0,hc(a)}function ci(){if(!pa&&Kn!==null){pa=!0;var a=0,f=Lr;try{var _e=Kn;for(Lr=1;a<_e.length;a++){var Me=_e[a];do Me=Me(!0);while(Me!==null)}Kn=null,to=!1}catch(Ne){throw Kn!==null&&(Kn=Kn.slice(a+1)),xr(gt,ci),Ne}finally{Lr=f,pa=!1}}return null}var Hi=[],zi=0,ro=null,no=0,Pn=[],Tn=0,bi=null,Vn=1,Yn="";function Si(a,f){Hi[zi++]=no,Hi[zi++]=ro,ro=a,no=f}function fc(a,f,_e){Pn[Tn++]=Vn,Pn[Tn++]=Yn,Pn[Tn++]=bi,bi=a;var Me=Vn;a=Yn;var Ne=32-Fr(Me)-1;Me&=~(1<<Ne),_e+=1;var je=32-Fr(f)+Ne;if(30<je){var Ze=Ne-Ne%5;je=(Me&(1<<Ze)-1).toString(32),Me>>=Ze,Ne-=Ze,Vn=1<<32-Fr(f)+Ne|_e<<Ne|Me,Yn=je+a}else Vn=1<<je|_e<<Ne|Me,Yn=a}function ga(a){a.return!==null&&(Si(a,1),fc(a,1,0))}function ma(a){for(;a===ro;)ro=Hi[--zi],Hi[zi]=null,no=Hi[--zi],Hi[zi]=null;for(;a===bi;)bi=Pn[--Tn],Pn[Tn]=null,Yn=Pn[--Tn],Pn[Tn]=null,Vn=Pn[--Tn],Pn[Tn]=null}var En=null,Cn=null,Wr=!1,Ln=null;function dc(a,f){var _e=On(5,null,null,0);_e.elementType="DELETED",_e.stateNode=f,_e.return=a,f=a.deletions,f===null?(a.deletions=[_e],a.flags|=16):f.push(_e)}function pc(a,f){switch(a.tag){case 5:var _e=a.type;return f=f.nodeType!==1||_e.toLowerCase()!==f.nodeName.toLowerCase()?null:f,f!==null?(a.stateNode=f,En=a,Cn=si(f.firstChild),!0):!1;case 6:return f=a.pendingProps===""||f.nodeType!==3?null:f,f!==null?(a.stateNode=f,En=a,Cn=null,!0):!1;case 13:return f=f.nodeType!==8?null:f,f!==null?(_e=bi!==null?{id:Vn,overflow:Yn}:null,a.memoizedState={dehydrated:f,treeContext:_e,retryLane:1073741824},_e=On(18,null,null,0),_e.stateNode=f,_e.return=a,a.child=_e,En=a,Cn=null,!0):!1;default:return!1}}function va(a){return(a.mode&1)!==0&&(a.flags&128)===0}function _a(a){if(Wr){var f=Cn;if(f){var _e=f;if(!pc(a,f)){if(va(a))throw Error(e(418));f=si(_e.nextSibling);var Me=En;f&&pc(a,f)?dc(Me,_e):(a.flags=a.flags&-4097|2,Wr=!1,En=a)}}else{if(va(a))throw Error(e(418));a.flags=a.flags&-4097|2,Wr=!1,En=a}}}function gc(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;En=a}function io(a){if(a!==En)return!1;if(!Wr)return gc(a),Wr=!0,!1;var f;if((f=a.tag!==3)&&!(f=a.tag!==5)&&(f=a.type,f=f!=="head"&&f!=="body"&&!ca(a.type,a.memoizedProps)),f&&(f=Cn)){if(va(a))throw mc(),Error(e(418));for(;f;)dc(a,f),f=si(f.nextSibling)}if(gc(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(e(317));e:{for(a=a.nextSibling,f=0;a;){if(a.nodeType===8){var _e=a.data;if(_e==="/$"){if(f===0){Cn=si(a.nextSibling);break e}f--}else _e!=="$"&&_e!=="$!"&&_e!=="$?"||f++}a=a.nextSibling}Cn=null}}else Cn=En?si(a.stateNode.nextSibling):null;return!0}function mc(){for(var a=Cn;a;)a=si(a.nextSibling)}function qi(){Cn=En=null,Wr=!1}function ya(a){Ln===null?Ln=[a]:Ln.push(a)}var Hh=ke.ReactCurrentBatchConfig;function ws(a,f,_e){if(a=_e.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(_e._owner){if(_e=_e._owner,_e){if(_e.tag!==1)throw Error(e(309));var Me=_e.stateNode}if(!Me)throw Error(e(147,a));var Ne=Me,je=""+a;return f!==null&&f.ref!==null&&typeof f.ref=="function"&&f.ref._stringRef===je?f.ref:(f=function(Ze){var ot=Ne.refs;Ze===null?delete ot[je]:ot[je]=Ze},f._stringRef=je,f)}if(typeof a!="string")throw Error(e(284));if(!_e._owner)throw Error(e(290,a))}return a}function so(a,f){throw a=Object.prototype.toString.call(f),Error(e(31,a==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":a))}function vc(a){var f=a._init;return f(a._payload)}function _c(a){function f(xt,mt){if(a){var Et=xt.deletions;Et===null?(xt.deletions=[mt],xt.flags|=16):Et.push(mt)}}function _e(xt,mt){if(!a)return null;for(;mt!==null;)f(xt,mt),mt=mt.sibling;return null}function Me(xt,mt){for(xt=new Map;mt!==null;)mt.key!==null?xt.set(mt.key,mt):xt.set(mt.index,mt),mt=mt.sibling;return xt}function Ne(xt,mt){return xt=vi(xt,mt),xt.index=0,xt.sibling=null,xt}function je(xt,mt,Et){return xt.index=Et,a?(Et=xt.alternate,Et!==null?(Et=Et.index,Et<mt?(xt.flags|=2,mt):Et):(xt.flags|=2,mt)):(xt.flags|=1048576,mt)}function Ze(xt){return a&&xt.alternate===null&&(xt.flags|=2),xt}function ot(xt,mt,Et,Wt){return mt===null||mt.tag!==6?(mt=ul(Et,xt.mode,Wt),mt.return=xt,mt):(mt=Ne(mt,Et),mt.return=xt,mt)}function dt(xt,mt,Et,Wt){var vr=Et.type;return vr===Le?Ut(xt,mt,Et.props.children,Wt,Et.key):mt!==null&&(mt.elementType===vr||typeof vr=="object"&&vr!==null&&vr.$$typeof===_t&&vc(vr)===mt.type)?(Wt=Ne(mt,Et.props),Wt.ref=ws(xt,mt,Et),Wt.return=xt,Wt):(Wt=Mo(Et.type,Et.key,Et.props,null,xt.mode,Wt),Wt.ref=ws(xt,mt,Et),Wt.return=xt,Wt)}function Rt(xt,mt,Et,Wt){return mt===null||mt.tag!==4||mt.stateNode.containerInfo!==Et.containerInfo||mt.stateNode.implementation!==Et.implementation?(mt=hl(Et,xt.mode,Wt),mt.return=xt,mt):(mt=Ne(mt,Et.children||[]),mt.return=xt,mt)}function Ut(xt,mt,Et,Wt,vr){return mt===null||mt.tag!==7?(mt=Ai(Et,xt.mode,Wt,vr),mt.return=xt,mt):(mt=Ne(mt,Et),mt.return=xt,mt)}function zt(xt,mt,Et){if(typeof mt=="string"&&mt!==""||typeof mt=="number")return mt=ul(""+mt,xt.mode,Et),mt.return=xt,mt;if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case De:return Et=Mo(mt.type,mt.key,mt.props,null,xt.mode,Et),Et.ref=ws(xt,null,mt),Et.return=xt,Et;case Oe:return mt=hl(mt,xt.mode,Et),mt.return=xt,mt;case _t:var Wt=mt._init;return zt(xt,Wt(mt._payload),Et)}if(qt(mt)||He(mt))return mt=Ai(mt,xt.mode,Et,null),mt.return=xt,mt;so(xt,mt)}return null}function jt(xt,mt,Et,Wt){var vr=mt!==null?mt.key:null;if(typeof Et=="string"&&Et!==""||typeof Et=="number")return vr!==null?null:ot(xt,mt,""+Et,Wt);if(typeof Et=="object"&&Et!==null){switch(Et.$$typeof){case De:return Et.key===vr?dt(xt,mt,Et,Wt):null;case Oe:return Et.key===vr?Rt(xt,mt,Et,Wt):null;case _t:return vr=Et._init,jt(xt,mt,vr(Et._payload),Wt)}if(qt(Et)||He(Et))return vr!==null?null:Ut(xt,mt,Et,Wt,null);so(xt,Et)}return null}function or(xt,mt,Et,Wt,vr){if(typeof Wt=="string"&&Wt!==""||typeof Wt=="number")return xt=xt.get(Et)||null,ot(mt,xt,""+Wt,vr);if(typeof Wt=="object"&&Wt!==null){switch(Wt.$$typeof){case De:return xt=xt.get(Wt.key===null?Et:Wt.key)||null,dt(mt,xt,Wt,vr);case Oe:return xt=xt.get(Wt.key===null?Et:Wt.key)||null,Rt(mt,xt,Wt,vr);case _t:var Sr=Wt._init;return or(xt,mt,Et,Sr(Wt._payload),vr)}if(qt(Wt)||He(Wt))return xt=xt.get(Et)||null,Ut(mt,xt,Wt,vr,null);so(mt,Wt)}return null}function dr(xt,mt,Et,Wt){for(var vr=null,Sr=null,Er=mt,kr=mt=0,on=null;Er!==null&&kr<Et.length;kr++){Er.index>kr?(on=Er,Er=null):on=Er.sibling;var Ir=jt(xt,Er,Et[kr],Wt);if(Ir===null){Er===null&&(Er=on);break}a&&Er&&Ir.alternate===null&&f(xt,Er),mt=je(Ir,mt,kr),Sr===null?vr=Ir:Sr.sibling=Ir,Sr=Ir,Er=on}if(kr===Et.length)return _e(xt,Er),Wr&&Si(xt,kr),vr;if(Er===null){for(;kr<Et.length;kr++)Er=zt(xt,Et[kr],Wt),Er!==null&&(mt=je(Er,mt,kr),Sr===null?vr=Er:Sr.sibling=Er,Sr=Er);return Wr&&Si(xt,kr),vr}for(Er=Me(xt,Er);kr<Et.length;kr++)on=or(Er,xt,kr,Et[kr],Wt),on!==null&&(a&&on.alternate!==null&&Er.delete(on.key===null?kr:on.key),mt=je(on,mt,kr),Sr===null?vr=on:Sr.sibling=on,Sr=on);return a&&Er.forEach(function(_i){return f(xt,_i)}),Wr&&Si(xt,kr),vr}function mr(xt,mt,Et,Wt){var vr=He(Et);if(typeof vr!="function")throw Error(e(150));if(Et=vr.call(Et),Et==null)throw Error(e(151));for(var Sr=vr=null,Er=mt,kr=mt=0,on=null,Ir=Et.next();Er!==null&&!Ir.done;kr++,Ir=Et.next()){Er.index>kr?(on=Er,Er=null):on=Er.sibling;var _i=jt(xt,Er,Ir.value,Wt);if(_i===null){Er===null&&(Er=on);break}a&&Er&&_i.alternate===null&&f(xt,Er),mt=je(_i,mt,kr),Sr===null?vr=_i:Sr.sibling=_i,Sr=_i,Er=on}if(Ir.done)return _e(xt,Er),Wr&&Si(xt,kr),vr;if(Er===null){for(;!Ir.done;kr++,Ir=Et.next())Ir=zt(xt,Ir.value,Wt),Ir!==null&&(mt=je(Ir,mt,kr),Sr===null?vr=Ir:Sr.sibling=Ir,Sr=Ir);return Wr&&Si(xt,kr),vr}for(Er=Me(xt,Er);!Ir.done;kr++,Ir=Et.next())Ir=or(Er,xt,kr,Ir.value,Wt),Ir!==null&&(a&&Ir.alternate!==null&&Er.delete(Ir.key===null?kr:Ir.key),mt=je(Ir,mt,kr),Sr===null?vr=Ir:Sr.sibling=Ir,Sr=Ir);return a&&Er.forEach(function(bf){return f(xt,bf)}),Wr&&Si(xt,kr),vr}function Jr(xt,mt,Et,Wt){if(typeof Et=="object"&&Et!==null&&Et.type===Le&&Et.key===null&&(Et=Et.props.children),typeof Et=="object"&&Et!==null){switch(Et.$$typeof){case De:e:{for(var vr=Et.key,Sr=mt;Sr!==null;){if(Sr.key===vr){if(vr=Et.type,vr===Le){if(Sr.tag===7){_e(xt,Sr.sibling),mt=Ne(Sr,Et.props.children),mt.return=xt,xt=mt;break e}}else if(Sr.elementType===vr||typeof vr=="object"&&vr!==null&&vr.$$typeof===_t&&vc(vr)===Sr.type){_e(xt,Sr.sibling),mt=Ne(Sr,Et.props),mt.ref=ws(xt,Sr,Et),mt.return=xt,xt=mt;break e}_e(xt,Sr);break}else f(xt,Sr);Sr=Sr.sibling}Et.type===Le?(mt=Ai(Et.props.children,xt.mode,Wt,Et.key),mt.return=xt,xt=mt):(Wt=Mo(Et.type,Et.key,Et.props,null,xt.mode,Wt),Wt.ref=ws(xt,mt,Et),Wt.return=xt,xt=Wt)}return Ze(xt);case Oe:e:{for(Sr=Et.key;mt!==null;){if(mt.key===Sr)if(mt.tag===4&&mt.stateNode.containerInfo===Et.containerInfo&&mt.stateNode.implementation===Et.implementation){_e(xt,mt.sibling),mt=Ne(mt,Et.children||[]),mt.return=xt,xt=mt;break e}else{_e(xt,mt);break}else f(xt,mt);mt=mt.sibling}mt=hl(Et,xt.mode,Wt),mt.return=xt,xt=mt}return Ze(xt);case _t:return Sr=Et._init,Jr(xt,mt,Sr(Et._payload),Wt)}if(qt(Et))return dr(xt,mt,Et,Wt);if(He(Et))return mr(xt,mt,Et,Wt);so(xt,Et)}return typeof Et=="string"&&Et!==""||typeof Et=="number"?(Et=""+Et,mt!==null&&mt.tag===6?(_e(xt,mt.sibling),mt=Ne(mt,Et),mt.return=xt,xt=mt):(_e(xt,mt),mt=ul(Et,xt.mode,Wt),mt.return=xt,xt=mt),Ze(xt)):_e(xt,mt)}return Jr}var Wi=_c(!0),yc=_c(!1),oo=oi(null),ao=null,Ki=null,wa=null;function xa(){wa=Ki=ao=null}function ba(a){var f=oo.current;qr(oo),a._currentValue=f}function Sa(a,f,_e){for(;a!==null;){var Me=a.alternate;if((a.childLanes&f)!==f?(a.childLanes|=f,Me!==null&&(Me.childLanes|=f)):Me!==null&&(Me.childLanes&f)!==f&&(Me.childLanes|=f),a===_e)break;a=a.return}}function Vi(a,f){ao=a,wa=Ki=null,a=a.dependencies,a!==null&&a.firstContext!==null&&(a.lanes&f&&(yn=!0),a.firstContext=null)}function Mn(a){var f=a._currentValue;if(wa!==a)if(a={context:a,memoizedValue:f,next:null},Ki===null){if(ao===null)throw Error(e(308));Ki=a,ao.dependencies={lanes:0,firstContext:a}}else Ki=Ki.next=a;return f}var Ei=null;function Ea(a){Ei===null?Ei=[a]:Ei.push(a)}function wc(a,f,_e,Me){var Ne=f.interleaved;return Ne===null?(_e.next=_e,Ea(f)):(_e.next=Ne.next,Ne.next=_e),f.interleaved=_e,Xn(a,Me)}function Xn(a,f){a.lanes|=f;var _e=a.alternate;for(_e!==null&&(_e.lanes|=f),_e=a,a=a.return;a!==null;)a.childLanes|=f,_e=a.alternate,_e!==null&&(_e.childLanes|=f),_e=a,a=a.return;return _e.tag===3?_e.stateNode:null}var ui=!1;function Ca(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xc(a,f){a=a.updateQueue,f.updateQueue===a&&(f.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function Gn(a,f){return{eventTime:a,lane:f,tag:0,payload:null,callback:null,next:null}}function hi(a,f,_e){var Me=a.updateQueue;if(Me===null)return null;if(Me=Me.shared,Or&2){var Ne=Me.pending;return Ne===null?f.next=f:(f.next=Ne.next,Ne.next=f),Me.pending=f,Xn(a,_e)}return Ne=Me.interleaved,Ne===null?(f.next=f,Ea(Me)):(f.next=Ne.next,Ne.next=f),Me.interleaved=f,Xn(a,_e)}function lo(a,f,_e){if(f=f.updateQueue,f!==null&&(f=f.shared,(_e&4194240)!==0)){var Me=f.lanes;Me&=a.pendingLanes,_e|=Me,f.lanes=_e,rs(a,_e)}}function bc(a,f){var _e=a.updateQueue,Me=a.alternate;if(Me!==null&&(Me=Me.updateQueue,_e===Me)){var Ne=null,je=null;if(_e=_e.firstBaseUpdate,_e!==null){do{var Ze={eventTime:_e.eventTime,lane:_e.lane,tag:_e.tag,payload:_e.payload,callback:_e.callback,next:null};je===null?Ne=je=Ze:je=je.next=Ze,_e=_e.next}while(_e!==null);je===null?Ne=je=f:je=je.next=f}else Ne=je=f;_e={baseState:Me.baseState,firstBaseUpdate:Ne,lastBaseUpdate:je,shared:Me.shared,effects:Me.effects},a.updateQueue=_e;return}a=_e.lastBaseUpdate,a===null?_e.firstBaseUpdate=f:a.next=f,_e.lastBaseUpdate=f}function co(a,f,_e,Me){var Ne=a.updateQueue;ui=!1;var je=Ne.firstBaseUpdate,Ze=Ne.lastBaseUpdate,ot=Ne.shared.pending;if(ot!==null){Ne.shared.pending=null;var dt=ot,Rt=dt.next;dt.next=null,Ze===null?je=Rt:Ze.next=Rt,Ze=dt;var Ut=a.alternate;Ut!==null&&(Ut=Ut.updateQueue,ot=Ut.lastBaseUpdate,ot!==Ze&&(ot===null?Ut.firstBaseUpdate=Rt:ot.next=Rt,Ut.lastBaseUpdate=dt))}if(je!==null){var zt=Ne.baseState;Ze=0,Ut=Rt=dt=null,ot=je;do{var jt=ot.lane,or=ot.eventTime;if((Me&jt)===jt){Ut!==null&&(Ut=Ut.next={eventTime:or,lane:0,tag:ot.tag,payload:ot.payload,callback:ot.callback,next:null});e:{var dr=a,mr=ot;switch(jt=f,or=_e,mr.tag){case 1:if(dr=mr.payload,typeof dr=="function"){zt=dr.call(or,zt,jt);break e}zt=dr;break e;case 3:dr.flags=dr.flags&-65537|128;case 0:if(dr=mr.payload,jt=typeof dr=="function"?dr.call(or,zt,jt):dr,jt==null)break e;zt=We({},zt,jt);break e;case 2:ui=!0}}ot.callback!==null&&ot.lane!==0&&(a.flags|=64,jt=Ne.effects,jt===null?Ne.effects=[ot]:jt.push(ot))}else or={eventTime:or,lane:jt,tag:ot.tag,payload:ot.payload,callback:ot.callback,next:null},Ut===null?(Rt=Ut=or,dt=zt):Ut=Ut.next=or,Ze|=jt;if(ot=ot.next,ot===null){if(ot=Ne.shared.pending,ot===null)break;jt=ot,ot=jt.next,jt.next=null,Ne.lastBaseUpdate=jt,Ne.shared.pending=null}}while(!0);if(Ut===null&&(dt=zt),Ne.baseState=dt,Ne.firstBaseUpdate=Rt,Ne.lastBaseUpdate=Ut,f=Ne.shared.interleaved,f!==null){Ne=f;do Ze|=Ne.lane,Ne=Ne.next;while(Ne!==f)}else je===null&&(Ne.shared.lanes=0);Ri|=Ze,a.lanes=Ze,a.memoizedState=zt}}function Sc(a,f,_e){if(a=f.effects,f.effects=null,a!==null)for(f=0;f<a.length;f++){var Me=a[f],Ne=Me.callback;if(Ne!==null){if(Me.callback=null,Me=_e,typeof Ne!="function")throw Error(e(191,Ne));Ne.call(Me)}}}var xs={},Hn=oi(xs),bs=oi(xs),Ss=oi(xs);function Ci(a){if(a===xs)throw Error(e(174));return a}function ka(a,f){switch(Hr(Ss,f),Hr(bs,a),Hr(Hn,xs),a=f.nodeType,a){case 9:case 11:f=(f=f.documentElement)?f.namespaceURI:Gt(null,"");break;default:a=a===8?f.parentNode:f,f=a.namespaceURI||null,a=a.tagName,f=Gt(f,a)}qr(Hn),Hr(Hn,f)}function Yi(){qr(Hn),qr(bs),qr(Ss)}function Ec(a){Ci(Ss.current);var f=Ci(Hn.current),_e=Gt(f,a.type);f!==_e&&(Hr(bs,a),Hr(Hn,_e))}function Ra(a){bs.current===a&&(qr(Hn),qr(bs))}var Vr=oi(0);function uo(a){for(var f=a;f!==null;){if(f.tag===13){var _e=f.memoizedState;if(_e!==null&&(_e=_e.dehydrated,_e===null||_e.data==="$?"||_e.data==="$!"))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if(f.flags&128)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===a)break;for(;f.sibling===null;){if(f.return===null||f.return===a)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var Pa=[];function Ta(){for(var a=0;a<Pa.length;a++)Pa[a]._workInProgressVersionPrimary=null;Pa.length=0}var ho=ke.ReactCurrentDispatcher,Ma=ke.ReactCurrentBatchConfig,ki=0,Yr=null,en=null,nn=null,fo=!1,Es=!1,Cs=0,zh=0;function un(){throw Error(e(321))}function Aa(a,f){if(f===null)return!1;for(var _e=0;_e<f.length&&_e<a.length;_e++)if(!In(a[_e],f[_e]))return!1;return!0}function Da(a,f,_e,Me,Ne,je){if(ki=je,Yr=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,ho.current=a===null||a.memoizedState===null?Vh:Yh,a=_e(Me,Ne),Es){je=0;do{if(Es=!1,Cs=0,25<=je)throw Error(e(301));je+=1,nn=en=null,f.updateQueue=null,ho.current=Xh,a=_e(Me,Ne)}while(Es)}if(ho.current=mo,f=en!==null&&en.next!==null,ki=0,nn=en=Yr=null,fo=!1,f)throw Error(e(300));return a}function Oa(){var a=Cs!==0;return Cs=0,a}function zn(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nn===null?Yr.memoizedState=nn=a:nn=nn.next=a,nn}function An(){if(en===null){var a=Yr.alternate;a=a!==null?a.memoizedState:null}else a=en.next;var f=nn===null?Yr.memoizedState:nn.next;if(f!==null)nn=f,en=a;else{if(a===null)throw Error(e(310));en=a,a={memoizedState:en.memoizedState,baseState:en.baseState,baseQueue:en.baseQueue,queue:en.queue,next:null},nn===null?Yr.memoizedState=nn=a:nn=nn.next=a}return nn}function ks(a,f){return typeof f=="function"?f(a):f}function Ia(a){var f=An(),_e=f.queue;if(_e===null)throw Error(e(311));_e.lastRenderedReducer=a;var Me=en,Ne=Me.baseQueue,je=_e.pending;if(je!==null){if(Ne!==null){var Ze=Ne.next;Ne.next=je.next,je.next=Ze}Me.baseQueue=Ne=je,_e.pending=null}if(Ne!==null){je=Ne.next,Me=Me.baseState;var ot=Ze=null,dt=null,Rt=je;do{var Ut=Rt.lane;if((ki&Ut)===Ut)dt!==null&&(dt=dt.next={lane:0,action:Rt.action,hasEagerState:Rt.hasEagerState,eagerState:Rt.eagerState,next:null}),Me=Rt.hasEagerState?Rt.eagerState:a(Me,Rt.action);else{var zt={lane:Ut,action:Rt.action,hasEagerState:Rt.hasEagerState,eagerState:Rt.eagerState,next:null};dt===null?(ot=dt=zt,Ze=Me):dt=dt.next=zt,Yr.lanes|=Ut,Ri|=Ut}Rt=Rt.next}while(Rt!==null&&Rt!==je);dt===null?Ze=Me:dt.next=ot,In(Me,f.memoizedState)||(yn=!0),f.memoizedState=Me,f.baseState=Ze,f.baseQueue=dt,_e.lastRenderedState=Me}if(a=_e.interleaved,a!==null){Ne=a;do je=Ne.lane,Yr.lanes|=je,Ri|=je,Ne=Ne.next;while(Ne!==a)}else Ne===null&&(_e.lanes=0);return[f.memoizedState,_e.dispatch]}function La(a){var f=An(),_e=f.queue;if(_e===null)throw Error(e(311));_e.lastRenderedReducer=a;var Me=_e.dispatch,Ne=_e.pending,je=f.memoizedState;if(Ne!==null){_e.pending=null;var Ze=Ne=Ne.next;do je=a(je,Ze.action),Ze=Ze.next;while(Ze!==Ne);In(je,f.memoizedState)||(yn=!0),f.memoizedState=je,f.baseQueue===null&&(f.baseState=je),_e.lastRenderedState=je}return[je,Me]}function Cc(){}function kc(a,f){var _e=Yr,Me=An(),Ne=f(),je=!In(Me.memoizedState,Ne);if(je&&(Me.memoizedState=Ne,yn=!0),Me=Me.queue,Ba(Tc.bind(null,_e,Me,a),[a]),Me.getSnapshot!==f||je||nn!==null&&nn.memoizedState.tag&1){if(_e.flags|=2048,Rs(9,Pc.bind(null,_e,Me,Ne,f),void 0,null),sn===null)throw Error(e(349));ki&30||Rc(_e,f,Ne)}return Ne}function Rc(a,f,_e){a.flags|=16384,a={getSnapshot:f,value:_e},f=Yr.updateQueue,f===null?(f={lastEffect:null,stores:null},Yr.updateQueue=f,f.stores=[a]):(_e=f.stores,_e===null?f.stores=[a]:_e.push(a))}function Pc(a,f,_e,Me){f.value=_e,f.getSnapshot=Me,Mc(f)&&Ac(a)}function Tc(a,f,_e){return _e(function(){Mc(f)&&Ac(a)})}function Mc(a){var f=a.getSnapshot;a=a.value;try{var _e=f();return!In(a,_e)}catch{return!0}}function Ac(a){var f=Xn(a,1);f!==null&&Nn(f,a,1,-1)}function Dc(a){var f=zn();return typeof a=="function"&&(a=a()),f.memoizedState=f.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ks,lastRenderedState:a},f.queue=a,a=a.dispatch=Kh.bind(null,Yr,a),[f.memoizedState,a]}function Rs(a,f,_e,Me){return a={tag:a,create:f,destroy:_e,deps:Me,next:null},f=Yr.updateQueue,f===null?(f={lastEffect:null,stores:null},Yr.updateQueue=f,f.lastEffect=a.next=a):(_e=f.lastEffect,_e===null?f.lastEffect=a.next=a:(Me=_e.next,_e.next=a,a.next=Me,f.lastEffect=a)),a}function Oc(){return An().memoizedState}function po(a,f,_e,Me){var Ne=zn();Yr.flags|=a,Ne.memoizedState=Rs(1|f,_e,void 0,Me===void 0?null:Me)}function go(a,f,_e,Me){var Ne=An();Me=Me===void 0?null:Me;var je=void 0;if(en!==null){var Ze=en.memoizedState;if(je=Ze.destroy,Me!==null&&Aa(Me,Ze.deps)){Ne.memoizedState=Rs(f,_e,je,Me);return}}Yr.flags|=a,Ne.memoizedState=Rs(1|f,_e,je,Me)}function Ic(a,f){return po(8390656,8,a,f)}function Ba(a,f){return go(2048,8,a,f)}function Lc(a,f){return go(4,2,a,f)}function Bc(a,f){return go(4,4,a,f)}function $c(a,f){if(typeof f=="function")return a=a(),f(a),function(){f(null)};if(f!=null)return a=a(),f.current=a,function(){f.current=null}}function Fc(a,f,_e){return _e=_e!=null?_e.concat([a]):null,go(4,4,$c.bind(null,f,a),_e)}function $a(){}function Nc(a,f){var _e=An();f=f===void 0?null:f;var Me=_e.memoizedState;return Me!==null&&f!==null&&Aa(f,Me[1])?Me[0]:(_e.memoizedState=[a,f],a)}function jc(a,f){var _e=An();f=f===void 0?null:f;var Me=_e.memoizedState;return Me!==null&&f!==null&&Aa(f,Me[1])?Me[0]:(a=a(),_e.memoizedState=[a,f],a)}function Uc(a,f,_e){return ki&21?(In(_e,f)||(_e=Is(),Yr.lanes|=_e,Ri|=_e,a.baseState=!0),f):(a.baseState&&(a.baseState=!1,yn=!0),a.memoizedState=_e)}function qh(a,f){var _e=Lr;Lr=_e!==0&&4>_e?_e:4,a(!0);var Me=Ma.transition;Ma.transition={};try{a(!1),f()}finally{Lr=_e,Ma.transition=Me}}function Hc(){return An().memoizedState}function Wh(a,f,_e){var Me=gi(a);if(_e={lane:Me,action:_e,hasEagerState:!1,eagerState:null,next:null},zc(a))qc(f,_e);else if(_e=wc(a,f,_e,Me),_e!==null){var Ne=gn();Nn(_e,a,Me,Ne),Wc(_e,f,Me)}}function Kh(a,f,_e){var Me=gi(a),Ne={lane:Me,action:_e,hasEagerState:!1,eagerState:null,next:null};if(zc(a))qc(f,Ne);else{var je=a.alternate;if(a.lanes===0&&(je===null||je.lanes===0)&&(je=f.lastRenderedReducer,je!==null))try{var Ze=f.lastRenderedState,ot=je(Ze,_e);if(Ne.hasEagerState=!0,Ne.eagerState=ot,In(ot,Ze)){var dt=f.interleaved;dt===null?(Ne.next=Ne,Ea(f)):(Ne.next=dt.next,dt.next=Ne),f.interleaved=Ne;return}}catch{}finally{}_e=wc(a,f,Ne,Me),_e!==null&&(Ne=gn(),Nn(_e,a,Me,Ne),Wc(_e,f,Me))}}function zc(a){var f=a.alternate;return a===Yr||f!==null&&f===Yr}function qc(a,f){Es=fo=!0;var _e=a.pending;_e===null?f.next=f:(f.next=_e.next,_e.next=f),a.pending=f}function Wc(a,f,_e){if(_e&4194240){var Me=f.lanes;Me&=a.pendingLanes,_e|=Me,f.lanes=_e,rs(a,_e)}}var mo={readContext:Mn,useCallback:un,useContext:un,useEffect:un,useImperativeHandle:un,useInsertionEffect:un,useLayoutEffect:un,useMemo:un,useReducer:un,useRef:un,useState:un,useDebugValue:un,useDeferredValue:un,useTransition:un,useMutableSource:un,useSyncExternalStore:un,useId:un,unstable_isNewReconciler:!1},Vh={readContext:Mn,useCallback:function(a,f){return zn().memoizedState=[a,f===void 0?null:f],a},useContext:Mn,useEffect:Ic,useImperativeHandle:function(a,f,_e){return _e=_e!=null?_e.concat([a]):null,po(4194308,4,$c.bind(null,f,a),_e)},useLayoutEffect:function(a,f){return po(4194308,4,a,f)},useInsertionEffect:function(a,f){return po(4,2,a,f)},useMemo:function(a,f){var _e=zn();return f=f===void 0?null:f,a=a(),_e.memoizedState=[a,f],a},useReducer:function(a,f,_e){var Me=zn();return f=_e!==void 0?_e(f):f,Me.memoizedState=Me.baseState=f,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:f},Me.queue=a,a=a.dispatch=Wh.bind(null,Yr,a),[Me.memoizedState,a]},useRef:function(a){var f=zn();return a={current:a},f.memoizedState=a},useState:Dc,useDebugValue:$a,useDeferredValue:function(a){return zn().memoizedState=a},useTransition:function(){var a=Dc(!1),f=a[0];return a=qh.bind(null,a[1]),zn().memoizedState=a,[f,a]},useMutableSource:function(){},useSyncExternalStore:function(a,f,_e){var Me=Yr,Ne=zn();if(Wr){if(_e===void 0)throw Error(e(407));_e=_e()}else{if(_e=f(),sn===null)throw Error(e(349));ki&30||Rc(Me,f,_e)}Ne.memoizedState=_e;var je={value:_e,getSnapshot:f};return Ne.queue=je,Ic(Tc.bind(null,Me,je,a),[a]),Me.flags|=2048,Rs(9,Pc.bind(null,Me,je,_e,f),void 0,null),_e},useId:function(){var a=zn(),f=sn.identifierPrefix;if(Wr){var _e=Yn,Me=Vn;_e=(Me&~(1<<32-Fr(Me)-1)).toString(32)+_e,f=":"+f+"R"+_e,_e=Cs++,0<_e&&(f+="H"+_e.toString(32)),f+=":"}else _e=zh++,f=":"+f+"r"+_e.toString(32)+":";return a.memoizedState=f},unstable_isNewReconciler:!1},Yh={readContext:Mn,useCallback:Nc,useContext:Mn,useEffect:Ba,useImperativeHandle:Fc,useInsertionEffect:Lc,useLayoutEffect:Bc,useMemo:jc,useReducer:Ia,useRef:Oc,useState:function(){return Ia(ks)},useDebugValue:$a,useDeferredValue:function(a){var f=An();return Uc(f,en.memoizedState,a)},useTransition:function(){var a=Ia(ks)[0],f=An().memoizedState;return[a,f]},useMutableSource:Cc,useSyncExternalStore:kc,useId:Hc,unstable_isNewReconciler:!1},Xh={readContext:Mn,useCallback:Nc,useContext:Mn,useEffect:Ba,useImperativeHandle:Fc,useInsertionEffect:Lc,useLayoutEffect:Bc,useMemo:jc,useReducer:La,useRef:Oc,useState:function(){return La(ks)},useDebugValue:$a,useDeferredValue:function(a){var f=An();return en===null?f.memoizedState=a:Uc(f,en.memoizedState,a)},useTransition:function(){var a=La(ks)[0],f=An().memoizedState;return[a,f]},useMutableSource:Cc,useSyncExternalStore:kc,useId:Hc,unstable_isNewReconciler:!1};function Bn(a,f){if(a&&a.defaultProps){f=We({},f),a=a.defaultProps;for(var _e in a)f[_e]===void 0&&(f[_e]=a[_e]);return f}return f}function Fa(a,f,_e,Me){f=a.memoizedState,_e=_e(Me,f),_e=_e==null?f:We({},f,_e),a.memoizedState=_e,a.lanes===0&&(a.updateQueue.baseState=_e)}var vo={isMounted:function(a){return(a=a._reactInternals)?wt(a)===a:!1},enqueueSetState:function(a,f,_e){a=a._reactInternals;var Me=gn(),Ne=gi(a),je=Gn(Me,Ne);je.payload=f,_e!=null&&(je.callback=_e),f=hi(a,je,Ne),f!==null&&(Nn(f,a,Ne,Me),lo(f,a,Ne))},enqueueReplaceState:function(a,f,_e){a=a._reactInternals;var Me=gn(),Ne=gi(a),je=Gn(Me,Ne);je.tag=1,je.payload=f,_e!=null&&(je.callback=_e),f=hi(a,je,Ne),f!==null&&(Nn(f,a,Ne,Me),lo(f,a,Ne))},enqueueForceUpdate:function(a,f){a=a._reactInternals;var _e=gn(),Me=gi(a),Ne=Gn(_e,Me);Ne.tag=2,f!=null&&(Ne.callback=f),f=hi(a,Ne,Me),f!==null&&(Nn(f,a,Me,_e),lo(f,a,Me))}};function Kc(a,f,_e,Me,Ne,je,Ze){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(Me,je,Ze):f.prototype&&f.prototype.isPureReactComponent?!ds(_e,Me)||!ds(Ne,je):!0}function Vc(a,f,_e){var Me=!1,Ne=ai,je=f.contextType;return typeof je=="object"&&je!==null?je=Mn(je):(Ne=_n(f)?xi:cn.current,Me=f.contextTypes,je=(Me=Me!=null)?Ui(a,Ne):ai),f=new f(_e,je),a.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=vo,a.stateNode=f,f._reactInternals=a,Me&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=Ne,a.__reactInternalMemoizedMaskedChildContext=je),f}function Yc(a,f,_e,Me){a=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(_e,Me),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(_e,Me),f.state!==a&&vo.enqueueReplaceState(f,f.state,null)}function Na(a,f,_e,Me){var Ne=a.stateNode;Ne.props=_e,Ne.state=a.memoizedState,Ne.refs={},Ca(a);var je=f.contextType;typeof je=="object"&&je!==null?Ne.context=Mn(je):(je=_n(f)?xi:cn.current,Ne.context=Ui(a,je)),Ne.state=a.memoizedState,je=f.getDerivedStateFromProps,typeof je=="function"&&(Fa(a,f,je,_e),Ne.state=a.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof Ne.getSnapshotBeforeUpdate=="function"||typeof Ne.UNSAFE_componentWillMount!="function"&&typeof Ne.componentWillMount!="function"||(f=Ne.state,typeof Ne.componentWillMount=="function"&&Ne.componentWillMount(),typeof Ne.UNSAFE_componentWillMount=="function"&&Ne.UNSAFE_componentWillMount(),f!==Ne.state&&vo.enqueueReplaceState(Ne,Ne.state,null),co(a,_e,Ne,Me),Ne.state=a.memoizedState),typeof Ne.componentDidMount=="function"&&(a.flags|=4194308)}function Xi(a,f){try{var _e="",Me=f;do _e+=nt(Me),Me=Me.return;while(Me);var Ne=_e}catch(je){Ne=`
Error generating stack: `+je.message+`
`+je.stack}return{value:a,source:f,stack:Ne,digest:null}}function ja(a,f,_e){return{value:a,source:null,stack:_e??null,digest:f??null}}function Ua(a,f){try{console.error(f.value)}catch(_e){setTimeout(function(){throw _e})}}var Gh=typeof WeakMap=="function"?WeakMap:Map;function Xc(a,f,_e){_e=Gn(-1,_e),_e.tag=3,_e.payload={element:null};var Me=f.value;return _e.callback=function(){Eo||(Eo=!0,rl=Me),Ua(a,f)},_e}function Gc(a,f,_e){_e=Gn(-1,_e),_e.tag=3;var Me=a.type.getDerivedStateFromError;if(typeof Me=="function"){var Ne=f.value;_e.payload=function(){return Me(Ne)},_e.callback=function(){Ua(a,f)}}var je=a.stateNode;return je!==null&&typeof je.componentDidCatch=="function"&&(_e.callback=function(){Ua(a,f),typeof Me!="function"&&(di===null?di=new Set([this]):di.add(this));var Ze=f.stack;this.componentDidCatch(f.value,{componentStack:Ze!==null?Ze:""})}),_e}function Zc(a,f,_e){var Me=a.pingCache;if(Me===null){Me=a.pingCache=new Gh;var Ne=new Set;Me.set(f,Ne)}else Ne=Me.get(f),Ne===void 0&&(Ne=new Set,Me.set(f,Ne));Ne.has(_e)||(Ne.add(_e),a=hf.bind(null,a,f,_e),f.then(a,a))}function Jc(a){do{var f;if((f=a.tag===13)&&(f=a.memoizedState,f=f!==null?f.dehydrated!==null:!0),f)return a;a=a.return}while(a!==null);return null}function Qc(a,f,_e,Me,Ne){return a.mode&1?(a.flags|=65536,a.lanes=Ne,a):(a===f?a.flags|=65536:(a.flags|=128,_e.flags|=131072,_e.flags&=-52805,_e.tag===1&&(_e.alternate===null?_e.tag=17:(f=Gn(-1,1),f.tag=2,hi(_e,f,1))),_e.lanes|=1),a)}var Zh=ke.ReactCurrentOwner,yn=!1;function pn(a,f,_e,Me){f.child=a===null?yc(f,null,_e,Me):Wi(f,a.child,_e,Me)}function eu(a,f,_e,Me,Ne){_e=_e.render;var je=f.ref;return Vi(f,Ne),Me=Da(a,f,_e,Me,je,Ne),_e=Oa(),a!==null&&!yn?(f.updateQueue=a.updateQueue,f.flags&=-2053,a.lanes&=~Ne,Zn(a,f,Ne)):(Wr&&_e&&ga(f),f.flags|=1,pn(a,f,Me,Ne),f.child)}function tu(a,f,_e,Me,Ne){if(a===null){var je=_e.type;return typeof je=="function"&&!cl(je)&&je.defaultProps===void 0&&_e.compare===null&&_e.defaultProps===void 0?(f.tag=15,f.type=je,ru(a,f,je,Me,Ne)):(a=Mo(_e.type,null,Me,f,f.mode,Ne),a.ref=f.ref,a.return=f,f.child=a)}if(je=a.child,!(a.lanes&Ne)){var Ze=je.memoizedProps;if(_e=_e.compare,_e=_e!==null?_e:ds,_e(Ze,Me)&&a.ref===f.ref)return Zn(a,f,Ne)}return f.flags|=1,a=vi(je,Me),a.ref=f.ref,a.return=f,f.child=a}function ru(a,f,_e,Me,Ne){if(a!==null){var je=a.memoizedProps;if(ds(je,Me)&&a.ref===f.ref)if(yn=!1,f.pendingProps=Me=je,(a.lanes&Ne)!==0)a.flags&131072&&(yn=!0);else return f.lanes=a.lanes,Zn(a,f,Ne)}return Ha(a,f,_e,Me,Ne)}function nu(a,f,_e){var Me=f.pendingProps,Ne=Me.children,je=a!==null?a.memoizedState:null;if(Me.mode==="hidden")if(!(f.mode&1))f.memoizedState={baseLanes:0,cachePool:null,transitions:null},Hr(Zi,kn),kn|=_e;else{if(!(_e&1073741824))return a=je!==null?je.baseLanes|_e:_e,f.lanes=f.childLanes=1073741824,f.memoizedState={baseLanes:a,cachePool:null,transitions:null},f.updateQueue=null,Hr(Zi,kn),kn|=a,null;f.memoizedState={baseLanes:0,cachePool:null,transitions:null},Me=je!==null?je.baseLanes:_e,Hr(Zi,kn),kn|=Me}else je!==null?(Me=je.baseLanes|_e,f.memoizedState=null):Me=_e,Hr(Zi,kn),kn|=Me;return pn(a,f,Ne,_e),f.child}function iu(a,f){var _e=f.ref;(a===null&&_e!==null||a!==null&&a.ref!==_e)&&(f.flags|=512,f.flags|=2097152)}function Ha(a,f,_e,Me,Ne){var je=_n(_e)?xi:cn.current;return je=Ui(f,je),Vi(f,Ne),_e=Da(a,f,_e,Me,je,Ne),Me=Oa(),a!==null&&!yn?(f.updateQueue=a.updateQueue,f.flags&=-2053,a.lanes&=~Ne,Zn(a,f,Ne)):(Wr&&Me&&ga(f),f.flags|=1,pn(a,f,_e,Ne),f.child)}function su(a,f,_e,Me,Ne){if(_n(_e)){var je=!0;eo(f)}else je=!1;if(Vi(f,Ne),f.stateNode===null)yo(a,f),Vc(f,_e,Me),Na(f,_e,Me,Ne),Me=!0;else if(a===null){var Ze=f.stateNode,ot=f.memoizedProps;Ze.props=ot;var dt=Ze.context,Rt=_e.contextType;typeof Rt=="object"&&Rt!==null?Rt=Mn(Rt):(Rt=_n(_e)?xi:cn.current,Rt=Ui(f,Rt));var Ut=_e.getDerivedStateFromProps,zt=typeof Ut=="function"||typeof Ze.getSnapshotBeforeUpdate=="function";zt||typeof Ze.UNSAFE_componentWillReceiveProps!="function"&&typeof Ze.componentWillReceiveProps!="function"||(ot!==Me||dt!==Rt)&&Yc(f,Ze,Me,Rt),ui=!1;var jt=f.memoizedState;Ze.state=jt,co(f,Me,Ze,Ne),dt=f.memoizedState,ot!==Me||jt!==dt||vn.current||ui?(typeof Ut=="function"&&(Fa(f,_e,Ut,Me),dt=f.memoizedState),(ot=ui||Kc(f,_e,ot,Me,jt,dt,Rt))?(zt||typeof Ze.UNSAFE_componentWillMount!="function"&&typeof Ze.componentWillMount!="function"||(typeof Ze.componentWillMount=="function"&&Ze.componentWillMount(),typeof Ze.UNSAFE_componentWillMount=="function"&&Ze.UNSAFE_componentWillMount()),typeof Ze.componentDidMount=="function"&&(f.flags|=4194308)):(typeof Ze.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=Me,f.memoizedState=dt),Ze.props=Me,Ze.state=dt,Ze.context=Rt,Me=ot):(typeof Ze.componentDidMount=="function"&&(f.flags|=4194308),Me=!1)}else{Ze=f.stateNode,xc(a,f),ot=f.memoizedProps,Rt=f.type===f.elementType?ot:Bn(f.type,ot),Ze.props=Rt,zt=f.pendingProps,jt=Ze.context,dt=_e.contextType,typeof dt=="object"&&dt!==null?dt=Mn(dt):(dt=_n(_e)?xi:cn.current,dt=Ui(f,dt));var or=_e.getDerivedStateFromProps;(Ut=typeof or=="function"||typeof Ze.getSnapshotBeforeUpdate=="function")||typeof Ze.UNSAFE_componentWillReceiveProps!="function"&&typeof Ze.componentWillReceiveProps!="function"||(ot!==zt||jt!==dt)&&Yc(f,Ze,Me,dt),ui=!1,jt=f.memoizedState,Ze.state=jt,co(f,Me,Ze,Ne);var dr=f.memoizedState;ot!==zt||jt!==dr||vn.current||ui?(typeof or=="function"&&(Fa(f,_e,or,Me),dr=f.memoizedState),(Rt=ui||Kc(f,_e,Rt,Me,jt,dr,dt)||!1)?(Ut||typeof Ze.UNSAFE_componentWillUpdate!="function"&&typeof Ze.componentWillUpdate!="function"||(typeof Ze.componentWillUpdate=="function"&&Ze.componentWillUpdate(Me,dr,dt),typeof Ze.UNSAFE_componentWillUpdate=="function"&&Ze.UNSAFE_componentWillUpdate(Me,dr,dt)),typeof Ze.componentDidUpdate=="function"&&(f.flags|=4),typeof Ze.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof Ze.componentDidUpdate!="function"||ot===a.memoizedProps&&jt===a.memoizedState||(f.flags|=4),typeof Ze.getSnapshotBeforeUpdate!="function"||ot===a.memoizedProps&&jt===a.memoizedState||(f.flags|=1024),f.memoizedProps=Me,f.memoizedState=dr),Ze.props=Me,Ze.state=dr,Ze.context=dt,Me=Rt):(typeof Ze.componentDidUpdate!="function"||ot===a.memoizedProps&&jt===a.memoizedState||(f.flags|=4),typeof Ze.getSnapshotBeforeUpdate!="function"||ot===a.memoizedProps&&jt===a.memoizedState||(f.flags|=1024),Me=!1)}return za(a,f,_e,Me,je,Ne)}function za(a,f,_e,Me,Ne,je){iu(a,f);var Ze=(f.flags&128)!==0;if(!Me&&!Ze)return Ne&&uc(f,_e,!1),Zn(a,f,je);Me=f.stateNode,Zh.current=f;var ot=Ze&&typeof _e.getDerivedStateFromError!="function"?null:Me.render();return f.flags|=1,a!==null&&Ze?(f.child=Wi(f,a.child,null,je),f.child=Wi(f,null,ot,je)):pn(a,f,ot,je),f.memoizedState=Me.state,Ne&&uc(f,_e,!0),f.child}function ou(a){var f=a.stateNode;f.pendingContext?lc(a,f.pendingContext,f.pendingContext!==f.context):f.context&&lc(a,f.context,!1),ka(a,f.containerInfo)}function au(a,f,_e,Me,Ne){return qi(),ya(Ne),f.flags|=256,pn(a,f,_e,Me),f.child}var qa={dehydrated:null,treeContext:null,retryLane:0};function Wa(a){return{baseLanes:a,cachePool:null,transitions:null}}function lu(a,f,_e){var Me=f.pendingProps,Ne=Vr.current,je=!1,Ze=(f.flags&128)!==0,ot;if((ot=Ze)||(ot=a!==null&&a.memoizedState===null?!1:(Ne&2)!==0),ot?(je=!0,f.flags&=-129):(a===null||a.memoizedState!==null)&&(Ne|=1),Hr(Vr,Ne&1),a===null)return _a(f),a=f.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?(f.mode&1?a.data==="$!"?f.lanes=8:f.lanes=1073741824:f.lanes=1,null):(Ze=Me.children,a=Me.fallback,je?(Me=f.mode,je=f.child,Ze={mode:"hidden",children:Ze},!(Me&1)&&je!==null?(je.childLanes=0,je.pendingProps=Ze):je=Ao(Ze,Me,0,null),a=Ai(a,Me,_e,null),je.return=f,a.return=f,je.sibling=a,f.child=je,f.child.memoizedState=Wa(_e),f.memoizedState=qa,a):Ka(f,Ze));if(Ne=a.memoizedState,Ne!==null&&(ot=Ne.dehydrated,ot!==null))return Jh(a,f,Ze,Me,ot,Ne,_e);if(je){je=Me.fallback,Ze=f.mode,Ne=a.child,ot=Ne.sibling;var dt={mode:"hidden",children:Me.children};return!(Ze&1)&&f.child!==Ne?(Me=f.child,Me.childLanes=0,Me.pendingProps=dt,f.deletions=null):(Me=vi(Ne,dt),Me.subtreeFlags=Ne.subtreeFlags&14680064),ot!==null?je=vi(ot,je):(je=Ai(je,Ze,_e,null),je.flags|=2),je.return=f,Me.return=f,Me.sibling=je,f.child=Me,Me=je,je=f.child,Ze=a.child.memoizedState,Ze=Ze===null?Wa(_e):{baseLanes:Ze.baseLanes|_e,cachePool:null,transitions:Ze.transitions},je.memoizedState=Ze,je.childLanes=a.childLanes&~_e,f.memoizedState=qa,Me}return je=a.child,a=je.sibling,Me=vi(je,{mode:"visible",children:Me.children}),!(f.mode&1)&&(Me.lanes=_e),Me.return=f,Me.sibling=null,a!==null&&(_e=f.deletions,_e===null?(f.deletions=[a],f.flags|=16):_e.push(a)),f.child=Me,f.memoizedState=null,Me}function Ka(a,f){return f=Ao({mode:"visible",children:f},a.mode,0,null),f.return=a,a.child=f}function _o(a,f,_e,Me){return Me!==null&&ya(Me),Wi(f,a.child,null,_e),a=Ka(f,f.pendingProps.children),a.flags|=2,f.memoizedState=null,a}function Jh(a,f,_e,Me,Ne,je,Ze){if(_e)return f.flags&256?(f.flags&=-257,Me=ja(Error(e(422))),_o(a,f,Ze,Me)):f.memoizedState!==null?(f.child=a.child,f.flags|=128,null):(je=Me.fallback,Ne=f.mode,Me=Ao({mode:"visible",children:Me.children},Ne,0,null),je=Ai(je,Ne,Ze,null),je.flags|=2,Me.return=f,je.return=f,Me.sibling=je,f.child=Me,f.mode&1&&Wi(f,a.child,null,Ze),f.child.memoizedState=Wa(Ze),f.memoizedState=qa,je);if(!(f.mode&1))return _o(a,f,Ze,null);if(Ne.data==="$!"){if(Me=Ne.nextSibling&&Ne.nextSibling.dataset,Me)var ot=Me.dgst;return Me=ot,je=Error(e(419)),Me=ja(je,Me,void 0),_o(a,f,Ze,Me)}if(ot=(Ze&a.childLanes)!==0,yn||ot){if(Me=sn,Me!==null){switch(Ze&-Ze){case 4:Ne=2;break;case 16:Ne=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Ne=32;break;case 536870912:Ne=268435456;break;default:Ne=0}Ne=Ne&(Me.suspendedLanes|Ze)?0:Ne,Ne!==0&&Ne!==je.retryLane&&(je.retryLane=Ne,Xn(a,Ne),Nn(Me,a,Ne,-1))}return ll(),Me=ja(Error(e(421))),_o(a,f,Ze,Me)}return Ne.data==="$?"?(f.flags|=128,f.child=a.child,f=ff.bind(null,a),Ne._reactRetry=f,null):(a=je.treeContext,Cn=si(Ne.nextSibling),En=f,Wr=!0,Ln=null,a!==null&&(Pn[Tn++]=Vn,Pn[Tn++]=Yn,Pn[Tn++]=bi,Vn=a.id,Yn=a.overflow,bi=f),f=Ka(f,Me.children),f.flags|=4096,f)}function cu(a,f,_e){a.lanes|=f;var Me=a.alternate;Me!==null&&(Me.lanes|=f),Sa(a.return,f,_e)}function Va(a,f,_e,Me,Ne){var je=a.memoizedState;je===null?a.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:Me,tail:_e,tailMode:Ne}:(je.isBackwards=f,je.rendering=null,je.renderingStartTime=0,je.last=Me,je.tail=_e,je.tailMode=Ne)}function uu(a,f,_e){var Me=f.pendingProps,Ne=Me.revealOrder,je=Me.tail;if(pn(a,f,Me.children,_e),Me=Vr.current,Me&2)Me=Me&1|2,f.flags|=128;else{if(a!==null&&a.flags&128)e:for(a=f.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&cu(a,_e,f);else if(a.tag===19)cu(a,_e,f);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===f)break e;for(;a.sibling===null;){if(a.return===null||a.return===f)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}Me&=1}if(Hr(Vr,Me),!(f.mode&1))f.memoizedState=null;else switch(Ne){case"forwards":for(_e=f.child,Ne=null;_e!==null;)a=_e.alternate,a!==null&&uo(a)===null&&(Ne=_e),_e=_e.sibling;_e=Ne,_e===null?(Ne=f.child,f.child=null):(Ne=_e.sibling,_e.sibling=null),Va(f,!1,Ne,_e,je);break;case"backwards":for(_e=null,Ne=f.child,f.child=null;Ne!==null;){if(a=Ne.alternate,a!==null&&uo(a)===null){f.child=Ne;break}a=Ne.sibling,Ne.sibling=_e,_e=Ne,Ne=a}Va(f,!0,_e,null,je);break;case"together":Va(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function yo(a,f){!(f.mode&1)&&a!==null&&(a.alternate=null,f.alternate=null,f.flags|=2)}function Zn(a,f,_e){if(a!==null&&(f.dependencies=a.dependencies),Ri|=f.lanes,!(_e&f.childLanes))return null;if(a!==null&&f.child!==a.child)throw Error(e(153));if(f.child!==null){for(a=f.child,_e=vi(a,a.pendingProps),f.child=_e,_e.return=f;a.sibling!==null;)a=a.sibling,_e=_e.sibling=vi(a,a.pendingProps),_e.return=f;_e.sibling=null}return f.child}function Qh(a,f,_e){switch(f.tag){case 3:ou(f),qi();break;case 5:Ec(f);break;case 1:_n(f.type)&&eo(f);break;case 4:ka(f,f.stateNode.containerInfo);break;case 10:var Me=f.type._context,Ne=f.memoizedProps.value;Hr(oo,Me._currentValue),Me._currentValue=Ne;break;case 13:if(Me=f.memoizedState,Me!==null)return Me.dehydrated!==null?(Hr(Vr,Vr.current&1),f.flags|=128,null):_e&f.child.childLanes?lu(a,f,_e):(Hr(Vr,Vr.current&1),a=Zn(a,f,_e),a!==null?a.sibling:null);Hr(Vr,Vr.current&1);break;case 19:if(Me=(_e&f.childLanes)!==0,a.flags&128){if(Me)return uu(a,f,_e);f.flags|=128}if(Ne=f.memoizedState,Ne!==null&&(Ne.rendering=null,Ne.tail=null,Ne.lastEffect=null),Hr(Vr,Vr.current),Me)break;return null;case 22:case 23:return f.lanes=0,nu(a,f,_e)}return Zn(a,f,_e)}var hu,Ya,fu,du;hu=function(a,f){for(var _e=f.child;_e!==null;){if(_e.tag===5||_e.tag===6)a.appendChild(_e.stateNode);else if(_e.tag!==4&&_e.child!==null){_e.child.return=_e,_e=_e.child;continue}if(_e===f)break;for(;_e.sibling===null;){if(_e.return===null||_e.return===f)return;_e=_e.return}_e.sibling.return=_e.return,_e=_e.sibling}},Ya=function(){},fu=function(a,f,_e,Me){var Ne=a.memoizedProps;if(Ne!==Me){a=f.stateNode,Ci(Hn.current);var je=null;switch(_e){case"input":Ne=Tt(a,Ne),Me=Tt(a,Me),je=[];break;case"select":Ne=We({},Ne,{value:void 0}),Me=We({},Me,{value:void 0}),je=[];break;case"textarea":Ne=rr(a,Ne),Me=rr(a,Me),je=[];break;default:typeof Ne.onClick!="function"&&typeof Me.onClick=="function"&&(a.onclick=Zs)}hr(_e,Me);var Ze;_e=null;for(Rt in Ne)if(!Me.hasOwnProperty(Rt)&&Ne.hasOwnProperty(Rt)&&Ne[Rt]!=null)if(Rt==="style"){var ot=Ne[Rt];for(Ze in ot)ot.hasOwnProperty(Ze)&&(_e||(_e={}),_e[Ze]="")}else Rt!=="dangerouslySetInnerHTML"&&Rt!=="children"&&Rt!=="suppressContentEditableWarning"&&Rt!=="suppressHydrationWarning"&&Rt!=="autoFocus"&&(s.hasOwnProperty(Rt)?je||(je=[]):(je=je||[]).push(Rt,null));for(Rt in Me){var dt=Me[Rt];if(ot=Ne!=null?Ne[Rt]:void 0,Me.hasOwnProperty(Rt)&&dt!==ot&&(dt!=null||ot!=null))if(Rt==="style")if(ot){for(Ze in ot)!ot.hasOwnProperty(Ze)||dt&&dt.hasOwnProperty(Ze)||(_e||(_e={}),_e[Ze]="");for(Ze in dt)dt.hasOwnProperty(Ze)&&ot[Ze]!==dt[Ze]&&(_e||(_e={}),_e[Ze]=dt[Ze])}else _e||(je||(je=[]),je.push(Rt,_e)),_e=dt;else Rt==="dangerouslySetInnerHTML"?(dt=dt?dt.__html:void 0,ot=ot?ot.__html:void 0,dt!=null&&ot!==dt&&(je=je||[]).push(Rt,dt)):Rt==="children"?typeof dt!="string"&&typeof dt!="number"||(je=je||[]).push(Rt,""+dt):Rt!=="suppressContentEditableWarning"&&Rt!=="suppressHydrationWarning"&&(s.hasOwnProperty(Rt)?(dt!=null&&Rt==="onScroll"&&zr("scroll",a),je||ot===dt||(je=[])):(je=je||[]).push(Rt,dt))}_e&&(je=je||[]).push("style",_e);var Rt=je;(f.updateQueue=Rt)&&(f.flags|=4)}},du=function(a,f,_e,Me){_e!==Me&&(f.flags|=4)};function Ps(a,f){if(!Wr)switch(a.tailMode){case"hidden":f=a.tail;for(var _e=null;f!==null;)f.alternate!==null&&(_e=f),f=f.sibling;_e===null?a.tail=null:_e.sibling=null;break;case"collapsed":_e=a.tail;for(var Me=null;_e!==null;)_e.alternate!==null&&(Me=_e),_e=_e.sibling;Me===null?f||a.tail===null?a.tail=null:a.tail.sibling=null:Me.sibling=null}}function hn(a){var f=a.alternate!==null&&a.alternate.child===a.child,_e=0,Me=0;if(f)for(var Ne=a.child;Ne!==null;)_e|=Ne.lanes|Ne.childLanes,Me|=Ne.subtreeFlags&14680064,Me|=Ne.flags&14680064,Ne.return=a,Ne=Ne.sibling;else for(Ne=a.child;Ne!==null;)_e|=Ne.lanes|Ne.childLanes,Me|=Ne.subtreeFlags,Me|=Ne.flags,Ne.return=a,Ne=Ne.sibling;return a.subtreeFlags|=Me,a.childLanes=_e,f}function ef(a,f,_e){var Me=f.pendingProps;switch(ma(f),f.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hn(f),null;case 1:return _n(f.type)&&Qs(),hn(f),null;case 3:return Me=f.stateNode,Yi(),qr(vn),qr(cn),Ta(),Me.pendingContext&&(Me.context=Me.pendingContext,Me.pendingContext=null),(a===null||a.child===null)&&(io(f)?f.flags|=4:a===null||a.memoizedState.isDehydrated&&!(f.flags&256)||(f.flags|=1024,Ln!==null&&(sl(Ln),Ln=null))),Ya(a,f),hn(f),null;case 5:Ra(f);var Ne=Ci(Ss.current);if(_e=f.type,a!==null&&f.stateNode!=null)fu(a,f,_e,Me,Ne),a.ref!==f.ref&&(f.flags|=512,f.flags|=2097152);else{if(!Me){if(f.stateNode===null)throw Error(e(166));return hn(f),null}if(a=Ci(Hn.current),io(f)){Me=f.stateNode,_e=f.type;var je=f.memoizedProps;switch(Me[Un]=f,Me[_s]=je,a=(f.mode&1)!==0,_e){case"dialog":zr("cancel",Me),zr("close",Me);break;case"iframe":case"object":case"embed":zr("load",Me);break;case"video":case"audio":for(Ne=0;Ne<gs.length;Ne++)zr(gs[Ne],Me);break;case"source":zr("error",Me);break;case"img":case"image":case"link":zr("error",Me),zr("load",Me);break;case"details":zr("toggle",Me);break;case"input":At(Me,je),zr("invalid",Me);break;case"select":Me._wrapperState={wasMultiple:!!je.multiple},zr("invalid",Me);break;case"textarea":It(Me,je),zr("invalid",Me)}hr(_e,je),Ne=null;for(var Ze in je)if(je.hasOwnProperty(Ze)){var ot=je[Ze];Ze==="children"?typeof ot=="string"?Me.textContent!==ot&&(je.suppressHydrationWarning!==!0&&Gs(Me.textContent,ot,a),Ne=["children",ot]):typeof ot=="number"&&Me.textContent!==""+ot&&(je.suppressHydrationWarning!==!0&&Gs(Me.textContent,ot,a),Ne=["children",""+ot]):s.hasOwnProperty(Ze)&&ot!=null&&Ze==="onScroll"&&zr("scroll",Me)}switch(_e){case"input":St(Me),Kt(Me,je,!0);break;case"textarea":St(Me),cr(Me);break;case"select":case"option":break;default:typeof je.onClick=="function"&&(Me.onclick=Zs)}Me=Ne,f.updateQueue=Me,Me!==null&&(f.flags|=4)}else{Ze=Ne.nodeType===9?Ne:Ne.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=Vt(_e)),a==="http://www.w3.org/1999/xhtml"?_e==="script"?(a=Ze.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof Me.is=="string"?a=Ze.createElement(_e,{is:Me.is}):(a=Ze.createElement(_e),_e==="select"&&(Ze=a,Me.multiple?Ze.multiple=!0:Me.size&&(Ze.size=Me.size))):a=Ze.createElementNS(a,_e),a[Un]=f,a[_s]=Me,hu(a,f,!1,!1),f.stateNode=a;e:{switch(Ze=Ft(_e,Me),_e){case"dialog":zr("cancel",a),zr("close",a),Ne=Me;break;case"iframe":case"object":case"embed":zr("load",a),Ne=Me;break;case"video":case"audio":for(Ne=0;Ne<gs.length;Ne++)zr(gs[Ne],a);Ne=Me;break;case"source":zr("error",a),Ne=Me;break;case"img":case"image":case"link":zr("error",a),zr("load",a),Ne=Me;break;case"details":zr("toggle",a),Ne=Me;break;case"input":At(a,Me),Ne=Tt(a,Me),zr("invalid",a);break;case"option":Ne=Me;break;case"select":a._wrapperState={wasMultiple:!!Me.multiple},Ne=We({},Me,{value:void 0}),zr("invalid",a);break;case"textarea":It(a,Me),Ne=rr(a,Me),zr("invalid",a);break;default:Ne=Me}hr(_e,Ne),ot=Ne;for(je in ot)if(ot.hasOwnProperty(je)){var dt=ot[je];je==="style"?Ot(a,dt):je==="dangerouslySetInnerHTML"?(dt=dt?dt.__html:void 0,dt!=null&&Yt(a,dt)):je==="children"?typeof dt=="string"?(_e!=="textarea"||dt!=="")&&ar(a,dt):typeof dt=="number"&&ar(a,""+dt):je!=="suppressContentEditableWarning"&&je!=="suppressHydrationWarning"&&je!=="autoFocus"&&(s.hasOwnProperty(je)?dt!=null&&je==="onScroll"&&zr("scroll",a):dt!=null&&ve(a,je,dt,Ze))}switch(_e){case"input":St(a),Kt(a,Me,!1);break;case"textarea":St(a),cr(a);break;case"option":Me.value!=null&&a.setAttribute("value",""+Ve(Me.value));break;case"select":a.multiple=!!Me.multiple,je=Me.value,je!=null?Qt(a,!!Me.multiple,je,!1):Me.defaultValue!=null&&Qt(a,!!Me.multiple,Me.defaultValue,!0);break;default:typeof Ne.onClick=="function"&&(a.onclick=Zs)}switch(_e){case"button":case"input":case"select":case"textarea":Me=!!Me.autoFocus;break e;case"img":Me=!0;break e;default:Me=!1}}Me&&(f.flags|=4)}f.ref!==null&&(f.flags|=512,f.flags|=2097152)}return hn(f),null;case 6:if(a&&f.stateNode!=null)du(a,f,a.memoizedProps,Me);else{if(typeof Me!="string"&&f.stateNode===null)throw Error(e(166));if(_e=Ci(Ss.current),Ci(Hn.current),io(f)){if(Me=f.stateNode,_e=f.memoizedProps,Me[Un]=f,(je=Me.nodeValue!==_e)&&(a=En,a!==null))switch(a.tag){case 3:Gs(Me.nodeValue,_e,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&Gs(Me.nodeValue,_e,(a.mode&1)!==0)}je&&(f.flags|=4)}else Me=(_e.nodeType===9?_e:_e.ownerDocument).createTextNode(Me),Me[Un]=f,f.stateNode=Me}return hn(f),null;case 13:if(qr(Vr),Me=f.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(Wr&&Cn!==null&&f.mode&1&&!(f.flags&128))mc(),qi(),f.flags|=98560,je=!1;else if(je=io(f),Me!==null&&Me.dehydrated!==null){if(a===null){if(!je)throw Error(e(318));if(je=f.memoizedState,je=je!==null?je.dehydrated:null,!je)throw Error(e(317));je[Un]=f}else qi(),!(f.flags&128)&&(f.memoizedState=null),f.flags|=4;hn(f),je=!1}else Ln!==null&&(sl(Ln),Ln=null),je=!0;if(!je)return f.flags&65536?f:null}return f.flags&128?(f.lanes=_e,f):(Me=Me!==null,Me!==(a!==null&&a.memoizedState!==null)&&Me&&(f.child.flags|=8192,f.mode&1&&(a===null||Vr.current&1?tn===0&&(tn=3):ll())),f.updateQueue!==null&&(f.flags|=4),hn(f),null);case 4:return Yi(),Ya(a,f),a===null&&ms(f.stateNode.containerInfo),hn(f),null;case 10:return ba(f.type._context),hn(f),null;case 17:return _n(f.type)&&Qs(),hn(f),null;case 19:if(qr(Vr),je=f.memoizedState,je===null)return hn(f),null;if(Me=(f.flags&128)!==0,Ze=je.rendering,Ze===null)if(Me)Ps(je,!1);else{if(tn!==0||a!==null&&a.flags&128)for(a=f.child;a!==null;){if(Ze=uo(a),Ze!==null){for(f.flags|=128,Ps(je,!1),Me=Ze.updateQueue,Me!==null&&(f.updateQueue=Me,f.flags|=4),f.subtreeFlags=0,Me=_e,_e=f.child;_e!==null;)je=_e,a=Me,je.flags&=14680066,Ze=je.alternate,Ze===null?(je.childLanes=0,je.lanes=a,je.child=null,je.subtreeFlags=0,je.memoizedProps=null,je.memoizedState=null,je.updateQueue=null,je.dependencies=null,je.stateNode=null):(je.childLanes=Ze.childLanes,je.lanes=Ze.lanes,je.child=Ze.child,je.subtreeFlags=0,je.deletions=null,je.memoizedProps=Ze.memoizedProps,je.memoizedState=Ze.memoizedState,je.updateQueue=Ze.updateQueue,je.type=Ze.type,a=Ze.dependencies,je.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),_e=_e.sibling;return Hr(Vr,Vr.current&1|2),f.child}a=a.sibling}je.tail!==null&&tr()>Ji&&(f.flags|=128,Me=!0,Ps(je,!1),f.lanes=4194304)}else{if(!Me)if(a=uo(Ze),a!==null){if(f.flags|=128,Me=!0,_e=a.updateQueue,_e!==null&&(f.updateQueue=_e,f.flags|=4),Ps(je,!0),je.tail===null&&je.tailMode==="hidden"&&!Ze.alternate&&!Wr)return hn(f),null}else 2*tr()-je.renderingStartTime>Ji&&_e!==1073741824&&(f.flags|=128,Me=!0,Ps(je,!1),f.lanes=4194304);je.isBackwards?(Ze.sibling=f.child,f.child=Ze):(_e=je.last,_e!==null?_e.sibling=Ze:f.child=Ze,je.last=Ze)}return je.tail!==null?(f=je.tail,je.rendering=f,je.tail=f.sibling,je.renderingStartTime=tr(),f.sibling=null,_e=Vr.current,Hr(Vr,Me?_e&1|2:_e&1),f):(hn(f),null);case 22:case 23:return al(),Me=f.memoizedState!==null,a!==null&&a.memoizedState!==null!==Me&&(f.flags|=8192),Me&&f.mode&1?kn&1073741824&&(hn(f),f.subtreeFlags&6&&(f.flags|=8192)):hn(f),null;case 24:return null;case 25:return null}throw Error(e(156,f.tag))}function tf(a,f){switch(ma(f),f.tag){case 1:return _n(f.type)&&Qs(),a=f.flags,a&65536?(f.flags=a&-65537|128,f):null;case 3:return Yi(),qr(vn),qr(cn),Ta(),a=f.flags,a&65536&&!(a&128)?(f.flags=a&-65537|128,f):null;case 5:return Ra(f),null;case 13:if(qr(Vr),a=f.memoizedState,a!==null&&a.dehydrated!==null){if(f.alternate===null)throw Error(e(340));qi()}return a=f.flags,a&65536?(f.flags=a&-65537|128,f):null;case 19:return qr(Vr),null;case 4:return Yi(),null;case 10:return ba(f.type._context),null;case 22:case 23:return al(),null;case 24:return null;default:return null}}var wo=!1,fn=!1,rf=typeof WeakSet=="function"?WeakSet:Set,ur=null;function Gi(a,f){var _e=a.ref;if(_e!==null)if(typeof _e=="function")try{_e(null)}catch(Me){Xr(a,f,Me)}else _e.current=null}function Xa(a,f,_e){try{_e()}catch(Me){Xr(a,f,Me)}}var pu=!1;function nf(a,f){if(aa=Ns,a=Kl(),Qo(a)){if("selectionStart"in a)var _e={start:a.selectionStart,end:a.selectionEnd};else e:{_e=(_e=a.ownerDocument)&&_e.defaultView||window;var Me=_e.getSelection&&_e.getSelection();if(Me&&Me.rangeCount!==0){_e=Me.anchorNode;var Ne=Me.anchorOffset,je=Me.focusNode;Me=Me.focusOffset;try{_e.nodeType,je.nodeType}catch{_e=null;break e}var Ze=0,ot=-1,dt=-1,Rt=0,Ut=0,zt=a,jt=null;t:for(;;){for(var or;zt!==_e||Ne!==0&&zt.nodeType!==3||(ot=Ze+Ne),zt!==je||Me!==0&&zt.nodeType!==3||(dt=Ze+Me),zt.nodeType===3&&(Ze+=zt.nodeValue.length),(or=zt.firstChild)!==null;)jt=zt,zt=or;for(;;){if(zt===a)break t;if(jt===_e&&++Rt===Ne&&(ot=Ze),jt===je&&++Ut===Me&&(dt=Ze),(or=zt.nextSibling)!==null)break;zt=jt,jt=zt.parentNode}zt=or}_e=ot===-1||dt===-1?null:{start:ot,end:dt}}else _e=null}_e=_e||{start:0,end:0}}else _e=null;for(la={focusedElem:a,selectionRange:_e},Ns=!1,ur=f;ur!==null;)if(f=ur,a=f.child,(f.subtreeFlags&1028)!==0&&a!==null)a.return=f,ur=a;else for(;ur!==null;){f=ur;try{var dr=f.alternate;if(f.flags&1024)switch(f.tag){case 0:case 11:case 15:break;case 1:if(dr!==null){var mr=dr.memoizedProps,Jr=dr.memoizedState,xt=f.stateNode,mt=xt.getSnapshotBeforeUpdate(f.elementType===f.type?mr:Bn(f.type,mr),Jr);xt.__reactInternalSnapshotBeforeUpdate=mt}break;case 3:var Et=f.stateNode.containerInfo;Et.nodeType===1?Et.textContent="":Et.nodeType===9&&Et.documentElement&&Et.removeChild(Et.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(e(163))}}catch(Wt){Xr(f,f.return,Wt)}if(a=f.sibling,a!==null){a.return=f.return,ur=a;break}ur=f.return}return dr=pu,pu=!1,dr}function Ts(a,f,_e){var Me=f.updateQueue;if(Me=Me!==null?Me.lastEffect:null,Me!==null){var Ne=Me=Me.next;do{if((Ne.tag&a)===a){var je=Ne.destroy;Ne.destroy=void 0,je!==void 0&&Xa(f,_e,je)}Ne=Ne.next}while(Ne!==Me)}}function xo(a,f){if(f=f.updateQueue,f=f!==null?f.lastEffect:null,f!==null){var _e=f=f.next;do{if((_e.tag&a)===a){var Me=_e.create;_e.destroy=Me()}_e=_e.next}while(_e!==f)}}function Ga(a){var f=a.ref;if(f!==null){var _e=a.stateNode;switch(a.tag){case 5:a=_e;break;default:a=_e}typeof f=="function"?f(a):f.current=a}}function gu(a){var f=a.alternate;f!==null&&(a.alternate=null,gu(f)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(f=a.stateNode,f!==null&&(delete f[Un],delete f[_s],delete f[fa],delete f[Nh],delete f[jh])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function mu(a){return a.tag===5||a.tag===3||a.tag===4}function vu(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||mu(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Za(a,f,_e){var Me=a.tag;if(Me===5||Me===6)a=a.stateNode,f?_e.nodeType===8?_e.parentNode.insertBefore(a,f):_e.insertBefore(a,f):(_e.nodeType===8?(f=_e.parentNode,f.insertBefore(a,_e)):(f=_e,f.appendChild(a)),_e=_e._reactRootContainer,_e!=null||f.onclick!==null||(f.onclick=Zs));else if(Me!==4&&(a=a.child,a!==null))for(Za(a,f,_e),a=a.sibling;a!==null;)Za(a,f,_e),a=a.sibling}function Ja(a,f,_e){var Me=a.tag;if(Me===5||Me===6)a=a.stateNode,f?_e.insertBefore(a,f):_e.appendChild(a);else if(Me!==4&&(a=a.child,a!==null))for(Ja(a,f,_e),a=a.sibling;a!==null;)Ja(a,f,_e),a=a.sibling}var an=null,$n=!1;function fi(a,f,_e){for(_e=_e.child;_e!==null;)_u(a,f,_e),_e=_e.sibling}function _u(a,f,_e){if(Ar&&typeof Ar.onCommitFiberUnmount=="function")try{Ar.onCommitFiberUnmount(Dr,_e)}catch{}switch(_e.tag){case 5:fn||Gi(_e,f);case 6:var Me=an,Ne=$n;an=null,fi(a,f,_e),an=Me,$n=Ne,an!==null&&($n?(a=an,_e=_e.stateNode,a.nodeType===8?a.parentNode.removeChild(_e):a.removeChild(_e)):an.removeChild(_e.stateNode));break;case 18:an!==null&&($n?(a=an,_e=_e.stateNode,a.nodeType===8?ha(a.parentNode,_e):a.nodeType===1&&ha(a,_e),as(a)):ha(an,_e.stateNode));break;case 4:Me=an,Ne=$n,an=_e.stateNode.containerInfo,$n=!0,fi(a,f,_e),an=Me,$n=Ne;break;case 0:case 11:case 14:case 15:if(!fn&&(Me=_e.updateQueue,Me!==null&&(Me=Me.lastEffect,Me!==null))){Ne=Me=Me.next;do{var je=Ne,Ze=je.destroy;je=je.tag,Ze!==void 0&&(je&2||je&4)&&Xa(_e,f,Ze),Ne=Ne.next}while(Ne!==Me)}fi(a,f,_e);break;case 1:if(!fn&&(Gi(_e,f),Me=_e.stateNode,typeof Me.componentWillUnmount=="function"))try{Me.props=_e.memoizedProps,Me.state=_e.memoizedState,Me.componentWillUnmount()}catch(ot){Xr(_e,f,ot)}fi(a,f,_e);break;case 21:fi(a,f,_e);break;case 22:_e.mode&1?(fn=(Me=fn)||_e.memoizedState!==null,fi(a,f,_e),fn=Me):fi(a,f,_e);break;default:fi(a,f,_e)}}function yu(a){var f=a.updateQueue;if(f!==null){a.updateQueue=null;var _e=a.stateNode;_e===null&&(_e=a.stateNode=new rf),f.forEach(function(Me){var Ne=df.bind(null,a,Me);_e.has(Me)||(_e.add(Me),Me.then(Ne,Ne))})}}function Fn(a,f){var _e=f.deletions;if(_e!==null)for(var Me=0;Me<_e.length;Me++){var Ne=_e[Me];try{var je=a,Ze=f,ot=Ze;e:for(;ot!==null;){switch(ot.tag){case 5:an=ot.stateNode,$n=!1;break e;case 3:an=ot.stateNode.containerInfo,$n=!0;break e;case 4:an=ot.stateNode.containerInfo,$n=!0;break e}ot=ot.return}if(an===null)throw Error(e(160));_u(je,Ze,Ne),an=null,$n=!1;var dt=Ne.alternate;dt!==null&&(dt.return=null),Ne.return=null}catch(Rt){Xr(Ne,f,Rt)}}if(f.subtreeFlags&12854)for(f=f.child;f!==null;)wu(f,a),f=f.sibling}function wu(a,f){var _e=a.alternate,Me=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(Fn(f,a),qn(a),Me&4){try{Ts(3,a,a.return),xo(3,a)}catch(mr){Xr(a,a.return,mr)}try{Ts(5,a,a.return)}catch(mr){Xr(a,a.return,mr)}}break;case 1:Fn(f,a),qn(a),Me&512&&_e!==null&&Gi(_e,_e.return);break;case 5:if(Fn(f,a),qn(a),Me&512&&_e!==null&&Gi(_e,_e.return),a.flags&32){var Ne=a.stateNode;try{ar(Ne,"")}catch(mr){Xr(a,a.return,mr)}}if(Me&4&&(Ne=a.stateNode,Ne!=null)){var je=a.memoizedProps,Ze=_e!==null?_e.memoizedProps:je,ot=a.type,dt=a.updateQueue;if(a.updateQueue=null,dt!==null)try{ot==="input"&&je.type==="radio"&&je.name!=null&&sr(Ne,je),Ft(ot,Ze);var Rt=Ft(ot,je);for(Ze=0;Ze<dt.length;Ze+=2){var Ut=dt[Ze],zt=dt[Ze+1];Ut==="style"?Ot(Ne,zt):Ut==="dangerouslySetInnerHTML"?Yt(Ne,zt):Ut==="children"?ar(Ne,zt):ve(Ne,Ut,zt,Rt)}switch(ot){case"input":Lt(Ne,je);break;case"textarea":_r(Ne,je);break;case"select":var jt=Ne._wrapperState.wasMultiple;Ne._wrapperState.wasMultiple=!!je.multiple;var or=je.value;or!=null?Qt(Ne,!!je.multiple,or,!1):jt!==!!je.multiple&&(je.defaultValue!=null?Qt(Ne,!!je.multiple,je.defaultValue,!0):Qt(Ne,!!je.multiple,je.multiple?[]:"",!1))}Ne[_s]=je}catch(mr){Xr(a,a.return,mr)}}break;case 6:if(Fn(f,a),qn(a),Me&4){if(a.stateNode===null)throw Error(e(162));Ne=a.stateNode,je=a.memoizedProps;try{Ne.nodeValue=je}catch(mr){Xr(a,a.return,mr)}}break;case 3:if(Fn(f,a),qn(a),Me&4&&_e!==null&&_e.memoizedState.isDehydrated)try{as(f.containerInfo)}catch(mr){Xr(a,a.return,mr)}break;case 4:Fn(f,a),qn(a);break;case 13:Fn(f,a),qn(a),Ne=a.child,Ne.flags&8192&&(je=Ne.memoizedState!==null,Ne.stateNode.isHidden=je,!je||Ne.alternate!==null&&Ne.alternate.memoizedState!==null||(tl=tr())),Me&4&&yu(a);break;case 22:if(Ut=_e!==null&&_e.memoizedState!==null,a.mode&1?(fn=(Rt=fn)||Ut,Fn(f,a),fn=Rt):Fn(f,a),qn(a),Me&8192){if(Rt=a.memoizedState!==null,(a.stateNode.isHidden=Rt)&&!Ut&&a.mode&1)for(ur=a,Ut=a.child;Ut!==null;){for(zt=ur=Ut;ur!==null;){switch(jt=ur,or=jt.child,jt.tag){case 0:case 11:case 14:case 15:Ts(4,jt,jt.return);break;case 1:Gi(jt,jt.return);var dr=jt.stateNode;if(typeof dr.componentWillUnmount=="function"){Me=jt,_e=jt.return;try{f=Me,dr.props=f.memoizedProps,dr.state=f.memoizedState,dr.componentWillUnmount()}catch(mr){Xr(Me,_e,mr)}}break;case 5:Gi(jt,jt.return);break;case 22:if(jt.memoizedState!==null){Su(zt);continue}}or!==null?(or.return=jt,ur=or):Su(zt)}Ut=Ut.sibling}e:for(Ut=null,zt=a;;){if(zt.tag===5){if(Ut===null){Ut=zt;try{Ne=zt.stateNode,Rt?(je=Ne.style,typeof je.setProperty=="function"?je.setProperty("display","none","important"):je.display="none"):(ot=zt.stateNode,dt=zt.memoizedProps.style,Ze=dt!=null&&dt.hasOwnProperty("display")?dt.display:null,ot.style.display=br("display",Ze))}catch(mr){Xr(a,a.return,mr)}}}else if(zt.tag===6){if(Ut===null)try{zt.stateNode.nodeValue=Rt?"":zt.memoizedProps}catch(mr){Xr(a,a.return,mr)}}else if((zt.tag!==22&&zt.tag!==23||zt.memoizedState===null||zt===a)&&zt.child!==null){zt.child.return=zt,zt=zt.child;continue}if(zt===a)break e;for(;zt.sibling===null;){if(zt.return===null||zt.return===a)break e;Ut===zt&&(Ut=null),zt=zt.return}Ut===zt&&(Ut=null),zt.sibling.return=zt.return,zt=zt.sibling}}break;case 19:Fn(f,a),qn(a),Me&4&&yu(a);break;case 21:break;default:Fn(f,a),qn(a)}}function qn(a){var f=a.flags;if(f&2){try{e:{for(var _e=a.return;_e!==null;){if(mu(_e)){var Me=_e;break e}_e=_e.return}throw Error(e(160))}switch(Me.tag){case 5:var Ne=Me.stateNode;Me.flags&32&&(ar(Ne,""),Me.flags&=-33);var je=vu(a);Ja(a,je,Ne);break;case 3:case 4:var Ze=Me.stateNode.containerInfo,ot=vu(a);Za(a,ot,Ze);break;default:throw Error(e(161))}}catch(dt){Xr(a,a.return,dt)}a.flags&=-3}f&4096&&(a.flags&=-4097)}function sf(a,f,_e){ur=a,xu(a)}function xu(a,f,_e){for(var Me=(a.mode&1)!==0;ur!==null;){var Ne=ur,je=Ne.child;if(Ne.tag===22&&Me){var Ze=Ne.memoizedState!==null||wo;if(!Ze){var ot=Ne.alternate,dt=ot!==null&&ot.memoizedState!==null||fn;ot=wo;var Rt=fn;if(wo=Ze,(fn=dt)&&!Rt)for(ur=Ne;ur!==null;)Ze=ur,dt=Ze.child,Ze.tag===22&&Ze.memoizedState!==null?Eu(Ne):dt!==null?(dt.return=Ze,ur=dt):Eu(Ne);for(;je!==null;)ur=je,xu(je),je=je.sibling;ur=Ne,wo=ot,fn=Rt}bu(a)}else Ne.subtreeFlags&8772&&je!==null?(je.return=Ne,ur=je):bu(a)}}function bu(a){for(;ur!==null;){var f=ur;if(f.flags&8772){var _e=f.alternate;try{if(f.flags&8772)switch(f.tag){case 0:case 11:case 15:fn||xo(5,f);break;case 1:var Me=f.stateNode;if(f.flags&4&&!fn)if(_e===null)Me.componentDidMount();else{var Ne=f.elementType===f.type?_e.memoizedProps:Bn(f.type,_e.memoizedProps);Me.componentDidUpdate(Ne,_e.memoizedState,Me.__reactInternalSnapshotBeforeUpdate)}var je=f.updateQueue;je!==null&&Sc(f,je,Me);break;case 3:var Ze=f.updateQueue;if(Ze!==null){if(_e=null,f.child!==null)switch(f.child.tag){case 5:_e=f.child.stateNode;break;case 1:_e=f.child.stateNode}Sc(f,Ze,_e)}break;case 5:var ot=f.stateNode;if(_e===null&&f.flags&4){_e=ot;var dt=f.memoizedProps;switch(f.type){case"button":case"input":case"select":case"textarea":dt.autoFocus&&_e.focus();break;case"img":dt.src&&(_e.src=dt.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(f.memoizedState===null){var Rt=f.alternate;if(Rt!==null){var Ut=Rt.memoizedState;if(Ut!==null){var zt=Ut.dehydrated;zt!==null&&as(zt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(e(163))}fn||f.flags&512&&Ga(f)}catch(jt){Xr(f,f.return,jt)}}if(f===a){ur=null;break}if(_e=f.sibling,_e!==null){_e.return=f.return,ur=_e;break}ur=f.return}}function Su(a){for(;ur!==null;){var f=ur;if(f===a){ur=null;break}var _e=f.sibling;if(_e!==null){_e.return=f.return,ur=_e;break}ur=f.return}}function Eu(a){for(;ur!==null;){var f=ur;try{switch(f.tag){case 0:case 11:case 15:var _e=f.return;try{xo(4,f)}catch(dt){Xr(f,_e,dt)}break;case 1:var Me=f.stateNode;if(typeof Me.componentDidMount=="function"){var Ne=f.return;try{Me.componentDidMount()}catch(dt){Xr(f,Ne,dt)}}var je=f.return;try{Ga(f)}catch(dt){Xr(f,je,dt)}break;case 5:var Ze=f.return;try{Ga(f)}catch(dt){Xr(f,Ze,dt)}}}catch(dt){Xr(f,f.return,dt)}if(f===a){ur=null;break}var ot=f.sibling;if(ot!==null){ot.return=f.return,ur=ot;break}ur=f.return}}var of=Math.ceil,bo=ke.ReactCurrentDispatcher,Qa=ke.ReactCurrentOwner,Dn=ke.ReactCurrentBatchConfig,Or=0,sn=null,Qr=null,ln=0,kn=0,Zi=oi(0),tn=0,Ms=null,Ri=0,So=0,el=0,As=null,wn=null,tl=0,Ji=1/0,Jn=null,Eo=!1,rl=null,di=null,Co=!1,pi=null,ko=0,Ds=0,nl=null,Ro=-1,Po=0;function gn(){return Or&6?tr():Ro!==-1?Ro:Ro=tr()}function gi(a){return a.mode&1?Or&2&&ln!==0?ln&-ln:Hh.transition!==null?(Po===0&&(Po=Is()),Po):(a=Lr,a!==0||(a=window.event,a=a===void 0?16:kl(a.type)),a):1}function Nn(a,f,_e,Me){if(50<Ds)throw Ds=0,nl=null,Error(e(185));yi(a,_e,Me),(!(Or&2)||a!==sn)&&(a===sn&&(!(Or&2)&&(So|=_e),tn===4&&mi(a,ln)),xn(a,Me),_e===1&&Or===0&&!(f.mode&1)&&(Ji=tr()+500,to&&ci()))}function xn(a,f){var _e=a.callbackNode;Zr(a,f);var Me=rn(a,a===sn?ln:0);if(Me===0)_e!==null&&Cr(_e),a.callbackNode=null,a.callbackPriority=0;else if(f=Me&-Me,a.callbackPriority!==f){if(_e!=null&&Cr(_e),f===1)a.tag===0?Uh(ku.bind(null,a)):hc(ku.bind(null,a)),$h(function(){!(Or&6)&&ci()}),_e=null;else{switch(Ls(Me)){case 1:_e=gt;break;case 4:_e=$t;break;case 16:_e=nr;break;case 536870912:_e=Nr;break;default:_e=nr}_e=Iu(_e,Cu.bind(null,a))}a.callbackPriority=f,a.callbackNode=_e}}function Cu(a,f){if(Ro=-1,Po=0,Or&6)throw Error(e(327));var _e=a.callbackNode;if(Qi()&&a.callbackNode!==_e)return null;var Me=rn(a,a===sn?ln:0);if(Me===0)return null;if(Me&30||Me&a.expiredLanes||f)f=To(a,Me);else{f=Me;var Ne=Or;Or|=2;var je=Pu();(sn!==a||ln!==f)&&(Jn=null,Ji=tr()+500,Ti(a,f));do try{cf();break}catch(ot){Ru(a,ot)}while(!0);xa(),bo.current=je,Or=Ne,Qr!==null?f=0:(sn=null,ln=0,f=tn)}if(f!==0){if(f===2&&(Ne=es(a),Ne!==0&&(Me=Ne,f=il(a,Ne))),f===1)throw _e=Ms,Ti(a,0),mi(a,Me),xn(a,tr()),_e;if(f===6)mi(a,Me);else{if(Ne=a.current.alternate,!(Me&30)&&!af(Ne)&&(f=To(a,Me),f===2&&(je=es(a),je!==0&&(Me=je,f=il(a,je))),f===1))throw _e=Ms,Ti(a,0),mi(a,Me),xn(a,tr()),_e;switch(a.finishedWork=Ne,a.finishedLanes=Me,f){case 0:case 1:throw Error(e(345));case 2:Mi(a,wn,Jn);break;case 3:if(mi(a,Me),(Me&130023424)===Me&&(f=tl+500-tr(),10<f)){if(rn(a,0)!==0)break;if(Ne=a.suspendedLanes,(Ne&Me)!==Me){gn(),a.pingedLanes|=a.suspendedLanes&Ne;break}a.timeoutHandle=ua(Mi.bind(null,a,wn,Jn),f);break}Mi(a,wn,Jn);break;case 4:if(mi(a,Me),(Me&4194240)===Me)break;for(f=a.eventTimes,Ne=-1;0<Me;){var Ze=31-Fr(Me);je=1<<Ze,Ze=f[Ze],Ze>Ne&&(Ne=Ze),Me&=~je}if(Me=Ne,Me=tr()-Me,Me=(120>Me?120:480>Me?480:1080>Me?1080:1920>Me?1920:3e3>Me?3e3:4320>Me?4320:1960*of(Me/1960))-Me,10<Me){a.timeoutHandle=ua(Mi.bind(null,a,wn,Jn),Me);break}Mi(a,wn,Jn);break;case 5:Mi(a,wn,Jn);break;default:throw Error(e(329))}}}return xn(a,tr()),a.callbackNode===_e?Cu.bind(null,a):null}function il(a,f){var _e=As;return a.current.memoizedState.isDehydrated&&(Ti(a,f).flags|=256),a=To(a,f),a!==2&&(f=wn,wn=_e,f!==null&&sl(f)),a}function sl(a){wn===null?wn=a:wn.push.apply(wn,a)}function af(a){for(var f=a;;){if(f.flags&16384){var _e=f.updateQueue;if(_e!==null&&(_e=_e.stores,_e!==null))for(var Me=0;Me<_e.length;Me++){var Ne=_e[Me],je=Ne.getSnapshot;Ne=Ne.value;try{if(!In(je(),Ne))return!1}catch{return!1}}}if(_e=f.child,f.subtreeFlags&16384&&_e!==null)_e.return=f,f=_e;else{if(f===a)break;for(;f.sibling===null;){if(f.return===null||f.return===a)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function mi(a,f){for(f&=~el,f&=~So,a.suspendedLanes|=f,a.pingedLanes&=~f,a=a.expirationTimes;0<f;){var _e=31-Fr(f),Me=1<<_e;a[_e]=-1,f&=~Me}}function ku(a){if(Or&6)throw Error(e(327));Qi();var f=rn(a,0);if(!(f&1))return xn(a,tr()),null;var _e=To(a,f);if(a.tag!==0&&_e===2){var Me=es(a);Me!==0&&(f=Me,_e=il(a,Me))}if(_e===1)throw _e=Ms,Ti(a,0),mi(a,f),xn(a,tr()),_e;if(_e===6)throw Error(e(345));return a.finishedWork=a.current.alternate,a.finishedLanes=f,Mi(a,wn,Jn),xn(a,tr()),null}function ol(a,f){var _e=Or;Or|=1;try{return a(f)}finally{Or=_e,Or===0&&(Ji=tr()+500,to&&ci())}}function Pi(a){pi!==null&&pi.tag===0&&!(Or&6)&&Qi();var f=Or;Or|=1;var _e=Dn.transition,Me=Lr;try{if(Dn.transition=null,Lr=1,a)return a()}finally{Lr=Me,Dn.transition=_e,Or=f,!(Or&6)&&ci()}}function al(){kn=Zi.current,qr(Zi)}function Ti(a,f){a.finishedWork=null,a.finishedLanes=0;var _e=a.timeoutHandle;if(_e!==-1&&(a.timeoutHandle=-1,Bh(_e)),Qr!==null)for(_e=Qr.return;_e!==null;){var Me=_e;switch(ma(Me),Me.tag){case 1:Me=Me.type.childContextTypes,Me!=null&&Qs();break;case 3:Yi(),qr(vn),qr(cn),Ta();break;case 5:Ra(Me);break;case 4:Yi();break;case 13:qr(Vr);break;case 19:qr(Vr);break;case 10:ba(Me.type._context);break;case 22:case 23:al()}_e=_e.return}if(sn=a,Qr=a=vi(a.current,null),ln=kn=f,tn=0,Ms=null,el=So=Ri=0,wn=As=null,Ei!==null){for(f=0;f<Ei.length;f++)if(_e=Ei[f],Me=_e.interleaved,Me!==null){_e.interleaved=null;var Ne=Me.next,je=_e.pending;if(je!==null){var Ze=je.next;je.next=Ne,Me.next=Ze}_e.pending=Me}Ei=null}return a}function Ru(a,f){do{var _e=Qr;try{if(xa(),ho.current=mo,fo){for(var Me=Yr.memoizedState;Me!==null;){var Ne=Me.queue;Ne!==null&&(Ne.pending=null),Me=Me.next}fo=!1}if(ki=0,nn=en=Yr=null,Es=!1,Cs=0,Qa.current=null,_e===null||_e.return===null){tn=1,Ms=f,Qr=null;break}e:{var je=a,Ze=_e.return,ot=_e,dt=f;if(f=ln,ot.flags|=32768,dt!==null&&typeof dt=="object"&&typeof dt.then=="function"){var Rt=dt,Ut=ot,zt=Ut.tag;if(!(Ut.mode&1)&&(zt===0||zt===11||zt===15)){var jt=Ut.alternate;jt?(Ut.updateQueue=jt.updateQueue,Ut.memoizedState=jt.memoizedState,Ut.lanes=jt.lanes):(Ut.updateQueue=null,Ut.memoizedState=null)}var or=Jc(Ze);if(or!==null){or.flags&=-257,Qc(or,Ze,ot,je,f),or.mode&1&&Zc(je,Rt,f),f=or,dt=Rt;var dr=f.updateQueue;if(dr===null){var mr=new Set;mr.add(dt),f.updateQueue=mr}else dr.add(dt);break e}else{if(!(f&1)){Zc(je,Rt,f),ll();break e}dt=Error(e(426))}}else if(Wr&&ot.mode&1){var Jr=Jc(Ze);if(Jr!==null){!(Jr.flags&65536)&&(Jr.flags|=256),Qc(Jr,Ze,ot,je,f),ya(Xi(dt,ot));break e}}je=dt=Xi(dt,ot),tn!==4&&(tn=2),As===null?As=[je]:As.push(je),je=Ze;do{switch(je.tag){case 3:je.flags|=65536,f&=-f,je.lanes|=f;var xt=Xc(je,dt,f);bc(je,xt);break e;case 1:ot=dt;var mt=je.type,Et=je.stateNode;if(!(je.flags&128)&&(typeof mt.getDerivedStateFromError=="function"||Et!==null&&typeof Et.componentDidCatch=="function"&&(di===null||!di.has(Et)))){je.flags|=65536,f&=-f,je.lanes|=f;var Wt=Gc(je,ot,f);bc(je,Wt);break e}}je=je.return}while(je!==null)}Mu(_e)}catch(vr){f=vr,Qr===_e&&_e!==null&&(Qr=_e=_e.return);continue}break}while(!0)}function Pu(){var a=bo.current;return bo.current=mo,a===null?mo:a}function ll(){(tn===0||tn===3||tn===2)&&(tn=4),sn===null||!(Ri&268435455)&&!(So&268435455)||mi(sn,ln)}function To(a,f){var _e=Or;Or|=2;var Me=Pu();(sn!==a||ln!==f)&&(Jn=null,Ti(a,f));do try{lf();break}catch(Ne){Ru(a,Ne)}while(!0);if(xa(),Or=_e,bo.current=Me,Qr!==null)throw Error(e(261));return sn=null,ln=0,tn}function lf(){for(;Qr!==null;)Tu(Qr)}function cf(){for(;Qr!==null&&!Br();)Tu(Qr)}function Tu(a){var f=Ou(a.alternate,a,kn);a.memoizedProps=a.pendingProps,f===null?Mu(a):Qr=f,Qa.current=null}function Mu(a){var f=a;do{var _e=f.alternate;if(a=f.return,f.flags&32768){if(_e=tf(_e,f),_e!==null){_e.flags&=32767,Qr=_e;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{tn=6,Qr=null;return}}else if(_e=ef(_e,f,kn),_e!==null){Qr=_e;return}if(f=f.sibling,f!==null){Qr=f;return}Qr=f=a}while(f!==null);tn===0&&(tn=5)}function Mi(a,f,_e){var Me=Lr,Ne=Dn.transition;try{Dn.transition=null,Lr=1,uf(a,f,_e,Me)}finally{Dn.transition=Ne,Lr=Me}return null}function uf(a,f,_e,Me){do Qi();while(pi!==null);if(Or&6)throw Error(e(327));_e=a.finishedWork;var Ne=a.finishedLanes;if(_e===null)return null;if(a.finishedWork=null,a.finishedLanes=0,_e===a.current)throw Error(e(177));a.callbackNode=null,a.callbackPriority=0;var je=_e.lanes|_e.childLanes;if(No(a,je),a===sn&&(Qr=sn=null,ln=0),!(_e.subtreeFlags&2064)&&!(_e.flags&2064)||Co||(Co=!0,Iu(nr,function(){return Qi(),null})),je=(_e.flags&15990)!==0,_e.subtreeFlags&15990||je){je=Dn.transition,Dn.transition=null;var Ze=Lr;Lr=1;var ot=Or;Or|=4,Qa.current=null,nf(a,_e),wu(_e,a),Th(la),Ns=!!aa,la=aa=null,a.current=_e,sf(_e),gr(),Or=ot,Lr=Ze,Dn.transition=je}else a.current=_e;if(Co&&(Co=!1,pi=a,ko=Ne),je=a.pendingLanes,je===0&&(di=null),Ur(_e.stateNode),xn(a,tr()),f!==null)for(Me=a.onRecoverableError,_e=0;_e<f.length;_e++)Ne=f[_e],Me(Ne.value,{componentStack:Ne.stack,digest:Ne.digest});if(Eo)throw Eo=!1,a=rl,rl=null,a;return ko&1&&a.tag!==0&&Qi(),je=a.pendingLanes,je&1?a===nl?Ds++:(Ds=0,nl=a):Ds=0,ci(),null}function Qi(){if(pi!==null){var a=Ls(ko),f=Dn.transition,_e=Lr;try{if(Dn.transition=null,Lr=16>a?16:a,pi===null)var Me=!1;else{if(a=pi,pi=null,ko=0,Or&6)throw Error(e(331));var Ne=Or;for(Or|=4,ur=a.current;ur!==null;){var je=ur,Ze=je.child;if(ur.flags&16){var ot=je.deletions;if(ot!==null){for(var dt=0;dt<ot.length;dt++){var Rt=ot[dt];for(ur=Rt;ur!==null;){var Ut=ur;switch(Ut.tag){case 0:case 11:case 15:Ts(8,Ut,je)}var zt=Ut.child;if(zt!==null)zt.return=Ut,ur=zt;else for(;ur!==null;){Ut=ur;var jt=Ut.sibling,or=Ut.return;if(gu(Ut),Ut===Rt){ur=null;break}if(jt!==null){jt.return=or,ur=jt;break}ur=or}}}var dr=je.alternate;if(dr!==null){var mr=dr.child;if(mr!==null){dr.child=null;do{var Jr=mr.sibling;mr.sibling=null,mr=Jr}while(mr!==null)}}ur=je}}if(je.subtreeFlags&2064&&Ze!==null)Ze.return=je,ur=Ze;else e:for(;ur!==null;){if(je=ur,je.flags&2048)switch(je.tag){case 0:case 11:case 15:Ts(9,je,je.return)}var xt=je.sibling;if(xt!==null){xt.return=je.return,ur=xt;break e}ur=je.return}}var mt=a.current;for(ur=mt;ur!==null;){Ze=ur;var Et=Ze.child;if(Ze.subtreeFlags&2064&&Et!==null)Et.return=Ze,ur=Et;else e:for(Ze=mt;ur!==null;){if(ot=ur,ot.flags&2048)try{switch(ot.tag){case 0:case 11:case 15:xo(9,ot)}}catch(vr){Xr(ot,ot.return,vr)}if(ot===Ze){ur=null;break e}var Wt=ot.sibling;if(Wt!==null){Wt.return=ot.return,ur=Wt;break e}ur=ot.return}}if(Or=Ne,ci(),Ar&&typeof Ar.onPostCommitFiberRoot=="function")try{Ar.onPostCommitFiberRoot(Dr,a)}catch{}Me=!0}return Me}finally{Lr=_e,Dn.transition=f}}return!1}function Au(a,f,_e){f=Xi(_e,f),f=Xc(a,f,1),a=hi(a,f,1),f=gn(),a!==null&&(yi(a,1,f),xn(a,f))}function Xr(a,f,_e){if(a.tag===3)Au(a,a,_e);else for(;f!==null;){if(f.tag===3){Au(f,a,_e);break}else if(f.tag===1){var Me=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof Me.componentDidCatch=="function"&&(di===null||!di.has(Me))){a=Xi(_e,a),a=Gc(f,a,1),f=hi(f,a,1),a=gn(),f!==null&&(yi(f,1,a),xn(f,a));break}}f=f.return}}function hf(a,f,_e){var Me=a.pingCache;Me!==null&&Me.delete(f),f=gn(),a.pingedLanes|=a.suspendedLanes&_e,sn===a&&(ln&_e)===_e&&(tn===4||tn===3&&(ln&130023424)===ln&&500>tr()-tl?Ti(a,0):el|=_e),xn(a,f)}function Du(a,f){f===0&&(a.mode&1?(f=Rr,Rr<<=1,!(Rr&130023424)&&(Rr=4194304)):f=1);var _e=gn();a=Xn(a,f),a!==null&&(yi(a,f,_e),xn(a,_e))}function ff(a){var f=a.memoizedState,_e=0;f!==null&&(_e=f.retryLane),Du(a,_e)}function df(a,f){var _e=0;switch(a.tag){case 13:var Me=a.stateNode,Ne=a.memoizedState;Ne!==null&&(_e=Ne.retryLane);break;case 19:Me=a.stateNode;break;default:throw Error(e(314))}Me!==null&&Me.delete(f),Du(a,_e)}var Ou;Ou=function(a,f,_e){if(a!==null)if(a.memoizedProps!==f.pendingProps||vn.current)yn=!0;else{if(!(a.lanes&_e)&&!(f.flags&128))return yn=!1,Qh(a,f,_e);yn=!!(a.flags&131072)}else yn=!1,Wr&&f.flags&1048576&&fc(f,no,f.index);switch(f.lanes=0,f.tag){case 2:var Me=f.type;yo(a,f),a=f.pendingProps;var Ne=Ui(f,cn.current);Vi(f,_e),Ne=Da(null,f,Me,a,Ne,_e);var je=Oa();return f.flags|=1,typeof Ne=="object"&&Ne!==null&&typeof Ne.render=="function"&&Ne.$$typeof===void 0?(f.tag=1,f.memoizedState=null,f.updateQueue=null,_n(Me)?(je=!0,eo(f)):je=!1,f.memoizedState=Ne.state!==null&&Ne.state!==void 0?Ne.state:null,Ca(f),Ne.updater=vo,f.stateNode=Ne,Ne._reactInternals=f,Na(f,Me,a,_e),f=za(null,f,Me,!0,je,_e)):(f.tag=0,Wr&&je&&ga(f),pn(null,f,Ne,_e),f=f.child),f;case 16:Me=f.elementType;e:{switch(yo(a,f),a=f.pendingProps,Ne=Me._init,Me=Ne(Me._payload),f.type=Me,Ne=f.tag=gf(Me),a=Bn(Me,a),Ne){case 0:f=Ha(null,f,Me,a,_e);break e;case 1:f=su(null,f,Me,a,_e);break e;case 11:f=eu(null,f,Me,a,_e);break e;case 14:f=tu(null,f,Me,Bn(Me.type,a),_e);break e}throw Error(e(306,Me,""))}return f;case 0:return Me=f.type,Ne=f.pendingProps,Ne=f.elementType===Me?Ne:Bn(Me,Ne),Ha(a,f,Me,Ne,_e);case 1:return Me=f.type,Ne=f.pendingProps,Ne=f.elementType===Me?Ne:Bn(Me,Ne),su(a,f,Me,Ne,_e);case 3:e:{if(ou(f),a===null)throw Error(e(387));Me=f.pendingProps,je=f.memoizedState,Ne=je.element,xc(a,f),co(f,Me,null,_e);var Ze=f.memoizedState;if(Me=Ze.element,je.isDehydrated)if(je={element:Me,isDehydrated:!1,cache:Ze.cache,pendingSuspenseBoundaries:Ze.pendingSuspenseBoundaries,transitions:Ze.transitions},f.updateQueue.baseState=je,f.memoizedState=je,f.flags&256){Ne=Xi(Error(e(423)),f),f=au(a,f,Me,_e,Ne);break e}else if(Me!==Ne){Ne=Xi(Error(e(424)),f),f=au(a,f,Me,_e,Ne);break e}else for(Cn=si(f.stateNode.containerInfo.firstChild),En=f,Wr=!0,Ln=null,_e=yc(f,null,Me,_e),f.child=_e;_e;)_e.flags=_e.flags&-3|4096,_e=_e.sibling;else{if(qi(),Me===Ne){f=Zn(a,f,_e);break e}pn(a,f,Me,_e)}f=f.child}return f;case 5:return Ec(f),a===null&&_a(f),Me=f.type,Ne=f.pendingProps,je=a!==null?a.memoizedProps:null,Ze=Ne.children,ca(Me,Ne)?Ze=null:je!==null&&ca(Me,je)&&(f.flags|=32),iu(a,f),pn(a,f,Ze,_e),f.child;case 6:return a===null&&_a(f),null;case 13:return lu(a,f,_e);case 4:return ka(f,f.stateNode.containerInfo),Me=f.pendingProps,a===null?f.child=Wi(f,null,Me,_e):pn(a,f,Me,_e),f.child;case 11:return Me=f.type,Ne=f.pendingProps,Ne=f.elementType===Me?Ne:Bn(Me,Ne),eu(a,f,Me,Ne,_e);case 7:return pn(a,f,f.pendingProps,_e),f.child;case 8:return pn(a,f,f.pendingProps.children,_e),f.child;case 12:return pn(a,f,f.pendingProps.children,_e),f.child;case 10:e:{if(Me=f.type._context,Ne=f.pendingProps,je=f.memoizedProps,Ze=Ne.value,Hr(oo,Me._currentValue),Me._currentValue=Ze,je!==null)if(In(je.value,Ze)){if(je.children===Ne.children&&!vn.current){f=Zn(a,f,_e);break e}}else for(je=f.child,je!==null&&(je.return=f);je!==null;){var ot=je.dependencies;if(ot!==null){Ze=je.child;for(var dt=ot.firstContext;dt!==null;){if(dt.context===Me){if(je.tag===1){dt=Gn(-1,_e&-_e),dt.tag=2;var Rt=je.updateQueue;if(Rt!==null){Rt=Rt.shared;var Ut=Rt.pending;Ut===null?dt.next=dt:(dt.next=Ut.next,Ut.next=dt),Rt.pending=dt}}je.lanes|=_e,dt=je.alternate,dt!==null&&(dt.lanes|=_e),Sa(je.return,_e,f),ot.lanes|=_e;break}dt=dt.next}}else if(je.tag===10)Ze=je.type===f.type?null:je.child;else if(je.tag===18){if(Ze=je.return,Ze===null)throw Error(e(341));Ze.lanes|=_e,ot=Ze.alternate,ot!==null&&(ot.lanes|=_e),Sa(Ze,_e,f),Ze=je.sibling}else Ze=je.child;if(Ze!==null)Ze.return=je;else for(Ze=je;Ze!==null;){if(Ze===f){Ze=null;break}if(je=Ze.sibling,je!==null){je.return=Ze.return,Ze=je;break}Ze=Ze.return}je=Ze}pn(a,f,Ne.children,_e),f=f.child}return f;case 9:return Ne=f.type,Me=f.pendingProps.children,Vi(f,_e),Ne=Mn(Ne),Me=Me(Ne),f.flags|=1,pn(a,f,Me,_e),f.child;case 14:return Me=f.type,Ne=Bn(Me,f.pendingProps),Ne=Bn(Me.type,Ne),tu(a,f,Me,Ne,_e);case 15:return ru(a,f,f.type,f.pendingProps,_e);case 17:return Me=f.type,Ne=f.pendingProps,Ne=f.elementType===Me?Ne:Bn(Me,Ne),yo(a,f),f.tag=1,_n(Me)?(a=!0,eo(f)):a=!1,Vi(f,_e),Vc(f,Me,Ne),Na(f,Me,Ne,_e),za(null,f,Me,!0,a,_e);case 19:return uu(a,f,_e);case 22:return nu(a,f,_e)}throw Error(e(156,f.tag))};function Iu(a,f){return xr(a,f)}function pf(a,f,_e,Me){this.tag=a,this.key=_e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=Me,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function On(a,f,_e,Me){return new pf(a,f,_e,Me)}function cl(a){return a=a.prototype,!(!a||!a.isReactComponent)}function gf(a){if(typeof a=="function")return cl(a)?1:0;if(a!=null){if(a=a.$$typeof,a===Ye)return 11;if(a===lt)return 14}return 2}function vi(a,f){var _e=a.alternate;return _e===null?(_e=On(a.tag,f,a.key,a.mode),_e.elementType=a.elementType,_e.type=a.type,_e.stateNode=a.stateNode,_e.alternate=a,a.alternate=_e):(_e.pendingProps=f,_e.type=a.type,_e.flags=0,_e.subtreeFlags=0,_e.deletions=null),_e.flags=a.flags&14680064,_e.childLanes=a.childLanes,_e.lanes=a.lanes,_e.child=a.child,_e.memoizedProps=a.memoizedProps,_e.memoizedState=a.memoizedState,_e.updateQueue=a.updateQueue,f=a.dependencies,_e.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},_e.sibling=a.sibling,_e.index=a.index,_e.ref=a.ref,_e}function Mo(a,f,_e,Me,Ne,je){var Ze=2;if(Me=a,typeof a=="function")cl(a)&&(Ze=1);else if(typeof a=="string")Ze=5;else e:switch(a){case Le:return Ai(_e.children,Ne,je,f);case Ae:Ze=8,Ne|=8;break;case Ie:return a=On(12,_e,f,Ne|2),a.elementType=Ie,a.lanes=je,a;case Xe:return a=On(13,_e,f,Ne),a.elementType=Xe,a.lanes=je,a;case tt:return a=On(19,_e,f,Ne),a.elementType=tt,a.lanes=je,a;case bt:return Ao(_e,Ne,je,f);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case Ue:Ze=10;break e;case ze:Ze=9;break e;case Ye:Ze=11;break e;case lt:Ze=14;break e;case _t:Ze=16,Me=null;break e}throw Error(e(130,a==null?a:typeof a,""))}return f=On(Ze,_e,f,Ne),f.elementType=a,f.type=Me,f.lanes=je,f}function Ai(a,f,_e,Me){return a=On(7,a,Me,f),a.lanes=_e,a}function Ao(a,f,_e,Me){return a=On(22,a,Me,f),a.elementType=bt,a.lanes=_e,a.stateNode={isHidden:!1},a}function ul(a,f,_e){return a=On(6,a,null,f),a.lanes=_e,a}function hl(a,f,_e){return f=On(4,a.children!==null?a.children:[],a.key,f),f.lanes=_e,f.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},f}function mf(a,f,_e,Me,Ne){this.tag=f,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ts(0),this.expirationTimes=ts(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ts(0),this.identifierPrefix=Me,this.onRecoverableError=Ne,this.mutableSourceEagerHydrationData=null}function fl(a,f,_e,Me,Ne,je,Ze,ot,dt){return a=new mf(a,f,_e,ot,dt),f===1?(f=1,je===!0&&(f|=8)):f=0,je=On(3,null,null,f),a.current=je,je.stateNode=a,je.memoizedState={element:Me,isDehydrated:_e,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ca(je),a}function vf(a,f,_e){var Me=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Oe,key:Me==null?null:""+Me,children:a,containerInfo:f,implementation:_e}}function Lu(a){if(!a)return ai;a=a._reactInternals;e:{if(wt(a)!==a||a.tag!==1)throw Error(e(170));var f=a;do{switch(f.tag){case 3:f=f.stateNode.context;break e;case 1:if(_n(f.type)){f=f.stateNode.__reactInternalMemoizedMergedChildContext;break e}}f=f.return}while(f!==null);throw Error(e(171))}if(a.tag===1){var _e=a.type;if(_n(_e))return cc(a,_e,f)}return f}function Bu(a,f,_e,Me,Ne,je,Ze,ot,dt){return a=fl(_e,Me,!0,a,Ne,je,Ze,ot,dt),a.context=Lu(null),_e=a.current,Me=gn(),Ne=gi(_e),je=Gn(Me,Ne),je.callback=f??null,hi(_e,je,Ne),a.current.lanes=Ne,yi(a,Ne,Me),xn(a,Me),a}function Do(a,f,_e,Me){var Ne=f.current,je=gn(),Ze=gi(Ne);return _e=Lu(_e),f.context===null?f.context=_e:f.pendingContext=_e,f=Gn(je,Ze),f.payload={element:a},Me=Me===void 0?null:Me,Me!==null&&(f.callback=Me),a=hi(Ne,f,Ze),a!==null&&(Nn(a,Ne,Ze,je),lo(a,Ne,Ze)),Ze}function Oo(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function $u(a,f){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var _e=a.retryLane;a.retryLane=_e!==0&&_e<f?_e:f}}function dl(a,f){$u(a,f),(a=a.alternate)&&$u(a,f)}function _f(){return null}var Fu=typeof reportError=="function"?reportError:function(a){console.error(a)};function pl(a){this._internalRoot=a}Io.prototype.render=pl.prototype.render=function(a){var f=this._internalRoot;if(f===null)throw Error(e(409));Do(a,f,null,null)},Io.prototype.unmount=pl.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var f=a.containerInfo;Pi(function(){Do(null,a,null,null)}),f[Wn]=null}};function Io(a){this._internalRoot=a}Io.prototype.unstable_scheduleHydration=function(a){if(a){var f=xl();a={blockedOn:null,target:a,priority:f};for(var _e=0;_e<ri.length&&f!==0&&f<ri[_e].priority;_e++);ri.splice(_e,0,a),_e===0&&El(a)}};function gl(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function Lo(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function Nu(){}function yf(a,f,_e,Me,Ne){if(Ne){if(typeof Me=="function"){var je=Me;Me=function(){var Rt=Oo(Ze);je.call(Rt)}}var Ze=Bu(f,Me,a,0,null,!1,!1,"",Nu);return a._reactRootContainer=Ze,a[Wn]=Ze.current,ms(a.nodeType===8?a.parentNode:a),Pi(),Ze}for(;Ne=a.lastChild;)a.removeChild(Ne);if(typeof Me=="function"){var ot=Me;Me=function(){var Rt=Oo(dt);ot.call(Rt)}}var dt=fl(a,0,!1,null,null,!1,!1,"",Nu);return a._reactRootContainer=dt,a[Wn]=dt.current,ms(a.nodeType===8?a.parentNode:a),Pi(function(){Do(f,dt,_e,Me)}),dt}function Bo(a,f,_e,Me,Ne){var je=_e._reactRootContainer;if(je){var Ze=je;if(typeof Ne=="function"){var ot=Ne;Ne=function(){var dt=Oo(Ze);ot.call(dt)}}Do(f,Ze,a,Ne)}else Ze=yf(_e,f,a,Ne,Me);return Oo(Ze)}Bs=function(a){switch(a.tag){case 3:var f=a.stateNode;if(f.current.memoizedState.isDehydrated){var _e=Kr(f.pendingLanes);_e!==0&&(rs(f,_e|1),xn(f,tr()),!(Or&6)&&(Ji=tr()+500,ci()))}break;case 13:Pi(function(){var Me=Xn(a,1);if(Me!==null){var Ne=gn();Nn(Me,a,1,Ne)}}),dl(a,1)}},jo=function(a){if(a.tag===13){var f=Xn(a,134217728);if(f!==null){var _e=gn();Nn(f,a,134217728,_e)}dl(a,134217728)}},wl=function(a){if(a.tag===13){var f=gi(a),_e=Xn(a,f);if(_e!==null){var Me=gn();Nn(_e,a,f,Me)}dl(a,f)}},xl=function(){return Lr},bl=function(a,f){var _e=Lr;try{return Lr=a,f()}finally{Lr=_e}},wr=function(a,f,_e){switch(f){case"input":if(Lt(a,_e),f=_e.name,_e.type==="radio"&&f!=null){for(_e=a;_e.parentNode;)_e=_e.parentNode;for(_e=_e.querySelectorAll("input[name="+JSON.stringify(""+f)+'][type="radio"]'),f=0;f<_e.length;f++){var Me=_e[f];if(Me!==a&&Me.form===a.form){var Ne=Js(Me);if(!Ne)throw Error(e(90));Ct(Me),Lt(Me,Ne)}}}break;case"textarea":_r(a,_e);break;case"select":f=_e.value,f!=null&&Qt(a,!!_e.multiple,f,!1)}},jr=ol,Be=Pi;var wf={usingClientEntryPoint:!1,Events:[ys,Ni,Js,Pr,Tr,ol]},Os={findFiberByHostInstance:wi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xf={bundleType:Os.bundleType,version:Os.version,rendererPackageName:Os.rendererPackageName,rendererConfig:Os.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ke.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=Nt(a),a===null?null:a.stateNode},findFiberByHostInstance:Os.findFiberByHostInstance||_f,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $o=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$o.isDisabled&&$o.supportsFiber)try{Dr=$o.inject(xf),Ar=$o}catch{}}return reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wf,reactDom_production_min.createPortal=function(a,f){var _e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gl(f))throw Error(e(200));return vf(a,f,null,_e)},reactDom_production_min.createRoot=function(a,f){if(!gl(a))throw Error(e(299));var _e=!1,Me="",Ne=Fu;return f!=null&&(f.unstable_strictMode===!0&&(_e=!0),f.identifierPrefix!==void 0&&(Me=f.identifierPrefix),f.onRecoverableError!==void 0&&(Ne=f.onRecoverableError)),f=fl(a,1,!1,null,null,_e,!1,Me,Ne),a[Wn]=f.current,ms(a.nodeType===8?a.parentNode:a),new pl(f)},reactDom_production_min.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var f=a._reactInternals;if(f===void 0)throw typeof a.render=="function"?Error(e(188)):(a=Object.keys(a).join(","),Error(e(268,a)));return a=Nt(f),a=a===null?null:a.stateNode,a},reactDom_production_min.flushSync=function(a){return Pi(a)},reactDom_production_min.hydrate=function(a,f,_e){if(!Lo(f))throw Error(e(200));return Bo(null,a,f,!0,_e)},reactDom_production_min.hydrateRoot=function(a,f,_e){if(!gl(a))throw Error(e(405));var Me=_e!=null&&_e.hydratedSources||null,Ne=!1,je="",Ze=Fu;if(_e!=null&&(_e.unstable_strictMode===!0&&(Ne=!0),_e.identifierPrefix!==void 0&&(je=_e.identifierPrefix),_e.onRecoverableError!==void 0&&(Ze=_e.onRecoverableError)),f=Bu(f,null,a,1,_e??null,Ne,!1,je,Ze),a[Wn]=f.current,ms(a),Me)for(a=0;a<Me.length;a++)_e=Me[a],Ne=_e._getVersion,Ne=Ne(_e._source),f.mutableSourceEagerHydrationData==null?f.mutableSourceEagerHydrationData=[_e,Ne]:f.mutableSourceEagerHydrationData.push(_e,Ne);return new Io(f)},reactDom_production_min.render=function(a,f,_e){if(!Lo(f))throw Error(e(200));return Bo(null,a,f,!1,_e)},reactDom_production_min.unmountComponentAtNode=function(a){if(!Lo(a))throw Error(e(40));return a._reactRootContainer?(Pi(function(){Bo(null,null,a,!1,function(){a._reactRootContainer=null,a[Wn]=null})}),!0):!1},reactDom_production_min.unstable_batchedUpdates=ol,reactDom_production_min.unstable_renderSubtreeIntoContainer=function(a,f,_e,Me){if(!Lo(_e))throw Error(e(200));if(a==null||a._reactInternals===void 0)throw Error(e(38));return Bo(a,f,_e,!1,Me)},reactDom_production_min.version="18.3.1-next-f1338f8080-20240426",reactDom_production_min}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(n){console.error(n)}}return r(),reactDom.exports=requireReactDom_production_min(),reactDom.exports}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client;hasRequiredClient=1;var r=requireReactDom();return client.createRoot=r.createRoot,client.hydrateRoot=r.hydrateRoot,client}var clientExports=requireClient(),reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports);var dist={},hasRequiredDist;function requireDist(){if(hasRequiredDist)return dist;hasRequiredDist=1,Object.defineProperty(dist,"__esModule",{value:!0}),dist.parse=u,dist.serialize=m;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,n=/^[\u0021-\u003A\u003C-\u007E]*$/,e=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,o=(()=>{const X=function(){};return X.prototype=Object.create(null),X})();function u(X,he){const Ce=new o,Ee=X.length;if(Ee<2)return Ce;const xe=(he==null?void 0:he.decode)||y;let be=0;do{const we=X.indexOf("=",be);if(we===-1)break;const ve=X.indexOf(";",be),ke=ve===-1?Ee:ve;if(we>ke){be=X.lastIndexOf(";",we-1)+1;continue}const De=l(X,be,we),Oe=d(X,we,De),Le=X.slice(De,Oe);if(Ce[Le]===void 0){let Ae=l(X,we+1,ke),Ie=d(X,ke,Ae);const Ue=xe(X.slice(Ae,Ie));Ce[Le]=Ue}be=ke+1}while(be<Ee);return Ce}function l(X,he,Ce){do{const Ee=X.charCodeAt(he);if(Ee!==32&&Ee!==9)return he}while(++he<Ce);return Ce}function d(X,he,Ce){for(;he>Ce;){const Ee=X.charCodeAt(--he);if(Ee!==32&&Ee!==9)return he+1}return Ce}function m(X,he,Ce){const Ee=(Ce==null?void 0:Ce.encode)||encodeURIComponent;if(!r.test(X))throw new TypeError(`argument name is invalid: ${X}`);const xe=Ee(he);if(!n.test(xe))throw new TypeError(`argument val is invalid: ${he}`);let be=X+"="+xe;if(!Ce)return be;if(Ce.maxAge!==void 0){if(!Number.isInteger(Ce.maxAge))throw new TypeError(`option maxAge is invalid: ${Ce.maxAge}`);be+="; Max-Age="+Ce.maxAge}if(Ce.domain){if(!e.test(Ce.domain))throw new TypeError(`option domain is invalid: ${Ce.domain}`);be+="; Domain="+Ce.domain}if(Ce.path){if(!i.test(Ce.path))throw new TypeError(`option path is invalid: ${Ce.path}`);be+="; Path="+Ce.path}if(Ce.expires){if(!S(Ce.expires)||!Number.isFinite(Ce.expires.valueOf()))throw new TypeError(`option expires is invalid: ${Ce.expires}`);be+="; Expires="+Ce.expires.toUTCString()}if(Ce.httpOnly&&(be+="; HttpOnly"),Ce.secure&&(be+="; Secure"),Ce.partitioned&&(be+="; Partitioned"),Ce.priority)switch(typeof Ce.priority=="string"?Ce.priority.toLowerCase():void 0){case"low":be+="; Priority=Low";break;case"medium":be+="; Priority=Medium";break;case"high":be+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${Ce.priority}`)}if(Ce.sameSite)switch(typeof Ce.sameSite=="string"?Ce.sameSite.toLowerCase():Ce.sameSite){case!0:case"strict":be+="; SameSite=Strict";break;case"lax":be+="; SameSite=Lax";break;case"none":be+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${Ce.sameSite}`)}return be}function y(X){if(X.indexOf("%")===-1)return X;try{return decodeURIComponent(X)}catch{return X}}function S(X){return s.call(X)==="[object Date]"}return dist}requireDist();/**
 * react-router v7.1.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function createMemoryHistory(r={}){let{initialEntries:n=["/"],initialIndex:e,v5Compat:i=!1}=r,s;s=n.map((he,Ce)=>y(he,typeof he=="string"?null:he.state,Ce===0?"default":void 0));let o=d(e??s.length-1),u="POP",l=null;function d(he){return Math.min(Math.max(he,0),s.length-1)}function m(){return s[o]}function y(he,Ce=null,Ee){let xe=createLocation(s?m().pathname:"/",he,Ce,Ee);return warning(xe.pathname.charAt(0)==="/",`relative pathnames are not supported in memory history: ${JSON.stringify(he)}`),xe}function S(he){return typeof he=="string"?he:createPath(he)}return{get index(){return o},get action(){return u},get location(){return m()},createHref:S,createURL(he){return new URL(S(he),"http://localhost")},encodeLocation(he){let Ce=typeof he=="string"?parsePath(he):he;return{pathname:Ce.pathname||"",search:Ce.search||"",hash:Ce.hash||""}},push(he,Ce){u="PUSH";let Ee=y(he,Ce);o+=1,s.splice(o,s.length,Ee),i&&l&&l({action:u,location:Ee,delta:1})},replace(he,Ce){u="REPLACE";let Ee=y(he,Ce);s[o]=Ee,i&&l&&l({action:u,location:Ee,delta:0})},go(he){u="POP";let Ce=d(o+he),Ee=s[Ce];o=Ce,l&&l({action:u,location:Ee,delta:he})},listen(he){return l=he,()=>{l=null}}}}function invariant(r,n){if(r===!1||r===null||typeof r>"u")throw new Error(n)}function warning(r,n){if(!r){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function createKey(){return Math.random().toString(36).substring(2,10)}function createLocation(r,n,e=null,i){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof n=="string"?parsePath(n):n,state:e,key:n&&n.key||i||createKey()}}function createPath({pathname:r="/",search:n="",hash:e=""}){return n&&n!=="?"&&(r+=n.charAt(0)==="?"?n:"?"+n),e&&e!=="#"&&(r+=e.charAt(0)==="#"?e:"#"+e),r}function parsePath(r){let n={};if(r){let e=r.indexOf("#");e>=0&&(n.hash=r.substring(e),r=r.substring(0,e));let i=r.indexOf("?");i>=0&&(n.search=r.substring(i),r=r.substring(0,i)),r&&(n.pathname=r)}return n}function matchRoutes(r,n,e="/"){return matchRoutesImpl(r,n,e,!1)}function matchRoutesImpl(r,n,e,i){let s=typeof n=="string"?parsePath(n):n,o=stripBasename(s.pathname||"/",e);if(o==null)return null;let u=flattenRoutes(r);rankRouteBranches(u);let l=null;for(let d=0;l==null&&d<u.length;++d){let m=decodePath(o);l=matchRouteBranch(u[d],m,i)}return l}function flattenRoutes(r,n=[],e=[],i=""){let s=(o,u,l)=>{let d={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:u,route:o};d.relativePath.startsWith("/")&&(invariant(d.relativePath.startsWith(i),`Absolute route path "${d.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(i.length));let m=joinPaths([i,d.relativePath]),y=e.concat(d);o.children&&o.children.length>0&&(invariant(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),flattenRoutes(o.children,n,y,m)),!(o.path==null&&!o.index)&&n.push({path:m,score:computeScore(m,o.index),routesMeta:y})};return r.forEach((o,u)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))s(o,u);else for(let d of explodeOptionalSegments(o.path))s(o,u,d)}),n}function explodeOptionalSegments(r){let n=r.split("/");if(n.length===0)return[];let[e,...i]=n,s=e.endsWith("?"),o=e.replace(/\?$/,"");if(i.length===0)return s?[o,""]:[o];let u=explodeOptionalSegments(i.join("/")),l=[];return l.push(...u.map(d=>d===""?o:[o,d].join("/"))),s&&l.push(...u),l.map(d=>r.startsWith("/")&&d===""?"/":d)}function rankRouteBranches(r){r.sort((n,e)=>n.score!==e.score?e.score-n.score:compareIndexes(n.routesMeta.map(i=>i.childrenIndex),e.routesMeta.map(i=>i.childrenIndex)))}var paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=r=>r==="*";function computeScore(r,n){let e=r.split("/"),i=e.length;return e.some(isSplat)&&(i+=splatPenalty),n&&(i+=indexRouteValue),e.filter(s=>!isSplat(s)).reduce((s,o)=>s+(paramRe.test(o)?dynamicSegmentValue:o===""?emptySegmentValue:staticSegmentValue),i)}function compareIndexes(r,n){return r.length===n.length&&r.slice(0,-1).every((i,s)=>i===n[s])?r[r.length-1]-n[n.length-1]:0}function matchRouteBranch(r,n,e=!1){let{routesMeta:i}=r,s={},o="/",u=[];for(let l=0;l<i.length;++l){let d=i[l],m=l===i.length-1,y=o==="/"?n:n.slice(o.length)||"/",S=matchPath({path:d.relativePath,caseSensitive:d.caseSensitive,end:m},y),X=d.route;if(!S&&m&&e&&!i[i.length-1].route.index&&(S=matchPath({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},y)),!S)return null;Object.assign(s,S.params),u.push({params:s,pathname:joinPaths([o,S.pathname]),pathnameBase:normalizePathname(joinPaths([o,S.pathnameBase])),route:X}),S.pathnameBase!=="/"&&(o=joinPaths([o,S.pathnameBase]))}return u}function matchPath(r,n){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[e,i]=compilePath(r.path,r.caseSensitive,r.end),s=n.match(e);if(!s)return null;let o=s[0],u=o.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:i.reduce((m,{paramName:y,isOptional:S},X)=>{if(y==="*"){let Ce=l[X]||"";u=o.slice(0,o.length-Ce.length).replace(/(.)\/+$/,"$1")}const he=l[X];return S&&!he?m[y]=void 0:m[y]=(he||"").replace(/%2F/g,"/"),m},{}),pathname:o,pathnameBase:u,pattern:r}}function compilePath(r,n=!1,e=!0){warning(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let i=[],s="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,l,d)=>(i.push({paramName:l,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(i.push({paramName:"*"}),s+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?s+="\\/*$":r!==""&&r!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,n?void 0:"i"),i]}function decodePath(r){try{return r.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return warning(!1,`The URL path "${r}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${n}).`),r}}function stripBasename(r,n){if(n==="/")return r;if(!r.toLowerCase().startsWith(n.toLowerCase()))return null;let e=n.endsWith("/")?n.length-1:n.length,i=r.charAt(e);return i&&i!=="/"?null:r.slice(e)||"/"}function resolvePath(r,n="/"){let{pathname:e,search:i="",hash:s=""}=typeof r=="string"?parsePath(r):r;return{pathname:e?e.startsWith("/")?e:resolvePathname(e,n):n,search:normalizeSearch(i),hash:normalizeHash(s)}}function resolvePathname(r,n){let e=n.replace(/\/+$/,"").split("/");return r.split("/").forEach(s=>{s===".."?e.length>1&&e.pop():s!=="."&&e.push(s)}),e.length>1?e.join("/"):"/"}function getInvalidPathError(r,n,e,i){return`Cannot include a '${r}' character in a manually specified \`to.${n}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function getPathContributingMatches(r){return r.filter((n,e)=>e===0||n.route.path&&n.route.path.length>0)}function getResolveToMatches(r){let n=getPathContributingMatches(r);return n.map((e,i)=>i===n.length-1?e.pathname:e.pathnameBase)}function resolveTo(r,n,e,i=!1){let s;typeof r=="string"?s=parsePath(r):(s={...r},invariant(!s.pathname||!s.pathname.includes("?"),getInvalidPathError("?","pathname","search",s)),invariant(!s.pathname||!s.pathname.includes("#"),getInvalidPathError("#","pathname","hash",s)),invariant(!s.search||!s.search.includes("#"),getInvalidPathError("#","search","hash",s)));let o=r===""||s.pathname==="",u=o?"/":s.pathname,l;if(u==null)l=e;else{let S=n.length-1;if(!i&&u.startsWith("..")){let X=u.split("/");for(;X[0]==="..";)X.shift(),S-=1;s.pathname=X.join("/")}l=S>=0?n[S]:"/"}let d=resolvePath(s,l),m=u&&u!=="/"&&u.endsWith("/"),y=(o||u===".")&&e.endsWith("/");return!d.pathname.endsWith("/")&&(m||y)&&(d.pathname+="/"),d}var joinPaths=r=>r.join("/").replace(/\/\/+/g,"/"),normalizePathname=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,normalizeHash=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function isRouteErrorResponse(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var validMutationMethodsArr=["POST","PUT","PATCH","DELETE"];new Set(validMutationMethodsArr);var validRequestMethodsArr=["GET",...validMutationMethodsArr];new Set(validRequestMethodsArr);var DataRouterContext=reactExports.createContext(null);DataRouterContext.displayName="DataRouter";var DataRouterStateContext=reactExports.createContext(null);DataRouterStateContext.displayName="DataRouterState";var ViewTransitionContext=reactExports.createContext({isTransitioning:!1});ViewTransitionContext.displayName="ViewTransition";var FetchersContext=reactExports.createContext(new Map);FetchersContext.displayName="Fetchers";var AwaitContext=reactExports.createContext(null);AwaitContext.displayName="Await";var NavigationContext=reactExports.createContext(null);NavigationContext.displayName="Navigation";var LocationContext=reactExports.createContext(null);LocationContext.displayName="Location";var RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1});RouteContext.displayName="Route";var RouteErrorContext=reactExports.createContext(null);RouteErrorContext.displayName="RouteError";function useHref(r,{relative:n}={}){invariant(useInRouterContext(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:i}=reactExports.useContext(NavigationContext),{hash:s,pathname:o,search:u}=useResolvedPath(r,{relative:n}),l=o;return e!=="/"&&(l=o==="/"?e:joinPaths([e,o])),i.createHref({pathname:l,search:u,hash:s})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return invariant(useInRouterContext(),"useLocation() may be used only in the context of a <Router> component."),reactExports.useContext(LocationContext).location}var navigateEffectWarning="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function useIsomorphicLayoutEffect(r){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(r)}function useNavigate(){let{isDataRoute:r}=reactExports.useContext(RouteContext);return r?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){invariant(useInRouterContext(),"useNavigate() may be used only in the context of a <Router> component.");let r=reactExports.useContext(DataRouterContext),{basename:n,navigator:e}=reactExports.useContext(NavigationContext),{matches:i}=reactExports.useContext(RouteContext),{pathname:s}=useLocation(),o=JSON.stringify(getResolveToMatches(i)),u=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{u.current=!0}),reactExports.useCallback((d,m={})=>{if(warning(u.current,navigateEffectWarning),!u.current)return;if(typeof d=="number"){e.go(d);return}let y=resolveTo(d,JSON.parse(o),s,m.relative==="path");r==null&&n!=="/"&&(y.pathname=y.pathname==="/"?n:joinPaths([n,y.pathname])),(m.replace?e.replace:e.push)(y,m.state,m)},[n,e,o,s,r])}reactExports.createContext(null);function useResolvedPath(r,{relative:n}={}){let{matches:e}=reactExports.useContext(RouteContext),{pathname:i}=useLocation(),s=JSON.stringify(getResolveToMatches(e));return reactExports.useMemo(()=>resolveTo(r,JSON.parse(s),i,n==="path"),[r,s,i,n])}function useRoutes(r,n){return useRoutesImpl(r,n)}function useRoutesImpl(r,n,e,i){var be;invariant(useInRouterContext(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=reactExports.useContext(NavigationContext),{matches:o}=reactExports.useContext(RouteContext),u=o[o.length-1],l=u?u.params:{},d=u?u.pathname:"/",m=u?u.pathnameBase:"/",y=u&&u.route;{let we=y&&y.path||"";warningOnce(d,!y||we.endsWith("*")||we.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${we}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${we}"> to <Route path="${we==="/"?"*":`${we}/*`}">.`)}let S=useLocation(),X;if(n){let we=typeof n=="string"?parsePath(n):n;invariant(m==="/"||((be=we.pathname)==null?void 0:be.startsWith(m)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${we.pathname}" was given in the \`location\` prop.`),X=we}else X=S;let he=X.pathname||"/",Ce=he;if(m!=="/"){let we=m.replace(/^\//,"").split("/");Ce="/"+he.replace(/^\//,"").split("/").slice(we.length).join("/")}let Ee=matchRoutes(r,{pathname:Ce});warning(y||Ee!=null,`No routes matched location "${X.pathname}${X.search}${X.hash}" `),warning(Ee==null||Ee[Ee.length-1].route.element!==void 0||Ee[Ee.length-1].route.Component!==void 0||Ee[Ee.length-1].route.lazy!==void 0,`Matched leaf route at location "${X.pathname}${X.search}${X.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let xe=_renderMatches(Ee&&Ee.map(we=>Object.assign({},we,{params:Object.assign({},l,we.params),pathname:joinPaths([m,s.encodeLocation?s.encodeLocation(we.pathname).pathname:we.pathname]),pathnameBase:we.pathnameBase==="/"?m:joinPaths([m,s.encodeLocation?s.encodeLocation(we.pathnameBase).pathname:we.pathnameBase])})),o,e,i);return n&&xe?reactExports.createElement(LocationContext.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...X},navigationType:"POP"}},xe):xe}function DefaultErrorComponent(){let r=useRouteError(),n=isRouteErrorResponse(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),e=r instanceof Error?r.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},u=null;return console.error("Error handled by React Router default ErrorBoundary:",r),u=reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("p",null," Hey developer "),reactExports.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",reactExports.createElement("code",{style:o},"ErrorBoundary")," or"," ",reactExports.createElement("code",{style:o},"errorElement")," prop on your route.")),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},n),e?reactExports.createElement("pre",{style:s},e):null,u)}var defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null),RenderErrorBoundary=class extends reactExports.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,n){return n.location!==r.location||n.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:n.error,location:n.location,revalidation:r.revalidation||n.revalidation}}componentDidCatch(r,n){console.error("React Router caught the following error during render",r,n)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function RenderedRoute({routeContext:r,match:n,children:e}){let i=reactExports.useContext(DataRouterContext);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),reactExports.createElement(RouteContext.Provider,{value:r},e)}function _renderMatches(r,n=[],e=null,i=null){if(r==null){if(!e)return null;if(e.errors)r=e.matches;else if(n.length===0&&!e.initialized&&e.matches.length>0)r=e.matches;else return null}let s=r,o=e==null?void 0:e.errors;if(o!=null){let d=s.findIndex(m=>m.route.id&&(o==null?void 0:o[m.route.id])!==void 0);invariant(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,d+1))}let u=!1,l=-1;if(e)for(let d=0;d<s.length;d++){let m=s[d];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(l=d),m.route.id){let{loaderData:y,errors:S}=e,X=m.route.loader&&!y.hasOwnProperty(m.route.id)&&(!S||S[m.route.id]===void 0);if(m.route.lazy||X){u=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}return s.reduceRight((d,m,y)=>{let S,X=!1,he=null,Ce=null;e&&(S=o&&m.route.id?o[m.route.id]:void 0,he=m.route.errorElement||defaultErrorElement,u&&(l<0&&y===0?(warningOnce("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),X=!0,Ce=null):l===y&&(X=!0,Ce=m.route.hydrateFallbackElement||null)));let Ee=n.concat(s.slice(0,y+1)),xe=()=>{let be;return S?be=he:X?be=Ce:m.route.Component?be=reactExports.createElement(m.route.Component,null):m.route.element?be=m.route.element:be=d,reactExports.createElement(RenderedRoute,{match:m,routeContext:{outlet:d,matches:Ee,isDataRoute:e!=null},children:be})};return e&&(m.route.ErrorBoundary||m.route.errorElement||y===0)?reactExports.createElement(RenderErrorBoundary,{location:e.location,revalidation:e.revalidation,component:he,error:S,children:xe(),routeContext:{outlet:null,matches:Ee,isDataRoute:!0}}):xe()},null)}function getDataRouterConsoleError(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext(r){let n=reactExports.useContext(DataRouterContext);return invariant(n,getDataRouterConsoleError(r)),n}function useDataRouterState(r){let n=reactExports.useContext(DataRouterStateContext);return invariant(n,getDataRouterConsoleError(r)),n}function useRouteContext(r){let n=reactExports.useContext(RouteContext);return invariant(n,getDataRouterConsoleError(r)),n}function useCurrentRouteId(r){let n=useRouteContext(r),e=n.matches[n.matches.length-1];return invariant(e.route.id,`${r} can only be used on routes that contain a unique "id"`),e.route.id}function useRouteId(){return useCurrentRouteId("useRouteId")}function useRouteError(){var i;let r=reactExports.useContext(RouteErrorContext),n=useDataRouterState("useRouteError"),e=useCurrentRouteId("useRouteError");return r!==void 0?r:(i=n.errors)==null?void 0:i[e]}function useNavigateStable(){let{router:r}=useDataRouterContext("useNavigate"),n=useCurrentRouteId("useNavigate"),e=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{e.current=!0}),reactExports.useCallback(async(s,o={})=>{warning(e.current,navigateEffectWarning),e.current&&(typeof s=="number"?r.navigate(s):await r.navigate(s,{fromRouteId:n,...o}))},[r,n])}var alreadyWarned$1={};function warningOnce(r,n,e){!n&&!alreadyWarned$1[r]&&(alreadyWarned$1[r]=!0,warning(!1,e))}reactExports.memo(DataRoutes);function DataRoutes({routes:r,future:n,state:e}){return useRoutesImpl(r,void 0,e,n)}function MemoryRouter({basename:r,children:n,initialEntries:e,initialIndex:i}){let s=reactExports.useRef();s.current==null&&(s.current=createMemoryHistory({initialEntries:e,initialIndex:i,v5Compat:!0}));let o=s.current,[u,l]=reactExports.useState({action:o.action,location:o.location}),d=reactExports.useCallback(m=>{reactExports.startTransition(()=>l(m))},[l]);return reactExports.useLayoutEffect(()=>o.listen(d),[o,d]),reactExports.createElement(Router,{basename:r,children:n,location:u.location,navigationType:u.action,navigator:o})}function Route(r){invariant(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Router({basename:r="/",children:n=null,location:e,navigationType:i="POP",navigator:s,static:o=!1}){invariant(!useInRouterContext(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=r.replace(/^\/*/,"/"),l=reactExports.useMemo(()=>({basename:u,navigator:s,static:o,future:{}}),[u,s,o]);typeof e=="string"&&(e=parsePath(e));let{pathname:d="/",search:m="",hash:y="",state:S=null,key:X="default"}=e,he=reactExports.useMemo(()=>{let Ce=stripBasename(d,u);return Ce==null?null:{location:{pathname:Ce,search:m,hash:y,state:S,key:X},navigationType:i}},[u,d,m,y,S,X,i]);return warning(he!=null,`<Router basename="${u}"> is not able to match the URL "${d}${m}${y}" because it does not start with the basename, so the <Router> won't render anything.`),he==null?null:reactExports.createElement(NavigationContext.Provider,{value:l},reactExports.createElement(LocationContext.Provider,{children:n,value:he}))}function Routes({children:r,location:n}){return useRoutes(createRoutesFromChildren(r),n)}function createRoutesFromChildren(r,n=[]){let e=[];return reactExports.Children.forEach(r,(i,s)=>{if(!reactExports.isValidElement(i))return;let o=[...n,s];if(i.type===reactExports.Fragment){e.push.apply(e,createRoutesFromChildren(i.props.children,o));return}invariant(i.type===Route,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),invariant(!i.props.index||!i.props.children,"An index route cannot have child routes.");let u={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=createRoutesFromChildren(i.props.children,o)),e.push(u)}),e}var defaultMethod="get",defaultEncType="application/x-www-form-urlencoded";function isHtmlElement(r){return r!=null&&typeof r.tagName=="string"}function isButtonElement(r){return isHtmlElement(r)&&r.tagName.toLowerCase()==="button"}function isFormElement(r){return isHtmlElement(r)&&r.tagName.toLowerCase()==="form"}function isInputElement(r){return isHtmlElement(r)&&r.tagName.toLowerCase()==="input"}function isModifiedEvent(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function shouldProcessLinkClick(r,n){return r.button===0&&(!n||n==="_self")&&!isModifiedEvent(r)}var _formDataSupportsSubmitter=null;function isFormDataSubmitterSupported(){if(_formDataSupportsSubmitter===null)try{new FormData(document.createElement("form"),0),_formDataSupportsSubmitter=!1}catch{_formDataSupportsSubmitter=!0}return _formDataSupportsSubmitter}var supportedFormEncTypes=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function getFormEncType(r){return r!=null&&!supportedFormEncTypes.has(r)?(warning(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${defaultEncType}"`),null):r}function getFormSubmissionInfo(r,n){let e,i,s,o,u;if(isFormElement(r)){let l=r.getAttribute("action");i=l?stripBasename(l,n):null,e=r.getAttribute("method")||defaultMethod,s=getFormEncType(r.getAttribute("enctype"))||defaultEncType,o=new FormData(r)}else if(isButtonElement(r)||isInputElement(r)&&(r.type==="submit"||r.type==="image")){let l=r.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=r.getAttribute("formaction")||l.getAttribute("action");if(i=d?stripBasename(d,n):null,e=r.getAttribute("formmethod")||l.getAttribute("method")||defaultMethod,s=getFormEncType(r.getAttribute("formenctype"))||getFormEncType(l.getAttribute("enctype"))||defaultEncType,o=new FormData(l,r),!isFormDataSubmitterSupported()){let{name:m,type:y,value:S}=r;if(y==="image"){let X=m?`${m}.`:"";o.append(`${X}x`,"0"),o.append(`${X}y`,"0")}else m&&o.append(m,S)}}else{if(isHtmlElement(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=defaultMethod,i=null,s=defaultEncType,u=r}return o&&s==="text/plain"&&(u=o,o=void 0),{action:i,method:e.toLowerCase(),encType:s,formData:o,body:u}}function invariant2(r,n){if(r===!1||r===null||typeof r>"u")throw new Error(n)}async function loadRouteModule(r,n){if(r.id in n)return n[r.id];try{let e=await import(r.module);return n[r.id]=e,e}catch(e){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function isHtmlLinkDescriptor(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function getKeyedPrefetchLinks(r,n,e){let i=await Promise.all(r.map(async s=>{let o=n.routes[s.route.id];if(o){let u=await loadRouteModule(o,e);return u.links?u.links():[]}return[]}));return dedupeLinkDescriptors(i.flat(1).filter(isHtmlLinkDescriptor).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function getNewMatchesForLinks(r,n,e,i,s,o){let u=(d,m)=>e[m]?d.route.id!==e[m].route.id:!0,l=(d,m)=>{var y;return e[m].pathname!==d.pathname||((y=e[m].route.path)==null?void 0:y.endsWith("*"))&&e[m].params["*"]!==d.params["*"]};return o==="assets"?n.filter((d,m)=>u(d,m)||l(d,m)):o==="data"?n.filter((d,m)=>{var S;let y=i.routes[d.route.id];if(!y||!y.hasLoader)return!1;if(u(d,m)||l(d,m))return!0;if(d.route.shouldRevalidate){let X=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((S=e[0])==null?void 0:S.params)||{},nextUrl:new URL(r,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof X=="boolean")return X}return!0}):[]}function getModuleLinkHrefs(r,n){return dedupeHrefs(r.map(e=>{let i=n.routes[e.route.id];if(!i)return[];let s=[i.module];return i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function dedupeHrefs(r){return[...new Set(r)]}function sortKeys(r){let n={},e=Object.keys(r).sort();for(let i of e)n[i]=r[i];return n}function dedupeLinkDescriptors(r,n){let e=new Set;return new Set(n),r.reduce((i,s)=>{let o=JSON.stringify(sortKeys(s));return e.has(o)||(e.add(o),i.push({key:o,link:s})),i},[])}function singleFetchUrl(r){let n=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return n.pathname==="/"?n.pathname="_root.data":n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function useDataRouterContext2(){let r=reactExports.useContext(DataRouterContext);return invariant2(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function useDataRouterStateContext(){let r=reactExports.useContext(DataRouterStateContext);return invariant2(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var FrameworkContext=reactExports.createContext(void 0);FrameworkContext.displayName="FrameworkContext";function useFrameworkContext(){let r=reactExports.useContext(FrameworkContext);return invariant2(r,"You must render this element inside a <HydratedRouter> element"),r}function usePrefetchBehavior(r,n){let e=reactExports.useContext(FrameworkContext),[i,s]=reactExports.useState(!1),[o,u]=reactExports.useState(!1),{onFocus:l,onBlur:d,onMouseEnter:m,onMouseLeave:y,onTouchStart:S}=n,X=reactExports.useRef(null);reactExports.useEffect(()=>{if(r==="render"&&u(!0),r==="viewport"){let Ee=be=>{be.forEach(we=>{u(we.isIntersecting)})},xe=new IntersectionObserver(Ee,{threshold:.5});return X.current&&xe.observe(X.current),()=>{xe.disconnect()}}},[r]),reactExports.useEffect(()=>{if(i){let Ee=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(Ee)}}},[i]);let he=()=>{s(!0)},Ce=()=>{s(!1),u(!1)};return e?r!=="intent"?[o,X,{}]:[o,X,{onFocus:composeEventHandlers(l,he),onBlur:composeEventHandlers(d,Ce),onMouseEnter:composeEventHandlers(m,he),onMouseLeave:composeEventHandlers(y,Ce),onTouchStart:composeEventHandlers(S,he)}]:[!1,X,{}]}function composeEventHandlers(r,n){return e=>{r&&r(e),e.defaultPrevented||n(e)}}function PrefetchPageLinks({page:r,...n}){let{router:e}=useDataRouterContext2(),i=reactExports.useMemo(()=>matchRoutes(e.routes,r,e.basename),[e.routes,r,e.basename]);return i?reactExports.createElement(PrefetchPageLinksImpl,{page:r,matches:i,...n}):null}function useKeyedPrefetchLinks(r){let{manifest:n,routeModules:e}=useFrameworkContext(),[i,s]=reactExports.useState([]);return reactExports.useEffect(()=>{let o=!1;return getKeyedPrefetchLinks(r,n,e).then(u=>{o||s(u)}),()=>{o=!0}},[r,n,e]),i}function PrefetchPageLinksImpl({page:r,matches:n,...e}){let i=useLocation(),{manifest:s,routeModules:o}=useFrameworkContext(),{loaderData:u,matches:l}=useDataRouterStateContext(),d=reactExports.useMemo(()=>getNewMatchesForLinks(r,n,l,s,i,"data"),[r,n,l,s,i]),m=reactExports.useMemo(()=>getNewMatchesForLinks(r,n,l,s,i,"assets"),[r,n,l,s,i]),y=reactExports.useMemo(()=>{if(r===i.pathname+i.search+i.hash)return[];let he=new Set,Ce=!1;if(n.forEach(xe=>{var we;let be=s.routes[xe.route.id];!be||!be.hasLoader||(!d.some(ve=>ve.route.id===xe.route.id)&&xe.route.id in u&&((we=o[xe.route.id])!=null&&we.shouldRevalidate)||be.hasClientLoader?Ce=!0:he.add(xe.route.id))}),he.size===0)return[];let Ee=singleFetchUrl(r);return Ce&&he.size>0&&Ee.searchParams.set("_routes",n.filter(xe=>he.has(xe.route.id)).map(xe=>xe.route.id).join(",")),[Ee.pathname+Ee.search]},[u,i,s,d,n,r,o]),S=reactExports.useMemo(()=>getModuleLinkHrefs(m,s),[m,s]),X=useKeyedPrefetchLinks(m);return reactExports.createElement(reactExports.Fragment,null,y.map(he=>reactExports.createElement("link",{key:he,rel:"prefetch",as:"fetch",href:he,...e})),S.map(he=>reactExports.createElement("link",{key:he,rel:"modulepreload",href:he,...e})),X.map(({key:he,link:Ce})=>reactExports.createElement("link",{key:he,...Ce})))}function mergeRefs(...r){return n=>{r.forEach(e=>{typeof e=="function"?e(n):e!=null&&(e.current=n)})}}var isBrowser=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{isBrowser&&(window.__reactRouterVersion="7.1.1")}catch{}var ABSOLUTE_URL_REGEX2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function({onClick:n,discover:e="render",prefetch:i="none",relative:s,reloadDocument:o,replace:u,state:l,target:d,to:m,preventScrollReset:y,viewTransition:S,...X},he){let{basename:Ce}=reactExports.useContext(NavigationContext),Ee=typeof m=="string"&&ABSOLUTE_URL_REGEX2.test(m),xe,be=!1;if(typeof m=="string"&&Ee&&(xe=m,isBrowser))try{let Ie=new URL(window.location.href),Ue=m.startsWith("//")?new URL(Ie.protocol+m):new URL(m),ze=stripBasename(Ue.pathname,Ce);Ue.origin===Ie.origin&&ze!=null?m=ze+Ue.search+Ue.hash:be=!0}catch{warning(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let we=useHref(m,{relative:s}),[ve,ke,De]=usePrefetchBehavior(i,X),Oe=useLinkClickHandler(m,{replace:u,state:l,target:d,preventScrollReset:y,relative:s,viewTransition:S});function Le(Ie){n&&n(Ie),Ie.defaultPrevented||Oe(Ie)}let Ae=reactExports.createElement("a",{...X,...De,href:xe||we,onClick:be||o?n:Le,ref:mergeRefs(he,ke),target:d,"data-discover":!Ee&&e==="render"?"true":void 0});return ve&&!Ee?reactExports.createElement(reactExports.Fragment,null,Ae,reactExports.createElement(PrefetchPageLinks,{page:we})):Ae});Link.displayName="Link";var NavLink=reactExports.forwardRef(function({"aria-current":n="page",caseSensitive:e=!1,className:i="",end:s=!1,style:o,to:u,viewTransition:l,children:d,...m},y){let S=useResolvedPath(u,{relative:m.relative}),X=useLocation(),he=reactExports.useContext(DataRouterStateContext),{navigator:Ce,basename:Ee}=reactExports.useContext(NavigationContext),xe=he!=null&&useViewTransitionState(S)&&l===!0,be=Ce.encodeLocation?Ce.encodeLocation(S).pathname:S.pathname,we=X.pathname,ve=he&&he.navigation&&he.navigation.location?he.navigation.location.pathname:null;e||(we=we.toLowerCase(),ve=ve?ve.toLowerCase():null,be=be.toLowerCase()),ve&&Ee&&(ve=stripBasename(ve,Ee)||ve);const ke=be!=="/"&&be.endsWith("/")?be.length-1:be.length;let De=we===be||!s&&we.startsWith(be)&&we.charAt(ke)==="/",Oe=ve!=null&&(ve===be||!s&&ve.startsWith(be)&&ve.charAt(be.length)==="/"),Le={isActive:De,isPending:Oe,isTransitioning:xe},Ae=De?n:void 0,Ie;typeof i=="function"?Ie=i(Le):Ie=[i,De?"active":null,Oe?"pending":null,xe?"transitioning":null].filter(Boolean).join(" ");let Ue=typeof o=="function"?o(Le):o;return reactExports.createElement(Link,{...m,"aria-current":Ae,className:Ie,ref:y,style:Ue,to:u,viewTransition:l},typeof d=="function"?d(Le):d)});NavLink.displayName="NavLink";var Form=reactExports.forwardRef(({discover:r="render",fetcherKey:n,navigate:e,reloadDocument:i,replace:s,state:o,method:u=defaultMethod,action:l,onSubmit:d,relative:m,preventScrollReset:y,viewTransition:S,...X},he)=>{let Ce=useSubmit(),Ee=useFormAction(l,{relative:m}),xe=u.toLowerCase()==="get"?"get":"post",be=typeof l=="string"&&ABSOLUTE_URL_REGEX2.test(l),we=ve=>{if(d&&d(ve),ve.defaultPrevented)return;ve.preventDefault();let ke=ve.nativeEvent.submitter,De=(ke==null?void 0:ke.getAttribute("formmethod"))||u;Ce(ke||ve.currentTarget,{fetcherKey:n,method:De,navigate:e,replace:s,state:o,relative:m,preventScrollReset:y,viewTransition:S})};return reactExports.createElement("form",{ref:he,method:xe,action:Ee,onSubmit:i?d:we,...X,"data-discover":!be&&r==="render"?"true":void 0})});Form.displayName="Form";function getDataRouterConsoleError2(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext3(r){let n=reactExports.useContext(DataRouterContext);return invariant(n,getDataRouterConsoleError2(r)),n}function useLinkClickHandler(r,{target:n,replace:e,state:i,preventScrollReset:s,relative:o,viewTransition:u}={}){let l=useNavigate(),d=useLocation(),m=useResolvedPath(r,{relative:o});return reactExports.useCallback(y=>{if(shouldProcessLinkClick(y,n)){y.preventDefault();let S=e!==void 0?e:createPath(d)===createPath(m);l(r,{replace:S,state:i,preventScrollReset:s,relative:o,viewTransition:u})}},[d,l,m,e,i,n,r,s,o,u])}var fetcherId=0,getUniqueFetcherId=()=>`__${String(++fetcherId)}__`;function useSubmit(){let{router:r}=useDataRouterContext3("useSubmit"),{basename:n}=reactExports.useContext(NavigationContext),e=useRouteId();return reactExports.useCallback(async(i,s={})=>{let{action:o,method:u,encType:l,formData:d,body:m}=getFormSubmissionInfo(i,n);if(s.navigate===!1){let y=s.fetcherKey||getUniqueFetcherId();await r.fetch(y,e,s.action||o,{preventScrollReset:s.preventScrollReset,formData:d,body:m,formMethod:s.method||u,formEncType:s.encType||l,flushSync:s.flushSync})}else await r.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:d,body:m,formMethod:s.method||u,formEncType:s.encType||l,replace:s.replace,state:s.state,fromRouteId:e,flushSync:s.flushSync,viewTransition:s.viewTransition})},[r,n,e])}function useFormAction(r,{relative:n}={}){let{basename:e}=reactExports.useContext(NavigationContext),i=reactExports.useContext(RouteContext);invariant(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),o={...useResolvedPath(r||".",{relative:n})},u=useLocation();if(r==null){o.search=u.search;let l=new URLSearchParams(o.search),d=l.getAll("index");if(d.some(y=>y==="")){l.delete("index"),d.filter(S=>S).forEach(S=>l.append("index",S));let y=l.toString();o.search=y?`?${y}`:""}}return(!r||r===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(o.pathname=o.pathname==="/"?e:joinPaths([e,o.pathname])),createPath(o)}function useViewTransitionState(r,n={}){let e=reactExports.useContext(ViewTransitionContext);invariant(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=useDataRouterContext3("useViewTransitionState"),s=useResolvedPath(r,{relative:n.relative});if(!e.isTransitioning)return!1;let o=stripBasename(e.currentLocation.pathname,i)||e.currentLocation.pathname,u=stripBasename(e.nextLocation.pathname,i)||e.nextLocation.pathname;return matchPath(s.pathname,u)!=null||matchPath(s.pathname,o)!=null}new TextEncoder;var define_process_env_default={};function _arrayWithHoles$6(r){if(Array.isArray(r))return r}function _iterableToArrayLimit$6(r,n){var e=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(e!=null){var i,s,o,u,l=[],d=!0,m=!1;try{if(o=(e=e.call(r)).next,n!==0)for(;!(d=(i=o.call(e)).done)&&(l.push(i.value),l.length!==n);d=!0);}catch(y){m=!0,s=y}finally{try{if(!d&&e.return!=null&&(u=e.return(),Object(u)!==u))return}finally{if(m)throw s}}return l}}function _arrayLikeToArray$2$1(r,n){(n==null||n>r.length)&&(n=r.length);for(var e=0,i=new Array(n);e<n;e++)i[e]=r[e];return i}function _unsupportedIterableToArray$2$1(r,n){if(r){if(typeof r=="string")return _arrayLikeToArray$2$1(r,n);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return _arrayLikeToArray$2$1(r,n)}}function _nonIterableRest$6(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _slicedToArray$6(r,n){return _arrayWithHoles$6(r)||_iterableToArrayLimit$6(r,n)||_unsupportedIterableToArray$2$1(r,n)||_nonIterableRest$6()}function _typeof$b(r){"@babel/helpers - typeof";return _typeof$b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$b(r)}function classNames(){for(var r=arguments.length,n=new Array(r),e=0;e<r;e++)n[e]=arguments[e];if(n){for(var i=[],s=0;s<n.length;s++){var o=n[s];if(o){var u=_typeof$b(o);if(u==="string"||u==="number")i.push(o);else if(u==="object"){var l=Array.isArray(o)?o:Object.entries(o).map(function(d){var m=_slicedToArray$6(d,2),y=m[0],S=m[1];return S?y:null});i=l.length?i.concat(l.filter(function(d){return!!d})):i}}}return i.join(" ").trim()}}function _arrayWithoutHoles$4(r){if(Array.isArray(r))return _arrayLikeToArray$2$1(r)}function _iterableToArray$4(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function _nonIterableSpread$4(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _toConsumableArray$4(r){return _arrayWithoutHoles$4(r)||_iterableToArray$4(r)||_unsupportedIterableToArray$2$1(r)||_nonIterableSpread$4()}function _classCallCheck$2(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}function _toPrimitive$a(r,n){if(_typeof$b(r)!=="object"||r===null)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var i=e.call(r,n||"default");if(_typeof$b(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}function _toPropertyKey$a(r){var n=_toPrimitive$a(r,"string");return _typeof$b(n)==="symbol"?n:String(n)}function _defineProperties$1(r,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,_toPropertyKey$a(i.key),i)}}function _createClass$2(r,n,e){return e&&_defineProperties$1(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function _defineProperty$a(r,n,e){return n=_toPropertyKey$a(n),n in r?Object.defineProperty(r,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[n]=e,r}function _createForOfIteratorHelper$1(r,n){var e=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!e){if(Array.isArray(r)||(e=_unsupportedIterableToArray$1$1(r))||n){e&&(r=e);var i=0,s=function(){};return{s,n:function(){return i>=r.length?{done:!0}:{done:!1,value:r[i++]}},e:function(m){throw m},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,u=!1,l;return{s:function(){e=e.call(r)},n:function(){var m=e.next();return o=m.done,m},e:function(m){u=!0,l=m},f:function(){try{!o&&e.return!=null&&e.return()}finally{if(u)throw l}}}}function _unsupportedIterableToArray$1$1(r,n){if(r){if(typeof r=="string")return _arrayLikeToArray$1$1(r,n);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return _arrayLikeToArray$1$1(r,n)}}function _arrayLikeToArray$1$1(r,n){(n==null||n>r.length)&&(n=r.length);for(var e=0,i=new Array(n);e<n;e++)i[e]=r[e];return i}var DomHandler=function(){function r(){_classCallCheck$2(this,r)}return _createClass$2(r,null,[{key:"innerWidth",value:function(e){if(e){var i=e.offsetWidth,s=getComputedStyle(e);return i=i+(parseFloat(s.paddingLeft)+parseFloat(s.paddingRight)),i}return 0}},{key:"width",value:function(e){if(e){var i=e.offsetWidth,s=getComputedStyle(e);return i=i-(parseFloat(s.paddingLeft)+parseFloat(s.paddingRight)),i}return 0}},{key:"getBrowserLanguage",value:function(){return navigator.userLanguage||navigator.languages&&navigator.languages.length&&navigator.languages[0]||navigator.language||navigator.browserLanguage||navigator.systemLanguage||"en"}},{key:"getWindowScrollTop",value:function(){var e=document.documentElement;return(window.pageYOffset||e.scrollTop)-(e.clientTop||0)}},{key:"getWindowScrollLeft",value:function(){var e=document.documentElement;return(window.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}},{key:"getOuterWidth",value:function(e,i){if(e){var s=e.getBoundingClientRect().width||e.offsetWidth;if(i){var o=getComputedStyle(e);s=s+(parseFloat(o.marginLeft)+parseFloat(o.marginRight))}return s}return 0}},{key:"getOuterHeight",value:function(e,i){if(e){var s=e.getBoundingClientRect().height||e.offsetHeight;if(i){var o=getComputedStyle(e);s=s+(parseFloat(o.marginTop)+parseFloat(o.marginBottom))}return s}return 0}},{key:"getClientHeight",value:function(e,i){if(e){var s=e.clientHeight;if(i){var o=getComputedStyle(e);s=s+(parseFloat(o.marginTop)+parseFloat(o.marginBottom))}return s}return 0}},{key:"getClientWidth",value:function(e,i){if(e){var s=e.clientWidth;if(i){var o=getComputedStyle(e);s=s+(parseFloat(o.marginLeft)+parseFloat(o.marginRight))}return s}return 0}},{key:"getViewport",value:function(){var e=window,i=document,s=i.documentElement,o=i.getElementsByTagName("body")[0],u=e.innerWidth||s.clientWidth||o.clientWidth,l=e.innerHeight||s.clientHeight||o.clientHeight;return{width:u,height:l}}},{key:"getOffset",value:function(e){if(e){var i=e.getBoundingClientRect();return{top:i.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:i.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}}return{top:"auto",left:"auto"}}},{key:"index",value:function(e){if(e)for(var i=e.parentNode.childNodes,s=0,o=0;o<i.length;o++){if(i[o]===e)return s;i[o].nodeType===1&&s++}return-1}},{key:"addMultipleClasses",value:function(e,i){if(e&&i)if(e.classList)for(var s=i.split(" "),o=0;o<s.length;o++)e.classList.add(s[o]);else for(var u=i.split(" "),l=0;l<u.length;l++)e.className=e.className+(" "+u[l])}},{key:"removeMultipleClasses",value:function(e,i){if(e&&i)if(e.classList)for(var s=i.split(" "),o=0;o<s.length;o++)e.classList.remove(s[o]);else for(var u=i.split(" "),l=0;l<u.length;l++)e.className=e.className.replace(new RegExp("(^|\\b)"+u[l].split(" ").join("|")+"(\\b|$)","gi")," ")}},{key:"addClass",value:function(e,i){e&&i&&(e.classList?e.classList.add(i):e.className=e.className+(" "+i))}},{key:"removeClass",value:function(e,i){e&&i&&(e.classList?e.classList.remove(i):e.className=e.className.replace(new RegExp("(^|\\b)"+i.split(" ").join("|")+"(\\b|$)","gi")," "))}},{key:"hasClass",value:function(e,i){return e?e.classList?e.classList.contains(i):new RegExp("(^| )"+i+"( |$)","gi").test(e.className):!1}},{key:"addStyles",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e&&Object.entries(i).forEach(function(s){var o=_slicedToArray$6(s,2),u=o[0],l=o[1];return e.style[u]=l})}},{key:"find",value:function(e,i){return e?Array.from(e.querySelectorAll(i)):[]}},{key:"findSingle",value:function(e,i){return e?e.querySelector(i):null}},{key:"setAttributes",value:function(e){var i=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e){var o=function(l,d){var m,y,S=e!=null&&(m=e.$attrs)!==null&&m!==void 0&&m[l]?[e==null||(y=e.$attrs)===null||y===void 0?void 0:y[l]]:[];return[d].flat().reduce(function(X,he){if(he!=null){var Ce=_typeof$b(he);if(Ce==="string"||Ce==="number")X.push(he);else if(Ce==="object"){var Ee=Array.isArray(he)?o(l,he):Object.entries(he).map(function(xe){var be=_slicedToArray$6(xe,2),we=be[0],ve=be[1];return l==="style"&&(ve||ve===0)?"".concat(we.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),":").concat(ve):ve?we:void 0});X=Ee.length?X.concat(Ee.filter(function(xe){return!!xe})):X}}return X},S)};Object.entries(s).forEach(function(u){var l=_slicedToArray$6(u,2),d=l[0],m=l[1];if(m!=null){var y=d.match(/^on(.+)/);y?e.addEventListener(y[1].toLowerCase(),m):d==="p-bind"?i.setAttributes(e,m):(m=d==="class"?_toConsumableArray$4(new Set(o("class",m))).join(" ").trim():d==="style"?o("style",m).join(";").trim():m,(e.$attrs=e.$attrs||{})&&(e.$attrs[d]=m),e.setAttribute(d,m))}})}}},{key:"getAttribute",value:function(e,i){if(e){var s=e.getAttribute(i);return isNaN(s)?s==="true"||s==="false"?s==="true":s:+s}}},{key:"isAttributeEquals",value:function(e,i,s){return e?this.getAttribute(e,i)===s:!1}},{key:"isAttributeNotEquals",value:function(e,i,s){return!this.isAttributeEquals(e,i,s)}},{key:"getHeight",value:function(e){if(e){var i=e.offsetHeight,s=getComputedStyle(e);return i=i-(parseFloat(s.paddingTop)+parseFloat(s.paddingBottom)+parseFloat(s.borderTopWidth)+parseFloat(s.borderBottomWidth)),i}return 0}},{key:"getWidth",value:function(e){if(e){var i=e.offsetWidth,s=getComputedStyle(e);return i=i-(parseFloat(s.paddingLeft)+parseFloat(s.paddingRight)+parseFloat(s.borderLeftWidth)+parseFloat(s.borderRightWidth)),i}return 0}},{key:"alignOverlay",value:function(e,i,s){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;e&&i&&(s==="self"?this.relativePosition(e,i):(o&&(e.style.minWidth=r.getOuterWidth(i)+"px"),this.absolutePosition(e,i)))}},{key:"absolutePosition",value:function(e,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"left";if(e&&i){var o=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e),u=o.height,l=o.width,d=i.offsetHeight,m=i.offsetWidth,y=i.getBoundingClientRect(),S=this.getWindowScrollTop(),X=this.getWindowScrollLeft(),he=this.getViewport(),Ce,Ee;y.top+d+u>he.height?(Ce=y.top+S-u,Ce<0&&(Ce=S),e.style.transformOrigin="bottom"):(Ce=d+y.top+S,e.style.transformOrigin="top");var xe=y.left,be=s==="left"?0:l-m;xe+m+l>he.width?Ee=Math.max(0,xe+X+m-l):Ee=xe-be+X,e.style.top=Ce+"px",e.style.left=Ee+"px"}}},{key:"relativePosition",value:function(e,i){if(e&&i){var s=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e),o=i.offsetHeight,u=i.getBoundingClientRect(),l=this.getViewport(),d,m;u.top+o+s.height>l.height?(d=-1*s.height,u.top+d<0&&(d=-1*u.top),e.style.transformOrigin="bottom"):(d=o,e.style.transformOrigin="top"),s.width>l.width?m=u.left*-1:u.left+s.width>l.width?m=(u.left+s.width-l.width)*-1:m=0,e.style.top=d+"px",e.style.left=m+"px"}}},{key:"flipfitCollision",value:function(e,i){var s=this,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"left top",u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"left bottom",l=arguments.length>4?arguments[4]:void 0;if(e&&i){var d=i.getBoundingClientRect(),m=this.getViewport(),y=o.split(" "),S=u.split(" "),X=function(be,we){return we?+be.substring(be.search(/(\+|-)/g))||0:be.substring(0,be.search(/(\+|-)/g))||be},he={my:{x:X(y[0]),y:X(y[1]||y[0]),offsetX:X(y[0],!0),offsetY:X(y[1]||y[0],!0)},at:{x:X(S[0]),y:X(S[1]||S[0]),offsetX:X(S[0],!0),offsetY:X(S[1]||S[0],!0)}},Ce={left:function(){var be=he.my.offsetX+he.at.offsetX;return be+d.left+(he.my.x==="left"?0:-1*(he.my.x==="center"?s.getOuterWidth(e)/2:s.getOuterWidth(e)))},top:function(){var be=he.my.offsetY+he.at.offsetY;return be+d.top+(he.my.y==="top"?0:-1*(he.my.y==="center"?s.getOuterHeight(e)/2:s.getOuterHeight(e)))}},Ee={count:{x:0,y:0},left:function(){var be=Ce.left(),we=r.getWindowScrollLeft();e.style.left=be+we+"px",this.count.x===2?(e.style.left=we+"px",this.count.x=0):be<0&&(this.count.x++,he.my.x="left",he.at.x="right",he.my.offsetX*=-1,he.at.offsetX*=-1,this.right())},right:function(){var be=Ce.left()+r.getOuterWidth(i),we=r.getWindowScrollLeft();e.style.left=be+we+"px",this.count.x===2?(e.style.left=m.width-r.getOuterWidth(e)+we+"px",this.count.x=0):be+r.getOuterWidth(e)>m.width&&(this.count.x++,he.my.x="right",he.at.x="left",he.my.offsetX*=-1,he.at.offsetX*=-1,this.left())},top:function(){var be=Ce.top(),we=r.getWindowScrollTop();e.style.top=be+we+"px",this.count.y===2?(e.style.left=we+"px",this.count.y=0):be<0&&(this.count.y++,he.my.y="top",he.at.y="bottom",he.my.offsetY*=-1,he.at.offsetY*=-1,this.bottom())},bottom:function(){var be=Ce.top()+r.getOuterHeight(i),we=r.getWindowScrollTop();e.style.top=be+we+"px",this.count.y===2?(e.style.left=m.height-r.getOuterHeight(e)+we+"px",this.count.y=0):be+r.getOuterHeight(i)>m.height&&(this.count.y++,he.my.y="bottom",he.at.y="top",he.my.offsetY*=-1,he.at.offsetY*=-1,this.top())},center:function(be){if(be==="y"){var we=Ce.top()+r.getOuterHeight(i)/2;e.style.top=we+r.getWindowScrollTop()+"px",we<0?this.bottom():we+r.getOuterHeight(i)>m.height&&this.top()}else{var ve=Ce.left()+r.getOuterWidth(i)/2;e.style.left=ve+r.getWindowScrollLeft()+"px",ve<0?this.left():ve+r.getOuterWidth(e)>m.width&&this.right()}}};Ee[he.at.x]("x"),Ee[he.at.y]("y"),this.isFunction(l)&&l(he)}}},{key:"findCollisionPosition",value:function(e){if(e){var i=e==="top"||e==="bottom",s=e==="left"?"right":"left",o=e==="top"?"bottom":"top";return i?{axis:"y",my:"center ".concat(o),at:"center ".concat(e)}:{axis:"x",my:"".concat(s," center"),at:"".concat(e," center")}}}},{key:"getParents",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e.parentNode===null?i:this.getParents(e.parentNode,i.concat([e.parentNode]))}},{key:"getScrollableParents",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=[];if(e){var o=this.getParents(e),u=/(auto|scroll)/,l=function(ve){var ke=ve?getComputedStyle(ve):null;return ke&&(u.test(ke.getPropertyValue("overflow"))||u.test(ke.getPropertyValue("overflow-x"))||u.test(ke.getPropertyValue("overflow-y")))},d=function(ve){i?s.push(ve.nodeName==="BODY"||ve.nodeName==="HTML"||ve.nodeType===9?window:ve):s.push(ve)},m=_createForOfIteratorHelper$1(o),y;try{for(m.s();!(y=m.n()).done;){var S=y.value,X=S.nodeType===1&&S.dataset.scrollselectors;if(X){var he=X.split(","),Ce=_createForOfIteratorHelper$1(he),Ee;try{for(Ce.s();!(Ee=Ce.n()).done;){var xe=Ee.value,be=this.findSingle(S,xe);be&&l(be)&&d(be)}}catch(we){Ce.e(we)}finally{Ce.f()}}S.nodeType===1&&l(S)&&d(S)}}catch(we){m.e(we)}finally{m.f()}}return s.some(function(we){return we===document.body||we===window})||s.push(window),s}},{key:"getHiddenElementOuterHeight",value:function(e){if(e){e.style.visibility="hidden",e.style.display="block";var i=e.offsetHeight;return e.style.display="none",e.style.visibility="visible",i}return 0}},{key:"getHiddenElementOuterWidth",value:function(e){if(e){e.style.visibility="hidden",e.style.display="block";var i=e.offsetWidth;return e.style.display="none",e.style.visibility="visible",i}return 0}},{key:"getHiddenElementDimensions",value:function(e){var i={};return e&&(e.style.visibility="hidden",e.style.display="block",i.width=e.offsetWidth,i.height=e.offsetHeight,e.style.display="none",e.style.visibility="visible"),i}},{key:"fadeIn",value:function(e,i){if(e){e.style.opacity=0;var s=+new Date,o=0,u=function(){o=+e.style.opacity+(new Date().getTime()-s)/i,e.style.opacity=o,s=+new Date,+o<1&&(window.requestAnimationFrame&&requestAnimationFrame(u)||setTimeout(u,16))};u()}}},{key:"fadeOut",value:function(e,i){if(e)var s=1,o=50,u=o/i,l=setInterval(function(){s=s-u,s<=0&&(s=0,clearInterval(l)),e.style.opacity=s},o)}},{key:"getUserAgent",value:function(){return navigator.userAgent}},{key:"isIOS",value:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}},{key:"isAndroid",value:function(){return/(android)/i.test(navigator.userAgent)}},{key:"isChrome",value:function(){return/(chrome)/i.test(navigator.userAgent)}},{key:"isClient",value:function(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}},{key:"isTouchDevice",value:function(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}},{key:"isFunction",value:function(e){return!!(e&&e.constructor&&e.call&&e.apply)}},{key:"appendChild",value:function(e,i){if(this.isElement(i))i.appendChild(e);else if(i.el&&i.el.nativeElement)i.el.nativeElement.appendChild(e);else throw new Error("Cannot append "+i+" to "+e)}},{key:"removeChild",value:function(e,i){if(this.isElement(i))i.removeChild(e);else if(i.el&&i.el.nativeElement)i.el.nativeElement.removeChild(e);else throw new Error("Cannot remove "+e+" from "+i)}},{key:"isElement",value:function(e){return(typeof HTMLElement>"u"?"undefined":_typeof$b(HTMLElement))==="object"?e instanceof HTMLElement:e&&_typeof$b(e)==="object"&&e!==null&&e.nodeType===1&&typeof e.nodeName=="string"}},{key:"scrollInView",value:function(e,i){var s=getComputedStyle(e).getPropertyValue("border-top-width"),o=s?parseFloat(s):0,u=getComputedStyle(e).getPropertyValue("padding-top"),l=u?parseFloat(u):0,d=e.getBoundingClientRect(),m=i.getBoundingClientRect(),y=m.top+document.body.scrollTop-(d.top+document.body.scrollTop)-o-l,S=e.scrollTop,X=e.clientHeight,he=this.getOuterHeight(i);y<0?e.scrollTop=S+y:y+he>X&&(e.scrollTop=S+y-X+he)}},{key:"clearSelection",value:function(){if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().rangeCount>0&&window.getSelection().getRangeAt(0).getClientRects().length>0&&window.getSelection().removeAllRanges();else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch{}}},{key:"calculateScrollbarWidth",value:function(e){if(e){var i=getComputedStyle(e);return e.offsetWidth-e.clientWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.borderRightWidth)}if(this.calculatedScrollbarWidth!=null)return this.calculatedScrollbarWidth;var s=document.createElement("div");s.className="p-scrollbar-measure",document.body.appendChild(s);var o=s.offsetWidth-s.clientWidth;return document.body.removeChild(s),this.calculatedScrollbarWidth=o,o}},{key:"calculateBodyScrollbarWidth",value:function(){return window.innerWidth-document.documentElement.offsetWidth}},{key:"getBrowser",value:function(){if(!this.browser){var e=this.resolveUserAgent();this.browser={},e.browser&&(this.browser[e.browser]=!0,this.browser.version=e.version),this.browser.chrome?this.browser.webkit=!0:this.browser.webkit&&(this.browser.safari=!0)}return this.browser}},{key:"resolveUserAgent",value:function(){var e=navigator.userAgent.toLowerCase(),i=/(chrome)[ ]([\w.]+)/.exec(e)||/(webkit)[ ]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ ]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:i[1]||"",version:i[2]||"0"}}},{key:"blockBodyScroll",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"p-overflow-hidden",i=!!document.body.style.getPropertyValue("--scrollbar-width");!i&&document.body.style.setProperty("--scrollbar-width",this.calculateBodyScrollbarWidth()+"px"),this.addClass(document.body,e)}},{key:"unblockBodyScroll",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"p-overflow-hidden";document.body.style.removeProperty("--scrollbar-width"),this.removeClass(document.body,e)}},{key:"isVisible",value:function(e){return e&&(e.clientHeight!==0||e.getClientRects().length!==0||getComputedStyle(e).display!=="none")}},{key:"isExist",value:function(e){return!!(e!==null&&typeof e<"u"&&e.nodeName&&e.parentNode)}},{key:"getFocusableElements",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",s=r.find(e,'button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])'.concat(i,`,
                [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])`).concat(i,`,
                input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])`).concat(i,`,
                select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])`).concat(i,`,
                textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])`).concat(i,`,
                [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])`).concat(i,`,
                [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])`).concat(i)),o=[],u=_createForOfIteratorHelper$1(s),l;try{for(u.s();!(l=u.n()).done;){var d=l.value;getComputedStyle(d).display!=="none"&&getComputedStyle(d).visibility!=="hidden"&&o.push(d)}}catch(m){u.e(m)}finally{u.f()}return o}},{key:"getFirstFocusableElement",value:function(e,i){var s=r.getFocusableElements(e,i);return s.length>0?s[0]:null}},{key:"getLastFocusableElement",value:function(e,i){var s=r.getFocusableElements(e,i);return s.length>0?s[s.length-1]:null}},{key:"focus",value:function(e,i){var s=i===void 0?!0:!i;e&&document.activeElement!==e&&e.focus({preventScroll:s})}},{key:"focusFirstElement",value:function(e,i){if(e){var s=r.getFirstFocusableElement(e);return s&&r.focus(s,i),s}}},{key:"getCursorOffset",value:function(e,i,s,o){if(e){var u=getComputedStyle(e),l=document.createElement("div");l.style.position="absolute",l.style.top="0px",l.style.left="0px",l.style.visibility="hidden",l.style.pointerEvents="none",l.style.overflow=u.overflow,l.style.width=u.width,l.style.height=u.height,l.style.padding=u.padding,l.style.border=u.border,l.style.overflowWrap=u.overflowWrap,l.style.whiteSpace=u.whiteSpace,l.style.lineHeight=u.lineHeight,l.innerHTML=i.replace(/\r\n|\r|\n/g,"<br />");var d=document.createElement("span");d.textContent=o,l.appendChild(d);var m=document.createTextNode(s);l.appendChild(m),document.body.appendChild(l);var y=d.offsetLeft,S=d.offsetTop,X=d.clientHeight;return document.body.removeChild(l),{left:Math.abs(y-e.scrollLeft),top:Math.abs(S-e.scrollTop)+X}}return{top:"auto",left:"auto"}}},{key:"invokeElementMethod",value:function(e,i,s){e[i].apply(e,s)}},{key:"isClickable",value:function(e){var i=e.nodeName,s=e.parentElement&&e.parentElement.nodeName;return i==="INPUT"||i==="TEXTAREA"||i==="BUTTON"||i==="A"||s==="INPUT"||s==="TEXTAREA"||s==="BUTTON"||s==="A"||this.hasClass(e,"p-button")||this.hasClass(e.parentElement,"p-button")||this.hasClass(e.parentElement,"p-checkbox")||this.hasClass(e.parentElement,"p-radiobutton")}},{key:"applyStyle",value:function(e,i){if(typeof i=="string")e.style.cssText=i;else for(var s in i)e.style[s]=i[s]}},{key:"exportCSV",value:function(e,i){var s=new Blob([e],{type:"application/csv;charset=utf-8;"});if(window.navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(s,i+".csv");else{var o=r.saveAs({name:i+".csv",src:URL.createObjectURL(s)});o||(e="data:text/csv;charset=utf-8,"+e,window.open(encodeURI(e)))}}},{key:"saveAs",value:function(e){if(e){var i=document.createElement("a");if(i.download!==void 0){var s=e.name,o=e.src;return i.setAttribute("href",o),i.setAttribute("download",s),i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),!0}}return!1}},{key:"createInlineStyle",value:function(e,i){var s=document.createElement("style");return r.addNonce(s,e),i||(i=document.head),i.appendChild(s),s}},{key:"removeInlineStyle",value:function(e){if(this.isExist(e)){try{e.parentNode.removeChild(e)}catch{}e=null}return e}},{key:"addNonce",value:function(e,i){try{i||(i=define_process_env_default.REACT_APP_CSS_NONCE)}catch{}i&&e.setAttribute("nonce",i)}},{key:"getTargetElement",value:function(e){if(!e)return null;if(e==="document")return document;if(e==="window")return window;if(_typeof$b(e)==="object"&&e.hasOwnProperty("current"))return this.isExist(e.current)?e.current:null;var i=function(u){return!!(u&&u.constructor&&u.call&&u.apply)},s=i(e)?e():e;return s&&s.nodeType===9||this.isExist(s)?s:null}},{key:"getAttributeNames",value:function(e){var i,s,o;for(s=[],o=e.attributes,i=0;i<o.length;++i)s.push(o[i].nodeName);return s.sort(),s}},{key:"isEqualElement",value:function(e,i){var s,o,u,l,d;if(s=r.getAttributeNames(e),o=r.getAttributeNames(i),s.join(",")!==o.join(","))return!1;for(var m=0;m<s.length;++m)if(u=s[m],u==="style")for(var y=e.style,S=i.style,X=/^\d+$/,he=0,Ce=Object.keys(y);he<Ce.length;he++){var Ee=Ce[he];if(!X.test(Ee)&&y[Ee]!==S[Ee])return!1}else if(e.getAttribute(u)!==i.getAttribute(u))return!1;for(l=e.firstChild,d=i.firstChild;l&&d;l=l.nextSibling,d=d.nextSibling){if(l.nodeType!==d.nodeType)return!1;if(l.nodeType===1){if(!r.isEqualElement(l,d))return!1}else if(l.nodeValue!==d.nodeValue)return!1}return!(l||d)}},{key:"hasCSSAnimation",value:function(e){if(e){var i=getComputedStyle(e),s=parseFloat(i.getPropertyValue("animation-duration")||"0");return s>0}return!1}},{key:"hasCSSTransition",value:function(e){if(e){var i=getComputedStyle(e),s=parseFloat(i.getPropertyValue("transition-duration")||"0");return s>0}return!1}}])}();_defineProperty$a(DomHandler,"DATA_PROPS",["data-"]);_defineProperty$a(DomHandler,"ARIA_PROPS",["aria","focus-target"]);function _extends$9(){return _extends$9=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},_extends$9.apply(this,arguments)}function _createForOfIteratorHelper(r,n){var e=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!e){if(Array.isArray(r)||(e=_unsupportedIterableToArray$7(r))||n){e&&(r=e);var i=0,s=function(){};return{s,n:function(){return i>=r.length?{done:!0}:{done:!1,value:r[i++]}},e:function(m){throw m},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,u=!1,l;return{s:function(){e=e.call(r)},n:function(){var m=e.next();return o=m.done,m},e:function(m){u=!0,l=m},f:function(){try{!o&&e.return!=null&&e.return()}finally{if(u)throw l}}}}function _unsupportedIterableToArray$7(r,n){if(r){if(typeof r=="string")return _arrayLikeToArray$7(r,n);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return _arrayLikeToArray$7(r,n)}}function _arrayLikeToArray$7(r,n){(n==null||n>r.length)&&(n=r.length);for(var e=0,i=new Array(n);e<n;e++)i[e]=r[e];return i}var ObjectUtils=function(){function r(){_classCallCheck$2(this,r)}return _createClass$2(r,null,[{key:"equals",value:function(e,i,s){return s&&e&&_typeof$b(e)==="object"&&i&&_typeof$b(i)==="object"?this.deepEquals(this.resolveFieldData(e,s),this.resolveFieldData(i,s)):this.deepEquals(e,i)}},{key:"deepEquals",value:function(e,i){if(e===i)return!0;if(e&&i&&_typeof$b(e)==="object"&&_typeof$b(i)==="object"){var s=Array.isArray(e),o=Array.isArray(i),u,l,d;if(s&&o){if(l=e.length,l!==i.length)return!1;for(u=l;u--!==0;)if(!this.deepEquals(e[u],i[u]))return!1;return!0}if(s!==o)return!1;var m=e instanceof Date,y=i instanceof Date;if(m!==y)return!1;if(m&&y)return e.getTime()===i.getTime();var S=e instanceof RegExp,X=i instanceof RegExp;if(S!==X)return!1;if(S&&X)return e.toString()===i.toString();var he=Object.keys(e);if(l=he.length,l!==Object.keys(i).length)return!1;for(u=l;u--!==0;)if(!Object.prototype.hasOwnProperty.call(i,he[u]))return!1;for(u=l;u--!==0;)if(d=he[u],!this.deepEquals(e[d],i[d]))return!1;return!0}return e!==e&&i!==i}},{key:"resolveFieldData",value:function(e,i){if(!e||!i)return null;try{var s=e[i];if(this.isNotEmpty(s))return s}catch{}if(Object.keys(e).length){if(this.isFunction(i))return i(e);if(this.isNotEmpty(e[i]))return e[i];if(i.indexOf(".")===-1)return e[i];for(var o=i.split("."),u=e,l=0,d=o.length;l<d;++l){if(u==null)return null;u=u[o[l]]}return u}return null}},{key:"findDiffKeys",value:function(e,i){return!e||!i?{}:Object.keys(e).filter(function(s){return!i.hasOwnProperty(s)}).reduce(function(s,o){return s[o]=e[o],s},{})}},{key:"reduceKeys",value:function(e,i){var s={};return!e||!i||i.length===0||Object.keys(e).filter(function(o){return i.some(function(u){return o.startsWith(u)})}).forEach(function(o){s[o]=e[o],delete e[o]}),s}},{key:"reorderArray",value:function(e,i,s){e&&i!==s&&(s>=e.length&&(s=s%e.length,i=i%e.length),e.splice(s,0,e.splice(i,1)[0]))}},{key:"findIndexInList",value:function(e,i,s){var o=this;return i?s?i.findIndex(function(u){return o.equals(u,e,s)}):i.findIndex(function(u){return u===e}):-1}},{key:"getJSXElement",value:function(e){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return this.isFunction(e)?e.apply(void 0,s):e}},{key:"getItemValue",value:function(e){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return this.isFunction(e)?e.apply(void 0,s):e}},{key:"getProp",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=e?e[i]:void 0;return o===void 0?s[i]:o}},{key:"getPropCaseInsensitive",value:function(e,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=this.toFlatCase(i);for(var u in e)if(e.hasOwnProperty(u)&&this.toFlatCase(u)===o)return e[u];for(var l in s)if(s.hasOwnProperty(l)&&this.toFlatCase(l)===o)return s[l]}},{key:"getMergedProps",value:function(e,i){return Object.assign({},i,e)}},{key:"getDiffProps",value:function(e,i){return this.findDiffKeys(e,i)}},{key:"getPropValue",value:function(e){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return this.isFunction(e)?e.apply(void 0,s):e}},{key:"getComponentProp",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.isNotEmpty(e)?this.getProp(e.props,i,s):void 0}},{key:"getComponentProps",value:function(e,i){return this.isNotEmpty(e)?this.getMergedProps(e.props,i):void 0}},{key:"getComponentDiffProps",value:function(e,i){return this.isNotEmpty(e)?this.getDiffProps(e.props,i):void 0}},{key:"isValidChild",value:function(e,i,s){if(e){var o,u=this.getComponentProp(e,"__TYPE")||(e.type?e.type.displayName:void 0);!u&&e!==null&&e!==void 0&&(o=e.type)!==null&&o!==void 0&&(o=o._payload)!==null&&o!==void 0&&o.value&&(u=e.type._payload.value.find(function(m){return m===i}));var l=u===i;try{var d}catch{}return l}return!1}},{key:"getRefElement",value:function(e){return e?_typeof$b(e)==="object"&&e.hasOwnProperty("current")?e.current:e:null}},{key:"combinedRefs",value:function(e,i){e&&i&&(typeof i=="function"?i(e.current):i.current=e.current)}},{key:"removeAccents",value:function(e){return e&&e.search(/[\xC0-\xFF]/g)>-1&&(e=e.replace(/[\xC0-\xC5]/g,"A").replace(/[\xC6]/g,"AE").replace(/[\xC7]/g,"C").replace(/[\xC8-\xCB]/g,"E").replace(/[\xCC-\xCF]/g,"I").replace(/[\xD0]/g,"D").replace(/[\xD1]/g,"N").replace(/[\xD2-\xD6\xD8]/g,"O").replace(/[\xD9-\xDC]/g,"U").replace(/[\xDD]/g,"Y").replace(/[\xDE]/g,"P").replace(/[\xE0-\xE5]/g,"a").replace(/[\xE6]/g,"ae").replace(/[\xE7]/g,"c").replace(/[\xE8-\xEB]/g,"e").replace(/[\xEC-\xEF]/g,"i").replace(/[\xF1]/g,"n").replace(/[\xF2-\xF6\xF8]/g,"o").replace(/[\xF9-\xFC]/g,"u").replace(/[\xFE]/g,"p").replace(/[\xFD\xFF]/g,"y")),e}},{key:"toFlatCase",value:function(e){return this.isNotEmpty(e)&&this.isString(e)?e.replace(/(-|_)/g,"").toLowerCase():e}},{key:"toCapitalCase",value:function(e){return this.isNotEmpty(e)&&this.isString(e)?e[0].toUpperCase()+e.slice(1):e}},{key:"trim",value:function(e){return this.isNotEmpty(e)&&this.isString(e)?e.trim():e}},{key:"isEmpty",value:function(e){return e==null||e===""||Array.isArray(e)&&e.length===0||!(e instanceof Date)&&_typeof$b(e)==="object"&&Object.keys(e).length===0}},{key:"isNotEmpty",value:function(e){return!this.isEmpty(e)}},{key:"isFunction",value:function(e){return!!(e&&e.constructor&&e.call&&e.apply)}},{key:"isObject",value:function(e){return e!==null&&e instanceof Object&&e.constructor===Object}},{key:"isDate",value:function(e){return e!==null&&e instanceof Date&&e.constructor===Date}},{key:"isArray",value:function(e){return e!==null&&Array.isArray(e)}},{key:"isString",value:function(e){return e!==null&&typeof e=="string"}},{key:"isPrintableCharacter",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return this.isNotEmpty(e)&&e.length===1&&e.match(/\S| /)}},{key:"isLetter",value:function(e){return/^[a-zA-Z\u00C0-\u017F]$/.test(e)}},{key:"isScalar",value:function(e){return e!=null&&(typeof e=="string"||typeof e=="number"||typeof e=="bigint"||typeof e=="boolean")}},{key:"findLast",value:function(e,i){var s;if(this.isNotEmpty(e))try{s=e.findLast(i)}catch{s=_toConsumableArray$4(e).reverse().find(i)}return s}},{key:"findLastIndex",value:function(e,i){var s=-1;if(this.isNotEmpty(e))try{s=e.findLastIndex(i)}catch{s=e.lastIndexOf(_toConsumableArray$4(e).reverse().find(i))}return s}},{key:"sort",value:function(e,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,o=arguments.length>3?arguments[3]:void 0,u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1,l=this.compare(e,i,o,s),d=s;return(this.isEmpty(e)||this.isEmpty(i))&&(d=u===1?s:u),d*l}},{key:"compare",value:function(e,i,s){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,u=-1,l=this.isEmpty(e),d=this.isEmpty(i);return l&&d?u=0:l?u=o:d?u=-o:typeof e=="string"&&typeof i=="string"?u=s(e,i):u=e<i?-1:e>i?1:0,u}},{key:"localeComparator",value:function(e){return new Intl.Collator(e,{numeric:!0}).compare}},{key:"findChildrenByKey",value:function(e,i){var s=_createForOfIteratorHelper(e),o;try{for(s.s();!(o=s.n()).done;){var u=o.value;if(u.key===i)return u.children||[];if(u.children){var l=this.findChildrenByKey(u.children,i);if(l.length>0)return l}}}catch(d){s.e(d)}finally{s.f()}return[]}},{key:"mutateFieldData",value:function(e,i,s){if(!(_typeof$b(e)!=="object"||typeof i!="string"))for(var o=i.split("."),u=e,l=0,d=o.length;l<d;++l){if(l+1-d===0){u[o[l]]=s;break}u[o[l]]||(u[o[l]]={}),u=u[o[l]]}}}])}();function ownKeys$2$1(r,n){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);n&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),e.push.apply(e,i)}return e}function _objectSpread$2$1(r){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};n%2?ownKeys$2$1(Object(e),!0).forEach(function(i){_defineProperty$a(r,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):ownKeys$2$1(Object(e)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(e,i))})}return r}var IconUtils=function(){function r(){_classCallCheck$2(this,r)}return _createClass$2(r,null,[{key:"getJSXIcon",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=null;if(e!==null){var u=_typeof$b(e),l=classNames(i.className,u==="string"&&e);if(o=reactExports.createElement("span",_extends$9({},i,{className:l})),u!=="string"){var d=_objectSpread$2$1({iconProps:i,element:o},s);return ObjectUtils.getJSXElement(e,d)}}return o}}])}();function ownKeys$9(r,n){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);n&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),e.push.apply(e,i)}return e}function _objectSpread$9(r){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};n%2?ownKeys$9(Object(e),!0).forEach(function(i){_defineProperty$a(r,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):ownKeys$9(Object(e)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(e,i))})}return r}function mergeProps(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(r){var e=function(u){return typeof u=="function"},i=n.classNameMergeFunction,s=e(i);return r.reduce(function(o,u){if(!u)return o;var l=function(){var y=u[d];if(d==="style")o.style=_objectSpread$9(_objectSpread$9({},o.style),u.style);else if(d==="className"){var S="";s?S=i(o.className,u.className):S=[o.className,u.className].join(" ").trim(),o.className=S||void 0}else if(e(y)){var X=o[d];o[d]=X?function(){X.apply(void 0,arguments),y.apply(void 0,arguments)}:y}else o[d]=y};for(var d in u)l();return o},{})}}var lastId=0;function UniqueComponentId(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"pr_id_";return lastId++,"".concat(r).concat(lastId)}function handler(){var r=[],n=function(l,d){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:999,y=s(l,d,m),S=y.value+(y.key===l?0:m)+1;return r.push({key:l,value:S}),S},e=function(l){r=r.filter(function(d){return d.value!==l})},i=function(l,d){return s(l,d).value},s=function(l,d){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return _toConsumableArray$4(r).reverse().find(function(y){return d?!0:y.key===l})||{key:l,value:m}},o=function(l){return l&&parseInt(l.style.zIndex,10)||0};return{get:o,set:function(l,d,m,y){d&&(d.style.zIndex=String(n(l,m,y)))},clear:function(l){l&&(e(ZIndexUtils.get(l)),l.style.zIndex="")},getCurrent:function(l,d){return i(l,d)}}}var ZIndexUtils=handler(),FilterMatchMode=Object.freeze({STARTS_WITH:"startsWith",CONTAINS:"contains",NOT_CONTAINS:"notContains",ENDS_WITH:"endsWith",EQUALS:"equals",NOT_EQUALS:"notEquals",IN:"in",LESS_THAN:"lt",LESS_THAN_OR_EQUAL_TO:"lte",GREATER_THAN:"gt",GREATER_THAN_OR_EQUAL_TO:"gte",BETWEEN:"between",DATE_IS:"dateIs",DATE_IS_NOT:"dateIsNot",DATE_BEFORE:"dateBefore",DATE_AFTER:"dateAfter",CUSTOM:"custom"});function _typeof$a(r){"@babel/helpers - typeof";return _typeof$a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$a(r)}function _toPrimitive$9(r,n){if(_typeof$a(r)!=="object"||r===null)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var i=e.call(r,n||"default");if(_typeof$a(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}function _toPropertyKey$9(r){var n=_toPrimitive$9(r,"string");return _typeof$a(n)==="symbol"?n:String(n)}function _defineProperty$9(r,n,e){return n=_toPropertyKey$9(n),n in r?Object.defineProperty(r,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[n]=e,r}function _createClass$1(r,n,e){return Object.defineProperty(r,"prototype",{writable:!1}),r}function _classCallCheck$1(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}var PrimeReact$1=_createClass$1(function r(){_classCallCheck$1(this,r)});_defineProperty$9(PrimeReact$1,"ripple",!1);_defineProperty$9(PrimeReact$1,"inputStyle","outlined");_defineProperty$9(PrimeReact$1,"locale","en");_defineProperty$9(PrimeReact$1,"appendTo",null);_defineProperty$9(PrimeReact$1,"cssTransition",!0);_defineProperty$9(PrimeReact$1,"autoZIndex",!0);_defineProperty$9(PrimeReact$1,"hideOverlaysOnDocumentScrolling",!1);_defineProperty$9(PrimeReact$1,"nonce",null);_defineProperty$9(PrimeReact$1,"nullSortOrder",1);_defineProperty$9(PrimeReact$1,"zIndex",{modal:1100,overlay:1e3,menu:1e3,tooltip:1100,toast:1200});_defineProperty$9(PrimeReact$1,"pt",void 0);_defineProperty$9(PrimeReact$1,"filterMatchModeOptions",{text:[FilterMatchMode.STARTS_WITH,FilterMatchMode.CONTAINS,FilterMatchMode.NOT_CONTAINS,FilterMatchMode.ENDS_WITH,FilterMatchMode.EQUALS,FilterMatchMode.NOT_EQUALS],numeric:[FilterMatchMode.EQUALS,FilterMatchMode.NOT_EQUALS,FilterMatchMode.LESS_THAN,FilterMatchMode.LESS_THAN_OR_EQUAL_TO,FilterMatchMode.GREATER_THAN,FilterMatchMode.GREATER_THAN_OR_EQUAL_TO],date:[FilterMatchMode.DATE_IS,FilterMatchMode.DATE_IS_NOT,FilterMatchMode.DATE_BEFORE,FilterMatchMode.DATE_AFTER]});_defineProperty$9(PrimeReact$1,"changeTheme",function(r,n,e,i){var s,o=document.getElementById(e);if(!o)throw Error("Element with id ".concat(e," not found."));var u=o.getAttribute("href").replace(r,n),l=document.createElement("link");l.setAttribute("rel","stylesheet"),l.setAttribute("id",e),l.setAttribute("href",u),l.addEventListener("load",function(){i&&i()}),(s=o.parentNode)===null||s===void 0||s.replaceChild(l,o)});var locales={en:{accept:"Yes",addRule:"Add Rule",am:"AM",apply:"Apply",cancel:"Cancel",choose:"Choose",chooseDate:"Choose Date",chooseMonth:"Choose Month",chooseYear:"Choose Year",clear:"Clear",completed:"Completed",contains:"Contains",custom:"Custom",dateAfter:"Date is after",dateBefore:"Date is before",dateFormat:"mm/dd/yy",dateIs:"Date is",dateIsNot:"Date is not",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],emptyFilterMessage:"No results found",emptyMessage:"No available options",emptySearchMessage:"No results found",emptySelectionMessage:"No selected item",endsWith:"Ends with",equals:"Equals",fileSizeTypes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"],filter:"Filter",firstDayOfWeek:0,gt:"Greater than",gte:"Greater than or equal to",lt:"Less than",lte:"Less than or equal to",matchAll:"Match All",matchAny:"Match Any",medium:"Medium",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],nextDecade:"Next Decade",nextHour:"Next Hour",nextMinute:"Next Minute",nextMonth:"Next Month",nextSecond:"Next Second",nextYear:"Next Year",noFilter:"No Filter",notContains:"Not contains",notEquals:"Not equals",now:"Now",passwordPrompt:"Enter a password",pending:"Pending",pm:"PM",prevDecade:"Previous Decade",prevHour:"Previous Hour",prevMinute:"Previous Minute",prevMonth:"Previous Month",prevSecond:"Previous Second",prevYear:"Previous Year",reject:"No",removeRule:"Remove Rule",searchMessage:"{0} results are available",selectionMessage:"{0} items selected",showMonthAfterYear:!1,startsWith:"Starts with",strong:"Strong",today:"Today",upload:"Upload",weak:"Weak",weekHeader:"Wk",aria:{cancelEdit:"Cancel Edit",close:"Close",collapseRow:"Row Collapsed",editRow:"Edit Row",expandRow:"Row Expanded",falseLabel:"False",filterConstraint:"Filter Constraint",filterOperator:"Filter Operator",firstPageLabel:"First Page",gridView:"Grid View",hideFilterMenu:"Hide Filter Menu",jumpToPageDropdownLabel:"Jump to Page Dropdown",jumpToPageInputLabel:"Jump to Page Input",lastPageLabel:"Last Page",listView:"List View",moveAllToSource:"Move All to Source",moveAllToTarget:"Move All to Target",moveBottom:"Move Bottom",moveDown:"Move Down",moveToSource:"Move to Source",moveToTarget:"Move to Target",moveTop:"Move Top",moveUp:"Move Up",navigation:"Navigation",next:"Next",nextPageLabel:"Next Page",nullLabel:"Not Selected",pageLabel:"Page {page}",otpLabel:"Please enter one time password character {0}",passwordHide:"Hide Password",passwordShow:"Show Password",previous:"Previous",previousPageLabel:"Previous Page",rotateLeft:"Rotate Left",rotateRight:"Rotate Right",rowsPerPageLabel:"Rows per page",saveEdit:"Save Edit",scrollTop:"Scroll Top",selectAll:"All items selected",selectRow:"Row Selected",showFilterMenu:"Show Filter Menu",slide:"Slide",slideNumber:"{slideNumber}",star:"1 star",stars:"{star} stars",trueLabel:"True",unselectAll:"All items unselected",unselectRow:"Row Unselected",zoomImage:"Zoom Image",zoomIn:"Zoom In",zoomOut:"Zoom Out"}}};function localeOption(r,n){if(r.includes("__proto__")||r.includes("prototype"))throw new Error("Unsafe key detected");var e=PrimeReact$1.locale;try{return localeOptions(e)[r]}catch{throw new Error("The ".concat(r," option is not found in the current locale('").concat(e,"')."))}}function localeOptions(r){var n=r||PrimeReact$1.locale;if(n.includes("__proto__")||n.includes("prototype"))throw new Error("Unsafe locale detected");return locales[n]}var PrimeReactContext=React.createContext(),PrimeReact=PrimeReact$1;function _arrayWithHoles$5(r){if(Array.isArray(r))return r}function _iterableToArrayLimit$5(r,n){var e=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(e!=null){var i,s,o,u,l=[],d=!0,m=!1;try{if(o=(e=e.call(r)).next,n===0){if(Object(e)!==e)return;d=!1}else for(;!(d=(i=o.call(e)).done)&&(l.push(i.value),l.length!==n);d=!0);}catch(y){m=!0,s=y}finally{try{if(!d&&e.return!=null&&(u=e.return(),Object(u)!==u))return}finally{if(m)throw s}}return l}}function _arrayLikeToArray$6(r,n){(n==null||n>r.length)&&(n=r.length);for(var e=0,i=new Array(n);e<n;e++)i[e]=r[e];return i}function _unsupportedIterableToArray$6(r,n){if(r){if(typeof r=="string")return _arrayLikeToArray$6(r,n);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return _arrayLikeToArray$6(r,n)}}function _nonIterableRest$5(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _slicedToArray$5(r,n){return _arrayWithHoles$5(r)||_iterableToArrayLimit$5(r,n)||_unsupportedIterableToArray$6(r,n)||_nonIterableRest$5()}var usePrevious$1=function(n){var e=reactExports.useRef(null);return reactExports.useEffect(function(){return e.current=n,function(){e.current=null}},[n]),e.current},useUnmountEffect=function(n){return reactExports.useEffect(function(){return n},[])},useEventListener=function(n){var e=n.target,i=e===void 0?"document":e,s=n.type,o=n.listener,u=n.options,l=n.when,d=l===void 0?!0:l,m=reactExports.useRef(null),y=reactExports.useRef(null),S=usePrevious$1(o),X=usePrevious$1(u),he=function(){var we=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ve=we.target;ObjectUtils.isNotEmpty(ve)&&(Ce(),(we.when||d)&&(m.current=DomHandler.getTargetElement(ve))),!y.current&&m.current&&(y.current=function(ke){return o&&o(ke)},m.current.addEventListener(s,y.current,u))},Ce=function(){y.current&&(m.current.removeEventListener(s,y.current,u),y.current=null)},Ee=function(){Ce(),S=null,X=null},xe=reactExports.useCallback(function(){d?m.current=DomHandler.getTargetElement(i):(Ce(),m.current=null)},[i,d]);return reactExports.useEffect(function(){xe()},[xe]),reactExports.useEffect(function(){var be="".concat(S)!=="".concat(o),we=X!==u,ve=y.current;ve&&(be||we)?(Ce(),d&&he()):ve||Ee()},[o,u,d]),useUnmountEffect(function(){Ee()}),[he,Ce]},groupToDisplayedElements={},useDisplayOrder=function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=reactExports.useState(function(){return UniqueComponentId()}),s=_slicedToArray$5(i,1),o=s[0],u=reactExports.useState(0),l=_slicedToArray$5(u,2),d=l[0],m=l[1];return reactExports.useEffect(function(){if(e){groupToDisplayedElements[n]||(groupToDisplayedElements[n]=[]);var y=groupToDisplayedElements[n].push(o);return m(y),function(){delete groupToDisplayedElements[n][y-1];var S=groupToDisplayedElements[n].length-1,X=ObjectUtils.findLastIndex(groupToDisplayedElements[n],function(he){return he!==void 0});X!==S&&groupToDisplayedElements[n].splice(X+1),m(void 0)}}},[n,o,e]),d};function _arrayWithoutHoles$3(r){if(Array.isArray(r))return _arrayLikeToArray$6(r)}function _iterableToArray$3(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function _nonIterableSpread$3(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _toConsumableArray$3(r){return _arrayWithoutHoles$3(r)||_iterableToArray$3(r)||_unsupportedIterableToArray$6(r)||_nonIterableSpread$3()}var ESC_KEY_HANDLING_PRIORITIES={SIDEBAR:100,SLIDE_MENU:200,DIALOG:300,IMAGE:400,MENU:500,OVERLAY_PANEL:600,PASSWORD:700,CASCADE_SELECT:800,SPLIT_BUTTON:900,SPEED_DIAL:1e3,TOOLTIP:1200},globalEscKeyHandlingLogic={escKeyListeners:new Map,onGlobalKeyDown:function(n){if(n.code==="Escape"){var e=globalEscKeyHandlingLogic.escKeyListeners,i=Math.max.apply(Math,_toConsumableArray$3(e.keys())),s=e.get(i),o=Math.max.apply(Math,_toConsumableArray$3(s.keys())),u=s.get(o);u(n)}},refreshGlobalKeyDownListener:function(){var n=DomHandler.getTargetElement("document");this.escKeyListeners.size>0?n.addEventListener("keydown",this.onGlobalKeyDown):n.removeEventListener("keydown",this.onGlobalKeyDown)},addListener:function(n,e){var i=this,s=_slicedToArray$5(e,2),o=s[0],u=s[1],l=this.escKeyListeners;l.has(o)||l.set(o,new Map);var d=l.get(o);if(d.has(u))throw new Error("Unexpected: global esc key listener with priority [".concat(o,", ").concat(u,"] already exists."));return d.set(u,n),this.refreshGlobalKeyDownListener(),function(){d.delete(u),d.size===0&&l.delete(o),i.refreshGlobalKeyDownListener()}}},useGlobalOnEscapeKey=function(n){var e=n.callback,i=n.when,s=n.priority;reactExports.useEffect(function(){if(i)return globalEscKeyHandlingLogic.addListener(e,s)},[e,i,s])},useMergeProps=function(){var n=reactExports.useContext(PrimeReactContext);return function(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return mergeProps(i,n==null?void 0:n.ptOptions)}},useMountEffect=function(n){var e=reactExports.useRef(!1);return reactExports.useEffect(function(){if(!e.current)return e.current=!0,n&&n()},[])},useOverlayScrollListener=function(n){var e=n.target,i=n.listener,s=n.options,o=n.when,u=o===void 0?!0:o,l=reactExports.useContext(PrimeReactContext),d=reactExports.useRef(null),m=reactExports.useRef(null),y=reactExports.useRef([]),S=usePrevious$1(i),X=usePrevious$1(s),he=function(){var we=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(ObjectUtils.isNotEmpty(we.target)&&(Ce(),(we.when||u)&&(d.current=DomHandler.getTargetElement(we.target))),!m.current&&d.current){var ve=l?l.hideOverlaysOnDocumentScrolling:PrimeReact.hideOverlaysOnDocumentScrolling,ke=y.current=DomHandler.getScrollableParents(d.current,ve);m.current=function(De){return i&&i(De)},ke.forEach(function(De){return De.addEventListener("scroll",m.current,s)})}},Ce=function(){if(m.current){var we=y.current;we.forEach(function(ve){return ve.removeEventListener("scroll",m.current,s)}),m.current=null}},Ee=function(){Ce(),y.current=null,S=null,X=null},xe=reactExports.useCallback(function(){u?d.current=DomHandler.getTargetElement(e):(Ce(),d.current=null)},[e,u]);return reactExports.useEffect(function(){xe()},[xe]),reactExports.useEffect(function(){var be="".concat(S)!=="".concat(i),we=X!==s,ve=m.current;ve&&(be||we)?(Ce(),u&&he()):ve||Ee()},[i,s,u]),useUnmountEffect(function(){Ee()}),[he,Ce]},useResizeListener=function(n){var e=n.listener,i=n.when,s=i===void 0?!0:i;return useEventListener({target:"window",type:"resize",listener:e,when:s})},_id=0,useStyle=function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=reactExports.useState(!1),s=_slicedToArray$5(i,2),o=s[0],u=s[1],l=reactExports.useRef(null),d=reactExports.useContext(PrimeReactContext),m=DomHandler.isClient()?window.document:void 0,y=e.document,S=y===void 0?m:y,X=e.manual,he=X===void 0?!1:X,Ce=e.name,Ee=Ce===void 0?"style_".concat(++_id):Ce,xe=e.id,be=xe===void 0?void 0:xe,we=e.media,ve=we===void 0?void 0:we,ke=function(Ie){var Ue=Ie.querySelector('style[data-primereact-style-id="'.concat(Ee,'"]'));if(Ue)return Ue;if(be!==void 0){var ze=S.getElementById(be);if(ze)return ze}return S.createElement("style")},De=function(Ie){o&&n!==Ie&&(l.current.textContent=Ie)},Oe=function(){if(!(!S||o)){var Ie=(d==null?void 0:d.styleContainer)||S.head;l.current=ke(Ie),l.current.isConnected||(l.current.type="text/css",be&&(l.current.id=be),ve&&(l.current.media=ve),DomHandler.addNonce(l.current,d&&d.nonce||PrimeReact.nonce),Ie.appendChild(l.current),Ee&&l.current.setAttribute("data-primereact-style-id",Ee)),l.current.textContent=n,u(!0)}},Le=function(){!S||!l.current||(DomHandler.removeInlineStyle(l.current),u(!1))};return reactExports.useEffect(function(){he||Oe()},[he]),{id:be,name:Ee,update:De,unload:Le,load:Oe,isLoaded:o}},useUpdateEffect=function(n,e){var i=reactExports.useRef(!1);return reactExports.useEffect(function(){if(!i.current){i.current=!0;return}return n&&n()},e)};function _arrayLikeToArray$5(r,n){(n==null||n>r.length)&&(n=r.length);for(var e=0,i=new Array(n);e<n;e++)i[e]=r[e];return i}function _arrayWithoutHoles$2(r){if(Array.isArray(r))return _arrayLikeToArray$5(r)}function _iterableToArray$2(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function _unsupportedIterableToArray$5(r,n){if(r){if(typeof r=="string")return _arrayLikeToArray$5(r,n);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return _arrayLikeToArray$5(r,n)}}function _nonIterableSpread$2(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _toConsumableArray$2(r){return _arrayWithoutHoles$2(r)||_iterableToArray$2(r)||_unsupportedIterableToArray$5(r)||_nonIterableSpread$2()}function _typeof$9(r){"@babel/helpers - typeof";return _typeof$9=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$9(r)}function _toPrimitive$8(r,n){if(_typeof$9(r)!=="object"||r===null)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var i=e.call(r,n||"default");if(_typeof$9(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}function _toPropertyKey$8(r){var n=_toPrimitive$8(r,"string");return _typeof$9(n)==="symbol"?n:String(n)}function _defineProperty$8(r,n,e){return n=_toPropertyKey$8(n),n in r?Object.defineProperty(r,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[n]=e,r}function ownKeys$8(r,n){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);n&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),e.push.apply(e,i)}return e}function _objectSpread$8(r){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};n%2?ownKeys$8(Object(e),!0).forEach(function(i){_defineProperty$8(r,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):ownKeys$8(Object(e)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(e,i))})}return r}var baseStyle=`
.p-hidden-accessible {
    border: 0;
    padding: 0;
    margin: -1px;
    position: absolute;
    height: 1px;
    width: 1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    clip-path: inset(50%);
    white-space: nowrap;
}

.p-hidden-accessible input,
.p-hidden-accessible select {
    transform: scale(0);
}

.p-overflow-hidden {
    overflow: hidden;
    padding-right: var(--scrollbar-width);
}
`,buttonStyles=`
.p-button {
    margin: 0;
    display: inline-flex;
    cursor: pointer;
    user-select: none;
    align-items: center;
    vertical-align: bottom;
    text-align: center;
    overflow: hidden;
    position: relative;
}

.p-button-label {
    flex: 1 1 auto;
}

.p-button-icon-right {
    order: 1;
}

.p-button:disabled {
    cursor: default;
}

.p-button-icon-only {
    justify-content: center;
}

.p-button-icon-only .p-button-label {
    visibility: hidden;
    width: 0;
    flex: 0 0 auto;
}

.p-button-vertical {
    flex-direction: column;
}

.p-button-icon-bottom {
    order: 2;
}

.p-button-group .p-button {
    margin: 0;
}

.p-button-group .p-button:not(:last-child) {
    border-right: 0 none;
}

.p-button-group .p-button:not(:first-of-type):not(:last-of-type) {
    border-radius: 0;
}

.p-button-group .p-button:first-of-type {
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
}

.p-button-group .p-button:last-of-type {
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
}

.p-button-group .p-button:focus {
    position: relative;
    z-index: 1;
}
`,inputTextStyles=`
.p-inputtext {
    margin: 0;
}

.p-fluid .p-inputtext {
    width: 100%;
}

/* InputGroup */
.p-inputgroup {
    display: flex;
    align-items: stretch;
    width: 100%;
}

.p-inputgroup-addon {
    display: flex;
    align-items: center;
    justify-content: center;
}

.p-inputgroup .p-float-label {
    display: flex;
    align-items: stretch;
    width: 100%;
}

.p-inputgroup .p-inputtext,
.p-fluid .p-inputgroup .p-inputtext,
.p-inputgroup .p-inputwrapper,
.p-fluid .p-inputgroup .p-input {
    flex: 1 1 auto;
    width: 1%;
}

/* Floating Label */
.p-float-label {
    display: block;
    position: relative;
}

.p-float-label label {
    position: absolute;
    pointer-events: none;
    top: 50%;
    margin-top: -0.5rem;
    transition-property: all;
    transition-timing-function: ease;
    line-height: 1;
}

.p-float-label textarea ~ label,
.p-float-label .p-mention ~ label {
    top: 1rem;
}

.p-float-label input:focus ~ label,
.p-float-label input:-webkit-autofill ~ label,
.p-float-label input.p-filled ~ label,
.p-float-label textarea:focus ~ label,
.p-float-label textarea.p-filled ~ label,
.p-float-label .p-inputwrapper-focus ~ label,
.p-float-label .p-inputwrapper-filled ~ label,
.p-float-label .p-tooltip-target-wrapper ~ label {
    top: -0.75rem;
    font-size: 12px;
}

.p-float-label .p-placeholder,
.p-float-label input::placeholder,
.p-float-label .p-inputtext::placeholder {
    opacity: 0;
    transition-property: all;
    transition-timing-function: ease;
}

.p-float-label .p-focus .p-placeholder,
.p-float-label input:focus::placeholder,
.p-float-label .p-inputtext:focus::placeholder {
    opacity: 1;
    transition-property: all;
    transition-timing-function: ease;
}

.p-input-icon-left,
.p-input-icon-right {
    position: relative;
    display: inline-block;
}

.p-input-icon-left > i,
.p-input-icon-right > i,
.p-input-icon-left > svg,
.p-input-icon-right > svg,
.p-input-icon-left > .p-input-prefix,
.p-input-icon-right > .p-input-suffix {
    position: absolute;
    top: 50%;
    margin-top: -0.5rem;
}

.p-fluid .p-input-icon-left,
.p-fluid .p-input-icon-right {
    display: block;
    width: 100%;
}
`,iconStyles=`
.p-icon {
    display: inline-block;
}

.p-icon-spin {
    -webkit-animation: p-icon-spin 2s infinite linear;
    animation: p-icon-spin 2s infinite linear;
}

svg.p-icon {
    pointer-events: auto;
}

svg.p-icon g,
.p-disabled svg.p-icon {
    pointer-events: none;
}

@-webkit-keyframes p-icon-spin {
    0% {
        -webkit-transform: rotate(0deg);
        transform: rotate(0deg);
    }
    100% {
        -webkit-transform: rotate(359deg);
        transform: rotate(359deg);
    }
}

@keyframes p-icon-spin {
    0% {
        -webkit-transform: rotate(0deg);
        transform: rotate(0deg);
    }
    100% {
        -webkit-transform: rotate(359deg);
        transform: rotate(359deg);
    }
}
`,commonStyle=`
@layer primereact {
    .p-component, .p-component * {
        box-sizing: border-box;
    }

    .p-hidden {
        display: none;
    }

    .p-hidden-space {
        visibility: hidden;
    }

    .p-reset {
        margin: 0;
        padding: 0;
        border: 0;
        outline: 0;
        text-decoration: none;
        font-size: 100%;
        list-style: none;
    }

    .p-disabled, .p-disabled * {
        cursor: default;
        pointer-events: none;
        user-select: none;
    }

    .p-component-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
    }

    .p-unselectable-text {
        user-select: none;
    }

    .p-scrollbar-measure {
        width: 100px;
        height: 100px;
        overflow: scroll;
        position: absolute;
        top: -9999px;
    }

    @-webkit-keyframes p-fadein {
      0%   { opacity: 0; }
      100% { opacity: 1; }
    }
    @keyframes p-fadein {
      0%   { opacity: 0; }
      100% { opacity: 1; }
    }

    .p-link {
        text-align: left;
        background-color: transparent;
        margin: 0;
        padding: 0;
        border: none;
        cursor: pointer;
        user-select: none;
    }

    .p-link:disabled {
        cursor: default;
    }

    /* Non react overlay animations */
    .p-connected-overlay {
        opacity: 0;
        transform: scaleY(0.8);
        transition: transform .12s cubic-bezier(0, 0, 0.2, 1), opacity .12s cubic-bezier(0, 0, 0.2, 1);
    }

    .p-connected-overlay-visible {
        opacity: 1;
        transform: scaleY(1);
    }

    .p-connected-overlay-hidden {
        opacity: 0;
        transform: scaleY(1);
        transition: opacity .1s linear;
    }

    /* React based overlay animations */
    .p-connected-overlay-enter {
        opacity: 0;
        transform: scaleY(0.8);
    }

    .p-connected-overlay-enter-active {
        opacity: 1;
        transform: scaleY(1);
        transition: transform .12s cubic-bezier(0, 0, 0.2, 1), opacity .12s cubic-bezier(0, 0, 0.2, 1);
    }

    .p-connected-overlay-enter-done {
        transform: none;
    }

    .p-connected-overlay-exit {
        opacity: 1;
    }

    .p-connected-overlay-exit-active {
        opacity: 0;
        transition: opacity .1s linear;
    }

    /* Toggleable Content */
    .p-toggleable-content-enter {
        max-height: 0;
    }

    .p-toggleable-content-enter-active {
        overflow: hidden;
        max-height: 1000px;
        transition: max-height 1s ease-in-out;
    }

    .p-toggleable-content-enter-done {
        transform: none;
    }

    .p-toggleable-content-exit {
        max-height: 1000px;
    }

    .p-toggleable-content-exit-active {
        overflow: hidden;
        max-height: 0;
        transition: max-height 0.45s cubic-bezier(0, 1, 0, 1);
    }

    .p-sr-only {
        border: 0;
        clip: rect(1px, 1px, 1px, 1px);
        clip-path: inset(50%);
        height: 1px;
        margin: -1px;
        overflow: hidden;
        padding: 0;
        position: absolute;
        width: 1px;
        word-wrap: normal;
    }

    /* @todo Refactor */
    .p-menu .p-menuitem-link {
        cursor: pointer;
        display: flex;
        align-items: center;
        text-decoration: none;
        overflow: hidden;
        position: relative;
    }

    `.concat(buttonStyles,`
    `).concat(inputTextStyles,`
    `).concat(iconStyles,`
}
`),ComponentBase={cProps:void 0,cParams:void 0,cName:void 0,defaultProps:{pt:void 0,ptOptions:void 0,unstyled:!1},context:{},globalCSS:void 0,classes:{},styles:"",extend:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=n.css,i=_objectSpread$8(_objectSpread$8({},n.defaultProps),ComponentBase.defaultProps),s={},o=function(y){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ComponentBase.context=S,ComponentBase.cProps=y,ObjectUtils.getMergedProps(y,i)},u=function(y){return ObjectUtils.getDiffProps(y,i)},l=function(){var y,S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",he=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ce=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;S.hasOwnProperty("pt")&&S.pt!==void 0&&(S=S.pt);var Ee=X,xe=/./g.test(Ee)&&!!he[Ee.split(".")[0]],be=xe?ObjectUtils.toFlatCase(Ee.split(".")[1]):ObjectUtils.toFlatCase(Ee),we=he.hostName&&ObjectUtils.toFlatCase(he.hostName),ve=we||he.props&&he.props.__TYPE&&ObjectUtils.toFlatCase(he.props.__TYPE)||"",ke=be==="transition",De="data-pc-",Oe=function(rt){return rt!=null&&rt.props?rt.hostName?rt.props.__TYPE===rt.hostName?rt.props:Oe(rt.parent):rt.parent:void 0},Le=function(rt){var He,We;return((He=he.props)===null||He===void 0?void 0:He[rt])||((We=Oe(he))===null||We===void 0?void 0:We[rt])};ComponentBase.cParams=he,ComponentBase.cName=ve;var Ae=Le("ptOptions")||ComponentBase.context.ptOptions||{},Ie=Ae.mergeSections,Ue=Ie===void 0?!0:Ie,ze=Ae.mergeProps,Ye=ze===void 0?!1:ze,Xe=function(){var rt=_getOptionValue.apply(void 0,arguments);return Array.isArray(rt)?{className:classNames.apply(void 0,_toConsumableArray$2(rt))}:ObjectUtils.isString(rt)?{className:rt}:rt!=null&&rt.hasOwnProperty("className")&&Array.isArray(rt.className)?{className:classNames.apply(void 0,_toConsumableArray$2(rt.className))}:rt},tt=Ce?xe?_useGlobalPT(Xe,Ee,he):_useDefaultPT(Xe,Ee,he):void 0,lt=xe?void 0:_usePT(_getPT(S,ve),Xe,Ee,he),_t=!ke&&_objectSpread$8(_objectSpread$8({},be==="root"&&_defineProperty$8({},"".concat(De,"name"),he.props&&he.props.__parentMetadata?ObjectUtils.toFlatCase(he.props.__TYPE):ve)),{},_defineProperty$8({},"".concat(De,"section"),be));return Ue||!Ue&&lt?Ye?mergeProps([tt,lt,Object.keys(_t).length?_t:{}],{classNameMergeFunction:(y=ComponentBase.context.ptOptions)===null||y===void 0?void 0:y.classNameMergeFunction}):_objectSpread$8(_objectSpread$8(_objectSpread$8({},tt),lt),Object.keys(_t).length?_t:{}):_objectSpread$8(_objectSpread$8({},lt),Object.keys(_t).length?_t:{})},d=function(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},S=y.props,X=y.state,he=function(){var ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",ke=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return l((S||{}).pt,ve,_objectSpread$8(_objectSpread$8({},y),ke))},Ce=function(){var ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ke=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",De=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return l(ve,ke,De,!1)},Ee=function(){return ComponentBase.context.unstyled||PrimeReact.unstyled||S.unstyled},xe=function(){var ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",ke=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Ee()?void 0:_getOptionValue(e&&e.classes,ve,_objectSpread$8({props:S,state:X},ke))},be=function(){var ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",ke=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},De=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(De){var Oe,Le=_getOptionValue(e&&e.inlineStyles,ve,_objectSpread$8({props:S,state:X},ke)),Ae=_getOptionValue(s,ve,_objectSpread$8({props:S,state:X},ke));return mergeProps([Ae,Le],{classNameMergeFunction:(Oe=ComponentBase.context.ptOptions)===null||Oe===void 0?void 0:Oe.classNameMergeFunction})}};return{ptm:he,ptmo:Ce,sx:be,cx:xe,isUnstyled:Ee}};return _objectSpread$8(_objectSpread$8({getProps:o,getOtherProps:u,setMetaData:d},n),{},{defaultProps:i})}},_getOptionValue=function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=String(ObjectUtils.toFlatCase(e)).split("."),o=s.shift(),u=ObjectUtils.isNotEmpty(n)?Object.keys(n).find(function(l){return ObjectUtils.toFlatCase(l)===o}):"";return o?ObjectUtils.isObject(n)?_getOptionValue(ObjectUtils.getItemValue(n[u],i),s.join("."),i):void 0:ObjectUtils.getItemValue(n,i)},_getPT=function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",i=arguments.length>2?arguments[2]:void 0,s=n==null?void 0:n._usept,o=function(l){var d,m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,y=i?i(l):l,S=ObjectUtils.toFlatCase(e);return(d=m?S!==ComponentBase.cName?y==null?void 0:y[S]:void 0:y==null?void 0:y[S])!==null&&d!==void 0?d:y};return ObjectUtils.isNotEmpty(s)?{_usept:s,originalValue:o(n.originalValue),value:o(n.value)}:o(n,!0)},_usePT=function(n,e,i,s){var o=function(Ee){return e(Ee,i,s)};if(n!=null&&n.hasOwnProperty("_usept")){var u=n._usept||ComponentBase.context.ptOptions||{},l=u.mergeSections,d=l===void 0?!0:l,m=u.mergeProps,y=m===void 0?!1:m,S=u.classNameMergeFunction,X=o(n.originalValue),he=o(n.value);return X===void 0&&he===void 0?void 0:ObjectUtils.isString(he)?he:ObjectUtils.isString(X)?X:d||!d&&he?y?mergeProps([X,he],{classNameMergeFunction:S}):_objectSpread$8(_objectSpread$8({},X),he):he}return o(n)},getGlobalPT=function(){return _getPT(ComponentBase.context.pt||PrimeReact.pt,void 0,function(n){return ObjectUtils.getItemValue(n,ComponentBase.cParams)})},getDefaultPT=function(){return _getPT(ComponentBase.context.pt||PrimeReact.pt,void 0,function(n){return _getOptionValue(n,ComponentBase.cName,ComponentBase.cParams)||ObjectUtils.getItemValue(n,ComponentBase.cParams)})},_useGlobalPT=function(n,e,i){return _usePT(getGlobalPT(),n,e,i)},_useDefaultPT=function(n,e,i){return _usePT(getDefaultPT(),n,e,i)},useHandleStyle=function(n){var e=arguments.length>2?arguments[2]:void 0,i=e.name,s=e.styled,o=s===void 0?!1:s,u=e.hostName,l=u===void 0?"":u,d=_useGlobalPT(_getOptionValue,"global.css",ComponentBase.cParams),m=ObjectUtils.toFlatCase(i),y=useStyle(baseStyle,{name:"base",manual:!0}),S=y.load,X=useStyle(commonStyle,{name:"common",manual:!0}),he=X.load,Ce=useStyle(d,{name:"global",manual:!0}),Ee=Ce.load,xe=useStyle(n,{name:i,manual:!0}),be=xe.load,we=function(ke){if(!l){var De=_usePT(_getPT((ComponentBase.cProps||{}).pt,m),_getOptionValue,"hooks.".concat(ke)),Oe=_useDefaultPT(_getOptionValue,"hooks.".concat(ke));De==null||De(),Oe==null||Oe()}};we("useMountEffect"),useMountEffect(function(){S(),Ee(),he(),o||be()}),useUpdateEffect(function(){we("useUpdateEffect")}),useUnmountEffect(function(){we("useUnmountEffect")})},reactDomExports=requireReactDom();const ReactDOM=getDefaultExportFromCjs(reactDomExports);function _arrayWithHoles$4(r){if(Array.isArray(r))return r}function _iterableToArrayLimit$4(r,n){var e=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(e!=null){var i,s,o,u,l=[],d=!0,m=!1;try{if(o=(e=e.call(r)).next,n!==0)for(;!(d=(i=o.call(e)).done)&&(l.push(i.value),l.length!==n);d=!0);}catch(y){m=!0,s=y}finally{try{if(!d&&e.return!=null&&(u=e.return(),Object(u)!==u))return}finally{if(m)throw s}}return l}}function _arrayLikeToArray$4(r,n){(n==null||n>r.length)&&(n=r.length);for(var e=0,i=new Array(n);e<n;e++)i[e]=r[e];return i}function _unsupportedIterableToArray$4(r,n){if(r){if(typeof r=="string")return _arrayLikeToArray$4(r,n);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return _arrayLikeToArray$4(r,n)}}function _nonIterableRest$4(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _slicedToArray$4(r,n){return _arrayWithHoles$4(r)||_iterableToArrayLimit$4(r,n)||_unsupportedIterableToArray$4(r,n)||_nonIterableRest$4()}var PortalBase={defaultProps:{__TYPE:"Portal",element:null,appendTo:null,visible:!1,onMounted:null,onUnmounted:null,children:void 0},getProps:function(n){return ObjectUtils.getMergedProps(n,PortalBase.defaultProps)},getOtherProps:function(n){return ObjectUtils.getDiffProps(n,PortalBase.defaultProps)}},Portal=reactExports.memo(function(r){var n=PortalBase.getProps(r),e=reactExports.useContext(PrimeReactContext),i=reactExports.useState(n.visible&&DomHandler.isClient()),s=_slicedToArray$4(i,2),o=s[0],u=s[1];useMountEffect(function(){DomHandler.isClient()&&!o&&(u(!0),n.onMounted&&n.onMounted())}),useUpdateEffect(function(){n.onMounted&&n.onMounted()},[o]),useUnmountEffect(function(){n.onUnmounted&&n.onUnmounted()});var l=n.element||n.children;if(l&&o){var d=n.appendTo||e&&e.appendTo||PrimeReact.appendTo;return ObjectUtils.isFunction(d)&&(d=d()),d||(d=document.body),d==="self"?l:ReactDOM.createPortal(l,d)}return null});Portal.displayName="Portal";function _extends$8(){return _extends$8=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},_extends$8.apply(this,arguments)}function _typeof$8(r){"@babel/helpers - typeof";return _typeof$8=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$8(r)}function _toPrimitive$7(r,n){if(_typeof$8(r)!=="object"||r===null)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var i=e.call(r,n||"default");if(_typeof$8(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}function _toPropertyKey$7(r){var n=_toPrimitive$7(r,"string");return _typeof$8(n)==="symbol"?n:String(n)}function _defineProperty$7(r,n,e){return n=_toPropertyKey$7(n),n in r?Object.defineProperty(r,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[n]=e,r}function _arrayLikeToArray$3(r,n){(n==null||n>r.length)&&(n=r.length);for(var e=0,i=new Array(n);e<n;e++)i[e]=r[e];return i}function _arrayWithoutHoles$1(r){if(Array.isArray(r))return _arrayLikeToArray$3(r)}function _iterableToArray$1(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function _unsupportedIterableToArray$3(r,n){if(r){if(typeof r=="string")return _arrayLikeToArray$3(r,n);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return _arrayLikeToArray$3(r,n)}}function _nonIterableSpread$1(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _toConsumableArray$1(r){return _arrayWithoutHoles$1(r)||_iterableToArray$1(r)||_unsupportedIterableToArray$3(r)||_nonIterableSpread$1()}function _arrayWithHoles$3(r){if(Array.isArray(r))return r}function _iterableToArrayLimit$3(r,n){var e=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(e!=null){var i,s,o,u,l=[],d=!0,m=!1;try{if(o=(e=e.call(r)).next,n!==0)for(;!(d=(i=o.call(e)).done)&&(l.push(i.value),l.length!==n);d=!0);}catch(y){m=!0,s=y}finally{try{if(!d&&e.return!=null&&(u=e.return(),Object(u)!==u))return}finally{if(m)throw s}}return l}}function _nonIterableRest$3(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _slicedToArray$3(r,n){return _arrayWithHoles$3(r)||_iterableToArrayLimit$3(r,n)||_unsupportedIterableToArray$3(r,n)||_nonIterableRest$3()}var classes$6={root:function(n){var e=n.positionState,i=n.classNameState;return classNames("p-tooltip p-component",_defineProperty$7({},"p-tooltip-".concat(e),!0),i)},arrow:"p-tooltip-arrow",text:"p-tooltip-text"},inlineStyles$3={arrow:function(n){var e=n.context;return{top:e.bottom?"0":e.right||e.left||!e.right&&!e.left&&!e.top&&!e.bottom?"50%":null,bottom:e.top?"0":null,left:e.right||!e.right&&!e.left&&!e.top&&!e.bottom?"0":e.top||e.bottom?"50%":null,right:e.left?"0":null}}},styles$5=`
@layer primereact {
    .p-tooltip {
        position: absolute;
        padding: .25em .5rem;
        /* #3687: Tooltip prevent scrollbar flickering */
        top: -9999px;
        left: -9999px;
    }
    
    .p-tooltip.p-tooltip-right,
    .p-tooltip.p-tooltip-left {
        padding: 0 .25rem;
    }
    
    .p-tooltip.p-tooltip-top,
    .p-tooltip.p-tooltip-bottom {
        padding:.25em 0;
    }
    
    .p-tooltip .p-tooltip-text {
       white-space: pre-line;
       word-break: break-word;
    }
    
    .p-tooltip-arrow {
        position: absolute;
        width: 0;
        height: 0;
        border-color: transparent;
        border-style: solid;
    }
    
    .p-tooltip-right .p-tooltip-arrow {
        top: 50%;
        left: 0;
        margin-top: -.25rem;
        border-width: .25em .25em .25em 0;
    }
    
    .p-tooltip-left .p-tooltip-arrow {
        top: 50%;
        right: 0;
        margin-top: -.25rem;
        border-width: .25em 0 .25em .25rem;
    }
    
    .p-tooltip.p-tooltip-top {
        padding: .25em 0;
    }
    
    .p-tooltip-top .p-tooltip-arrow {
        bottom: 0;
        left: 50%;
        margin-left: -.25rem;
        border-width: .25em .25em 0;
    }
    
    .p-tooltip-bottom .p-tooltip-arrow {
        top: 0;
        left: 50%;
        margin-left: -.25rem;
        border-width: 0 .25em .25rem;
    }

    .p-tooltip-target-wrapper {
        display: inline-flex;
    }
}
`,TooltipBase=ComponentBase.extend({defaultProps:{__TYPE:"Tooltip",appendTo:null,at:null,autoHide:!0,autoZIndex:!0,baseZIndex:0,className:null,closeOnEscape:!1,content:null,disabled:!1,event:null,hideDelay:0,hideEvent:"mouseleave",id:null,mouseTrack:!1,mouseTrackLeft:5,mouseTrackTop:5,my:null,onBeforeHide:null,onBeforeShow:null,onHide:null,onShow:null,position:"right",showDelay:0,showEvent:"mouseenter",showOnDisabled:!1,style:null,target:null,updateDelay:0,children:void 0},css:{classes:classes$6,styles:styles$5,inlineStyles:inlineStyles$3}});function ownKeys$7(r,n){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);n&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),e.push.apply(e,i)}return e}function _objectSpread$7(r){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};n%2?ownKeys$7(Object(e),!0).forEach(function(i){_defineProperty$7(r,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):ownKeys$7(Object(e)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(e,i))})}return r}var Tooltip=reactExports.memo(reactExports.forwardRef(function(r,n){var e=useMergeProps(),i=reactExports.useContext(PrimeReactContext),s=TooltipBase.getProps(r,i),o=reactExports.useState(!1),u=_slicedToArray$3(o,2),l=u[0],d=u[1],m=reactExports.useState(s.position||"right"),y=_slicedToArray$3(m,2),S=y[0],X=y[1],he=reactExports.useState(""),Ce=_slicedToArray$3(he,2),Ee=Ce[0],xe=Ce[1],be=reactExports.useState(!1),we=_slicedToArray$3(be,2),ve=we[0],ke=we[1],De={props:s,state:{visible:l,position:S,className:Ee},context:{right:S==="right",left:S==="left",top:S==="top",bottom:S==="bottom"}},Oe=TooltipBase.setMetaData(De),Le=Oe.ptm,Ae=Oe.cx,Ie=Oe.sx,Ue=Oe.isUnstyled;useHandleStyle(TooltipBase.css.styles,Ue,{name:"tooltip"}),useGlobalOnEscapeKey({callback:function(){qt()},when:s.closeOnEscape,priority:[ESC_KEY_HANDLING_PRIORITIES.TOOLTIP,0]});var ze=reactExports.useRef(null),Ye=reactExports.useRef(null),Xe=reactExports.useRef(null),tt=reactExports.useRef(null),lt=reactExports.useRef(!0),_t=reactExports.useRef({}),bt=reactExports.useRef(null),rt=useResizeListener({listener:function(kt){!DomHandler.isTouchDevice()&&qt(kt)}}),He=_slicedToArray$3(rt,2),We=He[0],qe=He[1],Ke=useOverlayScrollListener({target:Xe.current,listener:function(kt){qt(kt)},when:l}),st=_slicedToArray$3(Ke,2),ut=st[0],nt=st[1],vt=function(kt){return!(s.content||Ct(kt,"tooltip"))},it=function(kt){return!(s.content||Ct(kt,"tooltip")||s.children)},Ve=function(kt){return Ct(kt,"mousetrack")||s.mouseTrack},ht=function(kt){return Ct(kt,"disabled")==="true"||Dt(kt,"disabled")||s.disabled},ct=function(kt){return Ct(kt,"showondisabled")||s.showOnDisabled},St=function(){return Ct(Xe.current,"autohide")||s.autoHide},Ct=function(kt,Xt){return Dt(kt,"data-pr-".concat(Xt))?kt.getAttribute("data-pr-".concat(Xt)):null},Dt=function(kt,Xt){return kt&&kt.hasAttribute(Xt)},Tt=function(kt){var Xt=[Ct(kt,"showevent")||s.showEvent],wr=[Ct(kt,"hideevent")||s.hideEvent];if(Ve(kt))Xt=["mousemove"],wr=["mouseleave"];else{var fr=Ct(kt,"event")||s.event;fr==="focus"&&(Xt=["focus"],wr=["blur"]),fr==="both"&&(Xt=["focus","mouseenter"],wr=ve?["blur"]:["mouseleave","blur"])}return{showEvents:Xt,hideEvents:wr}},At=function(kt){return Ct(kt,"position")||S},sr=function(kt){var Xt=Ct(kt,"mousetracktop")||s.mouseTrackTop,wr=Ct(kt,"mousetrackleft")||s.mouseTrackLeft;return{top:Xt,left:wr}},Lt=function(kt,Xt){if(Ye.current){var wr=Ct(kt,"tooltip")||s.content;wr?(Ye.current.innerHTML="",Ye.current.appendChild(document.createTextNode(wr)),Xt()):s.children&&Xt()}},Kt=function(kt){Lt(Xe.current,function(){var Xt=bt.current,wr=Xt.pageX,fr=Xt.pageY;s.autoZIndex&&!ZIndexUtils.get(ze.current)&&ZIndexUtils.set("tooltip",ze.current,i&&i.autoZIndex||PrimeReact.autoZIndex,s.baseZIndex||i&&i.zIndex.tooltip||PrimeReact.zIndex.tooltip),ze.current.style.left="",ze.current.style.top="",St()&&(ze.current.style.pointerEvents="none");var pr=Ve(Xe.current)||kt==="mouse";(pr&&!tt.current||pr)&&(tt.current={width:DomHandler.getOuterWidth(ze.current),height:DomHandler.getOuterHeight(ze.current)}),Qt(Xe.current,{x:wr,y:fr},kt)})},yt=function(kt){kt.type&&kt.type==="focus"&&ke(!0),Xe.current=kt.currentTarget;var Xt=ht(Xe.current),wr=it(ct(Xe.current)&&Xt?Xe.current.firstChild:Xe.current);if(!(wr||Xt))if(bt.current=kt,l)Gt("updateDelay",Kt);else{var fr=er(s.onBeforeShow,{originalEvent:kt,target:Xe.current});fr&&Gt("showDelay",function(){d(!0),er(s.onShow,{originalEvent:kt,target:Xe.current})})}},qt=function(kt){if(kt&&kt.type==="blur"&&ke(!1),Yt(),l){var Xt=er(s.onBeforeHide,{originalEvent:kt,target:Xe.current});Xt&&Gt("hideDelay",function(){!St()&&lt.current===!1||(ZIndexUtils.clear(ze.current),DomHandler.removeClass(ze.current,"p-tooltip-active"),d(!1),er(s.onHide,{originalEvent:kt,target:Xe.current}))})}},Qt=function(kt,Xt,wr){var fr=0,pr=0,Mr=wr||S;if((Ve(kt)||Mr=="mouse")&&Xt){var Pr={width:DomHandler.getOuterWidth(ze.current),height:DomHandler.getOuterHeight(ze.current)};fr=Xt.x,pr=Xt.y;var Tr=sr(kt),jr=Tr.top,Be=Tr.left;switch(Mr){case"left":fr=fr-(Pr.width+Be),pr=pr-(Pr.height/2-jr);break;case"right":case"mouse":fr=fr+Be,pr=pr-(Pr.height/2-jr);break;case"top":fr=fr-(Pr.width/2-Be),pr=pr-(Pr.height+jr);break;case"bottom":fr=fr-(Pr.width/2-Be),pr=pr+jr;break}fr<=0||tt.current.width>Pr.width?(ze.current.style.left="0px",ze.current.style.right=window.innerWidth-Pr.width-fr+"px"):(ze.current.style.right="",ze.current.style.left=fr+"px"),ze.current.style.top=pr+"px",DomHandler.addClass(ze.current,"p-tooltip-active")}else{var Pe=DomHandler.findCollisionPosition(Mr),Re=Ct(kt,"my")||s.my||Pe.my,Se=Ct(kt,"at")||s.at||Pe.at;ze.current.style.padding="0px",DomHandler.flipfitCollision(ze.current,kt,Re,Se,function(Te){var Fe=Te.at,Ge=Fe.x,Je=Fe.y,Qe=Te.my.x,et=s.at?Ge!=="center"&&Ge!==Qe?Ge:Je:Te.at["".concat(Pe.axis)];ze.current.style.padding="",X(et),rr(et),DomHandler.addClass(ze.current,"p-tooltip-active")})}},rr=function(kt){if(ze.current){var Xt=getComputedStyle(ze.current);kt==="left"?ze.current.style.left=parseFloat(Xt.left)-parseFloat(Xt.paddingLeft)*2+"px":kt==="top"&&(ze.current.style.top=parseFloat(Xt.top)-parseFloat(Xt.paddingTop)*2+"px")}},It=function(){St()||(lt.current=!1)},_r=function(kt){St()||(lt.current=!0,qt(kt))},cr=function(kt){if(kt){var Xt=Tt(kt),wr=Xt.showEvents,fr=Xt.hideEvents,pr=ar(kt);wr.forEach(function(Mr){return pr==null?void 0:pr.addEventListener(Mr,yt)}),fr.forEach(function(Mr){return pr==null?void 0:pr.addEventListener(Mr,qt)})}},Vt=function(kt){if(kt){var Xt=Tt(kt),wr=Xt.showEvents,fr=Xt.hideEvents,pr=ar(kt);wr.forEach(function(Mr){return pr==null?void 0:pr.removeEventListener(Mr,yt)}),fr.forEach(function(Mr){return pr==null?void 0:pr.removeEventListener(Mr,qt)})}},Gt=function(kt,Xt){Yt();var wr=Ct(Xe.current,kt.toLowerCase())||s[kt];wr?_t.current["".concat(kt)]=setTimeout(function(){return Xt()},wr):Xt()},er=function(kt){if(kt){for(var Xt=arguments.length,wr=new Array(Xt>1?Xt-1:0),fr=1;fr<Xt;fr++)wr[fr-1]=arguments[fr];var pr=kt.apply(void 0,wr);return pr===void 0&&(pr=!0),pr}return!0},Yt=function(){Object.values(_t.current).forEach(function(kt){return clearTimeout(kt)})},ar=function(kt){if(kt){if(ct(kt)){if(!kt.hasWrapper){var Xt=document.createElement("div"),wr=kt.nodeName==="INPUT";return wr?DomHandler.addMultipleClasses(Xt,"p-tooltip-target-wrapper p-inputwrapper"):DomHandler.addClass(Xt,"p-tooltip-target-wrapper"),kt.parentNode.insertBefore(Xt,kt),Xt.appendChild(kt),kt.hasWrapper=!0,Xt}return kt.parentElement}else if(kt.hasWrapper){var fr;(fr=kt.parentElement).replaceWith.apply(fr,_toConsumableArray$1(kt.parentElement.childNodes)),delete kt.hasWrapper}return kt}return null},yr=function(kt){br(kt),Jt(kt)},Jt=function(kt){Ot(kt||s.target,cr)},br=function(kt){Ot(kt||s.target,Vt)},Ot=function(kt,Xt){if(kt=ObjectUtils.getRefElement(kt),kt)if(DomHandler.isElement(kt))Xt(kt);else{var wr=function(pr){var Mr=DomHandler.find(document,pr);Mr.forEach(function(Pr){Xt(Pr)})};kt instanceof Array?kt.forEach(function(fr){wr(fr)}):wr(kt)}};useMountEffect(function(){l&&Xe.current&&ht(Xe.current)&&qt()}),useUpdateEffect(function(){return Jt(),function(){br()}},[yt,qt,s.target]),useUpdateEffect(function(){if(l){var Ft=At(Xe.current),kt=Ct(Xe.current,"classname");X(Ft),xe(kt),Kt(Ft),We(),ut()}else X(s.position||"right"),xe(""),Xe.current=null,tt.current=null,lt.current=!0;return function(){qe(),nt()}},[l]),useUpdateEffect(function(){var Ft=At(Xe.current);l&&Ft!=="mouse"&&Gt("updateDelay",function(){Lt(Xe.current,function(){Qt(Xe.current)})})},[s.content]),useUnmountEffect(function(){qt(),ZIndexUtils.clear(ze.current)}),reactExports.useImperativeHandle(n,function(){return{props:s,updateTargetEvents:yr,loadTargetEvents:Jt,unloadTargetEvents:br,show:yt,hide:qt,getElement:function(){return ze.current},getTarget:function(){return Xe.current}}});var lr=function(){var kt=vt(Xe.current),Xt=e({id:s.id,className:classNames(s.className,Ae("root",{positionState:S,classNameState:Ee})),style:s.style,role:"tooltip","aria-hidden":l,onMouseEnter:function(Mr){return It()},onMouseLeave:function(Mr){return _r(Mr)}},TooltipBase.getOtherProps(s),Le("root")),wr=e({className:Ae("arrow"),style:Ie("arrow",_objectSpread$7({},De))},Le("arrow")),fr=e({className:Ae("text")},Le("text"));return reactExports.createElement("div",_extends$8({ref:ze},Xt),reactExports.createElement("div",wr),reactExports.createElement("div",_extends$8({ref:Ye},fr),kt&&s.children))};if(l){var hr=lr();return reactExports.createElement(Portal,{element:hr,appendTo:s.appendTo,visible:!0})}return null}));Tooltip.displayName="Tooltip";function _extends$7(){return _extends$7=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},_extends$7.apply(this,arguments)}function _typeof$7(r){"@babel/helpers - typeof";return _typeof$7=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$7(r)}function _toPrimitive$6(r,n){if(_typeof$7(r)!=="object"||r===null)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var i=e.call(r,n||"default");if(_typeof$7(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}function _toPropertyKey$6(r){var n=_toPrimitive$6(r,"string");return _typeof$7(n)==="symbol"?n:String(n)}function _defineProperty$6(r,n,e){return n=_toPropertyKey$6(n),n in r?Object.defineProperty(r,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[n]=e,r}function _arrayWithHoles$2(r){if(Array.isArray(r))return r}function _iterableToArrayLimit$2(r,n){var e=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(e!=null){var i,s,o,u,l=[],d=!0,m=!1;try{if(o=(e=e.call(r)).next,n!==0)for(;!(d=(i=o.call(e)).done)&&(l.push(i.value),l.length!==n);d=!0);}catch(y){m=!0,s=y}finally{try{if(!d&&e.return!=null&&(u=e.return(),Object(u)!==u))return}finally{if(m)throw s}}return l}}function _arrayLikeToArray$2(r,n){(n==null||n>r.length)&&(n=r.length);for(var e=0,i=new Array(n);e<n;e++)i[e]=r[e];return i}function _unsupportedIterableToArray$2(r,n){if(r){if(typeof r=="string")return _arrayLikeToArray$2(r,n);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return _arrayLikeToArray$2(r,n)}}function _nonIterableRest$2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _slicedToArray$2(r,n){return _arrayWithHoles$2(r)||_iterableToArrayLimit$2(r,n)||_unsupportedIterableToArray$2(r,n)||_nonIterableRest$2()}var styles$4=`
@layer primereact {
    .p-ripple {
        overflow: hidden;
        position: relative;
    }
    
    .p-ink {
        display: block;
        position: absolute;
        background: rgba(255, 255, 255, 0.5);
        border-radius: 100%;
        transform: scale(0);
    }
    
    .p-ink-active {
        animation: ripple 0.4s linear;
    }
    
    .p-ripple-disabled .p-ink {
        display: none;
    }
}

@keyframes ripple {
    100% {
        opacity: 0;
        transform: scale(2.5);
    }
}

`,classes$5={root:"p-ink"},RippleBase=ComponentBase.extend({defaultProps:{__TYPE:"Ripple",children:void 0},css:{styles:styles$4,classes:classes$5},getProps:function(n){return ObjectUtils.getMergedProps(n,RippleBase.defaultProps)},getOtherProps:function(n){return ObjectUtils.getDiffProps(n,RippleBase.defaultProps)}});function ownKeys$6(r,n){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);n&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),e.push.apply(e,i)}return e}function _objectSpread$6(r){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};n%2?ownKeys$6(Object(e),!0).forEach(function(i){_defineProperty$6(r,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):ownKeys$6(Object(e)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(e,i))})}return r}var Ripple=reactExports.memo(reactExports.forwardRef(function(r,n){var e=reactExports.useState(!1),i=_slicedToArray$2(e,2),s=i[0],o=i[1],u=reactExports.useRef(null),l=reactExports.useRef(null),d=useMergeProps(),m=reactExports.useContext(PrimeReactContext),y=RippleBase.getProps(r,m),S=m&&m.ripple||PrimeReact.ripple,X={props:y};useStyle(RippleBase.css.styles,{name:"ripple",manual:!S});var he=RippleBase.setMetaData(_objectSpread$6({},X)),Ce=he.ptm,Ee=he.cx,xe=function(){return u.current&&u.current.parentElement},be=function(){l.current&&l.current.addEventListener("pointerdown",ve)},we=function(){l.current&&l.current.removeEventListener("pointerdown",ve)},ve=function(Ie){var Ue=DomHandler.getOffset(l.current),ze=Ie.pageX-Ue.left+document.body.scrollTop-DomHandler.getWidth(u.current)/2,Ye=Ie.pageY-Ue.top+document.body.scrollLeft-DomHandler.getHeight(u.current)/2;ke(ze,Ye)},ke=function(Ie,Ue){!u.current||getComputedStyle(u.current,null).display==="none"||(DomHandler.removeClass(u.current,"p-ink-active"),Oe(),u.current.style.top=Ue+"px",u.current.style.left=Ie+"px",DomHandler.addClass(u.current,"p-ink-active"))},De=function(Ie){DomHandler.removeClass(Ie.currentTarget,"p-ink-active")},Oe=function(){if(u.current&&!DomHandler.getHeight(u.current)&&!DomHandler.getWidth(u.current)){var Ie=Math.max(DomHandler.getOuterWidth(l.current),DomHandler.getOuterHeight(l.current));u.current.style.height=Ie+"px",u.current.style.width=Ie+"px"}};if(reactExports.useImperativeHandle(n,function(){return{props:y,getInk:function(){return u.current},getTarget:function(){return l.current}}}),useMountEffect(function(){o(!0)}),useUpdateEffect(function(){s&&u.current&&(l.current=xe(),Oe(),be())},[s]),useUpdateEffect(function(){u.current&&!l.current&&(l.current=xe(),Oe(),be())}),useUnmountEffect(function(){u.current&&(l.current=null,we())}),!S)return null;var Le=d({"aria-hidden":!0,className:classNames(Ee("root"))},RippleBase.getOtherProps(y),Ce("root"));return reactExports.createElement("span",_extends$7({role:"presentation",ref:u},Le,{onAnimationEnd:De}))}));Ripple.displayName="Ripple";function _extends$6(){return _extends$6=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},_extends$6.apply(this,arguments)}function _arrayLikeToArray$1(r,n){(n==null||n>r.length)&&(n=r.length);for(var e=0,i=new Array(n);e<n;e++)i[e]=r[e];return i}function _arrayWithoutHoles(r){if(Array.isArray(r))return _arrayLikeToArray$1(r)}function _iterableToArray(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function _unsupportedIterableToArray$1(r,n){if(r){if(typeof r=="string")return _arrayLikeToArray$1(r,n);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return _arrayLikeToArray$1(r,n)}}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _toConsumableArray(r){return _arrayWithoutHoles(r)||_iterableToArray(r)||_unsupportedIterableToArray$1(r)||_nonIterableSpread()}function _arrayWithHoles$1(r){if(Array.isArray(r))return r}function _iterableToArrayLimit$1(r,n){var e=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(e!=null){var i,s,o,u,l=[],d=!0,m=!1;try{if(o=(e=e.call(r)).next,n!==0)for(;!(d=(i=o.call(e)).done)&&(l.push(i.value),l.length!==n);d=!0);}catch(y){m=!0,s=y}finally{try{if(!d&&e.return!=null&&(u=e.return(),Object(u)!==u))return}finally{if(m)throw s}}return l}}function _nonIterableRest$1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _slicedToArray$1(r,n){return _arrayWithHoles$1(r)||_iterableToArrayLimit$1(r,n)||_unsupportedIterableToArray$1(r,n)||_nonIterableRest$1()}var classes$4={root:function(n){var e=n.props;return classNames("p-selectbutton p-button-group p-component",{"p-invalid":e.invalid})},button:function(n){var e=n.itemProps,i=n.focusedState;return classNames("p-button p-component",{"p-highlight":e.selected,"p-disabled":e.disabled,"p-focus":i})},label:"p-button-label p-c"},SelectButtonBase=ComponentBase.extend({defaultProps:{__TYPE:"SelectButton",id:null,value:null,options:null,optionLabel:null,optionValue:null,optionDisabled:null,tabIndex:null,multiple:!1,invalid:!1,unselectable:!0,allowEmpty:!0,disabled:!1,style:null,className:null,dataKey:null,tooltip:null,tooltipOptions:null,itemTemplate:null,onChange:null,children:void 0},css:{classes:classes$4}}),SelectButtonItem=reactExports.memo(function(r){var n=reactExports.useState(!1),e=_slicedToArray$1(n,2),i=e[0],s=e[1],o=useMergeProps(),u=r.ptm,l=r.cx,d=function(we){return u(we,{hostName:r.hostName,context:{selected:r.selected,disabled:r.disabled,option:r.option}})},m=function(we,ve){r.setFocusedIndex(ve),r.onClick&&r.onClick({originalEvent:we,option:r.option})},y=function(){s(!0)},S=function(){s(!1)},X=function(we,ve){switch(we.code){case"Space":{m(we,ve),we.preventDefault();break}case"ArrowDown":case"ArrowRight":{he(we,"next"),we.preventDefault();break}case"ArrowUp":case"ArrowLeft":{he(we,"prev"),we.preventDefault();break}}},he=function(we,ve){for(var ke,De,Oe=0;Oe<=r.elementRef.current.children.length-1;Oe++)r.elementRef.current.children[Oe].getAttribute("tabindex")==="0"&&(ke={elem:r.elementRef.current.children[Oe],index:Oe});ve==="prev"?ke.index===0?De=r.elementRef.current.children.length-1:De=ke.index-1:ke.index===r.elementRef.current.children.length-1?De=0:De=ke.index+1,r.setFocusedIndex(De),r.elementRef.current.children[De].focus()},Ce=function(){var we=o({className:l("label")},d("label"));return r.template?ObjectUtils.getJSXElement(r.template,r.option):reactExports.createElement("span",we,r.label)},Ee=Ce(),xe=o({className:classNames(r.className,l("button",{itemProps:r,focusedState:i})),role:"button","aria-label":r.label,"aria-pressed":r.selected,onClick:function(we){return m(we,r.index)},onKeyDown:function(we){return X(we,r.index)},tabIndex:r.tabIndex,"aria-disabled":r.disabled,onFocus:y,onBlur:S},d("button"));return reactExports.createElement("div",xe,Ee,!r.disabled&&reactExports.createElement(Ripple,null))});SelectButtonItem.displayName="SelectButtonItem";var SelectButton=reactExports.memo(reactExports.forwardRef(function(r,n){var e=useMergeProps(),i=reactExports.useContext(PrimeReactContext),s=SelectButtonBase.getProps(r,i),o=reactExports.useState(0),u=_slicedToArray$1(o,2),l=u[0],d=u[1],m=reactExports.useRef(null),y=SelectButtonBase.setMetaData({props:s}),S=y.ptm,X=y.cx,he=y.isUnstyled;useHandleStyle(SelectButtonBase.css.styles,he,{name:"selectbutton",styled:!0});var Ce=function(Ae){if(!(s.disabled||be(Ae.option))){var Ie=we(Ae.option);if(!(Ie&&!(s.unselectable&&s.allowEmpty))){var Ue=xe(Ae.option),ze;if(s.multiple){var Ye=s.value?_toConsumableArray(s.value):[];ze=Ie?Ye.filter(function(Xe){return!ObjectUtils.equals(Xe,Ue,s.dataKey)}):[].concat(_toConsumableArray(Ye),[Ue])}else ze=Ie?null:Ue;s.onChange&&s.onChange({originalEvent:Ae.originalEvent,value:ze,stopPropagation:function(){Ae.originalEvent.stopPropagation()},preventDefault:function(){Ae.originalEvent.preventDefault()},target:{name:s.name,id:s.id,value:ze}})}}},Ee=function(Ae){return s.optionLabel?ObjectUtils.resolveFieldData(Ae,s.optionLabel):Ae&&Ae.label!==void 0?Ae.label:Ae},xe=function(Ae){return s.optionValue?ObjectUtils.resolveFieldData(Ae,s.optionValue):Ae&&Ae.value!==void 0?Ae.value:Ae},be=function(Ae){return s.optionDisabled?ObjectUtils.isFunction(s.optionDisabled)?s.optionDisabled(Ae):ObjectUtils.resolveFieldData(Ae,s.optionDisabled):Ae&&Ae.disabled!==void 0?Ae.disabled:!1},we=function(Ae){var Ie=xe(Ae);if(s.multiple){if(s.value&&s.value.length)return s.value.some(function(Ue){return ObjectUtils.equals(Ue,Ie,s.dataKey)})}else return ObjectUtils.equals(s.value,Ie,s.dataKey);return!1},ve=function(){return s.options&&s.options.length?s.options.map(function(Ae,Ie){var Ue=s.disabled||be(Ae),ze=Ee(Ae),Ye=s.disabled||Ie!==l?"-1":"0",Xe=we(Ae),tt=ze+"_"+Ie;return reactExports.createElement(SelectButtonItem,{hostName:"SelectButton",key:tt,label:ze,className:Ae.className,option:Ae,setFocusedIndex:d,onClick:Ce,template:s.itemTemplate,selected:Xe,tabIndex:Ye,index:Ie,disabled:Ue,ptm:S,cx:X,elementRef:m})}):null};reactExports.useImperativeHandle(n,function(){return{props:s,focus:function(){return DomHandler.focusFirstElement(m.current)},getElement:function(){return m.current}}});var ke=ObjectUtils.isNotEmpty(s.tooltip),De=ve(),Oe=e({ref:m,id:s.id,className:classNames(s.className,X("root")),style:s.style,role:"group"},SelectButtonBase.getOtherProps(s),S("root"));return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("div",Oe,De,s.children),ke&&reactExports.createElement(Tooltip,_extends$6({target:m,content:s.tooltip,pt:S("tooltip")},s.tooltipOptions)))}));SelectButton.displayName="SelectButton";/**
 * @license @tabler/icons-react v3.17.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.17.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const createReactComponent=(r,n,e,i)=>{const s=reactExports.forwardRef(({color:o="currentColor",size:u=24,stroke:l=2,title:d,className:m,children:y,...S},X)=>reactExports.createElement("svg",{ref:X,...defaultAttributes[r],width:u,height:u,className:["tabler-icon",`tabler-icon-${n}`,m].join(" "),strokeWidth:l,stroke:o,...S},[d&&reactExports.createElement("title",{key:"svg-title"},d),...i.map(([he,Ce])=>reactExports.createElement(he,Ce)),...Array.isArray(y)?y:[y]]));return s.displayName=`${e}`,s};/**
 * @license @tabler/icons-react v3.17.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var IconArrowLeft=createReactComponent("outline","arrow-left","IconArrowLeft",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M5 12l6 6",key:"svg-1"}],["path",{d:"M5 12l6 -6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.17.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var IconBrandJavascript=createReactComponent("outline","brand-javascript","IconBrandJavascript",[["path",{d:"M20 4l-2 14.5l-6 2l-6 -2l-2 -14.5z",key:"svg-0"}],["path",{d:"M7.5 8h3v8l-2 -1",key:"svg-1"}],["path",{d:"M16.5 8h-2.5a.5 .5 0 0 0 -.5 .5v3a.5 .5 0 0 0 .5 .5h1.423a.5 .5 0 0 1 .495 .57l-.418 2.93l-2 .5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.17.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var IconBrandPython=createReactComponent("outline","brand-python","IconBrandPython",[["path",{d:"M12 9h-7a2 2 0 0 0 -2 2v4a2 2 0 0 0 2 2h3",key:"svg-0"}],["path",{d:"M12 15h7a2 2 0 0 0 2 -2v-4a2 2 0 0 0 -2 -2h-3",key:"svg-1"}],["path",{d:"M8 9v-4a2 2 0 0 1 2 -2h4a2 2 0 0 1 2 2v5a2 2 0 0 1 -2 2h-4a2 2 0 0 0 -2 2v5a2 2 0 0 0 2 2h4a2 2 0 0 0 2 -2v-4",key:"svg-2"}],["path",{d:"M11 6l0 .01",key:"svg-3"}],["path",{d:"M13 18l0 .01",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.17.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var IconCodeOff=createReactComponent("outline","code-off","IconCodeOff",[["path",{d:"M7 8l-4 4l4 4",key:"svg-0"}],["path",{d:"M17 8l4 4l-2.5 2.5",key:"svg-1"}],["path",{d:"M14 4l-1.201 4.805m-.802 3.207l-2 7.988",key:"svg-2"}],["path",{d:"M3 3l18 18",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.17.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var IconCode=createReactComponent("outline","code","IconCode",[["path",{d:"M7 8l-4 4l4 4",key:"svg-0"}],["path",{d:"M17 8l4 4l-4 4",key:"svg-1"}],["path",{d:"M14 4l-4 16",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.17.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var IconFileUpload=createReactComponent("outline","file-upload","IconFileUpload",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M12 11v6",key:"svg-2"}],["path",{d:"M9.5 13.5l2.5 -2.5l2.5 2.5",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.17.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var IconPlayerPlay=createReactComponent("outline","player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.17.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var IconSandbox=createReactComponent("outline","sandbox","IconSandbox",[["path",{d:"M19.953 8.017l1.047 6.983v2a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3v-2l1.245 -8.297a2 2 0 0 1 1.977 -1.703h3.778",key:"svg-0"}],["path",{d:"M3 15h18",key:"svg-1"}],["path",{d:"M13 3l5.5 1.5",key:"svg-2"}],["path",{d:"M15.75 3.75l-2 7",key:"svg-3"}],["path",{d:"M7 10.5c1.667 -.667 3.333 -.667 5 0c1.667 .667 3.333 .667 5 0",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.17.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var IconSchool=createReactComponent("outline","school","IconSchool",[["path",{d:"M22 9l-10 -4l-10 4l10 4l10 -4v6",key:"svg-0"}],["path",{d:"M6 10.6v5.4a6 3 0 0 0 12 0v-5.4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.17.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var IconTextScan2=createReactComponent("outline","text-scan-2","IconTextScan2",[["path",{d:"M4 8v-2a2 2 0 0 1 2 -2h2",key:"svg-0"}],["path",{d:"M4 16v2a2 2 0 0 0 2 2h2",key:"svg-1"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v2",key:"svg-2"}],["path",{d:"M16 20h2a2 2 0 0 0 2 -2v-2",key:"svg-3"}],["path",{d:"M8 12h8",key:"svg-4"}],["path",{d:"M8 9h6",key:"svg-5"}],["path",{d:"M8 15h4",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.17.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var IconX=createReactComponent("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);const warn=(r,n,e,i)=>{var o,u,l,d;const s=[e,{code:n,...i||{}}];if((u=(o=r==null?void 0:r.services)==null?void 0:o.logger)!=null&&u.forward)return r.services.logger.forward(s,"warn","react-i18next::",!0);isString$1(s[0])&&(s[0]=`react-i18next:: ${s[0]}`),(d=(l=r==null?void 0:r.services)==null?void 0:l.logger)!=null&&d.warn?r.services.logger.warn(...s):console!=null&&console.warn&&console.warn(...s)},alreadyWarned={},warnOnce=(r,n,e,i)=>{isString$1(e)&&alreadyWarned[e]||(isString$1(e)&&(alreadyWarned[e]=new Date),warn(r,n,e,i))},loadedClb=(r,n)=>()=>{if(r.isInitialized)n();else{const e=()=>{setTimeout(()=>{r.off("initialized",e)},0),n()};r.on("initialized",e)}},loadNamespaces=(r,n,e)=>{r.loadNamespaces(n,loadedClb(r,e))},loadLanguages=(r,n,e,i)=>{if(isString$1(e)&&(e=[e]),r.options.preload&&r.options.preload.indexOf(n)>-1)return loadNamespaces(r,e,i);e.forEach(s=>{r.options.ns.indexOf(s)<0&&r.options.ns.push(s)}),r.loadLanguages(n,loadedClb(r,i))},hasLoadedNamespace=(r,n,e={})=>!n.languages||!n.languages.length?(warnOnce(n,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:n.languages}),!0):n.hasLoadedNamespace(r,{lng:e.lng,precheck:(i,s)=>{var o;if(((o=e.bindI18n)==null?void 0:o.indexOf("languageChanging"))>-1&&i.services.backendConnector.backend&&i.isLanguageChangingTo&&!s(i.isLanguageChangingTo,r))return!1}}),isString$1=r=>typeof r=="string",isObject=r=>typeof r=="object"&&r!==null,matchHtmlEntity=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,htmlEntities={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},unescapeHtmlEntity=r=>htmlEntities[r],unescape=r=>r.replace(matchHtmlEntity,unescapeHtmlEntity);let defaultOptions$5={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape};const setDefaults=(r={})=>{defaultOptions$5={...defaultOptions$5,...r}},getDefaults$2=()=>defaultOptions$5;let i18nInstance;const setI18n=r=>{i18nInstance=r},getI18n=()=>i18nInstance,initReactI18next={type:"3rdParty",init(r){setDefaults(r.options.react),setI18n(r)}},I18nContext=reactExports.createContext();class ReportNamespaces{constructor(){this.usedNamespaces={}}addUsedNamespaces(n){n.forEach(e=>{this.usedNamespaces[e]||(this.usedNamespaces[e]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const usePrevious=(r,n)=>{const e=reactExports.useRef();return reactExports.useEffect(()=>{e.current=r},[r,n]),e.current},alwaysNewT=(r,n,e,i)=>r.getFixedT(n,e,i),useMemoizedT=(r,n,e,i)=>reactExports.useCallback(alwaysNewT(r,n,e,i),[r,n,e,i]),useTranslation=(r,n={})=>{var ke,De,Oe,Le;const{i18n:e}=n,{i18n:i,defaultNS:s}=reactExports.useContext(I18nContext)||{},o=e||i||getI18n();if(o&&!o.reportNamespaces&&(o.reportNamespaces=new ReportNamespaces),!o){warnOnce(o,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const Ae=(Ue,ze)=>isString$1(ze)?ze:isObject(ze)&&isString$1(ze.defaultValue)?ze.defaultValue:Array.isArray(Ue)?Ue[Ue.length-1]:Ue,Ie=[Ae,{},!1];return Ie.t=Ae,Ie.i18n={},Ie.ready=!1,Ie}(ke=o.options.react)!=null&&ke.wait&&warnOnce(o,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const u={...getDefaults$2(),...o.options.react,...n},{useSuspense:l,keyPrefix:d}=u;let m=s||((De=o.options)==null?void 0:De.defaultNS);m=isString$1(m)?[m]:m||["translation"],(Le=(Oe=o.reportNamespaces).addUsedNamespaces)==null||Le.call(Oe,m);const y=(o.isInitialized||o.initializedStoreOnce)&&m.every(Ae=>hasLoadedNamespace(Ae,o,u)),S=useMemoizedT(o,n.lng||null,u.nsMode==="fallback"?m:m[0],d),X=()=>S,he=()=>alwaysNewT(o,n.lng||null,u.nsMode==="fallback"?m:m[0],d),[Ce,Ee]=reactExports.useState(X);let xe=m.join();n.lng&&(xe=`${n.lng}${xe}`);const be=usePrevious(xe),we=reactExports.useRef(!0);reactExports.useEffect(()=>{const{bindI18n:Ae,bindI18nStore:Ie}=u;we.current=!0,!y&&!l&&(n.lng?loadLanguages(o,n.lng,m,()=>{we.current&&Ee(he)}):loadNamespaces(o,m,()=>{we.current&&Ee(he)})),y&&be&&be!==xe&&we.current&&Ee(he);const Ue=()=>{we.current&&Ee(he)};return Ae&&(o==null||o.on(Ae,Ue)),Ie&&(o==null||o.store.on(Ie,Ue)),()=>{we.current=!1,o&&(Ae==null||Ae.split(" ").forEach(ze=>o.off(ze,Ue))),Ie&&o&&Ie.split(" ").forEach(ze=>o.store.off(ze,Ue))}},[o,xe]),reactExports.useEffect(()=>{we.current&&y&&Ee(X)},[o,d,y]);const ve=[Ce,o,y];if(ve.t=Ce,ve.i18n=o,ve.ready=y,y||!y&&!l)return ve;throw new Promise(Ae=>{n.lng?loadLanguages(o,n.lng,m,()=>Ae()):loadNamespaces(o,m,()=>Ae())})};function BottomBar(){var r=useLocation().pathname,n=useNavigate(),e=[0,1,2],i=["Snippets","Lessons","Sandbox"],s=[jsxRuntimeExports.jsx(IconCode,{}),jsxRuntimeExports.jsx(IconSchool,{}),jsxRuntimeExports.jsx(IconSandbox,{})],o=d=>r.toLowerCase().replaceAll("/","").endsWith(d.toLowerCase()),u=i.map(o).findIndex(d=>!!d),l=d=>jsxRuntimeExports.jsxs("div",{className:"barItem",onClick:()=>n("/"+i[d].toLowerCase()),viewTransition:!0,children:[s[d],t("SECTION_"+i[d].toUpperCase())]});return jsxRuntimeExports.jsx("div",{className:"bottomBar",children:jsxRuntimeExports.jsx(SelectButton,{value:u,itemTemplate:l,options:e})})}function App(){var r=useNavigate();setTimeout(()=>r("/sandbox"),0)}function Header(r){return jsxRuntimeExports.jsxs("div",{className:"header",children:[r.onBack?jsxRuntimeExports.jsx(IconArrowLeft,{onClick:r.onBack}):null,jsxRuntimeExports.jsx("h1",{children:r.children})]})}var IconBase={defaultProps:{__TYPE:"IconBase",className:null,label:null,spin:!1},getProps:function(n){return ObjectUtils.getMergedProps(n,IconBase.defaultProps)},getOtherProps:function(n){return ObjectUtils.getDiffProps(n,IconBase.defaultProps)},getPTI:function(n){var e=ObjectUtils.isEmpty(n.label),i=IconBase.getOtherProps(n),s={className:classNames("p-icon",{"p-icon-spin":n.spin},n.className),role:e?void 0:"img","aria-label":e?void 0:n.label,"aria-hidden":e};return ObjectUtils.getMergedProps(i,s)}};function _extends$5(){return _extends$5=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},_extends$5.apply(this,arguments)}var SpinnerIcon=reactExports.memo(reactExports.forwardRef(function(r,n){var e=IconBase.getPTI(r);return reactExports.createElement("svg",_extends$5({ref:n,width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),reactExports.createElement("path",{d:"M6.99701 14C5.85441 13.999 4.72939 13.7186 3.72012 13.1832C2.71084 12.6478 1.84795 11.8737 1.20673 10.9284C0.565504 9.98305 0.165424 8.89526 0.041387 7.75989C-0.0826496 6.62453 0.073125 5.47607 0.495122 4.4147C0.917119 3.35333 1.59252 2.4113 2.46241 1.67077C3.33229 0.930247 4.37024 0.413729 5.4857 0.166275C6.60117 -0.0811796 7.76026 -0.0520535 8.86188 0.251112C9.9635 0.554278 10.9742 1.12227 11.8057 1.90555C11.915 2.01493 11.9764 2.16319 11.9764 2.31778C11.9764 2.47236 11.915 2.62062 11.8057 2.73C11.7521 2.78503 11.688 2.82877 11.6171 2.85864C11.5463 2.8885 11.4702 2.90389 11.3933 2.90389C11.3165 2.90389 11.2404 2.8885 11.1695 2.85864C11.0987 2.82877 11.0346 2.78503 10.9809 2.73C9.9998 1.81273 8.73246 1.26138 7.39226 1.16876C6.05206 1.07615 4.72086 1.44794 3.62279 2.22152C2.52471 2.99511 1.72683 4.12325 1.36345 5.41602C1.00008 6.70879 1.09342 8.08723 1.62775 9.31926C2.16209 10.5513 3.10478 11.5617 4.29713 12.1803C5.48947 12.7989 6.85865 12.988 8.17414 12.7157C9.48963 12.4435 10.6711 11.7264 11.5196 10.6854C12.3681 9.64432 12.8319 8.34282 12.8328 7C12.8328 6.84529 12.8943 6.69692 13.0038 6.58752C13.1132 6.47812 13.2616 6.41667 13.4164 6.41667C13.5712 6.41667 13.7196 6.47812 13.8291 6.58752C13.9385 6.69692 14 6.84529 14 7C14 8.85651 13.2622 10.637 11.9489 11.9497C10.6356 13.2625 8.85432 14 6.99701 14Z",fill:"currentColor"}))}));SpinnerIcon.displayName="SpinnerIcon";function _extends$4(){return _extends$4=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},_extends$4.apply(this,arguments)}function _typeof$6(r){"@babel/helpers - typeof";return _typeof$6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$6(r)}function _toPrimitive$5(r,n){if(_typeof$6(r)!=="object"||r===null)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var i=e.call(r,n||"default");if(_typeof$6(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}function _toPropertyKey$5(r){var n=_toPrimitive$5(r,"string");return _typeof$6(n)==="symbol"?n:String(n)}function _defineProperty$5(r,n,e){return n=_toPropertyKey$5(n),n in r?Object.defineProperty(r,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[n]=e,r}var classes$1$1={root:function(n){var e=n.props;return classNames("p-badge p-component",_defineProperty$5({"p-badge-no-gutter":ObjectUtils.isNotEmpty(e.value)&&String(e.value).length===1,"p-badge-dot":ObjectUtils.isEmpty(e.value),"p-badge-lg":e.size==="large","p-badge-xl":e.size==="xlarge"},"p-badge-".concat(e.severity),e.severity!==null))}},styles$3=`
@layer primereact {
    .p-badge {
        display: inline-block;
        border-radius: 10px;
        text-align: center;
        padding: 0 .5rem;
    }
    
    .p-overlay-badge {
        position: relative;
    }
    
    .p-overlay-badge .p-badge {
        position: absolute;
        top: 0;
        right: 0;
        transform: translate(50%,-50%);
        transform-origin: 100% 0;
        margin: 0;
    }
    
    .p-badge-dot {
        width: .5rem;
        min-width: .5rem;
        height: .5rem;
        border-radius: 50%;
        padding: 0;
    }
    
    .p-badge-no-gutter {
        padding: 0;
        border-radius: 50%;
    }
}
`,BadgeBase=ComponentBase.extend({defaultProps:{__TYPE:"Badge",__parentMetadata:null,value:null,severity:null,size:null,style:null,className:null,children:void 0},css:{classes:classes$1$1,styles:styles$3}});function ownKeys$1$1(r,n){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);n&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),e.push.apply(e,i)}return e}function _objectSpread$1$1(r){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};n%2?ownKeys$1$1(Object(e),!0).forEach(function(i){_defineProperty$5(r,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):ownKeys$1$1(Object(e)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(e,i))})}return r}var Badge=reactExports.memo(reactExports.forwardRef(function(r,n){var e=useMergeProps(),i=reactExports.useContext(PrimeReactContext),s=BadgeBase.getProps(r,i),o=BadgeBase.setMetaData(_objectSpread$1$1({props:s},s.__parentMetadata)),u=o.ptm,l=o.cx,d=o.isUnstyled;useHandleStyle(BadgeBase.css.styles,d,{name:"badge"});var m=reactExports.useRef(null);reactExports.useImperativeHandle(n,function(){return{props:s,getElement:function(){return m.current}}});var y=e({ref:m,style:s.style,className:classNames(s.className,l("root"))},BadgeBase.getOtherProps(s),u("root"));return reactExports.createElement("span",y,s.value)}));Badge.displayName="Badge";var classes$3={icon:function(n){var e=n.props;return classNames("p-button-icon p-c",_defineProperty$5({},"p-button-icon-".concat(e.iconPos),e.label))},loadingIcon:function(n){var e=n.props,i=n.className;return classNames(i,{"p-button-loading-icon":e.loading})},label:"p-button-label p-c",root:function(n){var e=n.props,i=n.size,s=n.disabled;return classNames("p-button p-component",_defineProperty$5(_defineProperty$5(_defineProperty$5(_defineProperty$5({"p-button-icon-only":(e.icon||e.loading)&&!e.label&&!e.children,"p-button-vertical":(e.iconPos==="top"||e.iconPos==="bottom")&&e.label,"p-disabled":s,"p-button-loading":e.loading,"p-button-outlined":e.outlined,"p-button-raised":e.raised,"p-button-link":e.link,"p-button-text":e.text,"p-button-rounded":e.rounded,"p-button-loading-label-only":e.loading&&!e.icon&&e.label},"p-button-loading-".concat(e.iconPos),e.loading&&e.label),"p-button-".concat(i),i),"p-button-".concat(e.severity),e.severity),"p-button-plain",e.plain))}},ButtonBase=ComponentBase.extend({defaultProps:{__TYPE:"Button",__parentMetadata:null,badge:null,badgeClassName:null,className:null,children:void 0,disabled:!1,icon:null,iconPos:"left",label:null,link:!1,loading:!1,loadingIcon:null,outlined:!1,plain:!1,raised:!1,rounded:!1,severity:null,size:null,text:!1,tooltip:null,tooltipOptions:null,visible:!0},css:{classes:classes$3}});function ownKeys$5(r,n){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);n&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),e.push.apply(e,i)}return e}function _objectSpread$5(r){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};n%2?ownKeys$5(Object(e),!0).forEach(function(i){_defineProperty$5(r,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):ownKeys$5(Object(e)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(e,i))})}return r}var Button=reactExports.memo(reactExports.forwardRef(function(r,n){var e=useMergeProps(),i=reactExports.useContext(PrimeReactContext),s=ButtonBase.getProps(r,i),o=s.disabled||s.loading,u=_objectSpread$5(_objectSpread$5({props:s},s.__parentMetadata),{},{context:{disabled:o}}),l=ButtonBase.setMetaData(u),d=l.ptm,m=l.cx,y=l.isUnstyled;useHandleStyle(ButtonBase.css.styles,y,{name:"button",styled:!0});var S=reactExports.useRef(n);if(reactExports.useEffect(function(){ObjectUtils.combinedRefs(S,n)},[S,n]),s.visible===!1)return null;var X=function(){var Ie=classNames("p-button-icon p-c",_defineProperty$5({},"p-button-icon-".concat(s.iconPos),s.label)),Ue=e({className:m("icon")},d("icon"));Ie=classNames(Ie,{"p-button-loading-icon":s.loading});var ze=e({className:m("loadingIcon",{className:Ie})},d("loadingIcon")),Ye=s.loading?s.loadingIcon||reactExports.createElement(SpinnerIcon,_extends$4({},ze,{spin:!0})):s.icon;return IconUtils.getJSXIcon(Ye,_objectSpread$5({},Ue),{props:s})},he=function(){var Ie=e({className:m("label")},d("label"));return s.label?reactExports.createElement("span",Ie,s.label):!s.children&&!s.label&&reactExports.createElement("span",_extends$4({},Ie,{dangerouslySetInnerHTML:{__html:"&nbsp;"}}))},Ce=function(){if(s.badge){var Ie=e({className:classNames(s.badgeClassName),value:s.badge,unstyled:s.unstyled,__parentMetadata:{parent:u}},d("badge"));return reactExports.createElement(Badge,Ie,s.badge)}return null},Ee=!o||s.tooltipOptions&&s.tooltipOptions.showOnDisabled,xe=ObjectUtils.isNotEmpty(s.tooltip)&&Ee,be={large:"lg",small:"sm"},we=be[s.size],ve=X(),ke=he(),De=Ce(),Oe=s.label?s.label+(s.badge?" "+s.badge:""):s["aria-label"],Le=e({ref:S,"aria-label":Oe,"data-pc-autofocus":s.autoFocus,className:classNames(s.className,m("root",{size:we,disabled:o})),disabled:o},ButtonBase.getOtherProps(s),d("root"));return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("button",Le,ve,ke,s.children,De,reactExports.createElement(Ripple,null)),xe&&reactExports.createElement(Tooltip,_extends$4({target:S,content:s.tooltip,pt:d("tooltip")},s.tooltipOptions)))}));Button.displayName="Button";function SandboxPage(){var r=()=>{window.openLanguageSelector(n=>{window.openScanner({},e=>{window.openCodeEditor({language:n,code:e})})})};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Header,{children:t("SECTION_SANDBOX")}),jsxRuntimeExports.jsxs("div",{className:"sandboxPage",children:[jsxRuntimeExports.jsx("div",{className:"sandboxSplash",children:jsxRuntimeExports.jsx(IconSandbox,{})}),jsxRuntimeExports.jsx("p",{className:"sandboxDescription",children:t("SECTION_SANDBOX_DESCRIPTION")}),jsxRuntimeExports.jsxs(Button,{onClick:r,className:"sandboxContinue",children:[jsxRuntimeExports.jsx(IconTextScan2,{}),"",t("ACTION_GO")]})]}),jsxRuntimeExports.jsx(BottomBar,{})]})}function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var i in e)({}).hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},_extends$3.apply(null,arguments)}function _objectWithoutPropertiesLoose(r,n){if(r==null)return{};var e={};for(var i in r)if({}.hasOwnProperty.call(r,i)){if(n.includes(i))continue;e[i]=r[i]}return e}function _setPrototypeOf(r,n){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,i){return e.__proto__=i,e},_setPrototypeOf(r,n)}function _inheritsLoose(r,n){r.prototype=Object.create(n.prototype),r.prototype.constructor=r,_setPrototypeOf(r,n)}function hasClass(r,n){return r.classList?!!n&&r.classList.contains(n):(" "+(r.className.baseVal||r.className)+" ").indexOf(" "+n+" ")!==-1}function addClass(r,n){r.classList?r.classList.add(n):hasClass(r,n)||(typeof r.className=="string"?r.className=r.className+" "+n:r.setAttribute("class",(r.className&&r.className.baseVal||"")+" "+n))}function replaceClassName(r,n){return r.replace(new RegExp("(^|\\s)"+n+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function removeClass$1(r,n){r.classList?r.classList.remove(n):typeof r.className=="string"?r.className=replaceClassName(r.className,n):r.setAttribute("class",replaceClassName(r.className&&r.className.baseVal||"",n))}const config={disabled:!1},TransitionGroupContext=React.createContext(null);var forceReflow=function(n){return n.scrollTop},UNMOUNTED="unmounted",EXITED="exited",ENTERING="entering",ENTERED="entered",EXITING="exiting",Transition=function(r){_inheritsLoose(n,r);function n(i,s){var o;o=r.call(this,i,s)||this;var u=s,l=u&&!u.isMounting?i.enter:i.appear,d;return o.appearStatus=null,i.in?l?(d=EXITED,o.appearStatus=ENTERING):d=ENTERED:i.unmountOnExit||i.mountOnEnter?d=UNMOUNTED:d=EXITED,o.state={status:d},o.nextCallback=null,o}n.getDerivedStateFromProps=function(s,o){var u=s.in;return u&&o.status===UNMOUNTED?{status:EXITED}:null};var e=n.prototype;return e.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},e.componentDidUpdate=function(s){var o=null;if(s!==this.props){var u=this.state.status;this.props.in?u!==ENTERING&&u!==ENTERED&&(o=ENTERING):(u===ENTERING||u===ENTERED)&&(o=EXITING)}this.updateStatus(!1,o)},e.componentWillUnmount=function(){this.cancelNextCallback()},e.getTimeouts=function(){var s=this.props.timeout,o,u,l;return o=u=l=s,s!=null&&typeof s!="number"&&(o=s.exit,u=s.enter,l=s.appear!==void 0?s.appear:u),{exit:o,enter:u,appear:l}},e.updateStatus=function(s,o){if(s===void 0&&(s=!1),o!==null)if(this.cancelNextCallback(),o===ENTERING){if(this.props.unmountOnExit||this.props.mountOnEnter){var u=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this);u&&forceReflow(u)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===EXITED&&this.setState({status:UNMOUNTED})},e.performEnter=function(s){var o=this,u=this.props.enter,l=this.context?this.context.isMounting:s,d=this.props.nodeRef?[l]:[ReactDOM.findDOMNode(this),l],m=d[0],y=d[1],S=this.getTimeouts(),X=l?S.appear:S.enter;if(!s&&!u||config.disabled){this.safeSetState({status:ENTERED},function(){o.props.onEntered(m)});return}this.props.onEnter(m,y),this.safeSetState({status:ENTERING},function(){o.props.onEntering(m,y),o.onTransitionEnd(X,function(){o.safeSetState({status:ENTERED},function(){o.props.onEntered(m,y)})})})},e.performExit=function(){var s=this,o=this.props.exit,u=this.getTimeouts(),l=this.props.nodeRef?void 0:ReactDOM.findDOMNode(this);if(!o||config.disabled){this.safeSetState({status:EXITED},function(){s.props.onExited(l)});return}this.props.onExit(l),this.safeSetState({status:EXITING},function(){s.props.onExiting(l),s.onTransitionEnd(u.exit,function(){s.safeSetState({status:EXITED},function(){s.props.onExited(l)})})})},e.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},e.safeSetState=function(s,o){o=this.setNextCallback(o),this.setState(s,o)},e.setNextCallback=function(s){var o=this,u=!0;return this.nextCallback=function(l){u&&(u=!1,o.nextCallback=null,s(l))},this.nextCallback.cancel=function(){u=!1},this.nextCallback},e.onTransitionEnd=function(s,o){this.setNextCallback(o);var u=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this),l=s==null&&!this.props.addEndListener;if(!u||l){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var d=this.props.nodeRef?[this.nextCallback]:[u,this.nextCallback],m=d[0],y=d[1];this.props.addEndListener(m,y)}s!=null&&setTimeout(this.nextCallback,s)},e.render=function(){var s=this.state.status;if(s===UNMOUNTED)return null;var o=this.props,u=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var l=_objectWithoutPropertiesLoose(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return React.createElement(TransitionGroupContext.Provider,{value:null},typeof u=="function"?u(s,l):React.cloneElement(React.Children.only(u),l))},n}(React.Component);Transition.contextType=TransitionGroupContext;Transition.propTypes={};function noop$1(){}Transition.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:noop$1,onEntering:noop$1,onEntered:noop$1,onExit:noop$1,onExiting:noop$1,onExited:noop$1};Transition.UNMOUNTED=UNMOUNTED;Transition.EXITED=EXITED;Transition.ENTERING=ENTERING;Transition.ENTERED=ENTERED;Transition.EXITING=EXITING;var _addClass=function(n,e){return n&&e&&e.split(" ").forEach(function(i){return addClass(n,i)})},removeClass=function(n,e){return n&&e&&e.split(" ").forEach(function(i){return removeClass$1(n,i)})},CSSTransition$1=function(r){_inheritsLoose(n,r);function n(){for(var i,s=arguments.length,o=new Array(s),u=0;u<s;u++)o[u]=arguments[u];return i=r.call.apply(r,[this].concat(o))||this,i.appliedClasses={appear:{},enter:{},exit:{}},i.onEnter=function(l,d){var m=i.resolveArguments(l,d),y=m[0],S=m[1];i.removeClasses(y,"exit"),i.addClass(y,S?"appear":"enter","base"),i.props.onEnter&&i.props.onEnter(l,d)},i.onEntering=function(l,d){var m=i.resolveArguments(l,d),y=m[0],S=m[1],X=S?"appear":"enter";i.addClass(y,X,"active"),i.props.onEntering&&i.props.onEntering(l,d)},i.onEntered=function(l,d){var m=i.resolveArguments(l,d),y=m[0],S=m[1],X=S?"appear":"enter";i.removeClasses(y,X),i.addClass(y,X,"done"),i.props.onEntered&&i.props.onEntered(l,d)},i.onExit=function(l){var d=i.resolveArguments(l),m=d[0];i.removeClasses(m,"appear"),i.removeClasses(m,"enter"),i.addClass(m,"exit","base"),i.props.onExit&&i.props.onExit(l)},i.onExiting=function(l){var d=i.resolveArguments(l),m=d[0];i.addClass(m,"exit","active"),i.props.onExiting&&i.props.onExiting(l)},i.onExited=function(l){var d=i.resolveArguments(l),m=d[0];i.removeClasses(m,"exit"),i.addClass(m,"exit","done"),i.props.onExited&&i.props.onExited(l)},i.resolveArguments=function(l,d){return i.props.nodeRef?[i.props.nodeRef.current,l]:[l,d]},i.getClassNames=function(l){var d=i.props.classNames,m=typeof d=="string",y=m&&d?d+"-":"",S=m?""+y+l:d[l],X=m?S+"-active":d[l+"Active"],he=m?S+"-done":d[l+"Done"];return{baseClassName:S,activeClassName:X,doneClassName:he}},i}var e=n.prototype;return e.addClass=function(s,o,u){var l=this.getClassNames(o)[u+"ClassName"],d=this.getClassNames("enter"),m=d.doneClassName;o==="appear"&&u==="done"&&m&&(l+=" "+m),u==="active"&&s&&forceReflow(s),l&&(this.appliedClasses[o][u]=l,_addClass(s,l))},e.removeClasses=function(s,o){var u=this.appliedClasses[o],l=u.base,d=u.active,m=u.done;this.appliedClasses[o]={},l&&removeClass(s,l),d&&removeClass(s,d),m&&removeClass(s,m)},e.render=function(){var s=this.props;s.classNames;var o=_objectWithoutPropertiesLoose(s,["classNames"]);return React.createElement(Transition,_extends$3({},o,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},n}(React.Component);CSSTransition$1.defaultProps={classNames:""};CSSTransition$1.propTypes={};function _typeof$5(r){"@babel/helpers - typeof";return _typeof$5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$5(r)}function _toPrimitive$4(r,n){if(_typeof$5(r)!=="object"||r===null)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var i=e.call(r,n||"default");if(_typeof$5(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}function _toPropertyKey$4(r){var n=_toPrimitive$4(r,"string");return _typeof$5(n)==="symbol"?n:String(n)}function _defineProperty$4(r,n,e){return n=_toPropertyKey$4(n),n in r?Object.defineProperty(r,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[n]=e,r}var CSSTransitionBase={defaultProps:{__TYPE:"CSSTransition",children:void 0},getProps:function(n){return ObjectUtils.getMergedProps(n,CSSTransitionBase.defaultProps)},getOtherProps:function(n){return ObjectUtils.getDiffProps(n,CSSTransitionBase.defaultProps)}};function ownKeys$4(r,n){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);n&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),e.push.apply(e,i)}return e}function _objectSpread$4(r){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};n%2?ownKeys$4(Object(e),!0).forEach(function(i){_defineProperty$4(r,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):ownKeys$4(Object(e)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(e,i))})}return r}var CSSTransition=reactExports.forwardRef(function(r,n){var e=CSSTransitionBase.getProps(r),i=reactExports.useContext(PrimeReactContext),s=e.disabled||e.options&&e.options.disabled||i&&!i.cssTransition||!PrimeReact.cssTransition,o=function(Ee,xe){e.onEnter&&e.onEnter(Ee,xe),e.options&&e.options.onEnter&&e.options.onEnter(Ee,xe)},u=function(Ee,xe){e.onEntering&&e.onEntering(Ee,xe),e.options&&e.options.onEntering&&e.options.onEntering(Ee,xe)},l=function(Ee,xe){e.onEntered&&e.onEntered(Ee,xe),e.options&&e.options.onEntered&&e.options.onEntered(Ee,xe)},d=function(Ee){e.onExit&&e.onExit(Ee),e.options&&e.options.onExit&&e.options.onExit(Ee)},m=function(Ee){e.onExiting&&e.onExiting(Ee),e.options&&e.options.onExiting&&e.options.onExiting(Ee)},y=function(Ee){e.onExited&&e.onExited(Ee),e.options&&e.options.onExited&&e.options.onExited(Ee)};if(useUpdateEffect(function(){if(s){var Ce=ObjectUtils.getRefElement(e.nodeRef);e.in?(o(Ce,!0),u(Ce,!0),l(Ce,!0)):(d(Ce),m(Ce),y(Ce))}},[e.in]),s)return e.in?e.children:null;var S={nodeRef:e.nodeRef,in:e.in,appear:e.appear,onEnter:o,onEntering:u,onEntered:l,onExit:d,onExiting:m,onExited:y},X={classNames:e.classNames,timeout:e.timeout,unmountOnExit:e.unmountOnExit},he=_objectSpread$4(_objectSpread$4(_objectSpread$4({},X),e.options||{}),S);return reactExports.createElement(CSSTransition$1,he,e.children)});CSSTransition.displayName="CSSTransition";function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},_extends$2.apply(this,arguments)}var TimesIcon=reactExports.memo(reactExports.forwardRef(function(r,n){var e=IconBase.getPTI(r);return reactExports.createElement("svg",_extends$2({ref:n,width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),reactExports.createElement("path",{d:"M8.01186 7.00933L12.27 2.75116C12.341 2.68501 12.398 2.60524 12.4375 2.51661C12.4769 2.42798 12.4982 2.3323 12.4999 2.23529C12.5016 2.13827 12.4838 2.0419 12.4474 1.95194C12.4111 1.86197 12.357 1.78024 12.2884 1.71163C12.2198 1.64302 12.138 1.58893 12.0481 1.55259C11.9581 1.51625 11.8617 1.4984 11.7647 1.50011C11.6677 1.50182 11.572 1.52306 11.4834 1.56255C11.3948 1.60204 11.315 1.65898 11.2488 1.72997L6.99067 5.98814L2.7325 1.72997C2.59553 1.60234 2.41437 1.53286 2.22718 1.53616C2.03999 1.53946 1.8614 1.61529 1.72901 1.74767C1.59663 1.88006 1.5208 2.05865 1.5175 2.24584C1.5142 2.43303 1.58368 2.61419 1.71131 2.75116L5.96948 7.00933L1.71131 11.2675C1.576 11.403 1.5 11.5866 1.5 11.7781C1.5 11.9696 1.576 12.1532 1.71131 12.2887C1.84679 12.424 2.03043 12.5 2.2219 12.5C2.41338 12.5 2.59702 12.424 2.7325 12.2887L6.99067 8.03052L11.2488 12.2887C11.3843 12.424 11.568 12.5 11.7594 12.5C11.9509 12.5 12.1346 12.424 12.27 12.2887C12.4053 12.1532 12.4813 11.9696 12.4813 11.7781C12.4813 11.5866 12.4053 11.403 12.27 11.2675L8.01186 7.00933Z",fill:"currentColor"}))}));TimesIcon.displayName="TimesIcon";function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},_extends$1.apply(this,arguments)}function _typeof$4(r){"@babel/helpers - typeof";return _typeof$4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$4(r)}function _toPrimitive$3(r,n){if(_typeof$4(r)!=="object"||r===null)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var i=e.call(r,n||"default");if(_typeof$4(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}function _toPropertyKey$3(r){var n=_toPrimitive$3(r,"string");return _typeof$4(n)==="symbol"?n:String(n)}function _defineProperty$3(r,n,e){return n=_toPropertyKey$3(n),n in r?Object.defineProperty(r,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[n]=e,r}function _arrayWithHoles(r){if(Array.isArray(r))return r}function _iterableToArrayLimit(r,n){var e=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(e!=null){var i,s,o,u,l=[],d=!0,m=!1;try{if(o=(e=e.call(r)).next,n!==0)for(;!(d=(i=o.call(e)).done)&&(l.push(i.value),l.length!==n);d=!0);}catch(y){m=!0,s=y}finally{try{if(!d&&e.return!=null&&(u=e.return(),Object(u)!==u))return}finally{if(m)throw s}}return l}}function _arrayLikeToArray(r,n){(n==null||n>r.length)&&(n=r.length);for(var e=0,i=new Array(n);e<n;e++)i[e]=r[e];return i}function _unsupportedIterableToArray(r,n){if(r){if(typeof r=="string")return _arrayLikeToArray(r,n);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return _arrayLikeToArray(r,n)}}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _slicedToArray(r,n){return _arrayWithHoles(r)||_iterableToArrayLimit(r,n)||_unsupportedIterableToArray(r,n)||_nonIterableRest()}var classes$2={closeButton:"p-sidebar-close p-sidebar-icon p-link",closeIcon:"p-sidebar-close-icon",mask:function(n){var e=n.props,i=n.maskVisibleState,s=["left","right","top","bottom"],o=s.find(function(u){return u===e.position});return classNames("p-sidebar-mask",o&&!e.fullScreen?"p-sidebar-".concat(o):"",{"p-component-overlay p-component-overlay-enter":e.modal,"p-sidebar-mask-scrollblocker":e.blockScroll,"p-sidebar-visible":i,"p-sidebar-full":e.fullScreen},e.maskClassName)},header:function(n){var e=n.props;return classNames("p-sidebar-header",{"p-sidebar-custom-header":e.header})},content:"p-sidebar-content",icons:"p-sidebar-icons",root:function(n){n.props;var e=n.context;return classNames("p-sidebar p-component",{"p-input-filled":e&&e.inputStyle==="filled"||PrimeReact.inputStyle==="filled","p-ripple-disabled":e&&e.ripple===!1||PrimeReact.ripple===!1})},transition:"p-sidebar"},styles$2=`
@layer primereact {
    .p-sidebar-mask {
        display: none;
        justify-content: center;
        align-items: center;
        pointer-events: none;
        background-color: transparent;
        transition-property: background-color;
    }
    
    .p-sidebar-visible {
        display: flex;
    }
    
    .p-sidebar-mask.p-component-overlay {
        pointer-events: auto;
    }
    
    .p-sidebar {
        display: flex;
        flex-direction: column;
        pointer-events: auto;
        transform: translate3d(0px, 0px, 0px);
        position: relative;
    }
    
    .p-sidebar-content {
        overflow-y: auto;
        flex-grow: 1;
    }
    
    .p-sidebar-header {
        display: flex;
        align-items: center;
        justify-content: flex-end;
    }
    
    .p-sidebar-custom-header {
        justify-content: space-between;
    }
    
    .p-sidebar-icons {
        display: flex;
        align-items: center;
        flex-shrink: 0;
    }
    
    .p-sidebar-icon {
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
        position: relative;
    }
    
    .p-sidebar-full .p-sidebar {
        transition: none;
        transform: none;
        width: 100vw;
        height: 100vh;
        max-height: 100%;
        top: 0px;
        left: 0px;
    }
    
    /* Animation */
    /* Top, Bottom, Left and Right */
    .p-sidebar-top .p-sidebar-enter,
    .p-sidebar-top .p-sidebar-exit-active {
        transform: translate3d(0px, -100%, 0px);
    }
    
    .p-sidebar-bottom .p-sidebar-enter,
    .p-sidebar-bottom .p-sidebar-exit-active {
        transform: translate3d(0px, 100%, 0px);
    }
    
    .p-sidebar-left .p-sidebar-enter,
    .p-sidebar-left .p-sidebar-exit-active {
        transform: translate3d(-100%, 0px, 0px);
    }
    
    .p-sidebar-right .p-sidebar-enter,
    .p-sidebar-right .p-sidebar-exit-active {
        transform: translate3d(100%, 0px, 0px);
    }
    
    .p-sidebar-top .p-sidebar-enter-active,
    .p-sidebar-bottom .p-sidebar-enter-active,
    .p-sidebar-left .p-sidebar-enter-active,
    .p-sidebar-right .p-sidebar-enter-active {
        transform: translate3d(0px, 0px, 0px);
        transition: all 0.3s;
    }
    
    .p-sidebar-top .p-sidebar-enter-done,
    .p-sidebar-bottom .p-sidebar-enter-done,
    .p-sidebar-left .p-sidebar-enter-done,
    .p-sidebar-right .p-sidebar-enter-done {
        transform: none;
    }
    
    .p-sidebar-top .p-sidebar-exit-active,
    .p-sidebar-bottom .p-sidebar-exit-active,
    .p-sidebar-left .p-sidebar-exit-active,
    .p-sidebar-right .p-sidebar-exit-active {
        transition: all 0.3s;
    }
    
    /* Full */
    .p-sidebar-full .p-sidebar-enter {
        opacity: 0;
        transform: scale(0.5);
    }
    
    .p-sidebar-full .p-sidebar-enter-active {
        opacity: 1;
        transform: scale(1);
        transition: all 0.15s cubic-bezier(0, 0, 0.2, 1);
    }
    
    .p-sidebar-full .p-sidebar-enter-done {
        transform: none;
    }
    
    .p-sidebar-full .p-sidebar-exit-active {
        opacity: 0;
        transform: scale(0.5);
        transition: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    /* Size */
    .p-sidebar-left .p-sidebar {
        width: 20rem;
        height: 100%;
    }
    
    .p-sidebar-right .p-sidebar {
        width: 20rem;
        height: 100%;
    }
    
    .p-sidebar-top .p-sidebar {
        height: 10rem;
        width: 100%;
    }
    
    .p-sidebar-bottom .p-sidebar {
        height: 10rem;
        width: 100%;
    }
    
    .p-sidebar-left .p-sidebar-sm,
    .p-sidebar-right .p-sidebar-sm {
        width: 20rem;
    }
    
    .p-sidebar-left .p-sidebar-md,
    .p-sidebar-right .p-sidebar-md {
        width: 40rem;
    }
    
    .p-sidebar-left .p-sidebar-lg,
    .p-sidebar-right .p-sidebar-lg {
        width: 60rem;
    }
    
    .p-sidebar-top .p-sidebar-sm,
    .p-sidebar-bottom .p-sidebar-sm {
        height: 10rem;
    }
    
    .p-sidebar-top .p-sidebar-md,
    .p-sidebar-bottom .p-sidebar-md {
        height: 20rem;
    }
    
    .p-sidebar-top .p-sidebar-lg,
    .p-sidebar-bottom .p-sidebar-lg {
        height: 30rem;
    }
    
    .p-sidebar-left .p-sidebar-view,
    .p-sidebar-right .p-sidebar-view,
    .p-sidebar-top .p-sidebar-view,
    .p-sidebar-bottom .p-sidebar-view {
        width: 100%;
        height: 100%;
    }
    
    .p-sidebar-left .p-sidebar-content,
    .p-sidebar-right .p-sidebar-content,
    .p-sidebar-top .p-sidebar-content,
    .p-sidebar-bottom .p-sidebar-content {
        width: 100%;
        height: 100%;
    }
    
    @media screen and (max-width: 64em) {
        .p-sidebar-left .p-sidebar-lg,
        .p-sidebar-left .p-sidebar-md,
        .p-sidebar-right .p-sidebar-lg,
        .p-sidebar-right .p-sidebar-md {
            width: 20rem;
        }
    }        
}
`,inlineStyles$2={mask:function(n){var e=n.props;return{position:"fixed",height:"100%",width:"100%",left:0,top:0,display:"flex",justifyContent:e.position==="left"?"flex-start":e.position==="right"?"flex-end":"center",alignItems:e.position==="top"?"flex-start":e.position==="bottom"?"flex-end":"center"}}},SidebarBase=ComponentBase.extend({defaultProps:{__TYPE:"Sidebar",appendTo:null,ariaCloseLabel:null,baseZIndex:0,blockScroll:!1,children:void 0,className:null,closeIcon:null,closeOnEscape:!0,content:null,dismissable:!0,fullScreen:!1,header:null,icons:null,id:null,maskClassName:null,maskStyle:null,modal:!0,onHide:null,onShow:null,position:"left",showCloseIcon:!0,style:null,transitionOptions:null,visible:!1},css:{classes:classes$2,styles:styles$2,inlineStyles:inlineStyles$2}});function ownKeys$3(r,n){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);n&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),e.push.apply(e,i)}return e}function _objectSpread$3(r){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};n%2?ownKeys$3(Object(e),!0).forEach(function(i){_defineProperty$3(r,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):ownKeys$3(Object(e)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(e,i))})}return r}var Sidebar=reactExports.forwardRef(function(r,n){var e=useMergeProps(),i=reactExports.useContext(PrimeReactContext),s=SidebarBase.getProps(r,i),o=reactExports.useState(!1),u=_slicedToArray(o,2),l=u[0],d=u[1],m=reactExports.useState(!1),y=_slicedToArray(m,2),S=y[0],X=y[1],he=SidebarBase.setMetaData({props:s,state:{containerVisible:l}}),Ce=he.ptm,Ee=he.cx,xe=he.sx,be=he.isUnstyled;useHandleStyle(SidebarBase.css.styles,be,{name:"sidebar"});var we=reactExports.useRef(null),ve=reactExports.useRef(null),ke=reactExports.useRef(null),De=S&&s.closeOnEscape,Oe=useDisplayOrder("sidebar",De);useGlobalOnEscapeKey({callback:function(Tt){tt(Tt)},when:De&&Oe,priority:[ESC_KEY_HANDLING_PRIORITIES.SIDEBAR,Oe]});var Le=useEventListener({type:"click",listener:function(Tt){Tt.button===0&&ze(Tt)&&tt(Tt)}}),Ae=_slicedToArray(Le,2),Ie=Ae[0],Ue=Ae[1],ze=function(Tt){return we&&we.current&&!we.current.contains(Tt.target)},Ye=function(){var Tt=document.activeElement,At=Tt&&we&&we.current.contains(Tt);!At&&s.showCloseIcon&&ke.current&&ke.current.focus()},Xe=function(Tt){s.dismissable&&s.modal&&ve.current===Tt.target&&tt(Tt)},tt=function(Tt){s.onHide(),Tt.preventDefault()},lt=function(){s.onShow&&s.onShow(),Ye(),rt()},_t=function(){s.modal&&!be()&&DomHandler.addClass(ve.current,"p-component-overlay-leave")},bt=function(){ZIndexUtils.clear(ve.current),d(!1),He()},rt=function(){s.dismissable&&!s.modal&&Ie(),s.blockScroll&&DomHandler.blockBodyScroll()},He=function(){Ue(),s.blockScroll&&DomHandler.unblockBodyScroll()};reactExports.useImperativeHandle(n,function(){return{props:s,getElement:function(){return we.current},gteMask:function(){return ve.current},getCloseIcon:function(){return ke.current}}}),useMountEffect(function(){s.visible&&d(!0)}),useUpdateEffect(function(){s.visible&&!l&&d(!0),s.visible!==S&&l&&X(s.visible)},[s.visible]),useUpdateEffect(function(){l&&(ZIndexUtils.set("modal",ve.current,i&&i.autoZIndex||PrimeReact.autoZIndex,s.baseZIndex||i&&i.zIndex.modal||PrimeReact.zIndex.modal),X(!0))},[l]),useUpdateEffect(function(){S&&(Ue(),s.dismissable&&!s.modal&&Ie())},[s.dismissable,s.modal,S]),useUnmountEffect(function(){He(),ve.current&&ZIndexUtils.clear(ve.current)});var We=function(){var Tt=s.ariaCloseLabel||localeOption("close"),At=e({type:"button",ref:ke,className:Ee("closeButton"),onClick:function(qt){return tt(qt)},"aria-label":Tt},Ce("closeButton")),sr=e({className:Ee("closeIcon")},Ce("closeIcon")),Lt=s.closeIcon||reactExports.createElement(TimesIcon,sr),Kt=IconUtils.getJSXIcon(Lt,_objectSpread$3({},sr),{props:s});return s.showCloseIcon?reactExports.createElement("button",At,Kt,reactExports.createElement(Ripple,null)):null},qe=function(){return s.header?ObjectUtils.getJSXElement(s.header,s):null},Ke=function(){return s.icons?ObjectUtils.getJSXElement(s.icons,s):null},st=e({ref:ve,style:xe("mask"),className:Ee("mask",{maskVisibleState:l}),onMouseDown:function(Tt){return Xe(Tt)}},Ce("mask")),ut=e({id:s.id,className:classNames(s.className,Ee("root",{context:i})),style:s.style,role:"complementary"},SidebarBase.getOtherProps(s),Ce("root")),nt=e({className:Ee("header")},Ce("header")),vt=e({className:Ee("content")},Ce("content")),it=e({className:Ee("icons")},Ce("icons")),Ve={enter:s.fullScreen?150:300,exit:s.fullScreen?150:300},ht=e({classNames:Ee("transition"),in:S,timeout:Ve,options:s.transitionOptions,unmountOnExit:!0,onEntered:lt,onExiting:_t,onExited:bt},Ce("transition")),ct=function(){var Tt={closeIconRef:ke,hide:tt};return reactExports.createElement("div",st,reactExports.createElement(CSSTransition,_extends$1({nodeRef:we},ht),reactExports.createElement("div",_extends$1({ref:we},ut),ObjectUtils.getJSXElement(r.content,Tt))))},St=function(){var Tt=We(),At=Ke(),sr=qe();return reactExports.createElement("div",st,reactExports.createElement(CSSTransition,_extends$1({nodeRef:we},ht),reactExports.createElement("div",_extends$1({ref:we},ut),reactExports.createElement("div",nt,sr,reactExports.createElement("div",it,At,Tt)),reactExports.createElement("div",vt,s.children))))},Ct=function(){var Tt=r!=null&&r.content?ct():St();return reactExports.createElement(Portal,{element:Tt,appendTo:s.appendTo,visible:!0})};return l&&Ct()});Sidebar.displayName="Sidebar";function _extends(){return _extends=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},_extends.apply(this,arguments)}function _typeof$3(r){"@babel/helpers - typeof";return _typeof$3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$3(r)}function _toPrimitive$2(r,n){if(_typeof$3(r)!=="object"||r===null)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var i=e.call(r,n||"default");if(_typeof$3(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}function _toPropertyKey$2(r){var n=_toPrimitive$2(r,"string");return _typeof$3(n)==="symbol"?n:String(n)}function _defineProperty$2(r,n,e){return n=_toPropertyKey$2(n),n in r?Object.defineProperty(r,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[n]=e,r}var classes$1={root:function(n){var e=n.props;return e.mode==="indeterminate"?classNames("p-progressbar p-component p-progressbar-indeterminate"):classNames("p-progressbar p-component p-progressbar-determinate")},value:"p-progressbar-value p-progressbar-value-animate",label:"p-progressbar-label",container:"p-progressbar-indeterminate-container"},styles$1=`
@layer primereact {
  .p-progressbar {
      position: relative;
      overflow: hidden;
  }
  
  .p-progressbar-determinate .p-progressbar-value {
      height: 100%;
      width: 0%;
      position: absolute;
      display: none;
      border: 0 none;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
  }
  
  .p-progressbar-determinate .p-progressbar-label {
      display: inline-flex;
  }
  
  .p-progressbar-determinate .p-progressbar-value-animate {
      transition: width 1s ease-in-out;
  }
  
  .p-progressbar-indeterminate .p-progressbar-value::before {
        content: '';
        position: absolute;
        background-color: inherit;
        top: 0;
        left: 0;
        bottom: 0;
        will-change: left, right;
        -webkit-animation: p-progressbar-indeterminate-anim 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
                animation: p-progressbar-indeterminate-anim 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
  }
  
  .p-progressbar-indeterminate .p-progressbar-value::after {
      content: '';
      position: absolute;
      background-color: inherit;
      top: 0;
      left: 0;
      bottom: 0;
      will-change: left, right;
      -webkit-animation: p-progressbar-indeterminate-anim-short 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) infinite;
              animation: p-progressbar-indeterminate-anim-short 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) infinite;
      -webkit-animation-delay: 1.15s;
              animation-delay: 1.15s;
  }
}

@-webkit-keyframes p-progressbar-indeterminate-anim {
  0% {
    left: -35%;
    right: 100%; }
  60% {
    left: 100%;
    right: -90%; }
  100% {
    left: 100%;
    right: -90%; }
}
@keyframes p-progressbar-indeterminate-anim {
  0% {
    left: -35%;
    right: 100%; }
  60% {
    left: 100%;
    right: -90%; }
  100% {
    left: 100%;
    right: -90%; }
}

@-webkit-keyframes p-progressbar-indeterminate-anim-short {
  0% {
    left: -200%;
    right: 100%; }
  60% {
    left: 107%;
    right: -8%; }
  100% {
    left: 107%;
    right: -8%; }
}
@keyframes p-progressbar-indeterminate-anim-short {
  0% {
    left: -200%;
    right: 100%; }
  60% {
    left: 107%;
    right: -8%; }
  100% {
    left: 107%;
    right: -8%; }
}
`,inlineStyles$1={value:function(n){var e=n.props,i=Math.max(e.value,2),s=e.value?e.color:"transparent";return e.mode==="indeterminate"?{backgroundColor:e.color}:{width:i+"%",display:"flex",backgroundColor:s}}},ProgressBarBase=ComponentBase.extend({defaultProps:{__TYPE:"ProgressBar",__parentMetadata:null,id:null,value:null,showValue:!0,unit:"%",style:null,className:null,mode:"determinate",displayValueTemplate:null,color:null,children:void 0},css:{classes:classes$1,styles:styles$1,inlineStyles:inlineStyles$1}});function ownKeys$2(r,n){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);n&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),e.push.apply(e,i)}return e}function _objectSpread$2(r){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};n%2?ownKeys$2(Object(e),!0).forEach(function(i){_defineProperty$2(r,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):ownKeys$2(Object(e)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(e,i))})}return r}var ProgressBar=reactExports.memo(reactExports.forwardRef(function(r,n){var e=useMergeProps(),i=reactExports.useContext(PrimeReactContext),s=ProgressBarBase.getProps(r,i),o=ProgressBarBase.setMetaData(_objectSpread$2({props:s},s.__parentMetadata)),u=o.ptm,l=o.cx,d=o.isUnstyled;useHandleStyle(ProgressBarBase.css.styles,d,{name:"progressbar"});var m=reactExports.useRef(null),y=function(){if(s.showValue&&s.value!=null){var Ce=s.displayValueTemplate?s.displayValueTemplate(s.value):s.value+s.unit;return Ce}return null},S=function(){var Ce=y(),Ee=e({className:classNames(s.className,l("root")),style:s.style,role:"progressbar","aria-valuemin":"0","aria-valuenow":s.value,"aria-valuemax":"100"},ProgressBarBase.getOtherProps(s),u("root")),xe=e({className:l("value"),style:{width:s.value+"%",display:"flex",backgroundColor:s.color}},u("value")),be=e({className:l("label")},u("label"));return reactExports.createElement("div",_extends({id:s.id,ref:m},Ee),reactExports.createElement("div",xe,Ce!=null&&reactExports.createElement("div",be,Ce)))},X=function(){var Ce=e({className:classNames(s.className,l("root")),style:s.style,role:"progressbar","aria-valuemin":"0","aria-valuenow":s.value,"aria-valuemax":"100"},ProgressBarBase.getOtherProps(s),u("root")),Ee=e({className:l("container")},u("container")),xe=e({className:l("value"),style:{backgroundColor:s.color}},u("value"));return reactExports.createElement("div",_extends({id:s.id,ref:m},Ce),reactExports.createElement("div",Ee,reactExports.createElement("div",xe)))};if(reactExports.useImperativeHandle(n,function(){return{props:s,getElement:function(){return m.current}}}),s.mode==="determinate")return S();if(s.mode==="indeterminate")return X();throw new Error(s.mode+" is not a valid mode for the ProgressBar. Valid values are 'determinate' and 'indeterminate'")}));ProgressBar.displayName="ProgressBar";window.lessonList||(window.lessonList=[]);function LessonsPage(){var s;var[r,n]=reactExports.useState(!1),[e,i]=reactExports.useState(null);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Header,{children:t("SECTION_LESSONS")}),jsxRuntimeExports.jsx("div",{className:"lessonsPage",children:lessonList.filter(o=>o.lang==localStorage.i18nextLng).map((o,u)=>jsxRuntimeExports.jsx(LessonCard,{onClick:()=>{i(o),n(!0)},...o},u))}),jsxRuntimeExports.jsxs(Sidebar,{style:{width:"100%"},position:"right",className:"segmentPickerContainer",visible:r,onHide:()=>n(!1),children:[jsxRuntimeExports.jsx(Header,{onBack:()=>n(!1),children:e==null?void 0:e.name}),(s=e==null?void 0:e.segments)==null?void 0:s.map(o=>{var u;return jsxRuntimeExports.jsxs("div",{className:"lessonSegment",children:[jsxRuntimeExports.jsx("h2",{children:o.split(`
`)[0].replace("# ","")}),jsxRuntimeExports.jsx("p",{children:(u=o.split(`
`)[1])==null?void 0:u.replace("# ","")})]})})]}),jsxRuntimeExports.jsx(BottomBar,{})]})}function LessonCard(r){return jsxRuntimeExports.jsxs("div",{...r,className:"lessonCard",children:[jsxRuntimeExports.jsx("h2",{className:"lessonTitle",children:r.name}),jsxRuntimeExports.jsx("p",{className:"lessonDescription",children:r.description}),jsxRuntimeExports.jsx("div",{className:"lessonIcon",style:r.icon=="JavaScript.webp"?{backgroundColor:"#F0DB4F"}:{},children:jsxRuntimeExports.jsx("img",{alt:r.icon+" Logo",src:"/Images/LangIcons/"+r.icon})}),jsxRuntimeExports.jsx(ProgressBar,{value:50})]})}function SnippetsPage(){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["Snippets",jsxRuntimeExports.jsx(BottomBar,{})]})}function LanguageSelect(){var[r,n]=reactExports.useState(!1),[e,i]=reactExports.useState([]);window.openLanguageSelector=o=>{i([o]),n(!0)};var s=o=>{var u=e[0]||console.log;u(o),setTimeout(()=>n(!1),0)};return jsxRuntimeExports.jsxs(Sidebar,{style:{height:"80vh"},position:"bottom",visible:r,onHide:()=>n(!1),children:[jsxRuntimeExports.jsx("h2",{children:t("ACTION_SELECTLANG")}),jsxRuntimeExports.jsx("p",{children:t("ACTION_SELECTLANG_DESCRIPTION")}),jsxRuntimeExports.jsxs(Button,{onClick:()=>s("python"),className:"languageOption",children:[jsxRuntimeExports.jsx(IconBrandPython,{}),"  ",t("LANG_PYTHON")]}),jsxRuntimeExports.jsxs(Button,{onClick:()=>s("javascript"),className:"languageOption",children:[jsxRuntimeExports.jsx(IconBrandJavascript,{}),"  ",t("LANG_JAVASCRIPT")]})]})}var reactWebcam$1={exports:{}},reactWebcam=reactWebcam$1.exports,hasRequiredReactWebcam;function requireReactWebcam(){return hasRequiredReactWebcam||(hasRequiredReactWebcam=1,function(r,n){(function(i,s){r.exports=s(requireReact())})(reactWebcam,function(e){return function(i){var s={};function o(u){if(s[u])return s[u].exports;var l=s[u]={i:u,l:!1,exports:{}};return i[u].call(l.exports,l,l.exports,o),l.l=!0,l.exports}return o.m=i,o.c=s,o.d=function(u,l,d){o.o(u,l)||Object.defineProperty(u,l,{enumerable:!0,get:d})},o.r=function(u){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(u,"__esModule",{value:!0})},o.t=function(u,l){if(l&1&&(u=o(u)),l&8||l&4&&typeof u=="object"&&u&&u.__esModule)return u;var d=Object.create(null);if(o.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:u}),l&2&&typeof u!="string")for(var m in u)o.d(d,m,(function(y){return u[y]}).bind(null,m));return d},o.n=function(u){var l=u&&u.__esModule?function(){return u.default}:function(){return u};return o.d(l,"a",l),l},o.o=function(u,l){return Object.prototype.hasOwnProperty.call(u,l)},o.p="",o(o.s="./src/react-webcam.tsx")}({"./src/react-webcam.tsx":function(i,s,o){o.r(s);var u=o("react"),l=function(){var X=function(he,Ce){return X=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ee,xe){Ee.__proto__=xe}||function(Ee,xe){for(var be in xe)xe.hasOwnProperty(be)&&(Ee[be]=xe[be])},X(he,Ce)};return function(he,Ce){X(he,Ce);function Ee(){this.constructor=he}he.prototype=Ce===null?Object.create(Ce):(Ee.prototype=Ce.prototype,new Ee)}}(),d=function(){return d=Object.assign||function(X){for(var he,Ce=1,Ee=arguments.length;Ce<Ee;Ce++){he=arguments[Ce];for(var xe in he)Object.prototype.hasOwnProperty.call(he,xe)&&(X[xe]=he[xe])}return X},d.apply(this,arguments)},m=function(X,he){var Ce={};for(var Ee in X)Object.prototype.hasOwnProperty.call(X,Ee)&&he.indexOf(Ee)<0&&(Ce[Ee]=X[Ee]);if(X!=null&&typeof Object.getOwnPropertySymbols=="function")for(var xe=0,Ee=Object.getOwnPropertySymbols(X);xe<Ee.length;xe++)he.indexOf(Ee[xe])<0&&Object.prototype.propertyIsEnumerable.call(X,Ee[xe])&&(Ce[Ee[xe]]=X[Ee[xe]]);return Ce};(function(){typeof window>"u"||(navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(he){var Ce=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return Ce?new Promise(function(Ee,xe){Ce.call(navigator,he,Ee,xe)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}))})();function y(){return!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)}var S=function(X){l(he,X);function he(Ce){var Ee=X.call(this,Ce)||this;return Ee.canvas=null,Ee.ctx=null,Ee.requestUserMediaId=0,Ee.unmounted=!1,Ee.state={hasUserMedia:!1},Ee}return he.prototype.componentDidMount=function(){var Ce=this,Ee=Ce.state,xe=Ce.props;if(this.unmounted=!1,!y()){xe.onUserMediaError("getUserMedia not supported");return}Ee.hasUserMedia||this.requestUserMedia(),xe.children&&typeof xe.children!="function"&&console.warn("children must be a function")},he.prototype.componentDidUpdate=function(Ce){var Ee=this.props;if(!y()){Ee.onUserMediaError("getUserMedia not supported");return}var xe=JSON.stringify(Ce.audioConstraints)!==JSON.stringify(Ee.audioConstraints),be=JSON.stringify(Ce.videoConstraints)!==JSON.stringify(Ee.videoConstraints),we=Ce.minScreenshotWidth!==Ee.minScreenshotWidth,ve=Ce.minScreenshotHeight!==Ee.minScreenshotHeight;(be||we||ve)&&(this.canvas=null,this.ctx=null),(xe||be)&&(this.stopAndCleanup(),this.requestUserMedia())},he.prototype.componentWillUnmount=function(){this.unmounted=!0,this.stopAndCleanup()},he.stopMediaStream=function(Ce){Ce&&(Ce.getVideoTracks&&Ce.getAudioTracks?(Ce.getVideoTracks().map(function(Ee){Ce.removeTrack(Ee),Ee.stop()}),Ce.getAudioTracks().map(function(Ee){Ce.removeTrack(Ee),Ee.stop()})):Ce.stop())},he.prototype.stopAndCleanup=function(){var Ce=this.state;Ce.hasUserMedia&&(he.stopMediaStream(this.stream),Ce.src&&window.URL.revokeObjectURL(Ce.src))},he.prototype.getScreenshot=function(Ce){var Ee=this,xe=Ee.state,be=Ee.props;if(!xe.hasUserMedia)return null;var we=this.getCanvas(Ce);return we&&we.toDataURL(be.screenshotFormat,be.screenshotQuality)},he.prototype.getCanvas=function(Ce){var Ee=this,xe=Ee.state,be=Ee.props;if(!this.video||!xe.hasUserMedia||!this.video.videoHeight)return null;if(!this.ctx){var we=this.video.videoWidth,ve=this.video.videoHeight;if(!this.props.forceScreenshotSourceSize){var ke=we/ve;we=be.minScreenshotWidth||this.video.clientWidth,ve=we/ke,be.minScreenshotHeight&&ve<be.minScreenshotHeight&&(ve=be.minScreenshotHeight,we=ve*ke)}this.canvas=document.createElement("canvas"),this.canvas.width=(Ce==null?void 0:Ce.width)||we,this.canvas.height=(Ce==null?void 0:Ce.height)||ve,this.ctx=this.canvas.getContext("2d")}var De=this,Oe=De.ctx,Le=De.canvas;return Oe&&Le&&(Le.width=(Ce==null?void 0:Ce.width)||Le.width,Le.height=(Ce==null?void 0:Ce.height)||Le.height,be.mirrored&&(Oe.translate(Le.width,0),Oe.scale(-1,1)),Oe.imageSmoothingEnabled=be.imageSmoothing,Oe.drawImage(this.video,0,0,(Ce==null?void 0:Ce.width)||Le.width,(Ce==null?void 0:Ce.height)||Le.height),be.mirrored&&(Oe.scale(-1,1),Oe.translate(-Le.width,0))),Le},he.prototype.requestUserMedia=function(){var Ce=this,Ee=this.props,xe=function(ve,ke){var De={video:typeof ke<"u"?ke:!0};Ee.audio&&(De.audio=typeof ve<"u"?ve:!0),Ce.requestUserMediaId++;var Oe=Ce.requestUserMediaId;navigator.mediaDevices.getUserMedia(De).then(function(Le){Ce.unmounted||Oe!==Ce.requestUserMediaId?he.stopMediaStream(Le):Ce.handleUserMedia(null,Le)}).catch(function(Le){Ce.handleUserMedia(Le)})};if("mediaDevices"in navigator)xe(Ee.audioConstraints,Ee.videoConstraints);else{var be=function(ve){return{optional:[{sourceId:ve}]}},we=function(ve){var ke=ve.deviceId;return typeof ke=="string"?ke:Array.isArray(ke)&&ke.length>0?ke[0]:typeof ke=="object"&&ke.ideal?ke.ideal:null};MediaStreamTrack.getSources(function(ve){var ke=null,De=null;ve.forEach(function(Ae){Ae.kind==="audio"?ke=Ae.id:Ae.kind==="video"&&(De=Ae.id)});var Oe=we(Ee.audioConstraints);Oe&&(ke=Oe);var Le=we(Ee.videoConstraints);Le&&(De=Le),xe(be(ke),be(De))})}},he.prototype.handleUserMedia=function(Ce,Ee){var xe=this.props;if(Ce||!Ee){this.setState({hasUserMedia:!1}),xe.onUserMediaError(Ce);return}this.stream=Ee;try{this.video&&(this.video.srcObject=Ee),this.setState({hasUserMedia:!0})}catch{this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(Ee)})}xe.onUserMedia(Ee)},he.prototype.render=function(){var Ce=this,Ee=this,xe=Ee.state,be=Ee.props,we=be.audio;be.forceScreenshotSourceSize;var ve=be.disablePictureInPicture;be.onUserMedia,be.onUserMediaError,be.screenshotFormat,be.screenshotQuality,be.minScreenshotWidth,be.minScreenshotHeight,be.audioConstraints,be.videoConstraints,be.imageSmoothing;var ke=be.mirrored,De=be.style,Oe=De===void 0?{}:De,Le=be.children,Ae=m(be,["audio","forceScreenshotSourceSize","disablePictureInPicture","onUserMedia","onUserMediaError","screenshotFormat","screenshotQuality","minScreenshotWidth","minScreenshotHeight","audioConstraints","videoConstraints","imageSmoothing","mirrored","style","children"]),Ie=ke?d(d({},Oe),{transform:(Oe.transform||"")+" scaleX(-1)"}):Oe,Ue={getScreenshot:this.getScreenshot.bind(this)};return u.createElement(u.Fragment,null,u.createElement("video",d({autoPlay:!0,disablePictureInPicture:ve,src:xe.src,muted:!we,playsInline:!0,ref:function(ze){Ce.video=ze},style:Ie},Ae)),Le&&Le(Ue))},he.defaultProps={audio:!1,disablePictureInPicture:!1,forceScreenshotSourceSize:!1,imageSmoothing:!0,mirrored:!1,onUserMedia:function(){},onUserMediaError:function(){},screenshotFormat:"image/webp",screenshotQuality:.92},he}(u.Component);s.default=S},react:function(i,s){i.exports=e}}).default})}(reactWebcam$1)),reactWebcam$1.exports}var reactWebcamExports=requireReactWebcam();const Webcam=getDefaultExportFromCjs(reactWebcamExports);var classes={root:"p-progress-spinner",spinner:"p-progress-spinner-svg",circle:"p-progress-spinner-circle"},styles=`
@layer primereact {
    .p-progress-spinner {
        position: relative;
        margin: 0 auto;
        width: 100px;
        height: 100px;
        display: inline-block;
    }
    
    .p-progress-spinner::before {
        content: '';
        display: block;
        padding-top: 100%;
    }
    
    .p-progress-spinner-svg {
        animation: p-progress-spinner-rotate 2s linear infinite;
        height: 100%;
        transform-origin: center center;
        width: 100%;
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        margin: auto;
    }
    
    .p-progress-spinner-circle {
        stroke-dasharray: 89, 200;
        stroke-dashoffset: 0;
        stroke: #d62d20;
        animation: p-progress-spinner-dash 1.5s ease-in-out infinite, p-progress-spinner-color 6s ease-in-out infinite;
        stroke-linecap: round;
    }
}

@keyframes p-progress-spinner-rotate {
    100% {
        transform: rotate(360deg);
    }
}

@keyframes p-progress-spinner-dash {
    0% {
        stroke-dasharray: 1, 200;
        stroke-dashoffset: 0;
    }
    50% {
        stroke-dasharray: 89, 200;
        stroke-dashoffset: -35px;
    }
    100% {
        stroke-dasharray: 89, 200;
        stroke-dashoffset: -124px;
    }
}

@keyframes p-progress-spinner-color {
    100%,
    0% {
        stroke: #d62d20;
    }
    40% {
        stroke: #0057e7;
    }
    66% {
        stroke: #008744;
    }
    80%,
    90% {
        stroke: #ffa700;
    }
}
`,inlineStyles={spinner:function(n){var e=n.props;return{animationDuration:e.animationDuration}}},ProgressSpinnerBase=ComponentBase.extend({defaultProps:{__TYPE:"ProgressSpinner",id:null,style:null,className:null,strokeWidth:"2",fill:"none",animationDuration:"2s",children:void 0},css:{classes,styles,inlineStyles}}),ProgressSpinner=reactExports.memo(reactExports.forwardRef(function(r,n){var e=useMergeProps(),i=reactExports.useContext(PrimeReactContext),s=ProgressSpinnerBase.getProps(r,i),o=reactExports.useRef(null),u=ProgressSpinnerBase.setMetaData({props:s}),l=u.ptm,d=u.cx,m=u.sx,y=u.isUnstyled;useHandleStyle(ProgressSpinnerBase.css.styles,y,{name:"progressspinner"}),reactExports.useImperativeHandle(n,function(){return{props:s,getElement:function(){return o.current}}});var S=e({id:s.id,ref:o,style:s.style,className:classNames(s.className,d("root")),role:"progressbar","aria-busy":!0},ProgressSpinnerBase.getOtherProps(s),l("root")),X=e({className:d("spinner"),viewBox:"25 25 50 50",style:m("spinner")},l("spinner")),he=e({className:d("circle"),cx:"50",cy:"50",r:"20",fill:s.fill,strokeWidth:s.strokeWidth,strokeMiterlimit:"10"},l("circle"));return reactExports.createElement("div",S,reactExports.createElement("svg",X,reactExports.createElement("circle",he)))}));ProgressSpinner.displayName="ProgressSpinner";function Vibrate(){try{navigator.vibrate(150)}catch{}}const bitMethods={getBit(r){return this.data[getSlot(r)]&1<<getShift(r)?1:0},setBit(r){this.data[getSlot(r)]|=1<<getShift(r)},clearBit(r){this.data[getSlot(r)]&=~(1<<getShift(r))},toggleBit(r){this.data[getSlot(r)]^=1<<getShift(r)},getBitXY(r,n){return r>=this.width||n>=this.height?0:this.getBit(n*this.width+r)},setBitXY(r,n){this.setBit(n*this.width+r)},clearBitXY(r,n){this.clearBit(n*this.width+r)},toggleBitXY(r,n){this.toggleBit(n*this.width+r)}};function getSlot(r){return r>>3}function getShift(r){return 7-(r&7)}function setBitMethods(r){for(const n in bitMethods)r.prototype[n]=bitMethods[n]}function checkProcessable(r,n={}){let{bitDepth:e,alpha:i,colorModel:s,components:o,channels:u}=n;if(typeof r!="string"||r.length===0)throw new TypeError("processName must be a string");if(e&&(Array.isArray(e)||(e=[e]),!e.includes(this.bitDepth)))throw new TypeError(`The process: ${r} can only be applied if bit depth is in: ${e}`);if(i&&(Array.isArray(i)||(i=[i]),!i.includes(this.alpha)))throw new TypeError(`The process: ${r} can only be applied if alpha is in: ${i}`);if(s&&(Array.isArray(s)||(s=[s]),!s.includes(this.colorModel)))throw new TypeError(`The process: ${r} can only be applied if color model is in: ${s}`);if(o&&(Array.isArray(o)||(o=[o]),!o.includes(this.components))){let l=`The process: ${r} can only be applied if the number of components is in: ${o}`;throw o.length===1&&o[0]===1?new TypeError(`${l}.\rYou should transform your image using "image.grey()" before applying the algorithm.`):new TypeError(l)}if(u&&(Array.isArray(u)||(u=[u]),!u.includes(this.channels)))throw new TypeError(`The process: ${r} can only be applied if the number of channels is in: ${u}`)}function createBlob(r,n){r=r||[],n=n||{},typeof n=="string"&&(n={type:n});try{return new Blob(r,n)}catch(o){if(o.name!=="TypeError")throw o;for(var e=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,i=new e,s=0;s<r.length;s+=1)i.append(r[s]);return i.getBlob(n.type)}}function dataURLToBlob(r){var n=r.match(/data:([^;]+)/)[1],e=r.replace(/^[^,]+,/,""),i=binaryStringToArrayBuffer(atob(e));return createBlob([i],{type:n})}function canvasToBlob(r,n,e){return typeof r.toBlob=="function"?new Promise(function(i){r.toBlob(i,n,e)}):Promise.resolve(dataURLToBlob(r.toDataURL(n,e)))}function binaryStringToArrayBuffer(r){for(var n=r.length,e=new ArrayBuffer(n),i=new Uint8Array(e),s=-1;++s<n;)i[s]=r.charCodeAt(s);return e}var src$6={};(function(r){if(r.TextEncoder&&r.TextDecoder)return!1;function n(i="utf-8"){if(i!=="utf-8")throw new RangeError(`Failed to construct 'TextEncoder': The encoding label provided ('${i}') is invalid.`)}Object.defineProperty(n.prototype,"encoding",{value:"utf-8"}),n.prototype.encode=function(i,s={stream:!1}){if(s.stream)throw new Error("Failed to encode: the 'stream' option is unsupported.");let o=0;const u=i.length;let l=0,d=Math.max(32,u+(u>>1)+7),m=new Uint8Array(d>>3<<3);for(;o<u;){let y=i.charCodeAt(o++);if(y>=55296&&y<=56319){if(o<u){const S=i.charCodeAt(o);(S&64512)===56320&&(++o,y=((y&1023)<<10)+(S&1023)+65536)}if(y>=55296&&y<=56319)continue}if(l+4>m.length){d+=8,d*=1+o/i.length*2,d=d>>3<<3;const S=new Uint8Array(d);S.set(m),m=S}if(y&4294967168)if(!(y&4294965248))m[l++]=y>>6&31|192;else if(!(y&4294901760))m[l++]=y>>12&15|224,m[l++]=y>>6&63|128;else if(!(y&4292870144))m[l++]=y>>18&7|240,m[l++]=y>>12&63|128,m[l++]=y>>6&63|128;else continue;else{m[l++]=y;continue}m[l++]=y&63|128}return m.slice(0,l)};function e(i="utf-8",s={fatal:!1}){if(i!=="utf-8")throw new RangeError(`Failed to construct 'TextDecoder': The encoding label provided ('${i}') is invalid.`);if(s.fatal)throw new Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}Object.defineProperty(e.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(e.prototype,"fatal",{value:!1}),Object.defineProperty(e.prototype,"ignoreBOM",{value:!1}),e.prototype.decode=function(i,s={stream:!1}){if(s.stream)throw new Error("Failed to decode: the 'stream' option is unsupported.");const o=new Uint8Array(i);let u=0;const l=o.length,d=[];for(;u<l;){const m=o[u++];if(m===0)break;if(!(m&128))d.push(m);else if((m&224)===192){const y=o[u++]&63;d.push((m&31)<<6|y)}else if((m&240)===224){const y=o[u++]&63,S=o[u++]&63;d.push((m&31)<<12|y<<6|S)}else if((m&248)===240){const y=o[u++]&63,S=o[u++]&63,X=o[u++]&63;let he=(m&7)<<18|y<<12|S<<6|X;he>65535&&(he-=65536,d.push(he>>>10&1023|55296),he=56320|he&1023),d.push(he)}}return String.fromCharCode.apply(null,d)},r.TextEncoder=n,r.TextDecoder=e})(typeof window<"u"?window:typeof self<"u"?self:void 0);function decode$2(r,n="utf8"){return new TextDecoder(n).decode(r)}const encoder$1=new TextEncoder;function encode$1(r){return encoder$1.encode(r)}const defaultByteLength=1024*8,hostBigEndian=(()=>{const r=new Uint8Array(4),n=new Uint32Array(r.buffer);return!((n[0]=1)&r[0])})(),typedArrays={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class IOBuffer{constructor(n=defaultByteLength,e={}){let i=!1;typeof n=="number"?n=new ArrayBuffer(n):(i=!0,this.lastWrittenByte=n.byteLength);const s=e.offset?e.offset>>>0:0,o=n.byteLength-s;let u=s;(ArrayBuffer.isView(n)||n instanceof IOBuffer)&&(n.byteLength!==n.buffer.byteLength&&(u=n.byteOffset+s),n=n.buffer),i?this.lastWrittenByte=o:this.lastWrittenByte=0,this.buffer=n,this.length=o,this.byteLength=o,this.byteOffset=u,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,u,o),this._mark=0,this._marks=[]}available(n=1){return this.offset+n<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(n=1){return this.offset+=n,this}back(n=1){return this.offset-=n,this}seek(n){return this.offset=n,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const n=this._marks.pop();if(n===void 0)throw new Error("Mark stack empty");return this.seek(n),this}rewind(){return this.offset=0,this}ensureAvailable(n=1){if(!this.available(n)){const i=(this.offset+n)*2,s=new Uint8Array(i);s.set(new Uint8Array(this.buffer)),this.buffer=s.buffer,this.length=this.byteLength=i,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(n=1){return this.readArray(n,"uint8")}readArray(n,e){const i=typedArrays[e].BYTES_PER_ELEMENT*n,s=this.byteOffset+this.offset,o=this.buffer.slice(s,s+i);if(this.littleEndian===hostBigEndian&&e!=="uint8"&&e!=="int8"){const l=new Uint8Array(this.buffer.slice(s,s+i));l.reverse();const d=new typedArrays[e](l.buffer);return this.offset+=i,d.reverse(),d}const u=new typedArrays[e](o);return this.offset+=i,u}readInt16(){const n=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,n}readUint16(){const n=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,n}readInt32(){const n=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,n}readUint32(){const n=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,n}readFloat32(){const n=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,n}readFloat64(){const n=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,n}readBigInt64(){const n=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,n}readBigUint64(){const n=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,n}readChar(){return String.fromCharCode(this.readInt8())}readChars(n=1){let e="";for(let i=0;i<n;i++)e+=this.readChar();return e}readUtf8(n=1){return decode$2(this.readBytes(n))}decodeText(n=1,e="utf-8"){return decode$2(this.readBytes(n),e)}writeBoolean(n){return this.writeUint8(n?255:0),this}writeInt8(n){return this.ensureAvailable(1),this._data.setInt8(this.offset++,n),this._updateLastWrittenByte(),this}writeUint8(n){return this.ensureAvailable(1),this._data.setUint8(this.offset++,n),this._updateLastWrittenByte(),this}writeByte(n){return this.writeUint8(n)}writeBytes(n){this.ensureAvailable(n.length);for(let e=0;e<n.length;e++)this._data.setUint8(this.offset++,n[e]);return this._updateLastWrittenByte(),this}writeInt16(n){return this.ensureAvailable(2),this._data.setInt16(this.offset,n,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(n){return this.ensureAvailable(2),this._data.setUint16(this.offset,n,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(n){return this.ensureAvailable(4),this._data.setInt32(this.offset,n,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(n){return this.ensureAvailable(4),this._data.setUint32(this.offset,n,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(n){return this.ensureAvailable(4),this._data.setFloat32(this.offset,n,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(n){return this.ensureAvailable(8),this._data.setFloat64(this.offset,n,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(n){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,n,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(n){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,n,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(n){return this.writeUint8(n.charCodeAt(0))}writeChars(n){for(let e=0;e<n.length;e++)this.writeUint8(n.charCodeAt(e));return this}writeUtf8(n){return this.writeBytes(encode$1(n))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}const IOBuffer$1=Object.freeze(Object.defineProperty({__proto__:null,IOBuffer},Symbol.toStringTag,{value:"Module"})),require$$0$4=getAugmentedNamespace(IOBuffer$1);var constants$3,hasRequiredConstants;function requireConstants(){return hasRequiredConstants||(hasRequiredConstants=1,constants$3={BITMAPV5HEADER:{LogicalColorSpace:{LCS_CALIBRATED_RGB:0,LCS_sRGB:1934772034,LCS_WINDOWS_COLOR_SPACE:1466527264},Compression:{BI_RGB:0,BI_RLE8:1,BI_RLE4:2,BI_BITFIELDS:3,BI_JPEG:4,BI_PNG:5,BI_CMYK:11,BI_CMYKRLE8:12,BI_CMYKRLE4:13},GamutMappingIntent:{LCS_GM_ABS_COLORIMETRIC:8,LCS_GM_BUSINESS:1,LCS_GM_GRAPHICS:2,LCS_GM_IMAGES:4}}}),constants$3}var BMPEncoder_1,hasRequiredBMPEncoder;function requireBMPEncoder(){if(hasRequiredBMPEncoder)return BMPEncoder_1;hasRequiredBMPEncoder=1;const{IOBuffer:r}=require$$0$4,n=requireConstants(),e=[];for(let s=0;s<=8;s++)e.push(255<<s);class i extends r{constructor(o){if(o.bitDepth!==1)throw new Error("Only bitDepth of 1 is supported");if(!o.height||!o.width)throw new Error("ImageData width and height are required");super(o.data),this.width=o.width,this.height=o.height,this.bitDepth=o.bitDepth,this.channels=o.channels,this.components=o.components}encode(){this.encoded=new r,this.encoded.skip(14),this.writeBitmapV5Header(),this.writeColorTable();const o=this.encoded.offset;return this.writePixelArray(),this.encoded.rewind(),this.writeBitmapFileHeader(o),this.encoded.toArray()}writePixelArray(){let o=this.encoded;const u=Math.floor((this.bitDepth*this.width+31)/32)*4,l=Math.ceil(this.bitDepth*this.width/8),d=u-l,m=this.bitDepth*this.width%8,y=m===0?0:8-m,S=u*this.height;let X,he,Ce=0,Ee=0,xe=8;o.mark(),he=this.readUint8();for(let be=this.height-1;be>=0;be--){const we=be===0;o.reset(),o.skip(be*u);for(let ve=0;ve<l;ve++){const ke=ve===l-1;Ee<=y&&ke?(o.writeByte(he<<Ee),(y===0||y===Ee)&&!we&&(X=he,he=this.readByte())):Ee===0?(X=he,he=this.readUint8(),o.writeByte(X)):(X=he,he=this.readUint8(),o.writeByte(X<<Ee&e[Ee]|he>>xe)),ke&&(Ce+=m||0,o.skip(d),Ee=Ce%8,xe=8-Ee)}}u>l&&(o.reset(),o.skip(S-1),o.writeUint8(0))}writeColorTable(){this.encoded.writeUint32(0).writeUint32(16777215)}writeBitmapFileHeader(o){this.encoded.writeChars("BM").writeInt32(this.encoded.lastWrittenByte).writeUint16(0).writeUint16(0).writeUint32(o)}writeBitmapV5Header(){const u=Math.floor((this.bitDepth*this.width+31)/32)*4*this.height;this.encoded.writeUint32(124).writeInt32(this.width).writeInt32(this.height).writeUint16(1).writeUint16(this.bitDepth).writeUint32(n.BITMAPV5HEADER.Compression.BI_RGB).writeUint32(u).writeInt32(0).writeInt32(0).writeUint32(Math.pow(2,this.bitDepth)).writeUint32(Math.pow(2,this.bitDepth)).writeUint32(4278190080).writeUint32(16711680).writeUint32(65280).writeUint32(255).writeUint32(n.BITMAPV5HEADER.LogicalColorSpace.LCS_sRGB).skip(36).skip(12).writeUint32(n.BITMAPV5HEADER.GamutMappingIntent.LCS_GM_IMAGES).skip(12)}}return BMPEncoder_1=i,BMPEncoder_1}var hasRequiredSrc$6;function requireSrc$6(){if(hasRequiredSrc$6)return src$6;hasRequiredSrc$6=1;const r=requireBMPEncoder();return src$6.encode=function(e){return new r(e).encode()},src$6}var srcExports$4=requireSrc$6();/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const Z_FIXED$1=4,Z_BINARY=0,Z_TEXT=1,Z_UNKNOWN$1=2;function zero$1(r){let n=r.length;for(;--n>=0;)r[n]=0}const STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,MIN_MATCH$1=3,MAX_MATCH$1=258,LENGTH_CODES$1=29,LITERALS$1=256,L_CODES$1=LITERALS$1+1+LENGTH_CODES$1,D_CODES$1=30,BL_CODES$1=19,HEAP_SIZE$1=2*L_CODES$1+1,MAX_BITS$1=15,Buf_size=16,MAX_BL_BITS=7,END_BLOCK=256,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,extra_lbits=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),extra_dbits=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),extra_blbits=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),bl_order=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),DIST_CODE_LEN=512,static_ltree=new Array((L_CODES$1+2)*2);zero$1(static_ltree);const static_dtree=new Array(D_CODES$1*2);zero$1(static_dtree);const _dist_code=new Array(DIST_CODE_LEN);zero$1(_dist_code);const _length_code=new Array(MAX_MATCH$1-MIN_MATCH$1+1);zero$1(_length_code);const base_length=new Array(LENGTH_CODES$1);zero$1(base_length);const base_dist=new Array(D_CODES$1);zero$1(base_dist);function StaticTreeDesc(r,n,e,i,s){this.static_tree=r,this.extra_bits=n,this.extra_base=e,this.elems=i,this.max_length=s,this.has_stree=r&&r.length}let static_l_desc,static_d_desc,static_bl_desc;function TreeDesc(r,n){this.dyn_tree=r,this.max_code=0,this.stat_desc=n}const d_code=r=>r<256?_dist_code[r]:_dist_code[256+(r>>>7)],put_short=(r,n)=>{r.pending_buf[r.pending++]=n&255,r.pending_buf[r.pending++]=n>>>8&255},send_bits=(r,n,e)=>{r.bi_valid>Buf_size-e?(r.bi_buf|=n<<r.bi_valid&65535,put_short(r,r.bi_buf),r.bi_buf=n>>Buf_size-r.bi_valid,r.bi_valid+=e-Buf_size):(r.bi_buf|=n<<r.bi_valid&65535,r.bi_valid+=e)},send_code=(r,n,e)=>{send_bits(r,e[n*2],e[n*2+1])},bi_reverse=(r,n)=>{let e=0;do e|=r&1,r>>>=1,e<<=1;while(--n>0);return e>>>1},bi_flush=r=>{r.bi_valid===16?(put_short(r,r.bi_buf),r.bi_buf=0,r.bi_valid=0):r.bi_valid>=8&&(r.pending_buf[r.pending++]=r.bi_buf&255,r.bi_buf>>=8,r.bi_valid-=8)},gen_bitlen=(r,n)=>{const e=n.dyn_tree,i=n.max_code,s=n.stat_desc.static_tree,o=n.stat_desc.has_stree,u=n.stat_desc.extra_bits,l=n.stat_desc.extra_base,d=n.stat_desc.max_length;let m,y,S,X,he,Ce,Ee=0;for(X=0;X<=MAX_BITS$1;X++)r.bl_count[X]=0;for(e[r.heap[r.heap_max]*2+1]=0,m=r.heap_max+1;m<HEAP_SIZE$1;m++)y=r.heap[m],X=e[e[y*2+1]*2+1]+1,X>d&&(X=d,Ee++),e[y*2+1]=X,!(y>i)&&(r.bl_count[X]++,he=0,y>=l&&(he=u[y-l]),Ce=e[y*2],r.opt_len+=Ce*(X+he),o&&(r.static_len+=Ce*(s[y*2+1]+he)));if(Ee!==0){do{for(X=d-1;r.bl_count[X]===0;)X--;r.bl_count[X]--,r.bl_count[X+1]+=2,r.bl_count[d]--,Ee-=2}while(Ee>0);for(X=d;X!==0;X--)for(y=r.bl_count[X];y!==0;)S=r.heap[--m],!(S>i)&&(e[S*2+1]!==X&&(r.opt_len+=(X-e[S*2+1])*e[S*2],e[S*2+1]=X),y--)}},gen_codes=(r,n,e)=>{const i=new Array(MAX_BITS$1+1);let s=0,o,u;for(o=1;o<=MAX_BITS$1;o++)s=s+e[o-1]<<1,i[o]=s;for(u=0;u<=n;u++){let l=r[u*2+1];l!==0&&(r[u*2]=bi_reverse(i[l]++,l))}},tr_static_init=()=>{let r,n,e,i,s;const o=new Array(MAX_BITS$1+1);for(e=0,i=0;i<LENGTH_CODES$1-1;i++)for(base_length[i]=e,r=0;r<1<<extra_lbits[i];r++)_length_code[e++]=i;for(_length_code[e-1]=i,s=0,i=0;i<16;i++)for(base_dist[i]=s,r=0;r<1<<extra_dbits[i];r++)_dist_code[s++]=i;for(s>>=7;i<D_CODES$1;i++)for(base_dist[i]=s<<7,r=0;r<1<<extra_dbits[i]-7;r++)_dist_code[256+s++]=i;for(n=0;n<=MAX_BITS$1;n++)o[n]=0;for(r=0;r<=143;)static_ltree[r*2+1]=8,r++,o[8]++;for(;r<=255;)static_ltree[r*2+1]=9,r++,o[9]++;for(;r<=279;)static_ltree[r*2+1]=7,r++,o[7]++;for(;r<=287;)static_ltree[r*2+1]=8,r++,o[8]++;for(gen_codes(static_ltree,L_CODES$1+1,o),r=0;r<D_CODES$1;r++)static_dtree[r*2+1]=5,static_dtree[r*2]=bi_reverse(r,5);static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,LITERALS$1+1,L_CODES$1,MAX_BITS$1),static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,D_CODES$1,MAX_BITS$1),static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,BL_CODES$1,MAX_BL_BITS)},init_block=r=>{let n;for(n=0;n<L_CODES$1;n++)r.dyn_ltree[n*2]=0;for(n=0;n<D_CODES$1;n++)r.dyn_dtree[n*2]=0;for(n=0;n<BL_CODES$1;n++)r.bl_tree[n*2]=0;r.dyn_ltree[END_BLOCK*2]=1,r.opt_len=r.static_len=0,r.sym_next=r.matches=0},bi_windup=r=>{r.bi_valid>8?put_short(r,r.bi_buf):r.bi_valid>0&&(r.pending_buf[r.pending++]=r.bi_buf),r.bi_buf=0,r.bi_valid=0},smaller=(r,n,e,i)=>{const s=n*2,o=e*2;return r[s]<r[o]||r[s]===r[o]&&i[n]<=i[e]},pqdownheap=(r,n,e)=>{const i=r.heap[e];let s=e<<1;for(;s<=r.heap_len&&(s<r.heap_len&&smaller(n,r.heap[s+1],r.heap[s],r.depth)&&s++,!smaller(n,i,r.heap[s],r.depth));)r.heap[e]=r.heap[s],e=s,s<<=1;r.heap[e]=i},compress_block=(r,n,e)=>{let i,s,o=0,u,l;if(r.sym_next!==0)do i=r.pending_buf[r.sym_buf+o++]&255,i+=(r.pending_buf[r.sym_buf+o++]&255)<<8,s=r.pending_buf[r.sym_buf+o++],i===0?send_code(r,s,n):(u=_length_code[s],send_code(r,u+LITERALS$1+1,n),l=extra_lbits[u],l!==0&&(s-=base_length[u],send_bits(r,s,l)),i--,u=d_code(i),send_code(r,u,e),l=extra_dbits[u],l!==0&&(i-=base_dist[u],send_bits(r,i,l)));while(o<r.sym_next);send_code(r,END_BLOCK,n)},build_tree=(r,n)=>{const e=n.dyn_tree,i=n.stat_desc.static_tree,s=n.stat_desc.has_stree,o=n.stat_desc.elems;let u,l,d=-1,m;for(r.heap_len=0,r.heap_max=HEAP_SIZE$1,u=0;u<o;u++)e[u*2]!==0?(r.heap[++r.heap_len]=d=u,r.depth[u]=0):e[u*2+1]=0;for(;r.heap_len<2;)m=r.heap[++r.heap_len]=d<2?++d:0,e[m*2]=1,r.depth[m]=0,r.opt_len--,s&&(r.static_len-=i[m*2+1]);for(n.max_code=d,u=r.heap_len>>1;u>=1;u--)pqdownheap(r,e,u);m=o;do u=r.heap[1],r.heap[1]=r.heap[r.heap_len--],pqdownheap(r,e,1),l=r.heap[1],r.heap[--r.heap_max]=u,r.heap[--r.heap_max]=l,e[m*2]=e[u*2]+e[l*2],r.depth[m]=(r.depth[u]>=r.depth[l]?r.depth[u]:r.depth[l])+1,e[u*2+1]=e[l*2+1]=m,r.heap[1]=m++,pqdownheap(r,e,1);while(r.heap_len>=2);r.heap[--r.heap_max]=r.heap[1],gen_bitlen(r,n),gen_codes(e,d,r.bl_count)},scan_tree=(r,n,e)=>{let i,s=-1,o,u=n[0*2+1],l=0,d=7,m=4;for(u===0&&(d=138,m=3),n[(e+1)*2+1]=65535,i=0;i<=e;i++)o=u,u=n[(i+1)*2+1],!(++l<d&&o===u)&&(l<m?r.bl_tree[o*2]+=l:o!==0?(o!==s&&r.bl_tree[o*2]++,r.bl_tree[REP_3_6*2]++):l<=10?r.bl_tree[REPZ_3_10*2]++:r.bl_tree[REPZ_11_138*2]++,l=0,s=o,u===0?(d=138,m=3):o===u?(d=6,m=3):(d=7,m=4))},send_tree=(r,n,e)=>{let i,s=-1,o,u=n[0*2+1],l=0,d=7,m=4;for(u===0&&(d=138,m=3),i=0;i<=e;i++)if(o=u,u=n[(i+1)*2+1],!(++l<d&&o===u)){if(l<m)do send_code(r,o,r.bl_tree);while(--l!==0);else o!==0?(o!==s&&(send_code(r,o,r.bl_tree),l--),send_code(r,REP_3_6,r.bl_tree),send_bits(r,l-3,2)):l<=10?(send_code(r,REPZ_3_10,r.bl_tree),send_bits(r,l-3,3)):(send_code(r,REPZ_11_138,r.bl_tree),send_bits(r,l-11,7));l=0,s=o,u===0?(d=138,m=3):o===u?(d=6,m=3):(d=7,m=4)}},build_bl_tree=r=>{let n;for(scan_tree(r,r.dyn_ltree,r.l_desc.max_code),scan_tree(r,r.dyn_dtree,r.d_desc.max_code),build_tree(r,r.bl_desc),n=BL_CODES$1-1;n>=3&&r.bl_tree[bl_order[n]*2+1]===0;n--);return r.opt_len+=3*(n+1)+5+5+4,n},send_all_trees=(r,n,e,i)=>{let s;for(send_bits(r,n-257,5),send_bits(r,e-1,5),send_bits(r,i-4,4),s=0;s<i;s++)send_bits(r,r.bl_tree[bl_order[s]*2+1],3);send_tree(r,r.dyn_ltree,n-1),send_tree(r,r.dyn_dtree,e-1)},detect_data_type=r=>{let n=4093624447,e;for(e=0;e<=31;e++,n>>>=1)if(n&1&&r.dyn_ltree[e*2]!==0)return Z_BINARY;if(r.dyn_ltree[9*2]!==0||r.dyn_ltree[10*2]!==0||r.dyn_ltree[13*2]!==0)return Z_TEXT;for(e=32;e<LITERALS$1;e++)if(r.dyn_ltree[e*2]!==0)return Z_TEXT;return Z_BINARY};let static_init_done=!1;const _tr_init$1=r=>{static_init_done||(tr_static_init(),static_init_done=!0),r.l_desc=new TreeDesc(r.dyn_ltree,static_l_desc),r.d_desc=new TreeDesc(r.dyn_dtree,static_d_desc),r.bl_desc=new TreeDesc(r.bl_tree,static_bl_desc),r.bi_buf=0,r.bi_valid=0,init_block(r)},_tr_stored_block$1=(r,n,e,i)=>{send_bits(r,(STORED_BLOCK<<1)+(i?1:0),3),bi_windup(r),put_short(r,e),put_short(r,~e),e&&r.pending_buf.set(r.window.subarray(n,n+e),r.pending),r.pending+=e},_tr_align$1=r=>{send_bits(r,STATIC_TREES<<1,3),send_code(r,END_BLOCK,static_ltree),bi_flush(r)},_tr_flush_block$1=(r,n,e,i)=>{let s,o,u=0;r.level>0?(r.strm.data_type===Z_UNKNOWN$1&&(r.strm.data_type=detect_data_type(r)),build_tree(r,r.l_desc),build_tree(r,r.d_desc),u=build_bl_tree(r),s=r.opt_len+3+7>>>3,o=r.static_len+3+7>>>3,o<=s&&(s=o)):s=o=e+5,e+4<=s&&n!==-1?_tr_stored_block$1(r,n,e,i):r.strategy===Z_FIXED$1||o===s?(send_bits(r,(STATIC_TREES<<1)+(i?1:0),3),compress_block(r,static_ltree,static_dtree)):(send_bits(r,(DYN_TREES<<1)+(i?1:0),3),send_all_trees(r,r.l_desc.max_code+1,r.d_desc.max_code+1,u+1),compress_block(r,r.dyn_ltree,r.dyn_dtree)),init_block(r),i&&bi_windup(r)},_tr_tally$1=(r,n,e)=>(r.pending_buf[r.sym_buf+r.sym_next++]=n,r.pending_buf[r.sym_buf+r.sym_next++]=n>>8,r.pending_buf[r.sym_buf+r.sym_next++]=e,n===0?r.dyn_ltree[e*2]++:(r.matches++,n--,r.dyn_ltree[(_length_code[e]+LITERALS$1+1)*2]++,r.dyn_dtree[d_code(n)*2]++),r.sym_next===r.sym_end);var _tr_init_1=_tr_init$1,_tr_stored_block_1=_tr_stored_block$1,_tr_flush_block_1=_tr_flush_block$1,_tr_tally_1=_tr_tally$1,_tr_align_1=_tr_align$1,trees={_tr_init:_tr_init_1,_tr_stored_block:_tr_stored_block_1,_tr_flush_block:_tr_flush_block_1,_tr_tally:_tr_tally_1,_tr_align:_tr_align_1};const adler32=(r,n,e,i)=>{let s=r&65535|0,o=r>>>16&65535|0,u=0;for(;e!==0;){u=e>2e3?2e3:e,e-=u;do s=s+n[i++]|0,o=o+s|0;while(--u);s%=65521,o%=65521}return s|o<<16|0};var adler32_1=adler32;const makeTable=()=>{let r,n=[];for(var e=0;e<256;e++){r=e;for(var i=0;i<8;i++)r=r&1?3988292384^r>>>1:r>>>1;n[e]=r}return n},crcTable$1=new Uint32Array(makeTable()),crc32=(r,n,e,i)=>{const s=crcTable$1,o=i+e;r^=-1;for(let u=i;u<o;u++)r=r>>>8^s[(r^n[u])&255];return r^-1};var crc32_1=crc32,messages={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},constants$2={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init,_tr_stored_block,_tr_flush_block,_tr_tally,_tr_align}=trees,{Z_NO_FLUSH:Z_NO_FLUSH$2,Z_PARTIAL_FLUSH,Z_FULL_FLUSH:Z_FULL_FLUSH$1,Z_FINISH:Z_FINISH$3,Z_BLOCK:Z_BLOCK$1,Z_OK:Z_OK$3,Z_STREAM_END:Z_STREAM_END$3,Z_STREAM_ERROR:Z_STREAM_ERROR$2,Z_DATA_ERROR:Z_DATA_ERROR$2,Z_BUF_ERROR:Z_BUF_ERROR$1,Z_DEFAULT_COMPRESSION:Z_DEFAULT_COMPRESSION$1,Z_FILTERED,Z_HUFFMAN_ONLY,Z_RLE,Z_FIXED,Z_DEFAULT_STRATEGY:Z_DEFAULT_STRATEGY$1,Z_UNKNOWN,Z_DEFLATED:Z_DEFLATED$2}=constants$2,MAX_MEM_LEVEL=9,MAX_WBITS$1=15,DEF_MEM_LEVEL=8,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,D_CODES=30,BL_CODES=19,HEAP_SIZE=2*L_CODES+1,MAX_BITS=15,MIN_MATCH=3,MAX_MATCH=258,MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1,PRESET_DICT=32,INIT_STATE=42,GZIP_STATE=57,EXTRA_STATE=69,NAME_STATE=73,COMMENT_STATE=91,HCRC_STATE=103,BUSY_STATE=113,FINISH_STATE=666,BS_NEED_MORE=1,BS_BLOCK_DONE=2,BS_FINISH_STARTED=3,BS_FINISH_DONE=4,OS_CODE=3,err=(r,n)=>(r.msg=messages[n],n),rank=r=>r*2-(r>4?9:0),zero=r=>{let n=r.length;for(;--n>=0;)r[n]=0},slide_hash=r=>{let n,e,i,s=r.w_size;n=r.hash_size,i=n;do e=r.head[--i],r.head[i]=e>=s?e-s:0;while(--n);n=s,i=n;do e=r.prev[--i],r.prev[i]=e>=s?e-s:0;while(--n)};let HASH_ZLIB=(r,n,e)=>(n<<r.hash_shift^e)&r.hash_mask,HASH=HASH_ZLIB;const flush_pending=r=>{const n=r.state;let e=n.pending;e>r.avail_out&&(e=r.avail_out),e!==0&&(r.output.set(n.pending_buf.subarray(n.pending_out,n.pending_out+e),r.next_out),r.next_out+=e,n.pending_out+=e,r.total_out+=e,r.avail_out-=e,n.pending-=e,n.pending===0&&(n.pending_out=0))},flush_block_only=(r,n)=>{_tr_flush_block(r,r.block_start>=0?r.block_start:-1,r.strstart-r.block_start,n),r.block_start=r.strstart,flush_pending(r.strm)},put_byte=(r,n)=>{r.pending_buf[r.pending++]=n},putShortMSB=(r,n)=>{r.pending_buf[r.pending++]=n>>>8&255,r.pending_buf[r.pending++]=n&255},read_buf=(r,n,e,i)=>{let s=r.avail_in;return s>i&&(s=i),s===0?0:(r.avail_in-=s,n.set(r.input.subarray(r.next_in,r.next_in+s),e),r.state.wrap===1?r.adler=adler32_1(r.adler,n,s,e):r.state.wrap===2&&(r.adler=crc32_1(r.adler,n,s,e)),r.next_in+=s,r.total_in+=s,s)},longest_match=(r,n)=>{let e=r.max_chain_length,i=r.strstart,s,o,u=r.prev_length,l=r.nice_match;const d=r.strstart>r.w_size-MIN_LOOKAHEAD?r.strstart-(r.w_size-MIN_LOOKAHEAD):0,m=r.window,y=r.w_mask,S=r.prev,X=r.strstart+MAX_MATCH;let he=m[i+u-1],Ce=m[i+u];r.prev_length>=r.good_match&&(e>>=2),l>r.lookahead&&(l=r.lookahead);do if(s=n,!(m[s+u]!==Ce||m[s+u-1]!==he||m[s]!==m[i]||m[++s]!==m[i+1])){i+=2,s++;do;while(m[++i]===m[++s]&&m[++i]===m[++s]&&m[++i]===m[++s]&&m[++i]===m[++s]&&m[++i]===m[++s]&&m[++i]===m[++s]&&m[++i]===m[++s]&&m[++i]===m[++s]&&i<X);if(o=MAX_MATCH-(X-i),i=X-MAX_MATCH,o>u){if(r.match_start=n,u=o,o>=l)break;he=m[i+u-1],Ce=m[i+u]}}while((n=S[n&y])>d&&--e!==0);return u<=r.lookahead?u:r.lookahead},fill_window=r=>{const n=r.w_size;let e,i,s;do{if(i=r.window_size-r.lookahead-r.strstart,r.strstart>=n+(n-MIN_LOOKAHEAD)&&(r.window.set(r.window.subarray(n,n+n-i),0),r.match_start-=n,r.strstart-=n,r.block_start-=n,r.insert>r.strstart&&(r.insert=r.strstart),slide_hash(r),i+=n),r.strm.avail_in===0)break;if(e=read_buf(r.strm,r.window,r.strstart+r.lookahead,i),r.lookahead+=e,r.lookahead+r.insert>=MIN_MATCH)for(s=r.strstart-r.insert,r.ins_h=r.window[s],r.ins_h=HASH(r,r.ins_h,r.window[s+1]);r.insert&&(r.ins_h=HASH(r,r.ins_h,r.window[s+MIN_MATCH-1]),r.prev[s&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=s,s++,r.insert--,!(r.lookahead+r.insert<MIN_MATCH)););}while(r.lookahead<MIN_LOOKAHEAD&&r.strm.avail_in!==0)},deflate_stored=(r,n)=>{let e=r.pending_buf_size-5>r.w_size?r.w_size:r.pending_buf_size-5,i,s,o,u=0,l=r.strm.avail_in;do{if(i=65535,o=r.bi_valid+42>>3,r.strm.avail_out<o||(o=r.strm.avail_out-o,s=r.strstart-r.block_start,i>s+r.strm.avail_in&&(i=s+r.strm.avail_in),i>o&&(i=o),i<e&&(i===0&&n!==Z_FINISH$3||n===Z_NO_FLUSH$2||i!==s+r.strm.avail_in)))break;u=n===Z_FINISH$3&&i===s+r.strm.avail_in?1:0,_tr_stored_block(r,0,0,u),r.pending_buf[r.pending-4]=i,r.pending_buf[r.pending-3]=i>>8,r.pending_buf[r.pending-2]=~i,r.pending_buf[r.pending-1]=~i>>8,flush_pending(r.strm),s&&(s>i&&(s=i),r.strm.output.set(r.window.subarray(r.block_start,r.block_start+s),r.strm.next_out),r.strm.next_out+=s,r.strm.avail_out-=s,r.strm.total_out+=s,r.block_start+=s,i-=s),i&&(read_buf(r.strm,r.strm.output,r.strm.next_out,i),r.strm.next_out+=i,r.strm.avail_out-=i,r.strm.total_out+=i)}while(u===0);return l-=r.strm.avail_in,l&&(l>=r.w_size?(r.matches=2,r.window.set(r.strm.input.subarray(r.strm.next_in-r.w_size,r.strm.next_in),0),r.strstart=r.w_size,r.insert=r.strstart):(r.window_size-r.strstart<=l&&(r.strstart-=r.w_size,r.window.set(r.window.subarray(r.w_size,r.w_size+r.strstart),0),r.matches<2&&r.matches++,r.insert>r.strstart&&(r.insert=r.strstart)),r.window.set(r.strm.input.subarray(r.strm.next_in-l,r.strm.next_in),r.strstart),r.strstart+=l,r.insert+=l>r.w_size-r.insert?r.w_size-r.insert:l),r.block_start=r.strstart),r.high_water<r.strstart&&(r.high_water=r.strstart),u?BS_FINISH_DONE:n!==Z_NO_FLUSH$2&&n!==Z_FINISH$3&&r.strm.avail_in===0&&r.strstart===r.block_start?BS_BLOCK_DONE:(o=r.window_size-r.strstart,r.strm.avail_in>o&&r.block_start>=r.w_size&&(r.block_start-=r.w_size,r.strstart-=r.w_size,r.window.set(r.window.subarray(r.w_size,r.w_size+r.strstart),0),r.matches<2&&r.matches++,o+=r.w_size,r.insert>r.strstart&&(r.insert=r.strstart)),o>r.strm.avail_in&&(o=r.strm.avail_in),o&&(read_buf(r.strm,r.window,r.strstart,o),r.strstart+=o,r.insert+=o>r.w_size-r.insert?r.w_size-r.insert:o),r.high_water<r.strstart&&(r.high_water=r.strstart),o=r.bi_valid+42>>3,o=r.pending_buf_size-o>65535?65535:r.pending_buf_size-o,e=o>r.w_size?r.w_size:o,s=r.strstart-r.block_start,(s>=e||(s||n===Z_FINISH$3)&&n!==Z_NO_FLUSH$2&&r.strm.avail_in===0&&s<=o)&&(i=s>o?o:s,u=n===Z_FINISH$3&&r.strm.avail_in===0&&i===s?1:0,_tr_stored_block(r,r.block_start,i,u),r.block_start+=i,flush_pending(r.strm)),u?BS_FINISH_STARTED:BS_NEED_MORE)},deflate_fast=(r,n)=>{let e,i;for(;;){if(r.lookahead<MIN_LOOKAHEAD){if(fill_window(r),r.lookahead<MIN_LOOKAHEAD&&n===Z_NO_FLUSH$2)return BS_NEED_MORE;if(r.lookahead===0)break}if(e=0,r.lookahead>=MIN_MATCH&&(r.ins_h=HASH(r,r.ins_h,r.window[r.strstart+MIN_MATCH-1]),e=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),e!==0&&r.strstart-e<=r.w_size-MIN_LOOKAHEAD&&(r.match_length=longest_match(r,e)),r.match_length>=MIN_MATCH)if(i=_tr_tally(r,r.strstart-r.match_start,r.match_length-MIN_MATCH),r.lookahead-=r.match_length,r.match_length<=r.max_lazy_match&&r.lookahead>=MIN_MATCH){r.match_length--;do r.strstart++,r.ins_h=HASH(r,r.ins_h,r.window[r.strstart+MIN_MATCH-1]),e=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart;while(--r.match_length!==0);r.strstart++}else r.strstart+=r.match_length,r.match_length=0,r.ins_h=r.window[r.strstart],r.ins_h=HASH(r,r.ins_h,r.window[r.strstart+1]);else i=_tr_tally(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++;if(i&&(flush_block_only(r,!1),r.strm.avail_out===0))return BS_NEED_MORE}return r.insert=r.strstart<MIN_MATCH-1?r.strstart:MIN_MATCH-1,n===Z_FINISH$3?(flush_block_only(r,!0),r.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):r.sym_next&&(flush_block_only(r,!1),r.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_slow=(r,n)=>{let e,i,s;for(;;){if(r.lookahead<MIN_LOOKAHEAD){if(fill_window(r),r.lookahead<MIN_LOOKAHEAD&&n===Z_NO_FLUSH$2)return BS_NEED_MORE;if(r.lookahead===0)break}if(e=0,r.lookahead>=MIN_MATCH&&(r.ins_h=HASH(r,r.ins_h,r.window[r.strstart+MIN_MATCH-1]),e=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),r.prev_length=r.match_length,r.prev_match=r.match_start,r.match_length=MIN_MATCH-1,e!==0&&r.prev_length<r.max_lazy_match&&r.strstart-e<=r.w_size-MIN_LOOKAHEAD&&(r.match_length=longest_match(r,e),r.match_length<=5&&(r.strategy===Z_FILTERED||r.match_length===MIN_MATCH&&r.strstart-r.match_start>4096)&&(r.match_length=MIN_MATCH-1)),r.prev_length>=MIN_MATCH&&r.match_length<=r.prev_length){s=r.strstart+r.lookahead-MIN_MATCH,i=_tr_tally(r,r.strstart-1-r.prev_match,r.prev_length-MIN_MATCH),r.lookahead-=r.prev_length-1,r.prev_length-=2;do++r.strstart<=s&&(r.ins_h=HASH(r,r.ins_h,r.window[r.strstart+MIN_MATCH-1]),e=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart);while(--r.prev_length!==0);if(r.match_available=0,r.match_length=MIN_MATCH-1,r.strstart++,i&&(flush_block_only(r,!1),r.strm.avail_out===0))return BS_NEED_MORE}else if(r.match_available){if(i=_tr_tally(r,0,r.window[r.strstart-1]),i&&flush_block_only(r,!1),r.strstart++,r.lookahead--,r.strm.avail_out===0)return BS_NEED_MORE}else r.match_available=1,r.strstart++,r.lookahead--}return r.match_available&&(i=_tr_tally(r,0,r.window[r.strstart-1]),r.match_available=0),r.insert=r.strstart<MIN_MATCH-1?r.strstart:MIN_MATCH-1,n===Z_FINISH$3?(flush_block_only(r,!0),r.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):r.sym_next&&(flush_block_only(r,!1),r.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_rle=(r,n)=>{let e,i,s,o;const u=r.window;for(;;){if(r.lookahead<=MAX_MATCH){if(fill_window(r),r.lookahead<=MAX_MATCH&&n===Z_NO_FLUSH$2)return BS_NEED_MORE;if(r.lookahead===0)break}if(r.match_length=0,r.lookahead>=MIN_MATCH&&r.strstart>0&&(s=r.strstart-1,i=u[s],i===u[++s]&&i===u[++s]&&i===u[++s])){o=r.strstart+MAX_MATCH;do;while(i===u[++s]&&i===u[++s]&&i===u[++s]&&i===u[++s]&&i===u[++s]&&i===u[++s]&&i===u[++s]&&i===u[++s]&&s<o);r.match_length=MAX_MATCH-(o-s),r.match_length>r.lookahead&&(r.match_length=r.lookahead)}if(r.match_length>=MIN_MATCH?(e=_tr_tally(r,1,r.match_length-MIN_MATCH),r.lookahead-=r.match_length,r.strstart+=r.match_length,r.match_length=0):(e=_tr_tally(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++),e&&(flush_block_only(r,!1),r.strm.avail_out===0))return BS_NEED_MORE}return r.insert=0,n===Z_FINISH$3?(flush_block_only(r,!0),r.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):r.sym_next&&(flush_block_only(r,!1),r.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_huff=(r,n)=>{let e;for(;;){if(r.lookahead===0&&(fill_window(r),r.lookahead===0)){if(n===Z_NO_FLUSH$2)return BS_NEED_MORE;break}if(r.match_length=0,e=_tr_tally(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++,e&&(flush_block_only(r,!1),r.strm.avail_out===0))return BS_NEED_MORE}return r.insert=0,n===Z_FINISH$3?(flush_block_only(r,!0),r.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):r.sym_next&&(flush_block_only(r,!1),r.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE};function Config(r,n,e,i,s){this.good_length=r,this.max_lazy=n,this.nice_length=e,this.max_chain=i,this.func=s}const configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)],lm_init=r=>{r.window_size=2*r.w_size,zero(r.head),r.max_lazy_match=configuration_table[r.level].max_lazy,r.good_match=configuration_table[r.level].good_length,r.nice_match=configuration_table[r.level].nice_length,r.max_chain_length=configuration_table[r.level].max_chain,r.strstart=0,r.block_start=0,r.lookahead=0,r.insert=0,r.match_length=r.prev_length=MIN_MATCH-1,r.match_available=0,r.ins_h=0};function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z_DEFLATED$2,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(HEAP_SIZE*2),this.dyn_dtree=new Uint16Array((2*D_CODES+1)*2),this.bl_tree=new Uint16Array((2*BL_CODES+1)*2),zero(this.dyn_ltree),zero(this.dyn_dtree),zero(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(MAX_BITS+1),this.heap=new Uint16Array(2*L_CODES+1),zero(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*L_CODES+1),zero(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const deflateStateCheck=r=>{if(!r)return 1;const n=r.state;return!n||n.strm!==r||n.status!==INIT_STATE&&n.status!==GZIP_STATE&&n.status!==EXTRA_STATE&&n.status!==NAME_STATE&&n.status!==COMMENT_STATE&&n.status!==HCRC_STATE&&n.status!==BUSY_STATE&&n.status!==FINISH_STATE?1:0},deflateResetKeep=r=>{if(deflateStateCheck(r))return err(r,Z_STREAM_ERROR$2);r.total_in=r.total_out=0,r.data_type=Z_UNKNOWN;const n=r.state;return n.pending=0,n.pending_out=0,n.wrap<0&&(n.wrap=-n.wrap),n.status=n.wrap===2?GZIP_STATE:n.wrap?INIT_STATE:BUSY_STATE,r.adler=n.wrap===2?0:1,n.last_flush=-2,_tr_init(n),Z_OK$3},deflateReset=r=>{const n=deflateResetKeep(r);return n===Z_OK$3&&lm_init(r.state),n},deflateSetHeader=(r,n)=>deflateStateCheck(r)||r.state.wrap!==2?Z_STREAM_ERROR$2:(r.state.gzhead=n,Z_OK$3),deflateInit2=(r,n,e,i,s,o)=>{if(!r)return Z_STREAM_ERROR$2;let u=1;if(n===Z_DEFAULT_COMPRESSION$1&&(n=6),i<0?(u=0,i=-i):i>15&&(u=2,i-=16),s<1||s>MAX_MEM_LEVEL||e!==Z_DEFLATED$2||i<8||i>15||n<0||n>9||o<0||o>Z_FIXED||i===8&&u!==1)return err(r,Z_STREAM_ERROR$2);i===8&&(i=9);const l=new DeflateState;return r.state=l,l.strm=r,l.status=INIT_STATE,l.wrap=u,l.gzhead=null,l.w_bits=i,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=s+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+MIN_MATCH-1)/MIN_MATCH),l.window=new Uint8Array(l.w_size*2),l.head=new Uint16Array(l.hash_size),l.prev=new Uint16Array(l.w_size),l.lit_bufsize=1<<s+6,l.pending_buf_size=l.lit_bufsize*4,l.pending_buf=new Uint8Array(l.pending_buf_size),l.sym_buf=l.lit_bufsize,l.sym_end=(l.lit_bufsize-1)*3,l.level=n,l.strategy=o,l.method=e,deflateReset(r)},deflateInit=(r,n)=>deflateInit2(r,n,Z_DEFLATED$2,MAX_WBITS$1,DEF_MEM_LEVEL,Z_DEFAULT_STRATEGY$1),deflate$2=(r,n)=>{if(deflateStateCheck(r)||n>Z_BLOCK$1||n<0)return r?err(r,Z_STREAM_ERROR$2):Z_STREAM_ERROR$2;const e=r.state;if(!r.output||r.avail_in!==0&&!r.input||e.status===FINISH_STATE&&n!==Z_FINISH$3)return err(r,r.avail_out===0?Z_BUF_ERROR$1:Z_STREAM_ERROR$2);const i=e.last_flush;if(e.last_flush=n,e.pending!==0){if(flush_pending(r),r.avail_out===0)return e.last_flush=-1,Z_OK$3}else if(r.avail_in===0&&rank(n)<=rank(i)&&n!==Z_FINISH$3)return err(r,Z_BUF_ERROR$1);if(e.status===FINISH_STATE&&r.avail_in!==0)return err(r,Z_BUF_ERROR$1);if(e.status===INIT_STATE&&e.wrap===0&&(e.status=BUSY_STATE),e.status===INIT_STATE){let s=Z_DEFLATED$2+(e.w_bits-8<<4)<<8,o=-1;if(e.strategy>=Z_HUFFMAN_ONLY||e.level<2?o=0:e.level<6?o=1:e.level===6?o=2:o=3,s|=o<<6,e.strstart!==0&&(s|=PRESET_DICT),s+=31-s%31,putShortMSB(e,s),e.strstart!==0&&(putShortMSB(e,r.adler>>>16),putShortMSB(e,r.adler&65535)),r.adler=1,e.status=BUSY_STATE,flush_pending(r),e.pending!==0)return e.last_flush=-1,Z_OK$3}if(e.status===GZIP_STATE){if(r.adler=0,put_byte(e,31),put_byte(e,139),put_byte(e,8),e.gzhead)put_byte(e,(e.gzhead.text?1:0)+(e.gzhead.hcrc?2:0)+(e.gzhead.extra?4:0)+(e.gzhead.name?8:0)+(e.gzhead.comment?16:0)),put_byte(e,e.gzhead.time&255),put_byte(e,e.gzhead.time>>8&255),put_byte(e,e.gzhead.time>>16&255),put_byte(e,e.gzhead.time>>24&255),put_byte(e,e.level===9?2:e.strategy>=Z_HUFFMAN_ONLY||e.level<2?4:0),put_byte(e,e.gzhead.os&255),e.gzhead.extra&&e.gzhead.extra.length&&(put_byte(e,e.gzhead.extra.length&255),put_byte(e,e.gzhead.extra.length>>8&255)),e.gzhead.hcrc&&(r.adler=crc32_1(r.adler,e.pending_buf,e.pending,0)),e.gzindex=0,e.status=EXTRA_STATE;else if(put_byte(e,0),put_byte(e,0),put_byte(e,0),put_byte(e,0),put_byte(e,0),put_byte(e,e.level===9?2:e.strategy>=Z_HUFFMAN_ONLY||e.level<2?4:0),put_byte(e,OS_CODE),e.status=BUSY_STATE,flush_pending(r),e.pending!==0)return e.last_flush=-1,Z_OK$3}if(e.status===EXTRA_STATE){if(e.gzhead.extra){let s=e.pending,o=(e.gzhead.extra.length&65535)-e.gzindex;for(;e.pending+o>e.pending_buf_size;){let l=e.pending_buf_size-e.pending;if(e.pending_buf.set(e.gzhead.extra.subarray(e.gzindex,e.gzindex+l),e.pending),e.pending=e.pending_buf_size,e.gzhead.hcrc&&e.pending>s&&(r.adler=crc32_1(r.adler,e.pending_buf,e.pending-s,s)),e.gzindex+=l,flush_pending(r),e.pending!==0)return e.last_flush=-1,Z_OK$3;s=0,o-=l}let u=new Uint8Array(e.gzhead.extra);e.pending_buf.set(u.subarray(e.gzindex,e.gzindex+o),e.pending),e.pending+=o,e.gzhead.hcrc&&e.pending>s&&(r.adler=crc32_1(r.adler,e.pending_buf,e.pending-s,s)),e.gzindex=0}e.status=NAME_STATE}if(e.status===NAME_STATE){if(e.gzhead.name){let s=e.pending,o;do{if(e.pending===e.pending_buf_size){if(e.gzhead.hcrc&&e.pending>s&&(r.adler=crc32_1(r.adler,e.pending_buf,e.pending-s,s)),flush_pending(r),e.pending!==0)return e.last_flush=-1,Z_OK$3;s=0}e.gzindex<e.gzhead.name.length?o=e.gzhead.name.charCodeAt(e.gzindex++)&255:o=0,put_byte(e,o)}while(o!==0);e.gzhead.hcrc&&e.pending>s&&(r.adler=crc32_1(r.adler,e.pending_buf,e.pending-s,s)),e.gzindex=0}e.status=COMMENT_STATE}if(e.status===COMMENT_STATE){if(e.gzhead.comment){let s=e.pending,o;do{if(e.pending===e.pending_buf_size){if(e.gzhead.hcrc&&e.pending>s&&(r.adler=crc32_1(r.adler,e.pending_buf,e.pending-s,s)),flush_pending(r),e.pending!==0)return e.last_flush=-1,Z_OK$3;s=0}e.gzindex<e.gzhead.comment.length?o=e.gzhead.comment.charCodeAt(e.gzindex++)&255:o=0,put_byte(e,o)}while(o!==0);e.gzhead.hcrc&&e.pending>s&&(r.adler=crc32_1(r.adler,e.pending_buf,e.pending-s,s))}e.status=HCRC_STATE}if(e.status===HCRC_STATE){if(e.gzhead.hcrc){if(e.pending+2>e.pending_buf_size&&(flush_pending(r),e.pending!==0))return e.last_flush=-1,Z_OK$3;put_byte(e,r.adler&255),put_byte(e,r.adler>>8&255),r.adler=0}if(e.status=BUSY_STATE,flush_pending(r),e.pending!==0)return e.last_flush=-1,Z_OK$3}if(r.avail_in!==0||e.lookahead!==0||n!==Z_NO_FLUSH$2&&e.status!==FINISH_STATE){let s=e.level===0?deflate_stored(e,n):e.strategy===Z_HUFFMAN_ONLY?deflate_huff(e,n):e.strategy===Z_RLE?deflate_rle(e,n):configuration_table[e.level].func(e,n);if((s===BS_FINISH_STARTED||s===BS_FINISH_DONE)&&(e.status=FINISH_STATE),s===BS_NEED_MORE||s===BS_FINISH_STARTED)return r.avail_out===0&&(e.last_flush=-1),Z_OK$3;if(s===BS_BLOCK_DONE&&(n===Z_PARTIAL_FLUSH?_tr_align(e):n!==Z_BLOCK$1&&(_tr_stored_block(e,0,0,!1),n===Z_FULL_FLUSH$1&&(zero(e.head),e.lookahead===0&&(e.strstart=0,e.block_start=0,e.insert=0))),flush_pending(r),r.avail_out===0))return e.last_flush=-1,Z_OK$3}return n!==Z_FINISH$3?Z_OK$3:e.wrap<=0?Z_STREAM_END$3:(e.wrap===2?(put_byte(e,r.adler&255),put_byte(e,r.adler>>8&255),put_byte(e,r.adler>>16&255),put_byte(e,r.adler>>24&255),put_byte(e,r.total_in&255),put_byte(e,r.total_in>>8&255),put_byte(e,r.total_in>>16&255),put_byte(e,r.total_in>>24&255)):(putShortMSB(e,r.adler>>>16),putShortMSB(e,r.adler&65535)),flush_pending(r),e.wrap>0&&(e.wrap=-e.wrap),e.pending!==0?Z_OK$3:Z_STREAM_END$3)},deflateEnd=r=>{if(deflateStateCheck(r))return Z_STREAM_ERROR$2;const n=r.state.status;return r.state=null,n===BUSY_STATE?err(r,Z_DATA_ERROR$2):Z_OK$3},deflateSetDictionary=(r,n)=>{let e=n.length;if(deflateStateCheck(r))return Z_STREAM_ERROR$2;const i=r.state,s=i.wrap;if(s===2||s===1&&i.status!==INIT_STATE||i.lookahead)return Z_STREAM_ERROR$2;if(s===1&&(r.adler=adler32_1(r.adler,n,e,0)),i.wrap=0,e>=i.w_size){s===0&&(zero(i.head),i.strstart=0,i.block_start=0,i.insert=0);let d=new Uint8Array(i.w_size);d.set(n.subarray(e-i.w_size,e),0),n=d,e=i.w_size}const o=r.avail_in,u=r.next_in,l=r.input;for(r.avail_in=e,r.next_in=0,r.input=n,fill_window(i);i.lookahead>=MIN_MATCH;){let d=i.strstart,m=i.lookahead-(MIN_MATCH-1);do i.ins_h=HASH(i,i.ins_h,i.window[d+MIN_MATCH-1]),i.prev[d&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=d,d++;while(--m);i.strstart=d,i.lookahead=MIN_MATCH-1,fill_window(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=MIN_MATCH-1,i.match_available=0,r.next_in=u,r.input=l,r.avail_in=o,i.wrap=s,Z_OK$3};var deflateInit_1=deflateInit,deflateInit2_1=deflateInit2,deflateReset_1=deflateReset,deflateResetKeep_1=deflateResetKeep,deflateSetHeader_1=deflateSetHeader,deflate_2$1=deflate$2,deflateEnd_1=deflateEnd,deflateSetDictionary_1=deflateSetDictionary,deflateInfo="pako deflate (from Nodeca project)",deflate_1$2={deflateInit:deflateInit_1,deflateInit2:deflateInit2_1,deflateReset:deflateReset_1,deflateResetKeep:deflateResetKeep_1,deflateSetHeader:deflateSetHeader_1,deflate:deflate_2$1,deflateEnd:deflateEnd_1,deflateSetDictionary:deflateSetDictionary_1,deflateInfo};const _has=(r,n)=>Object.prototype.hasOwnProperty.call(r,n);var assign=function(r){const n=Array.prototype.slice.call(arguments,1);for(;n.length;){const e=n.shift();if(e){if(typeof e!="object")throw new TypeError(e+"must be non-object");for(const i in e)_has(e,i)&&(r[i]=e[i])}}return r},flattenChunks=r=>{let n=0;for(let i=0,s=r.length;i<s;i++)n+=r[i].length;const e=new Uint8Array(n);for(let i=0,s=0,o=r.length;i<o;i++){let u=r[i];e.set(u,s),s+=u.length}return e},common={assign,flattenChunks};let STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{STR_APPLY_UIA_OK=!1}const _utf8len=new Uint8Array(256);for(let r=0;r<256;r++)_utf8len[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;_utf8len[254]=_utf8len[254]=1;var string2buf=r=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(r);let n,e,i,s,o,u=r.length,l=0;for(s=0;s<u;s++)e=r.charCodeAt(s),(e&64512)===55296&&s+1<u&&(i=r.charCodeAt(s+1),(i&64512)===56320&&(e=65536+(e-55296<<10)+(i-56320),s++)),l+=e<128?1:e<2048?2:e<65536?3:4;for(n=new Uint8Array(l),o=0,s=0;o<l;s++)e=r.charCodeAt(s),(e&64512)===55296&&s+1<u&&(i=r.charCodeAt(s+1),(i&64512)===56320&&(e=65536+(e-55296<<10)+(i-56320),s++)),e<128?n[o++]=e:e<2048?(n[o++]=192|e>>>6,n[o++]=128|e&63):e<65536?(n[o++]=224|e>>>12,n[o++]=128|e>>>6&63,n[o++]=128|e&63):(n[o++]=240|e>>>18,n[o++]=128|e>>>12&63,n[o++]=128|e>>>6&63,n[o++]=128|e&63);return n};const buf2binstring=(r,n)=>{if(n<65534&&r.subarray&&STR_APPLY_UIA_OK)return String.fromCharCode.apply(null,r.length===n?r:r.subarray(0,n));let e="";for(let i=0;i<n;i++)e+=String.fromCharCode(r[i]);return e};var buf2string=(r,n)=>{const e=n||r.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(r.subarray(0,n));let i,s;const o=new Array(e*2);for(s=0,i=0;i<e;){let u=r[i++];if(u<128){o[s++]=u;continue}let l=_utf8len[u];if(l>4){o[s++]=65533,i+=l-1;continue}for(u&=l===2?31:l===3?15:7;l>1&&i<e;)u=u<<6|r[i++]&63,l--;if(l>1){o[s++]=65533;continue}u<65536?o[s++]=u:(u-=65536,o[s++]=55296|u>>10&1023,o[s++]=56320|u&1023)}return buf2binstring(o,s)},utf8border=(r,n)=>{n=n||r.length,n>r.length&&(n=r.length);let e=n-1;for(;e>=0&&(r[e]&192)===128;)e--;return e<0||e===0?n:e+_utf8len[r[e]]>n?e:n},strings={string2buf,buf2string,utf8border};function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var zstream=ZStream;const toString$1=Object.prototype.toString,{Z_NO_FLUSH:Z_NO_FLUSH$1,Z_SYNC_FLUSH,Z_FULL_FLUSH,Z_FINISH:Z_FINISH$2,Z_OK:Z_OK$2,Z_STREAM_END:Z_STREAM_END$2,Z_DEFAULT_COMPRESSION,Z_DEFAULT_STRATEGY,Z_DEFLATED:Z_DEFLATED$1}=constants$2;function Deflate$1(r){this.options=common.assign({level:Z_DEFAULT_COMPRESSION,method:Z_DEFLATED$1,chunkSize:16384,windowBits:15,memLevel:8,strategy:Z_DEFAULT_STRATEGY},r||{});let n=this.options;n.raw&&n.windowBits>0?n.windowBits=-n.windowBits:n.gzip&&n.windowBits>0&&n.windowBits<16&&(n.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let e=deflate_1$2.deflateInit2(this.strm,n.level,n.method,n.windowBits,n.memLevel,n.strategy);if(e!==Z_OK$2)throw new Error(messages[e]);if(n.header&&deflate_1$2.deflateSetHeader(this.strm,n.header),n.dictionary){let i;if(typeof n.dictionary=="string"?i=strings.string2buf(n.dictionary):toString$1.call(n.dictionary)==="[object ArrayBuffer]"?i=new Uint8Array(n.dictionary):i=n.dictionary,e=deflate_1$2.deflateSetDictionary(this.strm,i),e!==Z_OK$2)throw new Error(messages[e]);this._dict_set=!0}}Deflate$1.prototype.push=function(r,n){const e=this.strm,i=this.options.chunkSize;let s,o;if(this.ended)return!1;for(n===~~n?o=n:o=n===!0?Z_FINISH$2:Z_NO_FLUSH$1,typeof r=="string"?e.input=strings.string2buf(r):toString$1.call(r)==="[object ArrayBuffer]"?e.input=new Uint8Array(r):e.input=r,e.next_in=0,e.avail_in=e.input.length;;){if(e.avail_out===0&&(e.output=new Uint8Array(i),e.next_out=0,e.avail_out=i),(o===Z_SYNC_FLUSH||o===Z_FULL_FLUSH)&&e.avail_out<=6){this.onData(e.output.subarray(0,e.next_out)),e.avail_out=0;continue}if(s=deflate_1$2.deflate(e,o),s===Z_STREAM_END$2)return e.next_out>0&&this.onData(e.output.subarray(0,e.next_out)),s=deflate_1$2.deflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===Z_OK$2;if(e.avail_out===0){this.onData(e.output);continue}if(o>0&&e.next_out>0){this.onData(e.output.subarray(0,e.next_out)),e.avail_out=0;continue}if(e.avail_in===0)break}return!0};Deflate$1.prototype.onData=function(r){this.chunks.push(r)};Deflate$1.prototype.onEnd=function(r){r===Z_OK$2&&(this.result=common.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function deflate$1(r,n){const e=new Deflate$1(n);if(e.push(r,!0),e.err)throw e.msg||messages[e.err];return e.result}function deflateRaw$1(r,n){return n=n||{},n.raw=!0,deflate$1(r,n)}function gzip$1(r,n){return n=n||{},n.gzip=!0,deflate$1(r,n)}var Deflate_1$1=Deflate$1,deflate_2=deflate$1,deflateRaw_1$1=deflateRaw$1,gzip_1$1=gzip$1,constants$1=constants$2,deflate_1$1={Deflate:Deflate_1$1,deflate:deflate_2,deflateRaw:deflateRaw_1$1,gzip:gzip_1$1,constants:constants$1};const BAD$1=16209,TYPE$1=16191;var inffast=function(n,e){let i,s,o,u,l,d,m,y,S,X,he,Ce,Ee,xe,be,we,ve,ke,De,Oe,Le,Ae,Ie,Ue;const ze=n.state;i=n.next_in,Ie=n.input,s=i+(n.avail_in-5),o=n.next_out,Ue=n.output,u=o-(e-n.avail_out),l=o+(n.avail_out-257),d=ze.dmax,m=ze.wsize,y=ze.whave,S=ze.wnext,X=ze.window,he=ze.hold,Ce=ze.bits,Ee=ze.lencode,xe=ze.distcode,be=(1<<ze.lenbits)-1,we=(1<<ze.distbits)-1;e:do{Ce<15&&(he+=Ie[i++]<<Ce,Ce+=8,he+=Ie[i++]<<Ce,Ce+=8),ve=Ee[he&be];t:for(;;){if(ke=ve>>>24,he>>>=ke,Ce-=ke,ke=ve>>>16&255,ke===0)Ue[o++]=ve&65535;else if(ke&16){De=ve&65535,ke&=15,ke&&(Ce<ke&&(he+=Ie[i++]<<Ce,Ce+=8),De+=he&(1<<ke)-1,he>>>=ke,Ce-=ke),Ce<15&&(he+=Ie[i++]<<Ce,Ce+=8,he+=Ie[i++]<<Ce,Ce+=8),ve=xe[he&we];r:for(;;){if(ke=ve>>>24,he>>>=ke,Ce-=ke,ke=ve>>>16&255,ke&16){if(Oe=ve&65535,ke&=15,Ce<ke&&(he+=Ie[i++]<<Ce,Ce+=8,Ce<ke&&(he+=Ie[i++]<<Ce,Ce+=8)),Oe+=he&(1<<ke)-1,Oe>d){n.msg="invalid distance too far back",ze.mode=BAD$1;break e}if(he>>>=ke,Ce-=ke,ke=o-u,Oe>ke){if(ke=Oe-ke,ke>y&&ze.sane){n.msg="invalid distance too far back",ze.mode=BAD$1;break e}if(Le=0,Ae=X,S===0){if(Le+=m-ke,ke<De){De-=ke;do Ue[o++]=X[Le++];while(--ke);Le=o-Oe,Ae=Ue}}else if(S<ke){if(Le+=m+S-ke,ke-=S,ke<De){De-=ke;do Ue[o++]=X[Le++];while(--ke);if(Le=0,S<De){ke=S,De-=ke;do Ue[o++]=X[Le++];while(--ke);Le=o-Oe,Ae=Ue}}}else if(Le+=S-ke,ke<De){De-=ke;do Ue[o++]=X[Le++];while(--ke);Le=o-Oe,Ae=Ue}for(;De>2;)Ue[o++]=Ae[Le++],Ue[o++]=Ae[Le++],Ue[o++]=Ae[Le++],De-=3;De&&(Ue[o++]=Ae[Le++],De>1&&(Ue[o++]=Ae[Le++]))}else{Le=o-Oe;do Ue[o++]=Ue[Le++],Ue[o++]=Ue[Le++],Ue[o++]=Ue[Le++],De-=3;while(De>2);De&&(Ue[o++]=Ue[Le++],De>1&&(Ue[o++]=Ue[Le++]))}}else if(ke&64){n.msg="invalid distance code",ze.mode=BAD$1;break e}else{ve=xe[(ve&65535)+(he&(1<<ke)-1)];continue r}break}}else if(ke&64)if(ke&32){ze.mode=TYPE$1;break e}else{n.msg="invalid literal/length code",ze.mode=BAD$1;break e}else{ve=Ee[(ve&65535)+(he&(1<<ke)-1)];continue t}break}}while(i<s&&o<l);De=Ce>>3,i-=De,Ce-=De<<3,he&=(1<<Ce)-1,n.next_in=i,n.next_out=o,n.avail_in=i<s?5+(s-i):5-(i-s),n.avail_out=o<l?257+(l-o):257-(o-l),ze.hold=he,ze.bits=Ce};const MAXBITS=15,ENOUGH_LENS$1=852,ENOUGH_DISTS$1=592,CODES$1=0,LENS$1=1,DISTS$1=2,lbase=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),lext=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),dbase=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),dext=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),inflate_table=(r,n,e,i,s,o,u,l)=>{const d=l.bits;let m=0,y=0,S=0,X=0,he=0,Ce=0,Ee=0,xe=0,be=0,we=0,ve,ke,De,Oe,Le,Ae=null,Ie;const Ue=new Uint16Array(MAXBITS+1),ze=new Uint16Array(MAXBITS+1);let Ye=null,Xe,tt,lt;for(m=0;m<=MAXBITS;m++)Ue[m]=0;for(y=0;y<i;y++)Ue[n[e+y]]++;for(he=d,X=MAXBITS;X>=1&&Ue[X]===0;X--);if(he>X&&(he=X),X===0)return s[o++]=1<<24|64<<16|0,s[o++]=1<<24|64<<16|0,l.bits=1,0;for(S=1;S<X&&Ue[S]===0;S++);for(he<S&&(he=S),xe=1,m=1;m<=MAXBITS;m++)if(xe<<=1,xe-=Ue[m],xe<0)return-1;if(xe>0&&(r===CODES$1||X!==1))return-1;for(ze[1]=0,m=1;m<MAXBITS;m++)ze[m+1]=ze[m]+Ue[m];for(y=0;y<i;y++)n[e+y]!==0&&(u[ze[n[e+y]]++]=y);if(r===CODES$1?(Ae=Ye=u,Ie=20):r===LENS$1?(Ae=lbase,Ye=lext,Ie=257):(Ae=dbase,Ye=dext,Ie=0),we=0,y=0,m=S,Le=o,Ce=he,Ee=0,De=-1,be=1<<he,Oe=be-1,r===LENS$1&&be>ENOUGH_LENS$1||r===DISTS$1&&be>ENOUGH_DISTS$1)return 1;for(;;){Xe=m-Ee,u[y]+1<Ie?(tt=0,lt=u[y]):u[y]>=Ie?(tt=Ye[u[y]-Ie],lt=Ae[u[y]-Ie]):(tt=96,lt=0),ve=1<<m-Ee,ke=1<<Ce,S=ke;do ke-=ve,s[Le+(we>>Ee)+ke]=Xe<<24|tt<<16|lt|0;while(ke!==0);for(ve=1<<m-1;we&ve;)ve>>=1;if(ve!==0?(we&=ve-1,we+=ve):we=0,y++,--Ue[m]===0){if(m===X)break;m=n[e+u[y]]}if(m>he&&(we&Oe)!==De){for(Ee===0&&(Ee=he),Le+=S,Ce=m-Ee,xe=1<<Ce;Ce+Ee<X&&(xe-=Ue[Ce+Ee],!(xe<=0));)Ce++,xe<<=1;if(be+=1<<Ce,r===LENS$1&&be>ENOUGH_LENS$1||r===DISTS$1&&be>ENOUGH_DISTS$1)return 1;De=we&Oe,s[De]=he<<24|Ce<<16|Le-o|0}}return we!==0&&(s[Le+we]=m-Ee<<24|64<<16|0),l.bits=he,0};var inftrees=inflate_table;const CODES=0,LENS=1,DISTS=2,{Z_FINISH:Z_FINISH$1,Z_BLOCK,Z_TREES,Z_OK:Z_OK$1,Z_STREAM_END:Z_STREAM_END$1,Z_NEED_DICT:Z_NEED_DICT$1,Z_STREAM_ERROR:Z_STREAM_ERROR$1,Z_DATA_ERROR:Z_DATA_ERROR$1,Z_MEM_ERROR:Z_MEM_ERROR$1,Z_BUF_ERROR,Z_DEFLATED}=constants$2,HEAD=16180,FLAGS=16181,TIME=16182,OS=16183,EXLEN=16184,EXTRA=16185,NAME=16186,COMMENT=16187,HCRC=16188,DICTID=16189,DICT=16190,TYPE=16191,TYPEDO=16192,STORED=16193,COPY_=16194,COPY=16195,TABLE=16196,LENLENS=16197,CODELENS=16198,LEN_=16199,LEN=16200,LENEXT=16201,DIST=16202,DISTEXT=16203,MATCH=16204,LIT=16205,CHECK=16206,LENGTH=16207,DONE=16208,BAD=16209,MEM=16210,SYNC=16211,ENOUGH_LENS=852,ENOUGH_DISTS=592,MAX_WBITS=15,DEF_WBITS=MAX_WBITS,zswap32=r=>(r>>>24&255)+(r>>>8&65280)+((r&65280)<<8)+((r&255)<<24);function InflateState(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const inflateStateCheck=r=>{if(!r)return 1;const n=r.state;return!n||n.strm!==r||n.mode<HEAD||n.mode>SYNC?1:0},inflateResetKeep=r=>{if(inflateStateCheck(r))return Z_STREAM_ERROR$1;const n=r.state;return r.total_in=r.total_out=n.total=0,r.msg="",n.wrap&&(r.adler=n.wrap&1),n.mode=HEAD,n.last=0,n.havedict=0,n.flags=-1,n.dmax=32768,n.head=null,n.hold=0,n.bits=0,n.lencode=n.lendyn=new Int32Array(ENOUGH_LENS),n.distcode=n.distdyn=new Int32Array(ENOUGH_DISTS),n.sane=1,n.back=-1,Z_OK$1},inflateReset=r=>{if(inflateStateCheck(r))return Z_STREAM_ERROR$1;const n=r.state;return n.wsize=0,n.whave=0,n.wnext=0,inflateResetKeep(r)},inflateReset2=(r,n)=>{let e;if(inflateStateCheck(r))return Z_STREAM_ERROR$1;const i=r.state;return n<0?(e=0,n=-n):(e=(n>>4)+5,n<48&&(n&=15)),n&&(n<8||n>15)?Z_STREAM_ERROR$1:(i.window!==null&&i.wbits!==n&&(i.window=null),i.wrap=e,i.wbits=n,inflateReset(r))},inflateInit2=(r,n)=>{if(!r)return Z_STREAM_ERROR$1;const e=new InflateState;r.state=e,e.strm=r,e.window=null,e.mode=HEAD;const i=inflateReset2(r,n);return i!==Z_OK$1&&(r.state=null),i},inflateInit=r=>inflateInit2(r,DEF_WBITS);let virgin=!0,lenfix,distfix;const fixedtables=r=>{if(virgin){lenfix=new Int32Array(512),distfix=new Int32Array(32);let n=0;for(;n<144;)r.lens[n++]=8;for(;n<256;)r.lens[n++]=9;for(;n<280;)r.lens[n++]=7;for(;n<288;)r.lens[n++]=8;for(inftrees(LENS,r.lens,0,288,lenfix,0,r.work,{bits:9}),n=0;n<32;)r.lens[n++]=5;inftrees(DISTS,r.lens,0,32,distfix,0,r.work,{bits:5}),virgin=!1}r.lencode=lenfix,r.lenbits=9,r.distcode=distfix,r.distbits=5},updatewindow=(r,n,e,i)=>{let s;const o=r.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),i>=o.wsize?(o.window.set(n.subarray(e-o.wsize,e),0),o.wnext=0,o.whave=o.wsize):(s=o.wsize-o.wnext,s>i&&(s=i),o.window.set(n.subarray(e-i,e-i+s),o.wnext),i-=s,i?(o.window.set(n.subarray(e-i,e),0),o.wnext=i,o.whave=o.wsize):(o.wnext+=s,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=s))),0},inflate$2=(r,n)=>{let e,i,s,o,u,l,d,m,y,S,X,he,Ce,Ee,xe=0,be,we,ve,ke,De,Oe,Le,Ae;const Ie=new Uint8Array(4);let Ue,ze;const Ye=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(inflateStateCheck(r)||!r.output||!r.input&&r.avail_in!==0)return Z_STREAM_ERROR$1;e=r.state,e.mode===TYPE&&(e.mode=TYPEDO),u=r.next_out,s=r.output,d=r.avail_out,o=r.next_in,i=r.input,l=r.avail_in,m=e.hold,y=e.bits,S=l,X=d,Ae=Z_OK$1;e:for(;;)switch(e.mode){case HEAD:if(e.wrap===0){e.mode=TYPEDO;break}for(;y<16;){if(l===0)break e;l--,m+=i[o++]<<y,y+=8}if(e.wrap&2&&m===35615){e.wbits===0&&(e.wbits=15),e.check=0,Ie[0]=m&255,Ie[1]=m>>>8&255,e.check=crc32_1(e.check,Ie,2,0),m=0,y=0,e.mode=FLAGS;break}if(e.head&&(e.head.done=!1),!(e.wrap&1)||(((m&255)<<8)+(m>>8))%31){r.msg="incorrect header check",e.mode=BAD;break}if((m&15)!==Z_DEFLATED){r.msg="unknown compression method",e.mode=BAD;break}if(m>>>=4,y-=4,Le=(m&15)+8,e.wbits===0&&(e.wbits=Le),Le>15||Le>e.wbits){r.msg="invalid window size",e.mode=BAD;break}e.dmax=1<<e.wbits,e.flags=0,r.adler=e.check=1,e.mode=m&512?DICTID:TYPE,m=0,y=0;break;case FLAGS:for(;y<16;){if(l===0)break e;l--,m+=i[o++]<<y,y+=8}if(e.flags=m,(e.flags&255)!==Z_DEFLATED){r.msg="unknown compression method",e.mode=BAD;break}if(e.flags&57344){r.msg="unknown header flags set",e.mode=BAD;break}e.head&&(e.head.text=m>>8&1),e.flags&512&&e.wrap&4&&(Ie[0]=m&255,Ie[1]=m>>>8&255,e.check=crc32_1(e.check,Ie,2,0)),m=0,y=0,e.mode=TIME;case TIME:for(;y<32;){if(l===0)break e;l--,m+=i[o++]<<y,y+=8}e.head&&(e.head.time=m),e.flags&512&&e.wrap&4&&(Ie[0]=m&255,Ie[1]=m>>>8&255,Ie[2]=m>>>16&255,Ie[3]=m>>>24&255,e.check=crc32_1(e.check,Ie,4,0)),m=0,y=0,e.mode=OS;case OS:for(;y<16;){if(l===0)break e;l--,m+=i[o++]<<y,y+=8}e.head&&(e.head.xflags=m&255,e.head.os=m>>8),e.flags&512&&e.wrap&4&&(Ie[0]=m&255,Ie[1]=m>>>8&255,e.check=crc32_1(e.check,Ie,2,0)),m=0,y=0,e.mode=EXLEN;case EXLEN:if(e.flags&1024){for(;y<16;){if(l===0)break e;l--,m+=i[o++]<<y,y+=8}e.length=m,e.head&&(e.head.extra_len=m),e.flags&512&&e.wrap&4&&(Ie[0]=m&255,Ie[1]=m>>>8&255,e.check=crc32_1(e.check,Ie,2,0)),m=0,y=0}else e.head&&(e.head.extra=null);e.mode=EXTRA;case EXTRA:if(e.flags&1024&&(he=e.length,he>l&&(he=l),he&&(e.head&&(Le=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Uint8Array(e.head.extra_len)),e.head.extra.set(i.subarray(o,o+he),Le)),e.flags&512&&e.wrap&4&&(e.check=crc32_1(e.check,i,he,o)),l-=he,o+=he,e.length-=he),e.length))break e;e.length=0,e.mode=NAME;case NAME:if(e.flags&2048){if(l===0)break e;he=0;do Le=i[o+he++],e.head&&Le&&e.length<65536&&(e.head.name+=String.fromCharCode(Le));while(Le&&he<l);if(e.flags&512&&e.wrap&4&&(e.check=crc32_1(e.check,i,he,o)),l-=he,o+=he,Le)break e}else e.head&&(e.head.name=null);e.length=0,e.mode=COMMENT;case COMMENT:if(e.flags&4096){if(l===0)break e;he=0;do Le=i[o+he++],e.head&&Le&&e.length<65536&&(e.head.comment+=String.fromCharCode(Le));while(Le&&he<l);if(e.flags&512&&e.wrap&4&&(e.check=crc32_1(e.check,i,he,o)),l-=he,o+=he,Le)break e}else e.head&&(e.head.comment=null);e.mode=HCRC;case HCRC:if(e.flags&512){for(;y<16;){if(l===0)break e;l--,m+=i[o++]<<y,y+=8}if(e.wrap&4&&m!==(e.check&65535)){r.msg="header crc mismatch",e.mode=BAD;break}m=0,y=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),r.adler=e.check=0,e.mode=TYPE;break;case DICTID:for(;y<32;){if(l===0)break e;l--,m+=i[o++]<<y,y+=8}r.adler=e.check=zswap32(m),m=0,y=0,e.mode=DICT;case DICT:if(e.havedict===0)return r.next_out=u,r.avail_out=d,r.next_in=o,r.avail_in=l,e.hold=m,e.bits=y,Z_NEED_DICT$1;r.adler=e.check=1,e.mode=TYPE;case TYPE:if(n===Z_BLOCK||n===Z_TREES)break e;case TYPEDO:if(e.last){m>>>=y&7,y-=y&7,e.mode=CHECK;break}for(;y<3;){if(l===0)break e;l--,m+=i[o++]<<y,y+=8}switch(e.last=m&1,m>>>=1,y-=1,m&3){case 0:e.mode=STORED;break;case 1:if(fixedtables(e),e.mode=LEN_,n===Z_TREES){m>>>=2,y-=2;break e}break;case 2:e.mode=TABLE;break;case 3:r.msg="invalid block type",e.mode=BAD}m>>>=2,y-=2;break;case STORED:for(m>>>=y&7,y-=y&7;y<32;){if(l===0)break e;l--,m+=i[o++]<<y,y+=8}if((m&65535)!==(m>>>16^65535)){r.msg="invalid stored block lengths",e.mode=BAD;break}if(e.length=m&65535,m=0,y=0,e.mode=COPY_,n===Z_TREES)break e;case COPY_:e.mode=COPY;case COPY:if(he=e.length,he){if(he>l&&(he=l),he>d&&(he=d),he===0)break e;s.set(i.subarray(o,o+he),u),l-=he,o+=he,d-=he,u+=he,e.length-=he;break}e.mode=TYPE;break;case TABLE:for(;y<14;){if(l===0)break e;l--,m+=i[o++]<<y,y+=8}if(e.nlen=(m&31)+257,m>>>=5,y-=5,e.ndist=(m&31)+1,m>>>=5,y-=5,e.ncode=(m&15)+4,m>>>=4,y-=4,e.nlen>286||e.ndist>30){r.msg="too many length or distance symbols",e.mode=BAD;break}e.have=0,e.mode=LENLENS;case LENLENS:for(;e.have<e.ncode;){for(;y<3;){if(l===0)break e;l--,m+=i[o++]<<y,y+=8}e.lens[Ye[e.have++]]=m&7,m>>>=3,y-=3}for(;e.have<19;)e.lens[Ye[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,Ue={bits:e.lenbits},Ae=inftrees(CODES,e.lens,0,19,e.lencode,0,e.work,Ue),e.lenbits=Ue.bits,Ae){r.msg="invalid code lengths set",e.mode=BAD;break}e.have=0,e.mode=CODELENS;case CODELENS:for(;e.have<e.nlen+e.ndist;){for(;xe=e.lencode[m&(1<<e.lenbits)-1],be=xe>>>24,we=xe>>>16&255,ve=xe&65535,!(be<=y);){if(l===0)break e;l--,m+=i[o++]<<y,y+=8}if(ve<16)m>>>=be,y-=be,e.lens[e.have++]=ve;else{if(ve===16){for(ze=be+2;y<ze;){if(l===0)break e;l--,m+=i[o++]<<y,y+=8}if(m>>>=be,y-=be,e.have===0){r.msg="invalid bit length repeat",e.mode=BAD;break}Le=e.lens[e.have-1],he=3+(m&3),m>>>=2,y-=2}else if(ve===17){for(ze=be+3;y<ze;){if(l===0)break e;l--,m+=i[o++]<<y,y+=8}m>>>=be,y-=be,Le=0,he=3+(m&7),m>>>=3,y-=3}else{for(ze=be+7;y<ze;){if(l===0)break e;l--,m+=i[o++]<<y,y+=8}m>>>=be,y-=be,Le=0,he=11+(m&127),m>>>=7,y-=7}if(e.have+he>e.nlen+e.ndist){r.msg="invalid bit length repeat",e.mode=BAD;break}for(;he--;)e.lens[e.have++]=Le}}if(e.mode===BAD)break;if(e.lens[256]===0){r.msg="invalid code -- missing end-of-block",e.mode=BAD;break}if(e.lenbits=9,Ue={bits:e.lenbits},Ae=inftrees(LENS,e.lens,0,e.nlen,e.lencode,0,e.work,Ue),e.lenbits=Ue.bits,Ae){r.msg="invalid literal/lengths set",e.mode=BAD;break}if(e.distbits=6,e.distcode=e.distdyn,Ue={bits:e.distbits},Ae=inftrees(DISTS,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,Ue),e.distbits=Ue.bits,Ae){r.msg="invalid distances set",e.mode=BAD;break}if(e.mode=LEN_,n===Z_TREES)break e;case LEN_:e.mode=LEN;case LEN:if(l>=6&&d>=258){r.next_out=u,r.avail_out=d,r.next_in=o,r.avail_in=l,e.hold=m,e.bits=y,inffast(r,X),u=r.next_out,s=r.output,d=r.avail_out,o=r.next_in,i=r.input,l=r.avail_in,m=e.hold,y=e.bits,e.mode===TYPE&&(e.back=-1);break}for(e.back=0;xe=e.lencode[m&(1<<e.lenbits)-1],be=xe>>>24,we=xe>>>16&255,ve=xe&65535,!(be<=y);){if(l===0)break e;l--,m+=i[o++]<<y,y+=8}if(we&&!(we&240)){for(ke=be,De=we,Oe=ve;xe=e.lencode[Oe+((m&(1<<ke+De)-1)>>ke)],be=xe>>>24,we=xe>>>16&255,ve=xe&65535,!(ke+be<=y);){if(l===0)break e;l--,m+=i[o++]<<y,y+=8}m>>>=ke,y-=ke,e.back+=ke}if(m>>>=be,y-=be,e.back+=be,e.length=ve,we===0){e.mode=LIT;break}if(we&32){e.back=-1,e.mode=TYPE;break}if(we&64){r.msg="invalid literal/length code",e.mode=BAD;break}e.extra=we&15,e.mode=LENEXT;case LENEXT:if(e.extra){for(ze=e.extra;y<ze;){if(l===0)break e;l--,m+=i[o++]<<y,y+=8}e.length+=m&(1<<e.extra)-1,m>>>=e.extra,y-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=DIST;case DIST:for(;xe=e.distcode[m&(1<<e.distbits)-1],be=xe>>>24,we=xe>>>16&255,ve=xe&65535,!(be<=y);){if(l===0)break e;l--,m+=i[o++]<<y,y+=8}if(!(we&240)){for(ke=be,De=we,Oe=ve;xe=e.distcode[Oe+((m&(1<<ke+De)-1)>>ke)],be=xe>>>24,we=xe>>>16&255,ve=xe&65535,!(ke+be<=y);){if(l===0)break e;l--,m+=i[o++]<<y,y+=8}m>>>=ke,y-=ke,e.back+=ke}if(m>>>=be,y-=be,e.back+=be,we&64){r.msg="invalid distance code",e.mode=BAD;break}e.offset=ve,e.extra=we&15,e.mode=DISTEXT;case DISTEXT:if(e.extra){for(ze=e.extra;y<ze;){if(l===0)break e;l--,m+=i[o++]<<y,y+=8}e.offset+=m&(1<<e.extra)-1,m>>>=e.extra,y-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){r.msg="invalid distance too far back",e.mode=BAD;break}e.mode=MATCH;case MATCH:if(d===0)break e;if(he=X-d,e.offset>he){if(he=e.offset-he,he>e.whave&&e.sane){r.msg="invalid distance too far back",e.mode=BAD;break}he>e.wnext?(he-=e.wnext,Ce=e.wsize-he):Ce=e.wnext-he,he>e.length&&(he=e.length),Ee=e.window}else Ee=s,Ce=u-e.offset,he=e.length;he>d&&(he=d),d-=he,e.length-=he;do s[u++]=Ee[Ce++];while(--he);e.length===0&&(e.mode=LEN);break;case LIT:if(d===0)break e;s[u++]=e.length,d--,e.mode=LEN;break;case CHECK:if(e.wrap){for(;y<32;){if(l===0)break e;l--,m|=i[o++]<<y,y+=8}if(X-=d,r.total_out+=X,e.total+=X,e.wrap&4&&X&&(r.adler=e.check=e.flags?crc32_1(e.check,s,X,u-X):adler32_1(e.check,s,X,u-X)),X=d,e.wrap&4&&(e.flags?m:zswap32(m))!==e.check){r.msg="incorrect data check",e.mode=BAD;break}m=0,y=0}e.mode=LENGTH;case LENGTH:if(e.wrap&&e.flags){for(;y<32;){if(l===0)break e;l--,m+=i[o++]<<y,y+=8}if(e.wrap&4&&m!==(e.total&4294967295)){r.msg="incorrect length check",e.mode=BAD;break}m=0,y=0}e.mode=DONE;case DONE:Ae=Z_STREAM_END$1;break e;case BAD:Ae=Z_DATA_ERROR$1;break e;case MEM:return Z_MEM_ERROR$1;case SYNC:default:return Z_STREAM_ERROR$1}return r.next_out=u,r.avail_out=d,r.next_in=o,r.avail_in=l,e.hold=m,e.bits=y,(e.wsize||X!==r.avail_out&&e.mode<BAD&&(e.mode<CHECK||n!==Z_FINISH$1))&&updatewindow(r,r.output,r.next_out,X-r.avail_out),S-=r.avail_in,X-=r.avail_out,r.total_in+=S,r.total_out+=X,e.total+=X,e.wrap&4&&X&&(r.adler=e.check=e.flags?crc32_1(e.check,s,X,r.next_out-X):adler32_1(e.check,s,X,r.next_out-X)),r.data_type=e.bits+(e.last?64:0)+(e.mode===TYPE?128:0)+(e.mode===LEN_||e.mode===COPY_?256:0),(S===0&&X===0||n===Z_FINISH$1)&&Ae===Z_OK$1&&(Ae=Z_BUF_ERROR),Ae},inflateEnd=r=>{if(inflateStateCheck(r))return Z_STREAM_ERROR$1;let n=r.state;return n.window&&(n.window=null),r.state=null,Z_OK$1},inflateGetHeader=(r,n)=>{if(inflateStateCheck(r))return Z_STREAM_ERROR$1;const e=r.state;return e.wrap&2?(e.head=n,n.done=!1,Z_OK$1):Z_STREAM_ERROR$1},inflateSetDictionary=(r,n)=>{const e=n.length;let i,s,o;return inflateStateCheck(r)||(i=r.state,i.wrap!==0&&i.mode!==DICT)?Z_STREAM_ERROR$1:i.mode===DICT&&(s=1,s=adler32_1(s,n,e,0),s!==i.check)?Z_DATA_ERROR$1:(o=updatewindow(r,n,e,e),o?(i.mode=MEM,Z_MEM_ERROR$1):(i.havedict=1,Z_OK$1))};var inflateReset_1=inflateReset,inflateReset2_1=inflateReset2,inflateResetKeep_1=inflateResetKeep,inflateInit_1=inflateInit,inflateInit2_1=inflateInit2,inflate_2$1=inflate$2,inflateEnd_1=inflateEnd,inflateGetHeader_1=inflateGetHeader,inflateSetDictionary_1=inflateSetDictionary,inflateInfo="pako inflate (from Nodeca project)",inflate_1$2={inflateReset:inflateReset_1,inflateReset2:inflateReset2_1,inflateResetKeep:inflateResetKeep_1,inflateInit:inflateInit_1,inflateInit2:inflateInit2_1,inflate:inflate_2$1,inflateEnd:inflateEnd_1,inflateGetHeader:inflateGetHeader_1,inflateSetDictionary:inflateSetDictionary_1,inflateInfo};function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var gzheader=GZheader;const toString$2=Object.prototype.toString,{Z_NO_FLUSH,Z_FINISH,Z_OK,Z_STREAM_END,Z_NEED_DICT,Z_STREAM_ERROR,Z_DATA_ERROR,Z_MEM_ERROR}=constants$2;function Inflate$1(r){this.options=common.assign({chunkSize:1024*64,windowBits:15,to:""},r||{});const n=this.options;n.raw&&n.windowBits>=0&&n.windowBits<16&&(n.windowBits=-n.windowBits,n.windowBits===0&&(n.windowBits=-15)),n.windowBits>=0&&n.windowBits<16&&!(r&&r.windowBits)&&(n.windowBits+=32),n.windowBits>15&&n.windowBits<48&&(n.windowBits&15||(n.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let e=inflate_1$2.inflateInit2(this.strm,n.windowBits);if(e!==Z_OK)throw new Error(messages[e]);if(this.header=new gzheader,inflate_1$2.inflateGetHeader(this.strm,this.header),n.dictionary&&(typeof n.dictionary=="string"?n.dictionary=strings.string2buf(n.dictionary):toString$2.call(n.dictionary)==="[object ArrayBuffer]"&&(n.dictionary=new Uint8Array(n.dictionary)),n.raw&&(e=inflate_1$2.inflateSetDictionary(this.strm,n.dictionary),e!==Z_OK)))throw new Error(messages[e])}Inflate$1.prototype.push=function(r,n){const e=this.strm,i=this.options.chunkSize,s=this.options.dictionary;let o,u,l;if(this.ended)return!1;for(n===~~n?u=n:u=n===!0?Z_FINISH:Z_NO_FLUSH,toString$2.call(r)==="[object ArrayBuffer]"?e.input=new Uint8Array(r):e.input=r,e.next_in=0,e.avail_in=e.input.length;;){for(e.avail_out===0&&(e.output=new Uint8Array(i),e.next_out=0,e.avail_out=i),o=inflate_1$2.inflate(e,u),o===Z_NEED_DICT&&s&&(o=inflate_1$2.inflateSetDictionary(e,s),o===Z_OK?o=inflate_1$2.inflate(e,u):o===Z_DATA_ERROR&&(o=Z_NEED_DICT));e.avail_in>0&&o===Z_STREAM_END&&e.state.wrap>0&&r[e.next_in]!==0;)inflate_1$2.inflateReset(e),o=inflate_1$2.inflate(e,u);switch(o){case Z_STREAM_ERROR:case Z_DATA_ERROR:case Z_NEED_DICT:case Z_MEM_ERROR:return this.onEnd(o),this.ended=!0,!1}if(l=e.avail_out,e.next_out&&(e.avail_out===0||o===Z_STREAM_END))if(this.options.to==="string"){let d=strings.utf8border(e.output,e.next_out),m=e.next_out-d,y=strings.buf2string(e.output,d);e.next_out=m,e.avail_out=i-m,m&&e.output.set(e.output.subarray(d,d+m),0),this.onData(y)}else this.onData(e.output.length===e.next_out?e.output:e.output.subarray(0,e.next_out));if(!(o===Z_OK&&l===0)){if(o===Z_STREAM_END)return o=inflate_1$2.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(e.avail_in===0)break}}return!0};Inflate$1.prototype.onData=function(r){this.chunks.push(r)};Inflate$1.prototype.onEnd=function(r){r===Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=common.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function inflate$1(r,n){const e=new Inflate$1(n);if(e.push(r),e.err)throw e.msg||messages[e.err];return e.result}function inflateRaw$1(r,n){return n=n||{},n.raw=!0,inflate$1(r,n)}var Inflate_1$1=Inflate$1,inflate_2=inflate$1,inflateRaw_1$1=inflateRaw$1,ungzip$1=inflate$1,constants=constants$2,inflate_1$1={Inflate:Inflate_1$1,inflate:inflate_2,inflateRaw:inflateRaw_1$1,ungzip:ungzip$1,constants};const{Deflate,deflate,deflateRaw,gzip}=deflate_1$1,{Inflate,inflate,inflateRaw,ungzip}=inflate_1$1;var deflate_1=deflate,Inflate_1=Inflate,inflate_1=inflate;const pngSignature=[137,80,78,71,13,10,26,10],crcTable=[];for(let r=0;r<256;r++){let n=r;for(let e=0;e<8;e++)n&1?n=3988292384^n>>>1:n=n>>>1;crcTable[r]=n}const initialCrc=4294967295;function updateCrc(r,n,e){let i=r;for(let s=0;s<e;s++)i=crcTable[(i^n[s])&255]^i>>>8;return i}function crc(r,n){return(updateCrc(initialCrc,r,n)^initialCrc)>>>0}var ColorType;(function(r){r[r.UNKNOWN=-1]="UNKNOWN",r[r.GREYSCALE=0]="GREYSCALE",r[r.TRUECOLOUR=2]="TRUECOLOUR",r[r.INDEXED_COLOUR=3]="INDEXED_COLOUR",r[r.GREYSCALE_ALPHA=4]="GREYSCALE_ALPHA",r[r.TRUECOLOUR_ALPHA=6]="TRUECOLOUR_ALPHA"})(ColorType||(ColorType={}));var CompressionMethod;(function(r){r[r.UNKNOWN=-1]="UNKNOWN",r[r.DEFLATE=0]="DEFLATE"})(CompressionMethod||(CompressionMethod={}));var FilterMethod;(function(r){r[r.UNKNOWN=-1]="UNKNOWN",r[r.ADAPTIVE=0]="ADAPTIVE"})(FilterMethod||(FilterMethod={}));var InterlaceMethod;(function(r){r[r.UNKNOWN=-1]="UNKNOWN",r[r.NO_INTERLACE=0]="NO_INTERLACE",r[r.ADAM7=1]="ADAM7"})(InterlaceMethod||(InterlaceMethod={}));const empty=new Uint8Array(0),NULL="\0",uint16=new Uint16Array([255]),uint8=new Uint8Array(uint16.buffer),osIsLittleEndian=uint8[0]===255;class PngDecoder extends IOBuffer{constructor(n,e={}){super(n);const{checkCrc:i=!1}=e;this._checkCrc=i,this._inflator=new Inflate_1,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=CompressionMethod.UNKNOWN,this._filterMethod=FilterMethod.UNKNOWN,this._interlaceMethod=InterlaceMethod.UNKNOWN,this._colorType=ColorType.UNKNOWN,this.setBigEndian()}decode(){for(this.decodeSignature();!this._end;)this.decodeChunk();return this.decodeImage(),this._png}decodeSignature(){for(let n=0;n<pngSignature.length;n++)if(this.readUint8()!==pngSignature[n])throw new Error(`wrong PNG signature. Byte at ${n} should be ${pngSignature[n]}.`)}decodeChunk(){const n=this.readUint32(),e=this.readChars(4),i=this.offset;switch(e){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(n);break;case"IDAT":this.decodeIDAT(n);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(n);break;case"iCCP":this.decodeiCCP(n);break;case"tEXt":this.decodetEXt(n);break;case"pHYs":this.decodepHYs();break;default:this.skip(n);break}if(this.offset-i!==n)throw new Error(`Length mismatch while decoding chunk ${e}`);if(this._checkCrc){const s=this.readUint32(),o=n+4,u=crc(new Uint8Array(this.buffer,this.byteOffset+this.offset-o-4,o),o);if(u!==s)throw new Error(`CRC mismatch for chunk ${e}. Expected ${s}, found ${u}`)}else this.skip(4)}decodeIHDR(){const n=this._png;n.width=this.readUint32(),n.height=this.readUint32(),n.depth=checkBitDepth(this.readUint8());const e=this.readUint8();this._colorType=e;let i;switch(e){case ColorType.GREYSCALE:i=1;break;case ColorType.TRUECOLOUR:i=3;break;case ColorType.INDEXED_COLOUR:i=1;break;case ColorType.GREYSCALE_ALPHA:i=2;break;case ColorType.TRUECOLOUR_ALPHA:i=4;break;default:throw new Error(`Unknown color type: ${e}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==CompressionMethod.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodePLTE(n){if(n%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${n}`);const e=n/3;this._hasPalette=!0;const i=[];this._palette=i;for(let s=0;s<e;s++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(n){this._inflator.push(new Uint8Array(this.buffer,this.offset+this.byteOffset,n)),this.skip(n)}decodetRNS(n){switch(this._colorType){case ColorType.GREYSCALE:case ColorType.TRUECOLOUR:{if(n%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${n}`);if(n/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${n/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(n/2);for(let e=0;e<n/2;e++)this._transparency[e]=this.readUint16();break}case ColorType.INDEXED_COLOUR:{if(n>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${n} vs ${this._palette.length})`);let e=0;for(;e<n;e++){const i=this.readByte();this._palette[e].push(i)}for(;e<this._palette.length;e++)this._palette[e].push(255);break}default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(n){let e="",i;for(;(i=this.readChar())!==NULL;)e+=i;const s=this.readUint8();if(s!==CompressionMethod.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${s}`);const o=this.readBytes(n-e.length-2);this._png.iccEmbeddedProfile={name:e,profile:inflate_1(o)}}decodetEXt(n){let e="",i;for(;(i=this.readChar())!==NULL;)e+=i;this._png.text[e]=this.readChars(n-e.length-1)}decodepHYs(){const n=this.readUint32(),e=this.readUint32(),i=this.readByte();this._png.resolution={x:n,y:e,unit:i}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const n=this._inflator.result;if(this._filterMethod!==FilterMethod.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===InterlaceMethod.NO_INTERLACE)this.decodeInterlaceNull(n);else throw new Error(`Interlace method ${this._interlaceMethod} not supported`)}decodeInterlaceNull(n){const e=this._png.height,i=this._png.channels*this._png.depth/8,s=this._png.width*i,o=new Uint8Array(this._png.height*s);let u=empty,l=0,d,m;for(let y=0;y<e;y++){switch(d=n.subarray(l+1,l+1+s),m=o.subarray(y*s,(y+1)*s),n[l]){case 0:unfilterNone(d,m,s);break;case 1:unfilterSub(d,m,s,i);break;case 2:unfilterUp(d,m,u,s);break;case 3:unfilterAverage(d,m,u,s,i);break;case 4:unfilterPaeth(d,m,u,s,i);break;default:throw new Error(`Unsupported filter: ${n[l]}`)}u=m,l+=s+1}if(this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency),this._png.depth===16){const y=new Uint16Array(o.buffer);if(osIsLittleEndian)for(let S=0;S<y.length;S++)y[S]=swap16(y[S]);this._png.data=y}else this._png.data=o}}function unfilterNone(r,n,e){for(let i=0;i<e;i++)n[i]=r[i]}function unfilterSub(r,n,e,i){let s=0;for(;s<i;s++)n[s]=r[s];for(;s<e;s++)n[s]=r[s]+n[s-i]&255}function unfilterUp(r,n,e,i){let s=0;if(e.length===0)for(;s<i;s++)n[s]=r[s];else for(;s<i;s++)n[s]=r[s]+e[s]&255}function unfilterAverage(r,n,e,i,s){let o=0;if(e.length===0){for(;o<s;o++)n[o]=r[o];for(;o<i;o++)n[o]=r[o]+(n[o-s]>>1)&255}else{for(;o<s;o++)n[o]=r[o]+(e[o]>>1)&255;for(;o<i;o++)n[o]=r[o]+(n[o-s]+e[o]>>1)&255}}function unfilterPaeth(r,n,e,i,s){let o=0;if(e.length===0){for(;o<s;o++)n[o]=r[o];for(;o<i;o++)n[o]=r[o]+n[o-s]&255}else{for(;o<s;o++)n[o]=r[o]+e[o]&255;for(;o<i;o++)n[o]=r[o]+paethPredictor(n[o-s],e[o],e[o-s])&255}}function paethPredictor(r,n,e){const i=r+n-e,s=Math.abs(i-r),o=Math.abs(i-n),u=Math.abs(i-e);return s<=o&&s<=u?r:o<=u?n:e}function swap16(r){return(r&255)<<8|r>>8&255}function checkBitDepth(r){if(r!==1&&r!==2&&r!==4&&r!==8&&r!==16)throw new Error(`invalid bit depth: ${r}`);return r}const defaultZlibOptions={level:3};class PngEncoder extends IOBuffer{constructor(n,e={}){super(),this._colorType=ColorType.UNKNOWN,this._zlibOptions={...defaultZlibOptions,...e.zlib},this._png=this._checkData(n),this.setBigEndian()}encode(){return this.encodeSignature(),this.encodeIHDR(),this.encodeData(),this.encodeIEND(),this.toArray()}encodeSignature(){this.writeBytes(pngSignature)}encodeIHDR(){this.writeUint32(13),this.writeChars("IHDR"),this.writeUint32(this._png.width),this.writeUint32(this._png.height),this.writeByte(this._png.depth),this.writeByte(this._colorType),this.writeByte(CompressionMethod.DEFLATE),this.writeByte(FilterMethod.ADAPTIVE),this.writeByte(InterlaceMethod.NO_INTERLACE),this.writeCrc(17)}encodeIEND(){this.writeUint32(0),this.writeChars("IEND"),this.writeCrc(4)}encodeIDAT(n){this.writeUint32(n.length),this.writeChars("IDAT"),this.writeBytes(n),this.writeCrc(n.length+4)}encodeData(){const{width:n,height:e,channels:i,depth:s,data:o}=this._png,u=i*n,l=new IOBuffer().setBigEndian();let d=0;for(let S=0;S<e;S++)if(l.writeByte(0),s===8)d=writeDataBytes(o,l,u,d);else if(s===16)d=writeDataUint16(o,l,u,d);else throw new Error("unreachable");const m=l.toArray(),y=deflate_1(m,this._zlibOptions);this.encodeIDAT(y)}_checkData(n){const{colorType:e,channels:i,depth:s}=getColorType(n),o={width:checkInteger(n.width,"width"),height:checkInteger(n.height,"height"),channels:i,data:n.data,depth:s,text:{}};this._colorType=e;const u=o.width*o.height*i;if(o.data.length!==u)throw new RangeError(`wrong data size. Found ${o.data.length}, expected ${u}`);return o}writeCrc(n){this.writeUint32(crc(new Uint8Array(this.buffer,this.byteOffset+this.offset-n,n),n))}}function checkInteger(r,n){if(Number.isInteger(r)&&r>0)return r;throw new TypeError(`${n} must be a positive integer`)}function getColorType(r){const{channels:n=4,depth:e=8}=r;if(n!==4&&n!==3&&n!==2&&n!==1)throw new RangeError(`unsupported number of channels: ${n}`);if(e!==8&&e!==16)throw new RangeError(`unsupported bit depth: ${e}`);const i={channels:n,depth:e,colorType:ColorType.UNKNOWN};switch(n){case 4:i.colorType=ColorType.TRUECOLOUR_ALPHA;break;case 3:i.colorType=ColorType.TRUECOLOUR;break;case 1:i.colorType=ColorType.GREYSCALE;break;case 2:i.colorType=ColorType.GREYSCALE_ALPHA;break;default:throw new Error("unsupported number of channels")}return i}function writeDataBytes(r,n,e,i){for(let s=0;s<e;s++)n.writeByte(r[i++]);return i}function writeDataUint16(r,n,e,i){for(let s=0;s<e;s++)n.writeUint16(r[i++]);return i}var ResolutionUnitSpecifier;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.METRE=1]="METRE"})(ResolutionUnitSpecifier||(ResolutionUnitSpecifier={}));function decodePng(r,n){return new PngDecoder(r,n).decode()}function encodePng$1(r,n){return new PngEncoder(r,n).encode()}var encoder={exports:{}},hasRequiredEncoder;function requireEncoder(){return hasRequiredEncoder||(hasRequiredEncoder=1,function(r){function n(i){var s=Math.floor,o=new Array(64),u=new Array(64),l=new Array(64),d=new Array(64),m,y,S,X,he=new Array(65535),Ce=new Array(65535),Ee=new Array(64),xe=new Array(64),be=[],we=0,ve=7,ke=new Array(64),De=new Array(64),Oe=new Array(64),Le=new Array(256),Ae=new Array(2048),Ie,Ue=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],ze=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Ye=[0,1,2,3,4,5,6,7,8,9,10,11],Xe=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],tt=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],lt=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],_t=[0,1,2,3,4,5,6,7,8,9,10,11],bt=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],rt=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function He(yt){for(var qt=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Qt=0;Qt<64;Qt++){var rr=s((qt[Qt]*yt+50)/100);rr<1?rr=1:rr>255&&(rr=255),o[Ue[Qt]]=rr}for(var It=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],_r=0;_r<64;_r++){var cr=s((It[_r]*yt+50)/100);cr<1?cr=1:cr>255&&(cr=255),u[Ue[_r]]=cr}for(var Vt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Gt=0,er=0;er<8;er++)for(var Yt=0;Yt<8;Yt++)l[Gt]=1/(o[Ue[Gt]]*Vt[er]*Vt[Yt]*8),d[Gt]=1/(u[Ue[Gt]]*Vt[er]*Vt[Yt]*8),Gt++}function We(yt,qt){for(var Qt=0,rr=0,It=new Array,_r=1;_r<=16;_r++){for(var cr=1;cr<=yt[_r];cr++)It[qt[rr]]=[],It[qt[rr]][0]=Qt,It[qt[rr]][1]=_r,rr++,Qt++;Qt*=2}return It}function qe(){m=We(ze,Ye),y=We(lt,_t),S=We(Xe,tt),X=We(bt,rt)}function Ke(){for(var yt=1,qt=2,Qt=1;Qt<=15;Qt++){for(var rr=yt;rr<qt;rr++)Ce[32767+rr]=Qt,he[32767+rr]=[],he[32767+rr][1]=Qt,he[32767+rr][0]=rr;for(var It=-(qt-1);It<=-yt;It++)Ce[32767+It]=Qt,he[32767+It]=[],he[32767+It][1]=Qt,he[32767+It][0]=qt-1+It;yt<<=1,qt<<=1}}function st(){for(var yt=0;yt<256;yt++)Ae[yt]=19595*yt,Ae[yt+256>>0]=38470*yt,Ae[yt+512>>0]=7471*yt+32768,Ae[yt+768>>0]=-11059*yt,Ae[yt+1024>>0]=-21709*yt,Ae[yt+1280>>0]=32768*yt+8421375,Ae[yt+1536>>0]=-27439*yt,Ae[yt+1792>>0]=-5329*yt}function ut(yt){for(var qt=yt[0],Qt=yt[1]-1;Qt>=0;)qt&1<<Qt&&(we|=1<<ve),Qt--,ve--,ve<0&&(we==255?(nt(255),nt(0)):nt(we),ve=7,we=0)}function nt(yt){be.push(yt)}function vt(yt){nt(yt>>8&255),nt(yt&255)}function it(yt,qt){var Qt,rr,It,_r,cr,Vt,Gt,er,Yt=0,ar,yr=8,Jt=64;for(ar=0;ar<yr;++ar){Qt=yt[Yt],rr=yt[Yt+1],It=yt[Yt+2],_r=yt[Yt+3],cr=yt[Yt+4],Vt=yt[Yt+5],Gt=yt[Yt+6],er=yt[Yt+7];var br=Qt+er,Ot=Qt-er,lr=rr+Gt,hr=rr-Gt,Ft=It+Vt,kt=It-Vt,Xt=_r+cr,wr=_r-cr,fr=br+Xt,pr=br-Xt,Mr=lr+Ft,Pr=lr-Ft;yt[Yt]=fr+Mr,yt[Yt+4]=fr-Mr;var Tr=(Pr+pr)*.707106781;yt[Yt+2]=pr+Tr,yt[Yt+6]=pr-Tr,fr=wr+kt,Mr=kt+hr,Pr=hr+Ot;var jr=(fr-Pr)*.382683433,Be=.5411961*fr+jr,Pe=1.306562965*Pr+jr,Re=Mr*.707106781,Se=Ot+Re,Te=Ot-Re;yt[Yt+5]=Te+Be,yt[Yt+3]=Te-Be,yt[Yt+1]=Se+Pe,yt[Yt+7]=Se-Pe,Yt+=8}for(Yt=0,ar=0;ar<yr;++ar){Qt=yt[Yt],rr=yt[Yt+8],It=yt[Yt+16],_r=yt[Yt+24],cr=yt[Yt+32],Vt=yt[Yt+40],Gt=yt[Yt+48],er=yt[Yt+56];var Fe=Qt+er,Ge=Qt-er,Je=rr+Gt,Qe=rr-Gt,et=It+Vt,pt=It-Vt,at=_r+cr,Pt=_r-cr,Bt=Fe+at,wt=Fe-at,Mt=Je+et,Zt=Je-et;yt[Yt]=Bt+Mt,yt[Yt+32]=Bt-Mt;var ft=(Zt+wt)*.707106781;yt[Yt+16]=wt+ft,yt[Yt+48]=wt-ft,Bt=Pt+pt,Mt=pt+Qe,Zt=Qe+Ge;var Nt=(Bt-Zt)*.382683433,ir=.5411961*Bt+Nt,xr=1.306562965*Zt+Nt,Cr=Mt*.707106781,Br=Ge+Cr,gr=Ge-Cr;yt[Yt+40]=gr+ir,yt[Yt+24]=gr-ir,yt[Yt+8]=Br+xr,yt[Yt+56]=Br-xr,Yt++}var tr;for(ar=0;ar<Jt;++ar)tr=yt[ar]*qt[ar],Ee[ar]=tr>0?tr+.5|0:tr-.5|0;return Ee}function Ve(){vt(65504),vt(16),nt(74),nt(70),nt(73),nt(70),nt(0),nt(1),nt(1),nt(0),vt(1),vt(1),nt(0),nt(0)}function ht(yt){if(yt){vt(65505),yt[0]===69&&yt[1]===120&&yt[2]===105&&yt[3]===102?vt(yt.length+2):(vt(yt.length+5+2),nt(69),nt(120),nt(105),nt(102),nt(0));for(var qt=0;qt<yt.length;qt++)nt(yt[qt])}}function ct(yt,qt){vt(65472),vt(17),nt(8),vt(qt),vt(yt),nt(3),nt(1),nt(17),nt(0),nt(2),nt(17),nt(1),nt(3),nt(17),nt(1)}function St(){vt(65499),vt(132),nt(0);for(var yt=0;yt<64;yt++)nt(o[yt]);nt(1);for(var qt=0;qt<64;qt++)nt(u[qt])}function Ct(){vt(65476),vt(418),nt(0);for(var yt=0;yt<16;yt++)nt(ze[yt+1]);for(var qt=0;qt<=11;qt++)nt(Ye[qt]);nt(16);for(var Qt=0;Qt<16;Qt++)nt(Xe[Qt+1]);for(var rr=0;rr<=161;rr++)nt(tt[rr]);nt(1);for(var It=0;It<16;It++)nt(lt[It+1]);for(var _r=0;_r<=11;_r++)nt(_t[_r]);nt(17);for(var cr=0;cr<16;cr++)nt(bt[cr+1]);for(var Vt=0;Vt<=161;Vt++)nt(rt[Vt])}function Dt(yt){typeof yt>"u"||yt.constructor!==Array||yt.forEach(qt=>{if(typeof qt=="string"){vt(65534);var Qt=qt.length;vt(Qt+2);var rr;for(rr=0;rr<Qt;rr++)nt(qt.charCodeAt(rr))}})}function Tt(){vt(65498),vt(12),nt(3),nt(1),nt(0),nt(2),nt(17),nt(3),nt(17),nt(0),nt(63),nt(0)}function At(yt,qt,Qt,rr,It){for(var _r=It[0],cr=It[240],Vt,Gt=16,er=63,Yt=64,ar=it(yt,qt),yr=0;yr<Yt;++yr)xe[Ue[yr]]=ar[yr];var Jt=xe[0]-Qt;Qt=xe[0],Jt==0?ut(rr[0]):(Vt=32767+Jt,ut(rr[Ce[Vt]]),ut(he[Vt]));for(var br=63;br>0&&xe[br]==0;br--);if(br==0)return ut(_r),Qt;for(var Ot=1,lr;Ot<=br;){for(var hr=Ot;xe[Ot]==0&&Ot<=br;++Ot);var Ft=Ot-hr;if(Ft>=Gt){lr=Ft>>4;for(var kt=1;kt<=lr;++kt)ut(cr);Ft=Ft&15}Vt=32767+xe[Ot],ut(It[(Ft<<4)+Ce[Vt]]),ut(he[Vt]),Ot++}return br!=er&&ut(_r),Qt}function sr(){for(var yt=String.fromCharCode,qt=0;qt<256;qt++)Le[qt]=yt(qt)}this.encode=function(yt,qt){new Date().getTime(),qt&&Lt(qt),be=new Array,we=0,ve=7,vt(65496),Ve(),Dt(yt.comments),ht(yt.exifBuffer),St(),ct(yt.width,yt.height),Ct(),Tt();var Qt=0,rr=0,It=0;we=0,ve=7,this.encode.displayName="_encode_";for(var _r=yt.data,cr=yt.width,Vt=yt.height,Gt=cr*4,er,Yt=0,ar,yr,Jt,br,Ot,lr,hr,Ft;Yt<Vt;){for(er=0;er<Gt;){for(br=Gt*Yt+er,Ot=br,lr=-1,hr=0,Ft=0;Ft<64;Ft++)hr=Ft>>3,lr=(Ft&7)*4,Ot=br+hr*Gt+lr,Yt+hr>=Vt&&(Ot-=Gt*(Yt+1+hr-Vt)),er+lr>=Gt&&(Ot-=er+lr-Gt+4),ar=_r[Ot++],yr=_r[Ot++],Jt=_r[Ot++],ke[Ft]=(Ae[ar]+Ae[yr+256>>0]+Ae[Jt+512>>0]>>16)-128,De[Ft]=(Ae[ar+768>>0]+Ae[yr+1024>>0]+Ae[Jt+1280>>0]>>16)-128,Oe[Ft]=(Ae[ar+1280>>0]+Ae[yr+1536>>0]+Ae[Jt+1792>>0]>>16)-128;Qt=At(ke,l,Qt,m,S),rr=At(De,d,rr,y,X),It=At(Oe,d,It,y,X),er+=32}Yt+=8}if(ve>=0){var kt=[];kt[1]=ve+1,kt[0]=(1<<ve+1)-1,ut(kt)}return vt(65497),Buffer.from(be)};function Lt(yt){if(yt<=0&&(yt=1),yt>100&&(yt=100),Ie!=yt){var qt=0;yt<50?qt=Math.floor(5e3/yt):qt=Math.floor(200-yt*2),He(qt),Ie=yt}}function Kt(){var yt=new Date().getTime();i||(i=50),sr(),qe(),Ke(),st(),Lt(i),new Date().getTime()-yt}Kt()}r.exports=e;function e(i,s){typeof s>"u"&&(s=50);var o=new n(s),u=o.encode(i,s);return{data:u,width:i.width,height:i.height}}}(encoder)),encoder.exports}var decoder={exports:{}},hasRequiredDecoder;function requireDecoder(){return hasRequiredDecoder||(hasRequiredDecoder=1,function(r){var n=function(){var s=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),o=4017,u=799,l=3406,d=2276,m=1567,y=3784,S=5793,X=2896;function he(){}function Ce(De,Oe){for(var Le=0,Ae=[],Ie,Ue,ze=16;ze>0&&!De[ze-1];)ze--;Ae.push({children:[],index:0});var Ye=Ae[0],Xe;for(Ie=0;Ie<ze;Ie++){for(Ue=0;Ue<De[Ie];Ue++){for(Ye=Ae.pop(),Ye.children[Ye.index]=Oe[Le];Ye.index>0;){if(Ae.length===0)throw new Error("Could not recreate Huffman Table");Ye=Ae.pop()}for(Ye.index++,Ae.push(Ye);Ae.length<=Ie;)Ae.push(Xe={children:[],index:0}),Ye.children[Ye.index]=Xe.children,Ye=Xe;Le++}Ie+1<ze&&(Ae.push(Xe={children:[],index:0}),Ye.children[Ye.index]=Xe.children,Ye=Xe)}return Ae[0].children}function Ee(De,Oe,Le,Ae,Ie,Ue,ze,Ye,Xe,tt){Le.precision,Le.samplesPerLine,Le.scanLines;var lt=Le.mcusPerLine,_t=Le.progressive;Le.maxH,Le.maxV;var bt=Oe,rt=0,He=0;function We(){if(He>0)return He--,rt>>He&1;if(rt=De[Oe++],rt==255){var Vt=De[Oe++];if(Vt)throw new Error("unexpected marker: "+(rt<<8|Vt).toString(16))}return He=7,rt>>>7}function qe(Vt){for(var Gt=Vt,er;(er=We())!==null;){if(Gt=Gt[er],typeof Gt=="number")return Gt;if(typeof Gt!="object")throw new Error("invalid huffman sequence")}return null}function Ke(Vt){for(var Gt=0;Vt>0;){var er=We();if(er===null)return;Gt=Gt<<1|er,Vt--}return Gt}function st(Vt){var Gt=Ke(Vt);return Gt>=1<<Vt-1?Gt:Gt+(-1<<Vt)+1}function ut(Vt,Gt){var er=qe(Vt.huffmanTableDC),Yt=er===0?0:st(er);Gt[0]=Vt.pred+=Yt;for(var ar=1;ar<64;){var yr=qe(Vt.huffmanTableAC),Jt=yr&15,br=yr>>4;if(Jt===0){if(br<15)break;ar+=16;continue}ar+=br;var Ot=s[ar];Gt[Ot]=st(Jt),ar++}}function nt(Vt,Gt){var er=qe(Vt.huffmanTableDC),Yt=er===0?0:st(er)<<Xe;Gt[0]=Vt.pred+=Yt}function vt(Vt,Gt){Gt[0]|=We()<<Xe}var it=0;function Ve(Vt,Gt){if(it>0){it--;return}for(var er=Ue,Yt=ze;er<=Yt;){var ar=qe(Vt.huffmanTableAC),yr=ar&15,Jt=ar>>4;if(yr===0){if(Jt<15){it=Ke(Jt)+(1<<Jt)-1;break}er+=16;continue}er+=Jt;var br=s[er];Gt[br]=st(yr)*(1<<Xe),er++}}var ht=0,ct;function St(Vt,Gt){for(var er=Ue,Yt=ze,ar=0;er<=Yt;){var yr=s[er],Jt=Gt[yr]<0?-1:1;switch(ht){case 0:var br=qe(Vt.huffmanTableAC),Ot=br&15,ar=br>>4;if(Ot===0)ar<15?(it=Ke(ar)+(1<<ar),ht=4):(ar=16,ht=1);else{if(Ot!==1)throw new Error("invalid ACn encoding");ct=st(Ot),ht=ar?2:3}continue;case 1:case 2:Gt[yr]?Gt[yr]+=(We()<<Xe)*Jt:(ar--,ar===0&&(ht=ht==2?3:0));break;case 3:Gt[yr]?Gt[yr]+=(We()<<Xe)*Jt:(Gt[yr]=ct<<Xe,ht=0);break;case 4:Gt[yr]&&(Gt[yr]+=(We()<<Xe)*Jt);break}er++}ht===4&&(it--,it===0&&(ht=0))}function Ct(Vt,Gt,er,Yt,ar){var yr=er/lt|0,Jt=er%lt,br=yr*Vt.v+Yt,Ot=Jt*Vt.h+ar;Vt.blocks[br]===void 0&&tt.tolerantDecoding||Gt(Vt,Vt.blocks[br][Ot])}function Dt(Vt,Gt,er){var Yt=er/Vt.blocksPerLine|0,ar=er%Vt.blocksPerLine;Vt.blocks[Yt]===void 0&&tt.tolerantDecoding||Gt(Vt,Vt.blocks[Yt][ar])}var Tt=Ae.length,At,sr,Lt,Kt,yt,qt;_t?Ue===0?qt=Ye===0?nt:vt:qt=Ye===0?Ve:St:qt=ut;var Qt=0,rr,It;Tt==1?It=Ae[0].blocksPerLine*Ae[0].blocksPerColumn:It=lt*Le.mcusPerColumn,Ie||(Ie=It);for(var _r,cr;Qt<It;){for(sr=0;sr<Tt;sr++)Ae[sr].pred=0;if(it=0,Tt==1)for(At=Ae[0],yt=0;yt<Ie;yt++)Dt(At,qt,Qt),Qt++;else for(yt=0;yt<Ie;yt++){for(sr=0;sr<Tt;sr++)for(At=Ae[sr],_r=At.h,cr=At.v,Lt=0;Lt<cr;Lt++)for(Kt=0;Kt<_r;Kt++)Ct(At,qt,Qt,Lt,Kt);if(Qt++,Qt===It)break}if(Qt===It)do{if(De[Oe]===255&&De[Oe+1]!==0)break;Oe+=1}while(Oe<De.length-2);if(He=0,rr=De[Oe]<<8|De[Oe+1],rr<65280)throw new Error("marker was not found");if(rr>=65488&&rr<=65495)Oe+=2;else break}return Oe-bt}function xe(De,Oe){var Le=[],Ae=Oe.blocksPerLine,Ie=Oe.blocksPerColumn,Ue=Ae<<3,ze=new Int32Array(64),Ye=new Uint8Array(64);function Xe(Ke,st,ut){var nt=Oe.quantizationTable,vt,it,Ve,ht,ct,St,Ct,Dt,Tt,At=ut,sr;for(sr=0;sr<64;sr++)At[sr]=Ke[sr]*nt[sr];for(sr=0;sr<8;++sr){var Lt=8*sr;if(At[1+Lt]==0&&At[2+Lt]==0&&At[3+Lt]==0&&At[4+Lt]==0&&At[5+Lt]==0&&At[6+Lt]==0&&At[7+Lt]==0){Tt=S*At[0+Lt]+512>>10,At[0+Lt]=Tt,At[1+Lt]=Tt,At[2+Lt]=Tt,At[3+Lt]=Tt,At[4+Lt]=Tt,At[5+Lt]=Tt,At[6+Lt]=Tt,At[7+Lt]=Tt;continue}vt=S*At[0+Lt]+128>>8,it=S*At[4+Lt]+128>>8,Ve=At[2+Lt],ht=At[6+Lt],ct=X*(At[1+Lt]-At[7+Lt])+128>>8,Dt=X*(At[1+Lt]+At[7+Lt])+128>>8,St=At[3+Lt]<<4,Ct=At[5+Lt]<<4,Tt=vt-it+1>>1,vt=vt+it+1>>1,it=Tt,Tt=Ve*y+ht*m+128>>8,Ve=Ve*m-ht*y+128>>8,ht=Tt,Tt=ct-Ct+1>>1,ct=ct+Ct+1>>1,Ct=Tt,Tt=Dt+St+1>>1,St=Dt-St+1>>1,Dt=Tt,Tt=vt-ht+1>>1,vt=vt+ht+1>>1,ht=Tt,Tt=it-Ve+1>>1,it=it+Ve+1>>1,Ve=Tt,Tt=ct*d+Dt*l+2048>>12,ct=ct*l-Dt*d+2048>>12,Dt=Tt,Tt=St*u+Ct*o+2048>>12,St=St*o-Ct*u+2048>>12,Ct=Tt,At[0+Lt]=vt+Dt,At[7+Lt]=vt-Dt,At[1+Lt]=it+Ct,At[6+Lt]=it-Ct,At[2+Lt]=Ve+St,At[5+Lt]=Ve-St,At[3+Lt]=ht+ct,At[4+Lt]=ht-ct}for(sr=0;sr<8;++sr){var Kt=sr;if(At[8+Kt]==0&&At[16+Kt]==0&&At[24+Kt]==0&&At[32+Kt]==0&&At[40+Kt]==0&&At[48+Kt]==0&&At[56+Kt]==0){Tt=S*ut[sr+0]+8192>>14,At[0+Kt]=Tt,At[8+Kt]=Tt,At[16+Kt]=Tt,At[24+Kt]=Tt,At[32+Kt]=Tt,At[40+Kt]=Tt,At[48+Kt]=Tt,At[56+Kt]=Tt;continue}vt=S*At[0+Kt]+2048>>12,it=S*At[32+Kt]+2048>>12,Ve=At[16+Kt],ht=At[48+Kt],ct=X*(At[8+Kt]-At[56+Kt])+2048>>12,Dt=X*(At[8+Kt]+At[56+Kt])+2048>>12,St=At[24+Kt],Ct=At[40+Kt],Tt=vt-it+1>>1,vt=vt+it+1>>1,it=Tt,Tt=Ve*y+ht*m+2048>>12,Ve=Ve*m-ht*y+2048>>12,ht=Tt,Tt=ct-Ct+1>>1,ct=ct+Ct+1>>1,Ct=Tt,Tt=Dt+St+1>>1,St=Dt-St+1>>1,Dt=Tt,Tt=vt-ht+1>>1,vt=vt+ht+1>>1,ht=Tt,Tt=it-Ve+1>>1,it=it+Ve+1>>1,Ve=Tt,Tt=ct*d+Dt*l+2048>>12,ct=ct*l-Dt*d+2048>>12,Dt=Tt,Tt=St*u+Ct*o+2048>>12,St=St*o-Ct*u+2048>>12,Ct=Tt,At[0+Kt]=vt+Dt,At[56+Kt]=vt-Dt,At[8+Kt]=it+Ct,At[48+Kt]=it-Ct,At[16+Kt]=Ve+St,At[40+Kt]=Ve-St,At[24+Kt]=ht+ct,At[32+Kt]=ht-ct}for(sr=0;sr<64;++sr){var yt=128+(At[sr]+8>>4);st[sr]=yt<0?0:yt>255?255:yt}}ke(Ue*Ie*8);for(var tt,lt,_t=0;_t<Ie;_t++){var bt=_t<<3;for(tt=0;tt<8;tt++)Le.push(new Uint8Array(Ue));for(var rt=0;rt<Ae;rt++){Xe(Oe.blocks[_t][rt],Ye,ze);var He=0,We=rt<<3;for(lt=0;lt<8;lt++){var qe=Le[bt+lt];for(tt=0;tt<8;tt++)qe[We+tt]=Ye[He++]}}}return Le}function be(De){return De<0?0:De>255?255:De}he.prototype={load:function(Oe){var Le=new XMLHttpRequest;Le.open("GET",Oe,!0),Le.responseType="arraybuffer",Le.onload=(function(){var Ae=new Uint8Array(Le.response||Le.mozResponseArrayBuffer);this.parse(Ae),this.onload&&this.onload()}).bind(this),Le.send(null)},parse:function(Oe){var Le=this.opts.maxResolutionInMP*1e3*1e3,Ae=0;Oe.length;function Ie(){var Jt=Oe[Ae]<<8|Oe[Ae+1];return Ae+=2,Jt}function Ue(){var Jt=Ie(),br=Oe.subarray(Ae,Ae+Jt-2);return Ae+=br.length,br}function ze(Jt){var br=1,Ot=1,lr,hr;for(hr in Jt.components)Jt.components.hasOwnProperty(hr)&&(lr=Jt.components[hr],br<lr.h&&(br=lr.h),Ot<lr.v&&(Ot=lr.v));var Ft=Math.ceil(Jt.samplesPerLine/8/br),kt=Math.ceil(Jt.scanLines/8/Ot);for(hr in Jt.components)if(Jt.components.hasOwnProperty(hr)){lr=Jt.components[hr];var Xt=Math.ceil(Math.ceil(Jt.samplesPerLine/8)*lr.h/br),wr=Math.ceil(Math.ceil(Jt.scanLines/8)*lr.v/Ot),fr=Ft*lr.h,pr=kt*lr.v,Mr=pr*fr,Pr=[];ke(Mr*256);for(var Tr=0;Tr<pr;Tr++){for(var jr=[],Be=0;Be<fr;Be++)jr.push(new Int32Array(64));Pr.push(jr)}lr.blocksPerLine=Xt,lr.blocksPerColumn=wr,lr.blocks=Pr}Jt.maxH=br,Jt.maxV=Ot,Jt.mcusPerLine=Ft,Jt.mcusPerColumn=kt}var Ye=null,Xe=null,tt,lt,_t=[],bt=[],rt=[],He=[],We=Ie(),qe=-1;if(this.comments=[],We!=65496)throw new Error("SOI not found");for(We=Ie();We!=65497;){var Ke,st;switch(We){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var ut=Ue();if(We===65534){var nt=String.fromCharCode.apply(null,ut);this.comments.push(nt)}We===65504&&ut[0]===74&&ut[1]===70&&ut[2]===73&&ut[3]===70&&ut[4]===0&&(Ye={version:{major:ut[5],minor:ut[6]},densityUnits:ut[7],xDensity:ut[8]<<8|ut[9],yDensity:ut[10]<<8|ut[11],thumbWidth:ut[12],thumbHeight:ut[13],thumbData:ut.subarray(14,14+3*ut[12]*ut[13])}),We===65505&&ut[0]===69&&ut[1]===120&&ut[2]===105&&ut[3]===102&&ut[4]===0&&(this.exifBuffer=ut.subarray(5,ut.length)),We===65518&&ut[0]===65&&ut[1]===100&&ut[2]===111&&ut[3]===98&&ut[4]===101&&ut[5]===0&&(Xe={version:ut[6],flags0:ut[7]<<8|ut[8],flags1:ut[9]<<8|ut[10],transformCode:ut[11]});break;case 65499:for(var vt=Ie(),it=vt+Ae-2;Ae<it;){var Ve=Oe[Ae++];ke(256);var ht=new Int32Array(64);if(Ve>>4)if(Ve>>4===1)for(st=0;st<64;st++){var ct=s[st];ht[ct]=Ie()}else throw new Error("DQT: invalid table spec");else for(st=0;st<64;st++){var ct=s[st];ht[ct]=Oe[Ae++]}_t[Ve&15]=ht}break;case 65472:case 65473:case 65474:Ie(),tt={},tt.extended=We===65473,tt.progressive=We===65474,tt.precision=Oe[Ae++],tt.scanLines=Ie(),tt.samplesPerLine=Ie(),tt.components={},tt.componentsOrder=[];var St=tt.scanLines*tt.samplesPerLine;if(St>Le){var Ct=Math.ceil((St-Le)/1e6);throw new Error(`maxResolutionInMP limit exceeded by ${Ct}MP`)}var Dt=Oe[Ae++],Tt;for(Ke=0;Ke<Dt;Ke++){Tt=Oe[Ae];var At=Oe[Ae+1]>>4,sr=Oe[Ae+1]&15,Lt=Oe[Ae+2];if(At<=0||sr<=0)throw new Error("Invalid sampling factor, expected values above 0");tt.componentsOrder.push(Tt),tt.components[Tt]={h:At,v:sr,quantizationIdx:Lt},Ae+=3}ze(tt),bt.push(tt);break;case 65476:var Kt=Ie();for(Ke=2;Ke<Kt;){var yt=Oe[Ae++],qt=new Uint8Array(16),Qt=0;for(st=0;st<16;st++,Ae++)Qt+=qt[st]=Oe[Ae];ke(16+Qt);var rr=new Uint8Array(Qt);for(st=0;st<Qt;st++,Ae++)rr[st]=Oe[Ae];Ke+=17+Qt,(yt>>4?rt:He)[yt&15]=Ce(qt,rr)}break;case 65501:Ie(),lt=Ie();break;case 65500:Ie(),Ie();break;case 65498:Ie();var It=Oe[Ae++],_r=[],cr;for(Ke=0;Ke<It;Ke++){cr=tt.components[Oe[Ae++]];var Vt=Oe[Ae++];cr.huffmanTableDC=He[Vt>>4],cr.huffmanTableAC=rt[Vt&15],_r.push(cr)}var Gt=Oe[Ae++],er=Oe[Ae++],Yt=Oe[Ae++],ar=Ee(Oe,Ae,tt,_r,lt,Gt,er,Yt>>4,Yt&15,this.opts);Ae+=ar;break;case 65535:Oe[Ae]!==255&&Ae--;break;default:if(Oe[Ae-3]==255&&Oe[Ae-2]>=192&&Oe[Ae-2]<=254){Ae-=3;break}else if(We===224||We==225){if(qe!==-1)throw new Error(`first unknown JPEG marker at offset ${qe.toString(16)}, second unknown JPEG marker ${We.toString(16)} at offset ${(Ae-1).toString(16)}`);qe=Ae-1;const Jt=Ie();if(Oe[Ae+Jt-2]===255){Ae+=Jt-2;break}}throw new Error("unknown JPEG marker "+We.toString(16))}We=Ie()}if(bt.length!=1)throw new Error("only single frame JPEGs supported");for(var Ke=0;Ke<bt.length;Ke++){var yr=bt[Ke].components;for(var st in yr)yr[st].quantizationTable=_t[yr[st].quantizationIdx],delete yr[st].quantizationIdx}this.width=tt.samplesPerLine,this.height=tt.scanLines,this.jfif=Ye,this.adobe=Xe,this.components=[];for(var Ke=0;Ke<tt.componentsOrder.length;Ke++){var cr=tt.components[tt.componentsOrder[Ke]];this.components.push({lines:xe(tt,cr),scaleX:cr.h/tt.maxH,scaleY:cr.v/tt.maxV})}},getData:function(Oe,Le){var Ae=this.width/Oe,Ie=this.height/Le,Ue,ze,Ye,Xe,tt,lt,_t,bt,rt,He,We=0,qe,Ke,st,ut,nt,vt,it,Ve,ht,ct,St,Ct=Oe*Le*this.components.length;ke(Ct);var Dt=new Uint8Array(Ct);switch(this.components.length){case 1:for(Ue=this.components[0],He=0;He<Le;He++)for(tt=Ue.lines[0|He*Ue.scaleY*Ie],rt=0;rt<Oe;rt++)qe=tt[0|rt*Ue.scaleX*Ae],Dt[We++]=qe;break;case 2:for(Ue=this.components[0],ze=this.components[1],He=0;He<Le;He++)for(tt=Ue.lines[0|He*Ue.scaleY*Ie],lt=ze.lines[0|He*ze.scaleY*Ie],rt=0;rt<Oe;rt++)qe=tt[0|rt*Ue.scaleX*Ae],Dt[We++]=qe,qe=lt[0|rt*ze.scaleX*Ae],Dt[We++]=qe;break;case 3:for(St=!0,this.adobe&&this.adobe.transformCode?St=!0:typeof this.opts.colorTransform<"u"&&(St=!!this.opts.colorTransform),Ue=this.components[0],ze=this.components[1],Ye=this.components[2],He=0;He<Le;He++)for(tt=Ue.lines[0|He*Ue.scaleY*Ie],lt=ze.lines[0|He*ze.scaleY*Ie],_t=Ye.lines[0|He*Ye.scaleY*Ie],rt=0;rt<Oe;rt++)St?(qe=tt[0|rt*Ue.scaleX*Ae],Ke=lt[0|rt*ze.scaleX*Ae],st=_t[0|rt*Ye.scaleX*Ae],Ve=be(qe+1.402*(st-128)),ht=be(qe-.3441363*(Ke-128)-.71413636*(st-128)),ct=be(qe+1.772*(Ke-128))):(Ve=tt[0|rt*Ue.scaleX*Ae],ht=lt[0|rt*ze.scaleX*Ae],ct=_t[0|rt*Ye.scaleX*Ae]),Dt[We++]=Ve,Dt[We++]=ht,Dt[We++]=ct;break;case 4:if(!this.adobe)throw new Error("Unsupported color mode (4 components)");for(St=!1,this.adobe&&this.adobe.transformCode?St=!0:typeof this.opts.colorTransform<"u"&&(St=!!this.opts.colorTransform),Ue=this.components[0],ze=this.components[1],Ye=this.components[2],Xe=this.components[3],He=0;He<Le;He++)for(tt=Ue.lines[0|He*Ue.scaleY*Ie],lt=ze.lines[0|He*ze.scaleY*Ie],_t=Ye.lines[0|He*Ye.scaleY*Ie],bt=Xe.lines[0|He*Xe.scaleY*Ie],rt=0;rt<Oe;rt++)St?(qe=tt[0|rt*Ue.scaleX*Ae],Ke=lt[0|rt*ze.scaleX*Ae],st=_t[0|rt*Ye.scaleX*Ae],ut=bt[0|rt*Xe.scaleX*Ae],nt=255-be(qe+1.402*(st-128)),vt=255-be(qe-.3441363*(Ke-128)-.71413636*(st-128)),it=255-be(qe+1.772*(Ke-128))):(nt=tt[0|rt*Ue.scaleX*Ae],vt=lt[0|rt*ze.scaleX*Ae],it=_t[0|rt*Ye.scaleX*Ae],ut=bt[0|rt*Xe.scaleX*Ae]),Dt[We++]=255-nt,Dt[We++]=255-vt,Dt[We++]=255-it,Dt[We++]=255-ut;break;default:throw new Error("Unsupported color mode")}return Dt},copyToImageData:function(Oe,Le){var Ae=Oe.width,Ie=Oe.height,Ue=Oe.data,ze=this.getData(Ae,Ie),Ye=0,Xe=0,tt,lt,_t,bt,rt,He,We,qe,Ke;switch(this.components.length){case 1:for(lt=0;lt<Ie;lt++)for(tt=0;tt<Ae;tt++)_t=ze[Ye++],Ue[Xe++]=_t,Ue[Xe++]=_t,Ue[Xe++]=_t,Le&&(Ue[Xe++]=255);break;case 3:for(lt=0;lt<Ie;lt++)for(tt=0;tt<Ae;tt++)We=ze[Ye++],qe=ze[Ye++],Ke=ze[Ye++],Ue[Xe++]=We,Ue[Xe++]=qe,Ue[Xe++]=Ke,Le&&(Ue[Xe++]=255);break;case 4:for(lt=0;lt<Ie;lt++)for(tt=0;tt<Ae;tt++)rt=ze[Ye++],He=ze[Ye++],_t=ze[Ye++],bt=ze[Ye++],We=255-be(rt*(1-bt/255)+bt),qe=255-be(He*(1-bt/255)+bt),Ke=255-be(_t*(1-bt/255)+bt),Ue[Xe++]=We,Ue[Xe++]=qe,Ue[Xe++]=Ke,Le&&(Ue[Xe++]=255);break;default:throw new Error("Unsupported color mode")}}};var we=0,ve=0;function ke(De=0){var Oe=we+De;if(Oe>ve){var Le=Math.ceil((Oe-ve)/1024/1024);throw new Error(`maxMemoryUsageInMB limit exceeded by at least ${Le}MB`)}we=Oe}return he.resetMaxMemoryUsage=function(De){we=0,ve=De},he.getBytesAllocated=function(){return we},he.requestMemoryAllocation=ke,he}();r.exports=e;function e(i,s={}){var o={colorTransform:void 0,useTArray:!1,formatAsRGBA:!0,tolerantDecoding:!0,maxResolutionInMP:100,maxMemoryUsageInMB:512},u={...o,...s},l=new Uint8Array(i),d=new n;d.opts=u,n.resetMaxMemoryUsage(u.maxMemoryUsageInMB*1024*1024),d.parse(l);var m=u.formatAsRGBA?4:3,y=d.width*d.height*m;try{n.requestMemoryAllocation(y);var S={width:d.width,height:d.height,exifBuffer:d.exifBuffer,data:u.useTArray?new Uint8Array(y):Buffer.alloc(y)};d.comments.length>0&&(S.comments=d.comments)}catch(X){throw X instanceof RangeError?new Error("Could not allocate enough memory for the image. Required: "+y):X instanceof ReferenceError&&X.message==="Buffer is not defined"?new Error("Buffer is not globally defined in this environment. Consider setting useTArray to true"):X}return d.copyToImageData(S,u.formatAsRGBA),S}}(decoder)),decoder.exports}var jpegJs,hasRequiredJpegJs;function requireJpegJs(){if(hasRequiredJpegJs)return jpegJs;hasRequiredJpegJs=1;var r=requireEncoder(),n=requireDecoder();return jpegJs={encode:r,decode:n},jpegJs}var jpegJsExports=requireJpegJs();let chars$1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup=new Uint8Array(256);for(let r=0;r<chars$1.length;r++)lookup[chars$1.charCodeAt(r)]=r;function encode(r){let n,e=r.length,i="";for(n=0;n<e;n+=3)i+=chars$1[r[n]>>2],i+=chars$1[(r[n]&3)<<4|r[n+1]>>4],i+=chars$1[(r[n+1]&15)<<2|r[n+2]>>6],i+=chars$1[r[n+2]&63];return e%3===2?i=`${i.substring(0,i.length-1)}=`:e%3===1&&(i=`${i.substring(0,i.length-2)}==`),i}function decode$1(r){let n=r.length*.75,e=r.length,i=0,s,o,u,l;r[r.length-1]==="="&&(n--,r[r.length-2]==="="&&n--);const d=new Uint8Array(n);for(let m=0;m<e;m+=4)s=lookup[r.charCodeAt(m)],o=lookup[r.charCodeAt(m+1)],u=lookup[r.charCodeAt(m+2)],l=lookup[r.charCodeAt(m+3)],d[i++]=s<<2|o>>4,d[i++]=(o&15)<<4|u>>2,d[i++]=(u&3)<<6|l&63;return d}function toBase64URL(r,n){const e=encode(r);return`data:${n};base64,${e}`}const ImageData=self.ImageData,DOMImage=self.Image;function createCanvas(r,n){let e=self.document.createElement("canvas");return e.width=r,e.height=n,e}function fetchBinary(r,{withCredentials:n=!1}={}){return new Promise(function(e,i){let s=new self.XMLHttpRequest;s.open("GET",r,!0),s.responseType="arraybuffer",s.withCredentials=n,s.onload=function(o){this.status!==200?i(o):e(this.response)},s.onerror=i,s.send()})}function createWriteStream(){throw new Error("createWriteStream does not exist in the browser")}function writeFile(){throw new Error("writeFile does not exist in the browser")}function getType(r){return r.includes("/")||(r=`image/${r}`),r}function encodeJpeg(r,n={}){const e={width:r.width,height:r.height,data:r.getRGBAData()};return jpegJsExports.encode(e,n.quality).data}function encodePng(r,n){const e={width:r.width,height:r.height,channels:r.channels,depth:r.bitDepth,data:r.data};return(e.depth===1||e.depth===32)&&(e.depth=8,e.channels=4,e.data=r.getRGBAData()),encodePng$1(e,n)}const exportMethods={save(r,n={}){const{useCanvas:e=!1,encoder:i=void 0}=n;let{format:s}=n;if(!s){const o=/\.(?<format>[a-zA-Z]+)$/.exec(r);o&&(s=o.groups.format.toLowerCase())}if(!s)throw new Error("file format not provided");return new Promise((o,u)=>{let l,d;switch(s.toLowerCase()){case"png":{e?l=this.getCanvas().pngStream():d=encodePng(this,i);break}case"jpg":case"jpeg":e?l=this.getCanvas().jpegStream():d=encodeJpeg(this,i);break;case"bmp":d=srcExports$4.encode(this,i);break;default:throw new RangeError(`invalid output format: ${s}`)}if(l){let m=createWriteStream();m.on("finish",o),m.on("error",u),l.pipe(m)}else d&&writeFile()})},toDataURL(r="image/png",n={}){typeof r=="object"&&(n=r,r="image/png");const{useCanvas:e=!1,encoder:i=void 0}=n;r=getType(r);function s(o,u){const l=o(u,i);return toBase64URL(l,r)}return r==="image/bmp"?s(srcExports$4.encode,this):r==="image/png"&&!e?s(encodePng,this):r==="image/jpeg"&&!e?s(encodeJpeg,this):this.getCanvas().toDataURL(r)},toBuffer(r={}){const{format:n="png",encoder:e=void 0}=r;switch(n.toLowerCase()){case"png":return encodePng(this,e);case"jpeg":case"jpg":return encodeJpeg(this,e);case"bmp":return srcExports$4.encode(this,e);default:throw new RangeError(`invalid output format: ${n}`)}},toBase64(r="image/png",n={}){if(n.async)return this.toDataURL(r,n).then(function(e){return e.substring(e.indexOf(",")+1)});{const e=this.toDataURL(r,n);return e.substring(e.indexOf(",")+1)}},toBlob(r="image/png",n=.8){return canvasToBlob(this.getCanvas(),r,n)},getCanvas(){const r=new ImageData(this.getRGBAData({clamped:!0}),this.width,this.height);let n=createCanvas(this.width,this.height);return n.getContext("2d").putImageData(r,0,0),n}};function setExportMethods(r){for(const n in exportMethods)r.prototype[n]=exportMethods[n]}var hasOwn$1={exports:{}};const name$1="has-own",version$1="1.0.1",description$1="A safer .hasOwnProperty() - hasOwn(name, obj)",main$1="index.js",scripts$1={test:"make test"},author$1="Aaron Heckmann <aaron.heckmann+github@gmail.com>",license$1="MIT",repository$1={type:"git",url:"git://github.com/aheckmann/has-own.git"},homepage$1="https://github.com/aheckmann/has-own/",devDependencies$1={mocha:"^6.2.2"},require$$0$3={name:name$1,version:version$1,description:description$1,main:main$1,scripts:scripts$1,author:author$1,license:license$1,repository:repository$1,homepage:homepage$1,devDependencies:devDependencies$1};var hasRequiredHasOwn;function requireHasOwn(){return hasRequiredHasOwn||(hasRequiredHasOwn=1,function(r,n){var e=Object.prototype.hasOwnProperty;r.exports=n=function(s,o){return e.call(o,s)},n.version=require$$0$3.version}(hasOwn$1,hasOwn$1.exports)),hasOwn$1.exports}var hasOwnExports=requireHasOwn();const hasOwn=getDefaultExportFromCjs(hasOwnExports);let computedPropertyDescriptor$1={configurable:!0,enumerable:!1,get:void 0};function extendMethod(r,n,e={}){let{inPlace:i=!1,returnThis:s=!0,partialArgs:o=[]}=e;return i?Image.prototype[r]=function(...u){this.computed=null;let l=n.apply(this,[...o,...u]);return s?this:l}:Image.prototype[r]=function(...u){return n.apply(this,[...o,...u])},Image}function extendProperty(r,n,e={}){let{partialArgs:i=[]}=e;return computedPropertyDescriptor$1.get=function(){if(this.computed===null)this.computed={};else if(hasOwn(r,this.computed))return this.computed[r];let s=n.apply(this,i);return this.computed[r]=s,s},Object.defineProperty(Image.prototype,r,computedPropertyDescriptor$1),Image}const GREY$1="GREY",RGB$1="RGB",HSL="HSL",HSV="HSV",CMYK$1="CMYK",ColorModel=Object.freeze(Object.defineProperty({__proto__:null,CMYK:CMYK$1,GREY:GREY$1,HSL,HSV,RGB:RGB$1},Symbol.toStringTag,{value:"Module"}));function getRGBAData(r={}){const{clamped:n}=r;this.checkProcessable("getRGBAData",{components:[1,3],bitDepth:[1,8,16,32]});const e=this.width*this.height*4;let i=n?new Uint8ClampedArray(e):new Uint8Array(e);return this.bitDepth===1?fillDataFromBinary(this,i):this.bitDepth===32?(this.checkProcessable("getRGBAData",{alpha:0}),this.components===1?fillDataFromGrey32(this,i):this.components===3&&(this.checkProcessable("getRGBAData",{colorModel:[RGB$1]}),fillDataFromRGB32(this,i))):this.components===1?fillDataFromGrey(this,i):this.components===3&&(this.checkProcessable("getRGBAData",{colorModel:[RGB$1]}),fillDataFromRGB(this,i)),this.alpha===1?(this.checkProcessable("getRGBAData",{bitDepth:[8,16]}),copyAlpha(this,i)):fillAlpha(this,i),i}function fillDataFromBinary(r,n){for(let e=0;e<r.size;e++){const i=r.getBit(e);n[e*4]=i*255,n[e*4+1]=i*255,n[e*4+2]=i*255}}function fillDataFromGrey32(r,n){const e=r.min[0],s=r.max[0]-e;for(let o=0;o<r.size;o++){const u=Math.floor(255*(r.data[o]-e)/s);n[o*4]=u,n[o*4+1]=u,n[o*4+2]=u}}function fillDataFromRGB32(r,n){const e=Math.min(...r.min),s=Math.max(...r.max)-e;for(let o=0;o<r.size;o++){const u=Math.floor(255*(r.data[o*3]-e)/s),l=Math.floor(255*(r.data[o*3+1]-e)/s),d=Math.floor(255*(r.data[o*3+2]-e)/s);n[o*4]=u,n[o*4+1]=l,n[o*4+2]=d}}function fillDataFromGrey(r,n){for(let e=0;e<r.size;e++)n[e*4]=r.data[e*r.channels]>>>r.bitDepth-8,n[e*4+1]=r.data[e*r.channels]>>>r.bitDepth-8,n[e*4+2]=r.data[e*r.channels]>>>r.bitDepth-8}function fillDataFromRGB(r,n){for(let e=0;e<r.size;e++)n[e*4]=r.data[e*r.channels]>>>r.bitDepth-8,n[e*4+1]=r.data[e*r.channels+1]>>>r.bitDepth-8,n[e*4+2]=r.data[e*r.channels+2]>>>r.bitDepth-8}function copyAlpha(r,n){for(let e=0;e<r.size;e++)n[e*4+3]=r.data[e*r.channels+r.components]>>r.bitDepth-8}function fillAlpha(r,n){for(let e=0;e<r.size;e++)n[e*4+3]=255}const BINARY="BINARY",GREY="GREY",GREYA="GREYA",RGB="RGB",RGBA="RGBA",CMYK="CMYK",CMYKA="CMYKA",kinds={};kinds[BINARY]={components:1,alpha:0,bitDepth:1,colorModel:GREY$1};kinds[GREYA]={components:1,alpha:1,bitDepth:8,colorModel:GREY$1};kinds[GREY]={components:1,alpha:0,bitDepth:8,colorModel:GREY$1};kinds[RGBA]={components:3,alpha:1,bitDepth:8,colorModel:RGB$1};kinds[RGB]={components:3,alpha:0,bitDepth:8,colorModel:RGB$1};kinds[CMYK]={components:4,alpha:0,bitDepth:8,colorModel:CMYK$1};kinds[CMYKA]={components:4,alpha:1,bitDepth:8,colorModel:CMYK$1};function getKind(r){const n=kinds[r];if(!n)throw new RangeError(`invalid image kind: ${r}`);return n}const validBitDepth=[1,8,16,32];function verifyKindDefinition(r){const{components:n,alpha:e,bitDepth:i,colorModel:s}=r;if(!Number.isInteger(n)||n<=0)throw new RangeError(`invalid components: ${n}. Must be a positive integer`);if(e!==0&&e!==1&&typeof e!="boolean")throw new TypeError(`invalid alpha: ${e}: must be a boolean, 0 or 1`);if(!validBitDepth.includes(i))throw new RangeError(`invalid bitDepth: ${i}. Must be one of ${validBitDepth.join(", ")}`);if(!ColorModel[s])throw new RangeError(`invalid colorModel: ${s}. Must be one of ${Object.keys(ColorModel).join(", ")}`)}function getTheoreticalPixelArraySize(r,n,e){let i=n*r;return e===1&&(i=Math.ceil(i/8)),i}function createPixelArray(r,n,e,i,s,o){const u=i*r;let l;switch(s){case 1:l=new Uint8Array(Math.ceil(u/8));break;case 8:l=new Uint8Array(u);break;case 16:l=new Uint16Array(u);break;case 32:l=new Float32Array(u);break;default:throw new Error(`Cannot create pixel array for bit depth ${s}`)}if(e)for(let d=n;d<l.length;d+=i)l[d]=o;return l}var src$5={},IOBuffer_1,hasRequiredIOBuffer;function requireIOBuffer(){if(hasRequiredIOBuffer)return IOBuffer_1;hasRequiredIOBuffer=1;const r=1024*8,n=[];class e{constructor(s,o){o=o||{},s===void 0&&(s=r),typeof s=="number"&&(s=new ArrayBuffer(s));let u=s.byteLength;const l=o.offset?o.offset>>>0:0;s.buffer&&(u=s.byteLength-l,s.byteLength!==s.buffer.byteLength?s=s.buffer.slice(s.byteOffset+l,s.byteOffset+s.byteLength):l?s=s.buffer.slice(l):s=s.buffer),this.buffer=s,this.length=u,this.byteLength=u,this.byteOffset=0,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer),this._increment=u||r,this._mark=0}available(s){return s===void 0&&(s=1),this.offset+s<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){this.littleEndian=!0}isBigEndian(){return!this.littleEndian}setBigEndian(){this.littleEndian=!1}skip(s){s===void 0&&(s=1),this.offset+=s}seek(s){this.offset=s}mark(){this._mark=this.offset}reset(){this.offset=this._mark}rewind(){this.offset=0}ensureAvailable(s){if(s===void 0&&(s=1),!this.available(s)){const o=this._increment+this._increment;this._increment=o;const u=this.length+o,l=new Uint8Array(u);l.set(new Uint8Array(this.buffer)),this.buffer=l.buffer,this.length=u,this._data=new DataView(this.buffer)}}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(s){s===void 0&&(s=1);for(var o=new Uint8Array(s),u=0;u<s;u++)o[u]=this.readByte();return o}readInt16(){var s=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,s}readUint16(){var s=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,s}readInt32(){var s=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,s}readUint32(){var s=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,s}readFloat32(){var s=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,s}readFloat64(){var s=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,s}readChar(){return String.fromCharCode(this.readInt8())}readChars(s){s===void 0&&(s=1),n.length=s;for(var o=0;o<s;o++)n[o]=this.readChar();return n.join("")}writeBoolean(s){this.writeUint8(s?255:0)}writeInt8(s){this.ensureAvailable(1),this._data.setInt8(this.offset++,s)}writeUint8(s){this.ensureAvailable(1),this._data.setUint8(this.offset++,s)}writeByte(s){this.writeUint8(s)}writeBytes(s){this.ensureAvailable(s.length);for(var o=0;o<s.length;o++)this._data.setUint8(this.offset++,s[o])}writeInt16(s){this.ensureAvailable(2),this._data.setInt16(this.offset,s,this.littleEndian),this.offset+=2}writeUint16(s){this.ensureAvailable(2),this._data.setUint16(this.offset,s,this.littleEndian),this.offset+=2}writeInt32(s){this.ensureAvailable(4),this._data.setInt32(this.offset,s,this.littleEndian),this.offset+=4}writeUint32(s){this.ensureAvailable(4),this._data.setUint32(this.offset,s,this.littleEndian),this.offset+=4}writeFloat32(s){this.ensureAvailable(4),this._data.setFloat32(this.offset,s,this.littleEndian),this.offset+=4}writeFloat64(s){this.ensureAvailable(8),this._data.setFloat64(this.offset,s,this.littleEndian),this.offset+=8}writeChar(s){this.writeUint8(s.charCodeAt(0))}writeChars(s){for(var o=0;o<s.length;o++)this.writeUint8(s.charCodeAt(o))}toArray(){return new Uint8Array(this.buffer,0,this.offset)}}return IOBuffer_1=e,IOBuffer_1}var src$4={},standard$1,hasRequiredStandard;function requireStandard(){if(hasRequiredStandard)return standard$1;hasRequiredStandard=1;const r={254:"NewSubfileType",255:"SubfileType",256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:"Threshholding",264:"CellWidth",265:"CellLength",266:"FillOrder",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",288:"FreeOffsets",289:"FreeByteCounts",290:"GrayResponseUnit",291:"GrayResponseCurve",296:"ResolutionUnit",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",320:"ColorMap",338:"ExtraSamples",33432:"Copyright",269:"DocumentName",285:"PageName",286:"XPosition",287:"YPosition",292:"T4Options",293:"T6Options",297:"PageNumber",301:"TransferFunction",317:"Predictor",318:"WhitePoint",319:"PrimaryChromaticities",321:"HalftoneHints",322:"TileWidth",323:"TileLength",324:"TileOffsets",325:"TileByteCounts",326:"BadFaxLines",327:"CleanFaxData",328:"ConsecutiveBadFaxLines",330:"SubIFDs",332:"InkSet",333:"InkNames",334:"NumberOfInks",336:"DotRange",337:"TargetPrinter",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",342:"TransferRange",343:"ClipPath",344:"XClipPathUnits",345:"YClipPathUnits",346:"Indexed",347:"JPEGTables",351:"OPIProxy",400:"GlobalParametersIFD",401:"ProfileType",402:"FaxProfile",403:"CodingMethods",404:"VersionYear",405:"ModeNumber",433:"Decode",434:"DefaultImageColor",512:"JPEGProc",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",515:"JPEGRestartInterval",517:"JPEGLosslessPredictors",518:"JPEGPointTransforms",519:"JPEGQTables",520:"JPEGDCTables",521:"JPEGACTables",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite",559:"StripRowCounts",700:"XMP",32781:"ImageID",34732:"ImageLayer",32932:"WangAnnotatio",33445:"MDFileTag",33446:"MDScalePixel",33447:"MDColorTable",33448:"MDLabName",33449:"MDSampleInfo",33450:"MDPrepDate",33451:"MDPrepTime",33452:"MDFileUnits",33550:"ModelPixelScaleTag",33723:"IPTC",33918:"INGRPacketDataTag",33919:"INGRFlagRegisters",33920:"IrasBTransformationMatrix",33922:"ModelTiepointTag",34264:"ModelTransformationTag",34377:"Photoshop",34665:"ExifIFD",34675:"ICCProfile",34735:"GeoKeyDirectoryTag",34736:"GeoDoubleParamsTag",34737:"GeoAsciiParamsTag",34853:"GPSIFD",34908:"HylaFAXFaxRecvParams",34909:"HylaFAXFaxSubAddress",34910:"HylaFAXFaxRecvTime",37724:"ImageSourceData",40965:"InteroperabilityIFD",42112:"GDAL_METADATA",42113:"GDAL_NODATA",50215:"OceScanjobDescription",50216:"OceApplicationSelector",50217:"OceIdentificationNumber",50218:"OceImageLogicCharacteristics",50706:"DNGVersion",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50710:"CFAPlaneColor",50711:"CFALayout",50712:"LinearizationTable",50713:"BlackLevelRepeatDim",50714:"BlackLevel",50715:"BlackLevelDeltaH",50716:"BlackLevelDeltaV",50717:"WhiteLevel",50718:"DefaultScale",50719:"DefaultCropOrigin",50720:"DefaultCropSize",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50733:"BayerGreenSplit",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"LensInfo",50737:"ChromaBlurRadius",50738:"AntiAliasStrength",50740:"DNGPrivateData",50741:"MakerNoteSafety",50778:"CalibrationIlluminant1",50779:"CalibrationIlluminant2",50780:"BestQualityScale",50784:"AliasLayerMetadata"},n={};for(var e in r)n[r[e]]=e;return standard$1={tagsById:r,tagsByName:n},standard$1}var exif$1,hasRequiredExif;function requireExif(){if(hasRequiredExif)return exif$1;hasRequiredExif=1;const r={33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:"ExifVersion",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBiasValue",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",37396:"SubjectArea",37500:"MakerNote",37510:"UserComment",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42240:"Gamma"},n={};for(var e in r)n[r[e]]=e;return exif$1={tagsById:r,tagsByName:n},exif$1}var gps$1,hasRequiredGps;function requireGps(){if(hasRequiredGps)return gps$1;hasRequiredGps=1;const r={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},n={};for(var e in r)n[r[e]]=e;return gps$1={tagsById:r,tagsByName:n},gps$1}var ifd,hasRequiredIfd;function requireIfd(){if(hasRequiredIfd)return ifd;hasRequiredIfd=1;const r={standard:requireStandard(),exif:requireExif(),gps:requireGps()};class n{constructor(i){if(!i)throw new Error("missing kind");this.data=null,this.fields=new Map,this.kind=i,this._map=null}get(i){if(typeof i=="number")return this.fields.get(i);if(typeof i=="string")return this.fields.get(r[this.kind].tagsByName[i]);throw new Error("expected a number or string")}get map(){if(!this._map){this._map={};const s=r[this.kind].tagsById;for(var i of this.fields.keys())s[i]&&(this._map[s[i]]=this.fields.get(i))}return this._map}}return ifd=n,ifd}var tiffIfd,hasRequiredTiffIfd;function requireTiffIfd(){if(hasRequiredTiffIfd)return tiffIfd;hasRequiredTiffIfd=1;const r=requireIfd(),n=/^(\d{4}):(\d{2}):(\d{2}) (\d{2}):(\d{2}):(\d{2})$/;class e extends r{constructor(){super("standard")}get size(){return this.width*this.height}get width(){return this.imageWidth}get height(){return this.imageLength}get components(){return this.samplesPerPixel}get date(){var o=new Date,u=n.exec(this.dateTime);return o.setFullYear(u[1],u[2]-1,u[3]),o.setHours(u[4],u[5],u[6]),o}get newSubfileType(){return this.get(254)}get imageWidth(){return this.get(256)}get imageLength(){return this.get(257)}get bitsPerSample(){return this.get(258)}get compression(){return this.get(259)||1}get type(){return this.get(262)}get fillOrder(){return this.get(266)||1}get documentName(){return this.get(269)}get imageDescription(){return this.get(270)}get stripOffsets(){return i(this.get(273))}get orientation(){return this.get(274)}get samplesPerPixel(){return this.get(277)}get rowsPerStrip(){return this.get(278)}get stripByteCounts(){return i(this.get(279))}get minSampleValue(){return this.get(280)||0}get maxSampleValue(){return this.get(281)||Math.pow(2,this.bitsPerSample)-1}get xResolution(){return this.get(282)}get yResolution(){return this.get(283)}get planarConfiguration(){return this.get(284)||1}get resolutionUnit(){return this.get(296)||2}get dateTime(){return this.get(306)}get predictor(){return this.get(317)||1}get sampleFormat(){return this.get(339)||1}get sMinSampleValue(){return this.get(340)||this.minSampleValue}get sMaxSampleValue(){return this.get(341)||this.maxSampleValue}}function i(s){return typeof s=="number"?[s]:s}return tiffIfd=e,tiffIfd}var ifdValue={},hasRequiredIfdValue;function requireIfdValue(){if(hasRequiredIfdValue)return ifdValue;hasRequiredIfdValue=1;var r=new Map([[1,[1,n]],[2,[1,e]],[3,[2,i]],[4,[4,s]],[5,[8,o]],[6,[1,u]],[7,[1,n]],[8,[2,l]],[9,[4,d]],[10,[8,m]],[11,[4,y]],[12,[8,S]]]);ifdValue.getByteLength=function(X,he){return r.get(X)[0]*he},ifdValue.readData=function(X,he,Ce){return r.get(he)[1](X,Ce)};function n(X,he){if(he===1)return X.readUint8();for(var Ce=new Uint8Array(he),Ee=0;Ee<he;Ee++)Ce[Ee]=X.readUint8();return Ce}function e(X,he){for(var Ce=[],Ee="",xe=0;xe<he;xe++){var be=String.fromCharCode(X.readUint8());be==="\0"?(Ce.push(Ee),Ee=""):Ee+=be}return Ce.length===1?Ce[0]:Ce}function i(X,he){if(he===1)return X.readUint16();for(var Ce=new Uint16Array(he),Ee=0;Ee<he;Ee++)Ce[Ee]=X.readUint16();return Ce}function s(X,he){if(he===1)return X.readUint32();for(var Ce=new Uint32Array(he),Ee=0;Ee<he;Ee++)Ce[Ee]=X.readUint32();return Ce}function o(X,he){if(he===1)return X.readUint32()/X.readUint32();for(var Ce=new Array(he),Ee=0;Ee<he;Ee++)Ce[Ee]=X.readUint32()/X.readUint32();return Ce}function u(X,he){if(he===1)return X.readInt8();for(var Ce=new Int8Array(he),Ee=0;Ee<he;Ee++)Ce[Ee]=X.readInt8();return Ce}function l(X,he){if(he===1)return X.readInt16();for(var Ce=new Int16Array(he),Ee=0;Ee<he;Ee++)Ce[Ee]=X.readInt16();return Ce}function d(X,he){if(he===1)return X.readInt32();for(var Ce=new Int32Array(he),Ee=0;Ee<he;Ee++)Ce[Ee]=X.readInt32();return Ce}function m(X,he){if(he===1)return X.readInt32()/X.readInt32();for(var Ce=new Array(he),Ee=0;Ee<he;Ee++)Ce[Ee]=X.readInt32()/X.readInt32();return Ce}function y(X,he){if(he===1)return X.readFloat32();for(var Ce=new Float32Array(he),Ee=0;Ee<he;Ee++)Ce[Ee]=X.readFloat32();return Ce}function S(X,he){if(he===1)return X.readFloat64();for(var Ce=new Float64Array(he),Ee=0;Ee<he;Ee++)Ce[Ee]=X.readFloat64();return Ce}return ifdValue}var tiffDecoder,hasRequiredTiffDecoder;function requireTiffDecoder(){if(hasRequiredTiffDecoder)return tiffDecoder;hasRequiredTiffDecoder=1;const r=requireIOBuffer(),n=requireIfd(),e=requireTiffIfd(),i=requireIfdValue(),s={ignoreImageData:!1,onlyFirst:!1};class o extends r{constructor(he,Ce){super(he,Ce),this._nextIFD=0}decode(he){he=Object.assign({},s,he);const Ce=[];for(this.decodeHeader();this._nextIFD;)if(Ce.push(this.decodeIFD(he)),he.onlyFirst)return Ce[0];return Ce}decodeHeader(){let he=this.readUint16();if(he===18761)this.setLittleEndian();else if(he===19789)this.setBigEndian();else throw new Error("invalid byte order: 0x"+he.toString(16));if(he=this.readUint16(),he!==42)throw new Error("not a TIFF file");this._nextIFD=this.readUint32()}decodeIFD(he){this.seek(this._nextIFD);var Ce;he.kind?Ce=new n(he.kind):Ce=new e;const Ee=this.readUint16();for(var xe=0;xe<Ee;xe++)this.decodeIFDEntry(Ce);return he.ignoreImageData||this.decodeImageData(Ce),this._nextIFD=this.readUint32(),Ce}decodeIFDEntry(he){const Ce=this.offset,Ee=this.readUint16(),xe=this.readUint16(),be=this.readUint32();if(xe<1||xe>12){this.skip(4);return}i.getByteLength(xe,be)>4&&this.seek(this.readUint32());const ve=i.readData(this,xe,be);if(he.fields.set(Ee,ve),Ee===34665||Ee===34853){let ke=this.offset,De;Ee===34665?De="exif":Ee===34853&&(De="gps"),this._nextIFD=ve,he[De]=this.decodeIFD({kind:De,ignoreImageData:!0}),this.offset=ke}this.seek(Ce),this.skip(12)}decodeImageData(he){const Ce=he.orientation;switch(Ce&&Ce!==1&&y("orientation",Ce),he.type){case 1:case 2:this.readStripData(he);break;default:y("image type",he.type);break}}readStripData(he){const Ce=he.width,Ee=he.height,xe=S(he.bitsPerSample),be=he.sampleFormat;let we=Ce*Ee;const ve=u(we,1,xe,be),ke=he.compression,Oe=he.rowsPerStrip*Ce,Le=he.stripOffsets,Ae=he.stripByteCounts;for(var Ie=0,Ue=0;Ue<Le.length;Ue++){var ze=this.getStripData(ke,Le[Ue],Ae[Ue]),Ye=we>Oe?Oe:we;we-=Ye,xe===8?Ie=l(ve,ze,Ie,Ye):xe===16?Ie=d(ve,ze,Ie,Ye,this.isLittleEndian()):xe===32&&be===3?Ie=m(ve,ze,Ie,Ye,this.isLittleEndian()):y("bitDepth",xe)}he.data=ve}getStripData(he,Ce,Ee){switch(he){case 1:return new DataView(this.buffer,Ce,Ee);case 2:case 32773:return y("Compression",he);default:throw new Error("invalid compression: "+he)}}}tiffDecoder=o;function u(X,he,Ce,Ee){return Ce===8?new Uint8Array(X*he):Ce===16?new Uint16Array(X*he):Ce===32&&Ee===3?new Float32Array(X*he):y("bit depth / sample format",Ce+" / "+Ee)}function l(X,he,Ce,Ee){for(var xe=0;xe<Ee;xe++)X[Ce++]=he.getUint8(xe);return Ce}function d(X,he,Ce,Ee,xe){for(var be=0;be<Ee*2;be+=2)X[Ce++]=he.getUint16(be,xe);return Ce}function m(X,he,Ce,Ee,xe){for(var be=0;be<Ee*4;be+=4)X[Ce++]=he.getFloat32(be,xe);return Ce}function y(X,he){throw new Error("Unsupported "+X+": "+he)}function S(X){if(X.length){const Ce=X;X=Ce[0];for(var he=0;he<Ce.length;he++)Ce[he]!==X&&y("bit depth",Ce)}return X}return tiffDecoder}var decode,hasRequiredDecode$1;function requireDecode$1(){if(hasRequiredDecode$1)return decode;hasRequiredDecode$1=1;const r=requireTiffDecoder();return decode=function(e,i){return new r(e,i).decode(i)},decode}var hasRequiredSrc$5;function requireSrc$5(){return hasRequiredSrc$5||(hasRequiredSrc$5=1,src$4.decode=requireDecode$1()),src$4}var decode_1,hasRequiredDecode;function requireDecode(){if(hasRequiredDecode)return decode_1;hasRequiredDecode=1;const r=requireIOBuffer(),n=requireSrc$5();function e(i){const s=new r(i),o={};if(s.setBigEndian(),s.readUint16()!==65496)throw new Error("SOI marker not found. Not a valid JPEG file");if(s.readUint16()===65505){s.readUint16();const d=s.readBytes(6);if(d[0]===69&&d[1]===120&&d[2]===105&&d[3]===102&&d[4]===0&&d[5]===0){const m=n.decode(s,{onlyFirst:!0,ignoreImageData:!0,offset:s.offset});o.exif=m}}return o}return decode_1=e,decode_1}var hasRequiredSrc$4;function requireSrc$4(){return hasRequiredSrc$4||(hasRequiredSrc$4=1,src$5.decode=requireDecode()),src$5}var srcExports$3=requireSrc$4(),imageType$1={exports:{}},fileType={exports:{}},hasRequiredFileType;function requireFileType(){return hasRequiredFileType||(hasRequiredFileType=1,function(module){const toBytes=r=>[...r].map(n=>n.charCodeAt(0)),xpiZipFilename=toBytes("META-INF/mozilla.rsa"),oxmlContentTypes=toBytes("[Content_Types].xml"),oxmlRels=toBytes("_rels/.rels");function readUInt64LE(r,n=0){let e=r[n],i=1,s=0;for(;++s<8;)i*=256,e+=r[n+s]*i;return e}const fileType=r=>{if(!(r instanceof Uint8Array||r instanceof ArrayBuffer||Buffer.isBuffer(r)))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`Buffer\` or \`ArrayBuffer\`, got \`${typeof r}\``);const n=r instanceof Uint8Array?r:new Uint8Array(r);if(!(n&&n.length>1))return null;const e=(s,o)=>{o=Object.assign({offset:0},o);for(let u=0;u<s.length;u++)if(o.mask){if(s[u]!==(o.mask[u]&n[u+o.offset]))return!1}else if(s[u]!==n[u+o.offset])return!1;return!0},i=(s,o)=>e(toBytes(s),o);if(e([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(e([137,80,78,71,13,10,26,10]))return{ext:"png",mime:"image/png"};if(e([71,73,70]))return{ext:"gif",mime:"image/gif"};if(e([87,69,66,80],{offset:8}))return{ext:"webp",mime:"image/webp"};if(e([70,76,73,70]))return{ext:"flif",mime:"image/flif"};if((e([73,73,42,0])||e([77,77,0,42]))&&e([67,82],{offset:8}))return{ext:"cr2",mime:"image/x-canon-cr2"};if(e([73,73,42,0])||e([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(e([66,77]))return{ext:"bmp",mime:"image/bmp"};if(e([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(e([56,66,80,83]))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(e([80,75,3,4])){if(e([109,105,109,101,116,121,112,101,97,112,112,108,105,99,97,116,105,111,110,47,101,112,117,98,43,122,105,112],{offset:30}))return{ext:"epub",mime:"application/epub+zip"};if(e(xpiZipFilename,{offset:30}))return{ext:"xpi",mime:"application/x-xpinstall"};if(i("mimetypeapplication/vnd.oasis.opendocument.text",{offset:30}))return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};if(i("mimetypeapplication/vnd.oasis.opendocument.spreadsheet",{offset:30}))return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};if(i("mimetypeapplication/vnd.oasis.opendocument.presentation",{offset:30}))return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};const s=(d,m=0)=>d.findIndex((y,S,X)=>S>=m&&X[S]===80&&X[S+1]===75&&X[S+2]===3&&X[S+3]===4);let o=0,u=!1,l=null;do{const d=o+30;if(u||(u=e(oxmlContentTypes,{offset:d})||e(oxmlRels,{offset:d})),l||(i("word/",{offset:d})?l={ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}:i("ppt/",{offset:d})?l={ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"}:i("xl/",{offset:d})&&(l={ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})),u&&l)return l;o=s(n,d)}while(o>=0);if(l)return l}if(e([80,75])&&(n[2]===3||n[2]===5||n[2]===7)&&(n[3]===4||n[3]===6||n[3]===8))return{ext:"zip",mime:"application/zip"};if(e([117,115,116,97,114],{offset:257}))return{ext:"tar",mime:"application/x-tar"};if(e([82,97,114,33,26,7])&&(n[6]===0||n[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(e([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(e([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(e([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(e([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(e([51,103,112,53])||e([0,0,0])&&e([102,116,121,112],{offset:4})&&(e([109,112,52,49],{offset:8})||e([109,112,52,50],{offset:8})||e([105,115,111,109],{offset:8})||e([105,115,111,50],{offset:8})||e([109,109,112,52],{offset:8})||e([77,52,86],{offset:8})||e([100,97,115,104],{offset:8})))return{ext:"mp4",mime:"video/mp4"};if(e([77,84,104,100]))return{ext:"mid",mime:"audio/midi"};if(e([26,69,223,163])){const s=n.subarray(4,4100),o=s.findIndex((u,l,d)=>d[l]===66&&d[l+1]===130);if(o!==-1){const u=o+3,l=d=>[...d].every((m,y)=>s[u+y]===m.charCodeAt(0));if(l("matroska"))return{ext:"mkv",mime:"video/x-matroska"};if(l("webm"))return{ext:"webm",mime:"video/webm"}}}if(e([0,0,0,20,102,116,121,112,113,116,32,32])||e([102,114,101,101],{offset:4})||e([102,116,121,112,113,116,32,32],{offset:4})||e([109,100,97,116],{offset:4})||e([109,111,111,118],{offset:4})||e([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(e([82,73,70,70])){if(e([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(e([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/vnd.wave"};if(e([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(e([48,38,178,117,142,102,207,17,166,217])){let s=30;do{const o=readUInt64LE(n,s+16);if(e([145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101],{offset:s})){if(e([64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43],{offset:s+24}))return{ext:"wma",mime:"audio/x-ms-wma"};if(e([192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43],{offset:s+24}))return{ext:"wmv",mime:"video/x-ms-asf"};break}s+=o}while(s+24<=n.length);return{ext:"asf",mime:"application/vnd.ms-asf"}}if(e([0,0,1,186])||e([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(e([102,116,121,112,51,103],{offset:4}))return{ext:"3gp",mime:"video/3gpp"};for(let s=0;s<2&&s<n.length-16;s++){if(e([73,68,51],{offset:s})||e([255,226],{offset:s,mask:[255,226]}))return{ext:"mp3",mime:"audio/mpeg"};if(e([255,228],{offset:s,mask:[255,228]}))return{ext:"mp2",mime:"audio/mpeg"};if(e([255,248],{offset:s,mask:[255,252]}))return{ext:"mp2",mime:"audio/mpeg"};if(e([255,240],{offset:s,mask:[255,252]}))return{ext:"mp4",mime:"audio/mpeg"}}if(e([102,116,121,112,77,52,65],{offset:4}))return{ext:"m4a",mime:"audio/mp4"};if(e([79,112,117,115,72,101,97,100],{offset:28}))return{ext:"opus",mime:"audio/opus"};if(e([79,103,103,83]))return e([128,116,104,101,111,114,97],{offset:28})?{ext:"ogv",mime:"video/ogg"}:e([1,118,105,100,101,111,0],{offset:28})?{ext:"ogm",mime:"video/ogg"}:e([127,70,76,65,67],{offset:28})?{ext:"oga",mime:"audio/ogg"}:e([83,112,101,101,120,32,32],{offset:28})?{ext:"spx",mime:"audio/ogg"}:e([1,118,111,114,98,105,115],{offset:28})?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"};if(e([102,76,97,67]))return{ext:"flac",mime:"audio/x-flac"};if(e([77,65,67,32]))return{ext:"ape",mime:"audio/ape"};if(e([119,118,112,107]))return{ext:"wv",mime:"audio/wavpack"};if(e([35,33,65,77,82,10]))return{ext:"amr",mime:"audio/amr"};if(e([37,80,68,70]))return{ext:"pdf",mime:"application/pdf"};if(e([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if((n[0]===67||n[0]===70)&&e([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(e([123,92,114,116,102]))return{ext:"rtf",mime:"application/rtf"};if(e([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(e([119,79,70,70])&&(e([0,1,0,0],{offset:4})||e([79,84,84,79],{offset:4})))return{ext:"woff",mime:"font/woff"};if(e([119,79,70,50])&&(e([0,1,0,0],{offset:4})||e([79,84,84,79],{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(e([76,80],{offset:34})&&(e([0,0,1],{offset:8})||e([1,0,2],{offset:8})||e([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(e([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(e([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(e([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(e([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(e([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(e([37,33]))return{ext:"ps",mime:"application/postscript"};if(e([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(e([83,81,76,105]))return{ext:"sqlite",mime:"application/x-sqlite3"};if(e([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(e([67,114,50,52]))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(e([77,83,67,70])||e([73,83,99,40]))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(e([33,60,97,114,99,104,62,10,100,101,98,105,97,110,45,98,105,110,97,114,121]))return{ext:"deb",mime:"application/x-deb"};if(e([33,60,97,114,99,104,62]))return{ext:"ar",mime:"application/x-unix-archive"};if(e([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(e([31,160])||e([31,157]))return{ext:"Z",mime:"application/x-compress"};if(e([76,90,73,80]))return{ext:"lz",mime:"application/x-lzip"};if(e([208,207,17,224,161,177,26,225]))return{ext:"msi",mime:"application/x-msi"};if(e([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(e([71],{offset:4})&&(e([71],{offset:192})||e([71],{offset:196})))return{ext:"mts",mime:"video/mp2t"};if(e([66,76,69,78,68,69,82]))return{ext:"blend",mime:"application/x-blender"};if(e([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(e([0,0,0,12,106,80,32,32,13,10,135,10])){if(e([106,112,50,32],{offset:20}))return{ext:"jp2",mime:"image/jp2"};if(e([106,112,120,32],{offset:20}))return{ext:"jpx",mime:"image/jpx"};if(e([106,112,109,32],{offset:20}))return{ext:"jpm",mime:"image/jpm"};if(e([109,106,112,50],{offset:20}))return{ext:"mj2",mime:"image/mj2"}}if(e([70,79,82,77]))return{ext:"aif",mime:"audio/aiff"};if(i("<?xml "))return{ext:"xml",mime:"application/xml"};if(e([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(e([102,116,121,112],{offset:4})){if(e([109,105,102,49],{offset:8}))return{ext:"heic",mime:"image/heif"};if(e([109,115,102,49],{offset:8}))return{ext:"heic",mime:"image/heif-sequence"};if(e([104,101,105,99],{offset:8})||e([104,101,105,120],{offset:8}))return{ext:"heic",mime:"image/heic"};if(e([104,101,118,99],{offset:8})||e([104,101,118,120],{offset:8}))return{ext:"heic",mime:"image/heic-sequence"}}return e([171,75,84,88,32,49,49,187,13,10,26,10])?{ext:"ktx",mime:"image/ktx"}:e([68,73,67,77],{offset:128})?{ext:"dcm",mime:"application/dicom"}:e([77,80,43])?{ext:"mpc",mime:"audio/x-musepack"}:e([77,80,67,75])?{ext:"mpc",mime:"audio/x-musepack"}:e([66,69,71,73,78,58])?{ext:"ics",mime:"text/calendar"}:e([103,108,84,70,2,0,0,0])?{ext:"glb",mime:"model/gltf-binary"}:e([212,195,178,161])||e([161,178,195,212])?{ext:"pcap",mime:"application/vnd.tcpdump.pcap"}:null};module.exports=fileType,module.exports.default=fileType,Object.defineProperty(fileType,"minimumBytes",{value:4100}),module.exports.stream=readableStream=>new Promise((resolve,reject)=>{const stream=eval("require")("stream");readableStream.once("readable",()=>{const r=new stream.PassThrough,n=readableStream.read(module.exports.minimumBytes)||readableStream.read();try{r.fileType=fileType(n)}catch(e){reject(e)}readableStream.unshift(n),stream.pipeline?resolve(stream.pipeline(readableStream,r,()=>{})):resolve(readableStream.pipe(r))})})}(fileType)),fileType.exports}var hasRequiredImageType;function requireImageType(){if(hasRequiredImageType)return imageType$1.exports;hasRequiredImageType=1;const r=requireFileType(),n=new Set(["jpg","png","gif","webp","flif","cr2","tif","bmp","jxr","psd","ico","bpg","jp2","jpm","jpx","heic","cur","dcm"]),e=i=>{const s=r(i);return n.has(s&&s.ext)?s:null};return imageType$1.exports=e,imageType$1.exports.default=e,Object.defineProperty(e,"minimumBytes",{value:r.minimumBytes}),imageType$1.exports}var imageTypeExports=requireImageType();const imageType=getDefaultExportFromCjs(imageTypeExports);function guessStripByteCounts(r){if(r.compression!==1)throw new Error("missing mandatory StripByteCounts field in compressed image");const n=r.rowsPerStrip*r.width*r.samplesPerPixel*(r.bitsPerSample/8);return new Array(r.stripOffsets.length).fill(n)}function applyHorizontalDifferencing8Bit(r,n,e){let i=0;for(;i<r.length;){for(let s=e;s<n*e;s+=e)for(let o=0;o<e;o++)r[i+s+o]=r[i+s+o]+r[i+s-(e-o)]&255;i+=n*e}}function applyHorizontalDifferencing16Bit(r,n,e){let i=0;for(;i<r.length;){for(let s=e;s<n*e;s+=e)for(let o=0;o<e;o++)r[i+s+o]=r[i+s+o]+r[i+s-(e-o)]&65535;i+=n*e}}const tagsById$2={33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:"ExifVersion",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBiasValue",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",37396:"SubjectArea",37500:"MakerNote",37510:"UserComment",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42240:"Gamma"},tagsByName$2={};for(let r in tagsById$2)tagsByName$2[tagsById$2[r]]=Number(r);const exif=Object.freeze(Object.defineProperty({__proto__:null,tagsById:tagsById$2,tagsByName:tagsByName$2},Symbol.toStringTag,{value:"Module"})),tagsById$1={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},tagsByName$1={};for(let r in tagsById$1)tagsByName$1[tagsById$1[r]]=Number(r);const gps=Object.freeze(Object.defineProperty({__proto__:null,tagsById:tagsById$1,tagsByName:tagsByName$1},Symbol.toStringTag,{value:"Module"})),tagsById={254:"NewSubfileType",255:"SubfileType",256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:"Threshholding",264:"CellWidth",265:"CellLength",266:"FillOrder",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",288:"FreeOffsets",289:"FreeByteCounts",290:"GrayResponseUnit",291:"GrayResponseCurve",296:"ResolutionUnit",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",320:"ColorMap",338:"ExtraSamples",33432:"Copyright",269:"DocumentName",285:"PageName",286:"XPosition",287:"YPosition",292:"T4Options",293:"T6Options",297:"PageNumber",301:"TransferFunction",317:"Predictor",318:"WhitePoint",319:"PrimaryChromaticities",321:"HalftoneHints",322:"TileWidth",323:"TileLength",324:"TileOffsets",325:"TileByteCounts",326:"BadFaxLines",327:"CleanFaxData",328:"ConsecutiveBadFaxLines",330:"SubIFDs",332:"InkSet",333:"InkNames",334:"NumberOfInks",336:"DotRange",337:"TargetPrinter",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",342:"TransferRange",343:"ClipPath",344:"XClipPathUnits",345:"YClipPathUnits",346:"Indexed",347:"JPEGTables",351:"OPIProxy",400:"GlobalParametersIFD",401:"ProfileType",402:"FaxProfile",403:"CodingMethods",404:"VersionYear",405:"ModeNumber",433:"Decode",434:"DefaultImageColor",512:"JPEGProc",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",515:"JPEGRestartInterval",517:"JPEGLosslessPredictors",518:"JPEGPointTransforms",519:"JPEGQTables",520:"JPEGDCTables",521:"JPEGACTables",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite",559:"StripRowCounts",700:"XMP",32781:"ImageID",34732:"ImageLayer",32932:"WangAnnotatio",33445:"MDFileTag",33446:"MDScalePixel",33447:"MDColorTable",33448:"MDLabName",33449:"MDSampleInfo",33450:"MDPrepDate",33451:"MDPrepTime",33452:"MDFileUnits",33550:"ModelPixelScaleTag",33723:"IPTC",33918:"INGRPacketDataTag",33919:"INGRFlagRegisters",33920:"IrasBTransformationMatrix",33922:"ModelTiepointTag",34264:"ModelTransformationTag",34377:"Photoshop",34665:"ExifIFD",34675:"ICCProfile",34735:"GeoKeyDirectoryTag",34736:"GeoDoubleParamsTag",34737:"GeoAsciiParamsTag",34853:"GPSIFD",34908:"HylaFAXFaxRecvParams",34909:"HylaFAXFaxSubAddress",34910:"HylaFAXFaxRecvTime",37724:"ImageSourceData",40965:"InteroperabilityIFD",42112:"GDAL_METADATA",42113:"GDAL_NODATA",50215:"OceScanjobDescription",50216:"OceApplicationSelector",50217:"OceIdentificationNumber",50218:"OceImageLogicCharacteristics",50706:"DNGVersion",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50710:"CFAPlaneColor",50711:"CFALayout",50712:"LinearizationTable",50713:"BlackLevelRepeatDim",50714:"BlackLevel",50715:"BlackLevelDeltaH",50716:"BlackLevelDeltaV",50717:"WhiteLevel",50718:"DefaultScale",50719:"DefaultCropOrigin",50720:"DefaultCropSize",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50733:"BayerGreenSplit",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"LensInfo",50737:"ChromaBlurRadius",50738:"AntiAliasStrength",50740:"DNGPrivateData",50741:"MakerNoteSafety",50778:"CalibrationIlluminant1",50779:"CalibrationIlluminant2",50780:"BestQualityScale",50784:"AliasLayerMetadata"},tagsByName={};for(let r in tagsById)tagsByName[tagsById[r]]=Number(r);const standard=Object.freeze(Object.defineProperty({__proto__:null,tagsById,tagsByName},Symbol.toStringTag,{value:"Module"})),tags={standard,exif,gps};class IFD{constructor(n){if(!n)throw new Error("missing kind");this.data=new Uint8Array,this.fields=new Map,this.kind=n,this._hasMap=!1,this._map={}}get(n){if(typeof n=="number")return this.fields.get(n);if(typeof n=="string")return this.fields.get(tags[this.kind].tagsByName[n]);throw new Error("expected a number or string")}get map(){if(!this._hasMap){const n=tags[this.kind].tagsById;for(let e of this.fields.keys())n[e]&&(this._map[n[e]]=this.fields.get(e));this._hasMap=!0}return this._map}}let types$1=new Map([[1,[1,readByte]],[2,[1,readASCII]],[3,[2,readShort]],[4,[4,readLong]],[5,[8,readRational]],[6,[1,readSByte]],[7,[1,readByte]],[8,[2,readSShort]],[9,[4,readSLong]],[10,[8,readSRational]],[11,[4,readFloat]],[12,[8,readDouble]]]);function getByteLength(r,n){const e=types$1.get(r);if(!e)throw new Error(`type not found: ${r}`);return e[0]*n}function readData(r,n,e){const i=types$1.get(n);if(!i)throw new Error(`type not found: ${n}`);return i[1](r,e)}function readByte(r,n){if(n===1)return r.readUint8();let e=new Uint8Array(n);for(let i=0;i<n;i++)e[i]=r.readUint8();return e}function readASCII(r,n){let e=[],i="";for(let s=0;s<n;s++){let o=String.fromCharCode(r.readUint8());o==="\0"?(e.push(i),i=""):i+=o}return e.length===1?e[0]:e}function readShort(r,n){if(n===1)return r.readUint16();let e=new Uint16Array(n);for(let i=0;i<n;i++)e[i]=r.readUint16();return e}function readLong(r,n){if(n===1)return r.readUint32();let e=new Uint32Array(n);for(let i=0;i<n;i++)e[i]=r.readUint32();return e}function readRational(r,n){if(n===1)return r.readUint32()/r.readUint32();let e=new Array(n);for(let i=0;i<n;i++)e[i]=r.readUint32()/r.readUint32();return e}function readSByte(r,n){if(n===1)return r.readInt8();let e=new Int8Array(n);for(let i=0;i<n;i++)e[i]=r.readInt8();return e}function readSShort(r,n){if(n===1)return r.readInt16();let e=new Int16Array(n);for(let i=0;i<n;i++)e[i]=r.readInt16();return e}function readSLong(r,n){if(n===1)return r.readInt32();let e=new Int32Array(n);for(let i=0;i<n;i++)e[i]=r.readInt32();return e}function readSRational(r,n){if(n===1)return r.readInt32()/r.readInt32();let e=new Array(n);for(let i=0;i<n;i++)e[i]=r.readInt32()/r.readInt32();return e}function readFloat(r,n){if(n===1)return r.readFloat32();let e=new Float32Array(n);for(let i=0;i<n;i++)e[i]=r.readFloat32();return e}function readDouble(r,n){if(n===1)return r.readFloat64();let e=new Float64Array(n);for(let i=0;i<n;i++)e[i]=r.readFloat64();return e}const CLEAR_CODE=256,EOI_CODE=257,TABLE_START=258,MIN_BIT_LENGTH=9;let stringTable=[];function initializeStringTable(){if(stringTable.length===0){for(let n=0;n<256;n++)stringTable.push([n]);const r=[];for(let n=256;n<4096;n++)stringTable.push(r)}}const andTable=[511,1023,2047,4095],bitJumps=[0,0,0,0,0,0,0,0,0,511,1023,2047,4095];class LzwDecoder{constructor(n){this.nextData=0,this.nextBits=0,this.bytePointer=0,this.tableLength=TABLE_START,this.currentBitLength=MIN_BIT_LENGTH,this.stripArray=new Uint8Array(n.buffer,n.byteOffset,n.byteLength),this.outData=new IOBuffer(n.byteLength),this.initializeTable()}decode(){let n=0,e=0;for(;(n=this.getNextCode())!==EOI_CODE;)if(n===CLEAR_CODE){if(this.initializeTable(),n=this.getNextCode(),n===EOI_CODE)break;this.writeString(this.stringFromCode(n)),e=n}else if(this.isInTable(n))this.writeString(this.stringFromCode(n)),this.addStringToTable(this.stringFromCode(e).concat(this.stringFromCode(n)[0])),e=n;else{const s=this.stringFromCode(e).concat(this.stringFromCode(e)[0]);this.writeString(s),this.addStringToTable(s),e=n}const i=this.outData.toArray();return new DataView(i.buffer,i.byteOffset,i.byteLength)}initializeTable(){initializeStringTable(),this.tableLength=TABLE_START,this.currentBitLength=MIN_BIT_LENGTH}writeString(n){this.outData.writeBytes(n)}stringFromCode(n){return stringTable[n]}isInTable(n){return n<this.tableLength}addStringToTable(n){if(stringTable[this.tableLength++]=n,stringTable.length>4096)throw stringTable=[],new Error("LZW decoding error. Please open an issue at https://github.com/image-js/tiff/issues/new/choose (include a test image).");this.tableLength===bitJumps[this.currentBitLength]&&this.currentBitLength++}getNextCode(){this.nextData=this.nextData<<8|this.stripArray[this.bytePointer++]&255,this.nextBits+=8,this.nextBits<this.currentBitLength&&(this.nextData=this.nextData<<8|this.stripArray[this.bytePointer++]&255,this.nextBits+=8);const n=this.nextData>>this.nextBits-this.currentBitLength&andTable[this.currentBitLength-9];return this.nextBits-=this.currentBitLength,this.bytePointer>this.stripArray.length?257:n}}function decompressLzw(r){return new LzwDecoder(r).decode()}const dateTimeRegex=/^(\d{4}):(\d{2}):(\d{2}) (\d{2}):(\d{2}):(\d{2})$/;class TiffIfd extends IFD{constructor(){super("standard")}get size(){return this.width*this.height}get width(){return this.imageWidth}get height(){return this.imageLength}get components(){return this.samplesPerPixel}get date(){let n=new Date,e=dateTimeRegex.exec(this.dateTime);if(e===null)throw new Error(`invalid dateTime: ${this.dateTime}`);return n.setFullYear(Number(e[1]),Number(e[2])-1,Number(e[3])),n.setHours(Number(e[4]),Number(e[5]),Number(e[6])),n}get newSubfileType(){return this.get("NewSubfileType")}get imageWidth(){return this.get("ImageWidth")}get imageLength(){return this.get("ImageLength")}get bitsPerSample(){const n=this.get("BitsPerSample");return n&&typeof n!="number"?n[0]:n}get alpha(){const n=this.extraSamples;return n?n[0]!==0:!1}get associatedAlpha(){const n=this.extraSamples;return n?n[0]===1:!1}get extraSamples(){return alwaysArray(this.get("ExtraSamples"))}get compression(){return this.get("Compression")||1}get type(){return this.get("PhotometricInterpretation")}get fillOrder(){return this.get("FillOrder")||1}get documentName(){return this.get("DocumentName")}get imageDescription(){return this.get("ImageDescription")}get stripOffsets(){return alwaysArray(this.get("StripOffsets"))}get orientation(){return this.get("Orientation")}get samplesPerPixel(){return this.get("SamplesPerPixel")||1}get rowsPerStrip(){return this.get("RowsPerStrip")}get stripByteCounts(){return alwaysArray(this.get("StripByteCounts"))}get minSampleValue(){return this.get("MinSampleValue")||0}get maxSampleValue(){return this.get("MaxSampleValue")||Math.pow(2,this.bitsPerSample)-1}get xResolution(){return this.get("XResolution")}get yResolution(){return this.get("YResolution")}get planarConfiguration(){return this.get("PlanarConfiguration")||1}get resolutionUnit(){return this.get("ResolutionUnit")||2}get dateTime(){return this.get("DateTime")}get predictor(){return this.get("Predictor")||1}get sampleFormat(){return this.get("SampleFormat")||1}get sMinSampleValue(){return this.get("SMinSampleValue")||this.minSampleValue}get sMaxSampleValue(){return this.get("SMaxSampleValue")||this.maxSampleValue}get palette(){const n=2**this.bitsPerSample,e=this.get("ColorMap");if(!e)return;if(e.length!==3*n)throw new Error(`ColorMap size must be ${n}`);const i=[];for(let s=0;s<n;s++)i.push([e[s],e[s+n],e[s+2*n]]);return i}}function alwaysArray(r){return typeof r=="number"?[r]:r}function decompressZlib(r){const n=new Uint8Array(r.buffer,r.byteOffset,r.byteLength),e=inflate_1(n);return new DataView(e.buffer,e.byteOffset,e.byteLength)}const defaultOptions$4={ignoreImageData:!1,onlyFirst:!1};class TIFFDecoder extends IOBuffer{constructor(n){super(n),this._nextIFD=0}get isMultiPage(){let n=0;for(this.decodeHeader();this._nextIFD;)if(n++,this.decodeIFD({ignoreImageData:!0},!0),n===2)return!0;if(n===1)return!1;throw unsupported("ifdCount",n)}get pageCount(){let n=0;for(this.decodeHeader();this._nextIFD;)n++,this.decodeIFD({ignoreImageData:!0},!0);if(n>0)return n;throw unsupported("ifdCount",n)}decode(n={}){n=Object.assign({},defaultOptions$4,n);const e=[];for(this.decodeHeader();this._nextIFD;)if(e.push(this.decodeIFD(n,!0)),n.onlyFirst)return[e[0]];return e}decodeHeader(){const n=this.readUint16();if(n===18761)this.setLittleEndian();else if(n===19789)this.setBigEndian();else throw new Error(`invalid byte order: 0x${n.toString(16)}`);if(this.readUint16()!==42)throw new Error("not a TIFF file");this._nextIFD=this.readUint32()}decodeIFD(n,e){this.seek(this._nextIFD);let i;if(e)i=new TiffIfd;else{if(!n.kind)throw new Error("kind is missing");i=new IFD(n.kind)}const s=this.readUint16();for(let o=0;o<s;o++)this.decodeIFDEntry(i);if(!n.ignoreImageData){if(!(i instanceof TiffIfd))throw new Error("must be a tiff ifd");this.decodeImageData(i)}return this._nextIFD=this.readUint32(),i}decodeIFDEntry(n){const e=this.offset,i=this.readUint16(),s=this.readUint16(),o=this.readUint32();if(s<1||s>12){this.skip(4);return}getByteLength(s,o)>4&&this.seek(this.readUint32());const l=readData(this,s,o);if(n.fields.set(i,l),i===34665||i===34853){let d=this.offset,m="exif";i===34665?m="exif":i===34853&&(m="gps"),this._nextIFD=l,n[m]=this.decodeIFD({kind:m,ignoreImageData:!0},!1),this.offset=d}this.seek(e),this.skip(12)}decodeImageData(n){const e=n.orientation;if(e&&e!==1)throw unsupported("orientation",e);switch(n.type){case 0:case 1:case 2:case 3:this.readStripData(n);break;default:throw unsupported("image type",n.type)}if(this.applyPredictor(n),this.convertAlpha(n),n.type===0){const i=n.bitsPerSample,s=Math.pow(2,i)-1;for(let o=0;o<n.data.length;o++)n.data[o]=s-n.data[o]}}readStripData(n){const e=n.width,i=n.height,s=n.bitsPerSample,o=n.sampleFormat,u=e*i*n.samplesPerPixel,l=getDataArray(u,s,o),m=n.rowsPerStrip*e*n.samplesPerPixel,y=n.stripOffsets,S=n.stripByteCounts||guessStripByteCounts(n);let X=u,he=0;for(let Ce=0;Ce<y.length;Ce++){let Ee=new DataView(this.buffer,this.byteOffset+y[Ce],S[Ce]),xe=X>m?m:X;X-=xe;let be=Ee;switch(n.compression){case 1:break;case 5:{be=decompressLzw(Ee);break}case 8:{be=decompressZlib(Ee);break}case 2:throw unsupported("Compression","CCITT Group 3");case 32773:throw unsupported("Compression","PackBits");default:throw unsupported("Compression",n.compression)}he=this.fillUncompressed(s,o,l,be,he,xe)}n.data=l}fillUncompressed(n,e,i,s,o,u){if(n===8)return fill8bit(i,s,o,u);if(n===16)return fill16bit(i,s,o,u,this.isLittleEndian());if(n===32&&e===3)return fillFloat32(i,s,o,u,this.isLittleEndian());throw unsupported("bitDepth",n)}applyPredictor(n){const e=n.bitsPerSample;switch(n.predictor){case 1:break;case 2:{if(e===8)applyHorizontalDifferencing8Bit(n.data,n.width,n.components);else if(e===16)applyHorizontalDifferencing16Bit(n.data,n.width,n.components);else throw new Error(`Horizontal differencing is only supported for images with a bit depth of ${e}`);break}default:throw new Error(`invalid predictor: ${n.predictor}`)}}convertAlpha(n){if(n.alpha&&n.associatedAlpha){const{data:e,components:i,maxSampleValue:s}=n;for(let o=0;o<e.length;o+=i){const u=e[o+i-1];for(let l=0;l<i-1;l++)e[o+l]=Math.round(e[o+l]*s/u)}}}}function getDataArray(r,n,e){if(n===8)return new Uint8Array(r);if(n===16)return new Uint16Array(r);if(n===32&&e===3)return new Float32Array(r);throw unsupported("bit depth / sample format",`${n} / ${e}`)}function fill8bit(r,n,e,i){for(let s=0;s<i;s++)r[e++]=n.getUint8(s);return e}function fill16bit(r,n,e,i,s){for(let o=0;o<i*2;o+=2)r[e++]=n.getUint16(o,s);return e}function fillFloat32(r,n,e,i,s){for(let o=0;o<i*4;o+=4)r[e++]=n.getFloat32(o,s);return e}function unsupported(r,n){return new Error(`Unsupported ${r}: ${n}`)}function decodeTIFF(r,n){return new TIFFDecoder(r).decode(n)}function matchAndCrop(r={}){let{algorithm:n="matchToPrevious",ignoreBorder:e=[0,0]}=r;this.checkProcessable("matchAndCrop",{bitDepth:[8,16]});let i=n==="matchToPrevious",s=this[0],o=[];o[0]={position:[0,0],image:this[0]};let u=[0,0];for(let X=1;X<this.length;X++){let he=s.getBestMatch(this[X],{border:e});o[X]={position:[he[0]+u[0],he[1]+u[1]],image:this[X]},i&&(u[0]+=he[0],u[1]+=he[1],s=this[X])}let l=0,d=0,m=0,y=0;for(let X=0;X<o.length;X++){let he=o[X];he.position[0]>l&&(l=he.position[0]),he.position[0]<d&&(d=he.position[0]),he.position[1]>m&&(m=he.position[1]),he.position[1]<y&&(y=he.position[1])}d=0-d,y=0-y;for(let X=0;X<o.length;X++){let he=o[X];he.crop=he.image.crop({x:l-he.position[0],y:m-he.position[1],width:s.width-d-l,height:s.height-y-m})}let S=[];for(let X=0;X<o.length;X++)S[X]=o[X].crop;return new Stack(S)}function min$2(){this.checkProcessable("min",{bitDepth:[8,16]});let r=this[0].min;for(let n=1;n<this.length;n++)for(let e=0;e<r.length;e++)r[e]=Math.min(r[e],this[n].min[e]);return r}function max$2(){this.checkProcessable("min",{bitDepth:[8,16]});let r=this[0].max;for(let n=1;n<this.length;n++)for(let e=0;e<r.length;e++)r[e]=Math.max(r[e],this[n].max[e]);return r}function median$2(r){let n=r.reduce((u,l)=>u+l);if(n===0)throw new Error("unreachable");let e=0,i=0,s=n/2,o;for(;;){if(r[e]>0){if(o!==void 0)return(o+e)/2;if(i+=r[e],i>s)return e;i===s&&(o=e)}e++}}function mean$2(r){let n=0,e=0;for(let i=0;i<r.length;i++)n+=r[i],e+=r[i]*i;return n===0?0:e/n}function median$1(){this.checkProcessable("median",{bitDepth:[8,16]});let r=this.getHistograms({maxSlots:this[0].maxValue+1}),n=new Array(r.length);for(let e=0;e<r.length;e++){let i=r[e];n[e]=median$2(i)}return n}function histogram(r){this.checkProcessable("min",{bitDepth:[8,16]});let n=this[0].getHistogram(r);for(let e=1;e<this.length;e++){let i=this[e].getHistogram(r);for(let s=0;s<n.length;s++)n[s]+=i[s]}return n}function histograms(r){this.checkProcessable("min",{bitDepth:[8,16]});let n=this[0].getHistograms(r),e=n[0].length;for(let i=1;i<this.length;i++){let s=this[i].getHistograms(r);for(let o=0;o<n.length;o++)for(let u=0;u<e;u++)n[o][u]+=s[o][u]}return n}function averageImage(){this.checkProcessable("averageImage",{bitDepth:[8,16]});let r=new Uint32Array(this[0].data.length);for(let i=0;i<this.length;i++){let s=this[i];for(let o=0;o<this[0].data.length;o++)r[o]+=s.data[o]}let n=Image.createFrom(this[0]),e=n.data;for(let i=0;i<this[0].data.length;i++)e[i]=r[i]/this.length;return n}function maxImage(){this.checkProcessable("max",{bitDepth:[8,16]});let r=Image.createFrom(this[0]);r.data.fill(0);for(const n of this)for(let e=0;e<r.data.length;e++)r.data[e]=Math.max(n.data[e],r.data[e]);return r}function minImage(){this.checkProcessable("max",{bitDepth:[8,16]});let r=Image.createFrom(this[0]);r.data.fill(r.maxValue);for(const n of this)for(let e=0;e<r.data.length;e++)r.data[e]=Math.min(n.data[e],r.data[e]);return r}function extend$2(r){r.extendMethod("matchAndCrop",matchAndCrop),r.extendMethod("getMin",min$2),r.extendMethod("getMax",max$2),r.extendMethod("getMedian",median$1),r.extendMethod("getHistogram",histogram),r.extendMethod("getHistograms",histograms),r.extendMethod("getAverage",averageImage),r.extendMethod("getAverageImage",averageImage),r.extendMethod("getMaxImage",maxImage),r.extendMethod("getMinImage",minImage)}let computedPropertyDescriptor={configurable:!0,enumerable:!1,get:void 0};class Stack extends Array{constructor(n){if(Array.isArray(n)){super(n.length);for(let e=0;e<n.length;e++)this[e]=n[e]}else typeof n=="number"?super(n):super();this.computed=null}static load(n){return Promise.all(n.map(Image.load)).then(e=>new Stack(e))}static extendMethod(n,e,i={}){let{inPlace:s=!1,returnThis:o=!0,partialArgs:u=[]}=i;return s?Stack.prototype[n]=function(...l){this.computed=null;let d=e.apply(this,[...u,...l]);return o?this:d}:Stack.prototype[n]=function(...l){return e.apply(this,[...u,...l])},Stack}static extendProperty(n,e,i={}){let{partialArgs:s=[]}=i;return computedPropertyDescriptor.get=function(){if(this.computed===null)this.computed={};else if(hasOwn(n,this.computed))return this.computed[n];let o=e.apply(this,s);return this.computed[n]=o,o},Object.defineProperty(Stack.prototype,n,computedPropertyDescriptor),Stack}checkProcessable(n,e={}){if(typeof n!="string")throw new TypeError("checkProcessable requires as first parameter the processName (a string)");if(this.size===0)throw new TypeError(`The process: ${n} can not be applied on an empty stack`);this[0].checkProcessable(n,e);for(let i=1;i<this.length;i++){if((e.sameSize===void 0||e.sameSize)&&this[0].width!==this[i].width)throw new TypeError(`The process: ${n} can not be applied if width is not identical in all images`);if((e.sameSize===void 0||e.sameSize)&&this[0].height!==this[i].height)throw new TypeError(`The process: ${n} can not be applied if height is not identical in all images`);if((e.sameAlpha===void 0||e.sameAlpha)&&this[0].alpha!==this[i].alpha)throw new TypeError(`The process: ${n} can not be applied if alpha is not identical in all images`);if((e.sameBitDepth===void 0||e.sameBitDepth)&&this[0].bitDepth!==this[i].bitDepth)throw new TypeError(`The process: ${n} can not be applied if bitDepth is not identical in all images`);if((e.sameColorModel===void 0||e.sameColorModel)&&this[0].colorModel!==this[i].colorModel)throw new TypeError(`The process: ${n} can not be applied if colorModel is not identical in all images`);if((e.sameNumberChannels===void 0||e.sameNumberChannels)&&this[0].channels!==this[i].channels)throw new TypeError(`The process: ${n} can not be applied if channels is not identical in all images`)}}}Array[Symbol.species]||(Stack.prototype.map=function(r,n){if(typeof r!="function")throw new TypeError(`${r} is not a function`);let e=new Stack(this.length);for(let i=0;i<this.length;i++)e[i]=r.call(n,this[i],i,this);return e});extend$2(Stack);const isDataURL=/^data:[a-z]+\/(?:[a-z]+);base64,/;function load(r,n){if(typeof r=="string")return loadURL(r,n);if(r instanceof ArrayBuffer)return Promise.resolve(loadBinary(new Uint8Array(r),void 0,n&&n.ignorePalette));if(r.buffer)return Promise.resolve(loadBinary(r,void 0,n&&n.ignorePalette));throw new Error('argument to "load" must be a string or buffer.')}function loadBinary(r,n,e){const i=imageType(r);if(i)switch(i.mime){case"image/png":return loadPNG(r);case"image/jpeg":return loadJPEG(r);case"image/tiff":return loadTIFF(r,e);default:return loadGeneric(s(i.mime))}return loadGeneric(s("application/octet-stream"));function s(o){return n||toBase64URL(r,o)}}function loadURL(r,n){const e=r.slice(0,64).match(isDataURL);let i;return e!==null?i=Promise.resolve(decode$1(r.slice(e[0].length))):i=fetchBinary(r,n),i.then(s=>{const o=new Uint8Array(s);return loadBinary(o,e?r:void 0,n&&n.ignorePalette)})}function loadPNG(r){const n=decodePng(r);let e=n.channels,i,s=0;return e===2||e===4?(i=e-1,s=1):i=e,n.palette?loadPNGFromPalette(n):new Image(n.width,n.height,n.data,{components:i,alpha:s,bitDepth:n.depth,meta:{text:n.text}})}function loadPNGFromPalette(r){const n=r.width*r.height,e=r.palette[0].length,i=new Uint8Array(n*e),s=8/r.depth,o=r.depth<8?s:1,u=parseInt("1".repeat(r.depth),2),l=e===4;let d=0;for(let m=0;m<n;m++){const y=Math.floor(m/o);let S=r.data[y];r.depth<8&&(S=S>>>r.depth*(s-1-m%s)&u);const X=r.palette[S];i[d++]=X[0],i[d++]=X[1],i[d++]=X[2],l&&(i[d++]=X[3])}return new Image(r.width,r.height,i,{components:3,alpha:l,bitDepth:8})}function loadJPEG(r){const n=srcExports$3.decode(r);let e;n.exif&&(e=getMetadata(n.exif));const i=jpegJsExports.decode(r,{useTArray:!0,maxMemoryUsageInMB:1024});let s=new Image(i.width,i.height,i.data,{meta:e});if(e&&e.tiff.tags.Orientation){const o=e.tiff.tags.Orientation;o>2&&(s=s.rotate({3:180,4:180,5:90,6:90,7:270,8:270}[o])),[2,4,5,7].includes(o)&&(s=s.flipX())}return s}function loadTIFF(r,n){let e=decodeTIFF(r);return e.length===1?getImageFromIFD(e[0],n):new Stack(e.map(function(i){return getImageFromIFD(i,n)}))}function getMetadata(r){const n={tiff:{fields:r.fields,tags:r.map}};return r.exif&&(n.exif=r.exif),r.gps&&(n.gps=r.gps),n}function getImageFromIFD(r,n){if(!n&&r.type===3){const e=new Uint16Array(3*r.width*r.height),i=r.palette;let s=0;for(let o=0;o<r.data.length;o++){const u=r.data[o],l=i[u];e[s++]=l[0],e[s++]=l[1],e[s++]=l[2]}return new Image(r.width,r.height,e,{components:3,alpha:r.alpha,colorModel:RGB$1,bitDepth:16,meta:getMetadata(r)})}else return new Image(r.width,r.height,r.data,{components:r.type===2?3:1,alpha:r.alpha,colorModel:r.type===2?RGB$1:GREY$1,bitDepth:r.bitsPerSample.length?r.bitsPerSample[0]:r.bitsPerSample,meta:getMetadata(r)})}function loadGeneric(r,n){return n=n||{},new Promise(function(e,i){let s=new DOMImage;s.onload=function(){let o=s.width,u=s.height,d=createCanvas(o,u).getContext("2d");d.drawImage(s,0,0,o,u);let m=d.getImageData(0,0,o,u).data;e(new Image(o,u,m,n))},s.onerror=function(){i(new Error(`Could not load ${r}`))},s.src=r})}const valueMethods={getValueXY(r,n,e){return this.data[(n*this.width+r)*this.channels+e]},setValueXY(r,n,e,i){return this.data[(n*this.width+r)*this.channels+e]=i,this.computed=null,this},getValue(r,n){return this.data[r*this.channels+n]},setValue(r,n,e){return this.data[r*this.channels+n]=e,this.computed=null,this},getPixelXY(r,n){return this.getPixel(n*this.width+r)},setPixelXY(r,n,e){return this.setPixel(n*this.width+r,e)},getPixel(r){const n=new Array(this.channels),e=r*this.channels;for(let i=0;i<this.channels;i++)n[i]=this.data[e+i];return n},setPixel(r,n){const e=r*this.channels;for(let i=0;i<n.length;i++)this.data[e+i]=n[i];return this.computed=null,this}};function setValueMethods(r){for(const n in valueMethods)r.prototype[n]=valueMethods[n]}function getImageParameters(r){return{width:r.width,height:r.height,components:r.components,alpha:r.alpha,colorModel:r.colorModel,bitDepth:r.bitDepth}}function getOutputImage(r,n,e,i={}){const{out:s}=n;if(s===void 0)return i.copy?r.clone():Image.createFrom(r,e);{if(!Image.isImage(s))throw new TypeError("out must be an Image object");const o=Object.assign(getImageParameters(r),e);for(const u in o)if(s[u]!==o[u])throw new RangeError(`cannot use out. Its ${u} must be "${o[u]}" (found "${s[u]}")`);return s}}function getOutputImageOrInPlace(r,n,e){if(n.inPlace!==void 0&&typeof n.inPlace!="boolean")throw new TypeError("inPlace option must be a boolean");if(n.inPlace){if(n.out!==void 0)throw new TypeError("out option must not be set if inPlace option is true");return r}return getOutputImage(r,n,null,e)}function abs(r={}){this.checkProcessable("abs",{bitDepth:[32]});const n=getOutputImageOrInPlace(this,r);return absolute(this,n),n}function absolute(r,n){for(let e=0;e<r.data.length;e++)n.data[e]=Math.abs(r.data[e])}function copyAlphaChannel(r,n){if(r.alpha===1&&n.alpha===1)for(let e=0;e<r.size;e++)n.data[e*n.channels+n.components]=r.data[e*r.channels+r.components]}function invert(r={}){this.checkProcessable("invert",{bitDepth:[1,8,16]});const n=getOutputImageOrInPlace(this,r);return this.bitDepth===1?invertBinary(this,n):(invertColor(this,n),this!==n&&copyAlphaChannel(this,n)),n}function invertBinary(r,n){for(let e=0;e<r.data.length;e++)n.data[e]=~r.data[e]}function invertColor(r,n){for(let e=0;e<r.data.length;e+=r.channels)for(let i=0;i<r.components;i++)n.data[e+i]=r.maxValue-r.data[e+i]}function flipX(){this.checkProcessable("flipX",{bitDepth:[8,16]});for(let r=0;r<this.height;r++){let n=r*this.width*this.channels;for(let e=0;e<Math.floor(this.width/2);e++){let i=e*this.channels+n,s=(this.width-e-1)*this.channels+n;for(let o=0;o<this.channels;o++){let u=this.data[i+o];this.data[i+o]=this.data[s+o],this.data[s+o]=u}}}return this}function flipY(){this.checkProcessable("flipY",{bitDepth:[8,16]});for(let r=0;r<Math.floor(this.height/2);r++)for(let n=0;n<this.width;n++){let e=n*this.channels+r*this.width*this.channels,i=n*this.channels+(this.height-1-r)*this.channels*this.width;for(let s=0;s<this.channels;s++){let o=this.data[e+s];this.data[e+s]=this.data[i+s],this.data[i+s]=o}}return this}function blurFilter(r={}){const{radius:n=1}=r;if(n<1)throw new Error("radius must be greater than 1");const e=2*n+1,i=new Array(e);for(let s=0;s<e;s++){i[s]=new Array(e);for(let o=0;o<e;o++)i[s][o]=1/(e*e)}return this.convolution(i)}var medianQuickselect_min={exports:{}},hasRequiredMedianQuickselect_min;function requireMedianQuickselect_min(){return hasRequiredMedianQuickselect_min||(hasRequiredMedianQuickselect_min=1,function(r){(function(){function n(s){for(var o=0,u=s.length-1,l=void 0,d=void 0,m=void 0,y=i(o,u);;){if(u<=o)return s[y];if(u==o+1)return s[o]>s[u]&&e(s,o,u),s[y];for(l=i(o,u),s[l]>s[u]&&e(s,l,u),s[o]>s[u]&&e(s,o,u),s[l]>s[o]&&e(s,l,o),e(s,l,o+1),d=o+1,m=u;;){do d++;while(s[o]>s[d]);do m--;while(s[m]>s[o]);if(m<d)break;e(s,d,m)}e(s,o,m),m<=y&&(o=d),m>=y&&(u=m-1)}}var e=function(o,u,l){var d;return d=[o[l],o[u]],o[u]=d[0],o[l]=d[1],d},i=function(o,u){return~~((o+u)/2)};r.exports?r.exports=n:window.median=n})()}(medianQuickselect_min)),medianQuickselect_min.exports}var medianQuickselect_minExports=requireMedianQuickselect_min();const quickSelectMedian=getDefaultExportFromCjs(medianQuickselect_minExports);function validateArrayOfChannels(r,n={}){let{channels:e,allowAlpha:i,defaultAlpha:s}=n;return typeof i!="boolean"&&(i=!0),typeof e>"u"?allChannels(r,s):validateChannels(r,e,i)}function allChannels(r,n){let e=n?r.channels:r.components,i=new Array(e);for(let s=0;s<e;s++)i[s]=s;return i}function validateChannels(r,n,e){Array.isArray(n)||(n=[n]);for(let i=0;i<n.length;i++)n[i]=validateChannel(r,n[i],e);return n}function validateChannel(r,n,e=!0){if(n===void 0)throw new RangeError(`validateChannel : the channel has to be >=0 and <${r.channels}`);if(typeof n=="string"){switch(r.colorModel){case GREY$1:break;case RGB$1:if("rgb".includes(n))switch(n){case"r":n=0;break;case"g":n=1;break;case"b":n=2;break}break;case HSL:if("hsl".includes(n))switch(n){case"h":n=0;break;case"s":n=1;break;case"l":n=2;break}break;case HSV:if("hsv".includes(n))switch(n){case"h":n=0;break;case"s":n=1;break;case"v":n=2;break}break;case CMYK$1:if("cmyk".includes(n))switch(n){case"c":n=0;break;case"m":n=1;break;case"y":n=2;break;case"k":n=3;break}break;default:throw new Error(`Unexpected color model: ${r.colorModel}`)}if(n==="a"){if(!r.alpha)throw new Error("validateChannel : the image does not contain alpha channel");n=r.components}if(typeof n=="string")throw new Error(`validateChannel : undefined channel: ${n}`)}if(n>=r.channels)throw new RangeError(`validateChannel : the channel has to be >=0 and <${r.channels}`);if(!e&&n>=r.components)throw new RangeError("validateChannel : alpha channel may not be selected");return n}function medianFilter(r={}){let{radius:n=1,border:e="copy",channels:i}=r;if(this.checkProcessable("medianFilter",{bitDepth:[8,16]}),n<1)throw new Error("radius must be greater than 0");i=validateArrayOfChannels(this,i);let s=n,o=n,u=Image.createFrom(this),l=(s*2+1)*(o*2+1),d=new Array(l);for(let m=0;m<i.length;m++){let y=i[m];for(let S=o;S<this.height-o;S++)for(let X=s;X<this.width-s;X++){let he=0;for(let Ee=-o;Ee<=o;Ee++)for(let xe=-s;xe<=s;xe++){let be=((S+Ee)*this.width+X+xe)*this.channels+y;d[he++]=this.data[be]}let Ce=(S*this.width+X)*this.channels+y;u.data[Ce]=quickSelectMedian(d)}}if(this.alpha&&!i.includes(this.channels))for(let m=this.components;m<this.data.length;m=m+this.channels)u.data[m]=this.data[m];return u.setBorder({size:[s,o],algorithm:e}),u}function gaussianFilter(r={}){let{radius:n=1,sigma:e,channels:i,border:s="copy"}=r;this.checkProcessable("gaussian",{bitDepth:[8,16]});const o=getKernel(n,e);return this.convolution([o,o],{border:s,channels:i,algorithm:"separable"})}function getKernel(r,n){const e=r*2+1,i=new Array(e),s=n||((e-1)*.5-1)*.3+.8,o=-.5/(s*s);let u=0;for(let l=0;l<e;l++){const d=l-r,m=Math.exp(o*d*d);i[l]=m,u+=m}for(let l=0;l<e;l++)i[l]/=u;return i}const SOBEL_X=[[-1,0,1],[-2,0,2],[-1,0,1]],SOBEL_Y=[[-1,-2,-1],[0,0,0],[1,2,1]],SCHARR_X=[[3,0,-3],[10,0,-10],[3,0,-3]],SCHARR_Y=[[3,10,3],[0,0,0],[-3,-10,-3]];var src$3={},fftlib={},hasRequiredFftlib;function requireFftlib(){return hasRequiredFftlib||(hasRequiredFftlib=1,function(r){(function(){var n;n=r;var e={release:"0.3.0",date:"2013-03"};n.toString=function(){return"version "+e.release+", released "+e.date};for(var i=0,s=null,o=null,u={init:function(m){if(m!==0&&!(m&m-1))i=m,u._initArray(),u._makeBitReversalTable(),u._makeCosSinTable();else throw new Error("init: radix-2 required")},fft1d:function(m,y){u.fft(m,y,1)},ifft1d:function(m,y){var S=1/i;u.fft(m,y,-1);for(var X=0;X<i;X++)m[X]*=S,y[X]*=S},bt1d:function(m,y){u.fft(m,y,-1)},fft2d:function(m,y){for(var S=[],X=[],he=0,Ce=0;Ce<i;Ce++){he=Ce*i;for(var Ee=0;Ee<i;Ee++)S[Ee]=m[Ee+he],X[Ee]=y[Ee+he];u.fft1d(S,X);for(var xe=0;xe<i;xe++)m[xe+he]=S[xe],y[xe+he]=X[xe]}for(var be=0;be<i;be++){for(var we=0;we<i;we++)he=be+we*i,S[we]=m[he],X[we]=y[he];u.fft1d(S,X);for(var ve=0;ve<i;ve++)he=be+ve*i,m[he]=S[ve],y[he]=X[ve]}},ifft2d:function(m,y){for(var S=[],X=[],he=0,Ce=0;Ce<i;Ce++){he=Ce*i;for(var Ee=0;Ee<i;Ee++)S[Ee]=m[Ee+he],X[Ee]=y[Ee+he];u.ifft1d(S,X);for(var xe=0;xe<i;xe++)m[xe+he]=S[xe],y[xe+he]=X[xe]}for(var be=0;be<i;be++){for(var we=0;we<i;we++)he=be+we*i,S[we]=m[he],X[we]=y[he];u.ifft1d(S,X);for(var ve=0;ve<i;ve++)he=be+ve*i,m[he]=S[ve],y[he]=X[ve]}},fft:function(m,y,S){for(var X,he,Ce,Ee,xe,be,we,ve,ke,De=i>>2,Oe=0;Oe<i;Oe++)Ee=s[Oe],Oe<Ee&&(xe=m[Oe],m[Oe]=m[Ee],m[Ee]=xe,xe=y[Oe],y[Oe]=y[Ee],y[Ee]=xe);for(var Le=1;Le<i;Le<<=1){he=0,X=i/(Le<<1);for(var Ae=0;Ae<Le;Ae++){be=o[he+De],we=S*o[he];for(var Ie=Ae;Ie<i;Ie+=Le<<1)Ce=Ie+Le,ve=be*m[Ce]+we*y[Ce],ke=be*y[Ce]-we*m[Ce],m[Ce]=m[Ie]-ve,m[Ie]+=ve,y[Ce]=y[Ie]-ke,y[Ie]+=ke;he+=X}}},_initArray:function(){typeof Uint32Array<"u"?s=new Uint32Array(i):s=[],typeof Float64Array<"u"?o=new Float64Array(i*1.25):o=[]},_paddingZero:function(){},_makeBitReversalTable:function(){var m=0,y=0,S=0;for(s[0]=0;++m<i;){for(S=i>>1;S<=y;)y-=S,S>>=1;y+=S,s[m]=y}},_makeCosSinTable:function(){var m=i>>1,y=i>>2,S=i>>3,X=m+y,he=Math.sin(Math.PI/i),Ce=2*he*he,Ee=Math.sqrt(Ce*(2-Ce)),xe=o[y]=1,be=o[0]=0;he=2*Ce;for(var we=1;we<S;we++)xe-=Ce,Ce+=he*xe,be+=Ee,Ee-=he*be,o[we]=be,o[y-we]=xe;S!==0&&(o[S]=Math.sqrt(.5));for(var ve=0;ve<y;ve++)o[m-ve]=o[ve];for(var ke=0;ke<X;ke++)o[ke+m]=-o[ke]}},l=["init","fft1d","ifft1d","fft2d","ifft2d"],d=0;d<l.length;d++)n[l[d]]=u[l[d]];return n.bt=u.bt1d,n.fft=u.fft1d,n.ifft=u.ifft1d,n}).call(fftlib)}(fftlib)),fftlib}var FFTUtils_1,hasRequiredFFTUtils;function requireFFTUtils(){if(hasRequiredFFTUtils)return FFTUtils_1;hasRequiredFFTUtils=1;var r=requireFftlib(),n={DEBUG:!1,ifft2DArray:function(e,i,s){var o=new Array(i*s),u=i/2,l=(s-1)*2;r.init(u);for(var d={re:new Array(u),im:new Array(u)},m=0;m<s;m++){for(var y=u-1;y>=0;y--)d.re[y]=e[y*2*s+m],d.im[y]=e[(y*2+1)*s+m];r.bt(d.re,d.im);for(var y=u-1;y>=0;y--)o[y*2*s+m]=d.re[y],o[(y*2+1)*s+m]=d.im[y]}var S=new Array(u*l);r.init(l);for(var X={re:new Array(l),im:new Array(l)},he=l*u,y=0;y<i;y+=2){X.re[0]=o[y*s],X.im[0]=o[(y+1)*s];for(var m=1;m<s;m++)X.re[m]=o[y*s+m],X.im[m]=o[(y+1)*s+m],X.re[l-m]=o[y*s+m],X.im[l-m]=-o[(y+1)*s+m];r.bt(X.re,X.im);for(var Ce=y/2*l,m=l-1;m>=0;m--)S[Ce+m]=X.re[m]/he}return S},fft2DArray:function(e,i,s,o){Object.assign({},{inplace:!0});var u=s/2+1,l=i*2,d=new Array(l*u);r.init(s);for(var m={re:new Array(s),im:new Array(s)},y={re:new Array(s),im:new Array(s)},S={re:new Array(s),im:new Array(s)},X,he,Ce,Ee,xe,be=0;be<i/2;be++){X=be*2*s,m.re=e.slice(X,X+s),X=(be*2+1)*s,m.im=e.slice(X,X+s),r.fft1d(m.re,m.im),this.reconstructTwoRealFFT(m,y,S),he=be*4*u,Ce=(be*4+1)*u,Ee=(be*4+2)*u,xe=(be*4+3)*u;for(var we=u-1;we>=0;we--)d[he+we]=y.re[we],d[Ce+we]=y.im[we],d[Ee+we]=S.re[we],d[xe+we]=S.im[we]}y=null,S=null;var ve=new Array(l*u);r.init(i);for(var ke={re:new Array(i),im:new Array(i)},De=u-1;De>=0;De--){for(var be=i-1;be>=0;be--)ke.re[be]=d[be*2*u+De],ke.im[be]=d[(be*2+1)*u+De],isNaN(ke.re[be])&&(ke.re[be]=0),isNaN(ke.im[be])&&(ke.im[be]=0);r.fft1d(ke.re,ke.im);for(var be=i-1;be>=0;be--)ve[be*2*u+De]=ke.re[be],ve[(be*2+1)*u+De]=ke.im[be]}return ve},reconstructTwoRealFFT:function(e,i,s){var o=e.re.length;i.re[0]=e.re[0],i.im[0]=0,s.re[0]=e.im[0],s.im[0]=0;for(var u,l,d,m,y,S=o/2;S>0;S--)y=o-S,u=.5*(e.re[S]-e.re[y]),l=.5*(e.re[S]+e.re[y]),d=.5*(e.im[S]-e.im[y]),m=.5*(e.im[S]+e.im[y]),i.re[S]=l,i.im[S]=d,i.re[y]=l,i.im[y]=-d,s.re[S]=m,s.im[S]=-u,s.re[y]=m,s.im[y]=u},convolute2DI:function(e,i,s,o){for(var u,l,d=0;d<s/2;d++)for(var m=0;m<o;m++)u=e[d*2*o+m]*i[d*2*o+m]-e[(d*2+1)*o+m]*i[(d*2+1)*o+m],l=e[d*2*o+m]*i[(d*2+1)*o+m]+e[(d*2+1)*o+m]*i[d*2*o+m],e[d*2*o+m]=u,e[(d*2+1)*o+m]=l},convolute:function(e,i,s,o,u){for(var l=new Array(o*s),d=0;d<s*o;d++)l[d]=e[d];l=this.fft2DArray(l,s,o);for(var m=i.length,y=i[0].length,S=new Array(o*s),d=0;d<o*s;d++)S[d]=0;for(var X,he,Ce=Math.floor((m-1)/2),Ee=Math.floor((y-1)/2),xe=0;xe<m;xe++){X=(xe-Ce+s)%s;for(var be=0;be<y;be++)he=(be-Ee+o)%o,S[X*o+he]=i[xe][be]}S=this.fft2DArray(S,s,o);var we=s*2,ve=o/2+1;return this.convolute2DI(l,S,we,ve),this.ifft2DArray(l,we,ve)},toRadix2:function(e,i,s){var o,u,l,d,m=s,y=i;if(!(s!==0&&!(s&s-1))){for(m=0;s>>++m;);m=1<<m}if(!(i!==0&&!(i&i-1))){for(y=0;i>>++y;);y=1<<y}if(y==i&&m==s)return{data:e,rows:i,cols:s};var S=new Array(y*m),X=Math.floor((y-i)/2)-i,he=Math.floor((m-s)/2)-s;for(o=0;o<y;o++)for(l=o*m,d=(o-X)%i*s,u=0;u<m;u++)S[l+u]=e[d+(u-he)%s];return{data:S,rows:y,cols:m}},crop:function(e,i,s,o,u,l){if(i==o&&s==u)return e;Object.assign({},l);var d=new Array(u*o),m=Math.floor((i-o)/2),y=Math.floor((s-u)/2),S,X,he,Ce;for(he=0;he<o;he++)for(S=he*u,X=(he+m)*s,Ce=0;Ce<u;Ce++)d[S+Ce]=e[X+(Ce+y)];return d}};return FFTUtils_1=n,FFTUtils_1}var hasRequiredSrc$3;function requireSrc$3(){return hasRequiredSrc$3||(hasRequiredSrc$3=1,src$3.FFTUtils=requireFFTUtils(),src$3.FFT=requireFftlib()),src$3}var src$2,hasRequiredSrc$2;function requireSrc$2(){if(hasRequiredSrc$2)return src$2;hasRequiredSrc$2=1;var r=requireSrc$3().FFTUtils;function n(o,u,l){var d=s(o),m=d.data,y=Object.assign({normalize:!1,divisor:1,rows:d.rows,cols:d.cols},l),S,X;if(y.rows&&y.cols)S=y.rows,X=y.cols;else throw new Error("Invalid number of rows or columns "+S+" "+X);var he=y.divisor,Ce,Ee,xe=u.length,be=u[0].length;if(y.normalize)for(he=0,Ce=0;Ce<xe;Ce++)for(Ee=0;Ee<be;Ee++)he+=u[Ce][Ee];if(he===0)throw new RangeError("convolution: The divisor is equal to zero");var we=r.toRadix2(m,S,X),ve=r.convolute(we.data,u,we.rows,we.cols);if(ve=r.crop(ve,we.rows,we.cols,S,X),he!=0&&he!=1)for(Ce=0;Ce<ve.length;Ce++)ve[Ce]/=he;return ve}function e(o,u,l){var d=s(o),m=d.data,y=Object.assign({normalize:!1,divisor:1,rows:d.rows,cols:d.cols},l),S,X;if(y.rows&&y.cols)S=y.rows,X=y.cols;else throw new Error("Invalid number of rows or columns "+S+" "+X);var he=y.divisor,Ce=u.length,Ee=u[0].length,xe,be,we,ve,ke,De,Oe,Le,Ae;if(y.normalize)for(he=0,xe=0;xe<Ce;xe++)for(be=0;be<Ee;be++)he+=u[xe][be];if(he===0)throw new RangeError("convolution: The divisor is equal to zero");var Ie=new Array(S*X),Ue=Math.floor(Ce/2),ze=Math.floor(Ee/2);for(ve=0;ve<S;ve++)for(we=0;we<X;we++){for(De=0,be=0;be<Ce;be++)for(xe=0;xe<Ee;xe++)Oe=u[Ce-be-1][Ee-xe-1],Le=(ve+be-Ue+S)%S,Ae=(we+xe-ze+X)%X,ke=Le*X+Ae,De+=m[ke]*Oe;ke=ve*X+we,Ie[ke]=De/he}return Ie}function i(o,u,l){var d=1e3;l&&l.factor&&(d=l.factor);var m=new Array(u),y,S,X,he;d*=-1;var Ce=(u-1)/2,Ee=2*o*o;for(y=0;y<u;y++)for(m[y]=new Array(u),he=(y-Ce)*(y-Ce),S=0;S<u;S++)X=-((S-Ce)*(S-Ce)+he)/Ee,m[y][S]=Math.round(d*(1+X)*Math.exp(X));return m}function s(o){var u=o,l,d;if(typeof o[0]!="number"){l=o.length,d=o[0].length,u=new Array(l*d);for(var m=0;m<l;m++)for(var y=0;y<d;y++)u[m*d+y]=o[m][y]}else{var S=Math.sqrt(o.length);Number.isInteger(S)&&(l=S,d=S)}return{data:u,rows:l,cols:d}}return src$2={fft:n,direct:e,kernelFactory:{LoG:i},matrix2Array:s},src$2}var srcExports$2=requireSrc$2(),_isFinite,hasRequired_isFinite;function require_isFinite(){return hasRequired_isFinite||(hasRequired_isFinite=1,_isFinite=Number.isFinite||function(r){return!(typeof r!="number"||r!==r||r===1/0||r===-1/0)}),_isFinite}var isInteger$1,hasRequiredIsInteger;function requireIsInteger(){if(hasRequiredIsInteger)return isInteger$1;hasRequiredIsInteger=1;var r=require_isFinite();return isInteger$1=Number.isInteger||function(n){return typeof n=="number"&&r(n)&&Math.floor(n)===n},isInteger$1}var isIntegerExports=requireIsInteger();const isInteger=getDefaultExportFromCjs(isIntegerExports);function validateKernel(r){let n,e;if(Array.isArray(r))if(Array.isArray(r[0])){if(!(r.length&1)||!(r[0].length&1))throw new RangeError("validateKernel: Kernel rows and columns should be odd numbers");n=Math.floor(r.length/2),e=Math.floor(r[0].length/2)}else{let i=Math.sqrt(r.length);if(isInteger(i))e=n=Math.floor(Math.sqrt(r.length)/2);else throw new RangeError("validateKernel: Kernel array should be a square");let s=new Array(i);for(let o=0;o<i;o++){s[o]=new Array(i);for(let u=0;u<i;u++)s[o][u]=r[o*i+u]}r=s}else throw new Error(`validateKernel: Invalid Kernel: ${r}`);return{kernel:r,kWidth:e,kHeight:n}}function clamp(r,n){return Math.round(Math.min(Math.max(r,0),n.maxValue))}function directConvolution(r,n,e){if(e===void 0){const o=r.length+n.length-1;e=new Array(o)}fill(e);for(var i=0;i<r.length;i++)for(var s=0;s<n.length;s++)e[i+s]+=r[i]*n[s];return e}function fill(r){for(var n=0;n<r.length;n++)r[n]=0}var fft,hasRequiredFft;function requireFft(){if(hasRequiredFft)return fft;hasRequiredFft=1;function r(n){if(this.size=n|0,this.size<=1||this.size&this.size-1)throw new Error("FFT size must be a power of two and bigger than 1");this._csize=n<<1;for(var e=new Array(this.size*2),i=0;i<e.length;i+=2){const m=Math.PI*i/this.size;e[i]=Math.cos(m),e[i+1]=-Math.sin(m)}this.table=e;for(var s=0,o=1;this.size>o;o<<=1)s++;this._width=s%2===0?s-1:s,this._bitrev=new Array(1<<this._width);for(var u=0;u<this._bitrev.length;u++){this._bitrev[u]=0;for(var l=0;l<this._width;l+=2){var d=this._width-l-2;this._bitrev[u]|=(u>>>l&3)<<d}}this._out=null,this._data=null,this._inv=0}return fft=r,r.prototype.fromComplexArray=function(e,i){for(var s=i||new Array(e.length>>>1),o=0;o<e.length;o+=2)s[o>>>1]=e[o];return s},r.prototype.createComplexArray=function(){const e=new Array(this._csize);for(var i=0;i<e.length;i++)e[i]=0;return e},r.prototype.toComplexArray=function(e,i){for(var s=i||this.createComplexArray(),o=0;o<s.length;o+=2)s[o]=e[o>>>1],s[o+1]=0;return s},r.prototype.completeSpectrum=function(e){for(var i=this._csize,s=i>>>1,o=2;o<s;o+=2)e[i-o]=e[o],e[i-o+1]=-e[o+1]},r.prototype.transform=function(e,i){if(e===i)throw new Error("Input and output buffers must be different");this._out=e,this._data=i,this._inv=0,this._transform4(),this._out=null,this._data=null},r.prototype.realTransform=function(e,i){if(e===i)throw new Error("Input and output buffers must be different");this._out=e,this._data=i,this._inv=0,this._realTransform4(),this._out=null,this._data=null},r.prototype.inverseTransform=function(e,i){if(e===i)throw new Error("Input and output buffers must be different");this._out=e,this._data=i,this._inv=1,this._transform4();for(var s=0;s<e.length;s++)e[s]/=this.size;this._out=null,this._data=null},r.prototype._transform4=function(){var e=this._out,i=this._csize,s=this._width,o=1<<s,u=i/o<<1,l,d,m=this._bitrev;if(u===4)for(l=0,d=0;l<i;l+=u,d++){const xe=m[d];this._singleTransform2(l,xe,o)}else for(l=0,d=0;l<i;l+=u,d++){const xe=m[d];this._singleTransform4(l,xe,o)}var y=this._inv?-1:1,S=this.table;for(o>>=2;o>=2;o>>=2){u=i/o<<1;var X=u>>>2;for(l=0;l<i;l+=u)for(var he=l+X,Ce=l,Ee=0;Ce<he;Ce+=2,Ee+=o){const xe=Ce,be=xe+X,we=be+X,ve=we+X,ke=e[xe],De=e[xe+1],Oe=e[be],Le=e[be+1],Ae=e[we],Ie=e[we+1],Ue=e[ve],ze=e[ve+1],Ye=ke,Xe=De,tt=S[Ee],lt=y*S[Ee+1],_t=Oe*tt-Le*lt,bt=Oe*lt+Le*tt,rt=S[2*Ee],He=y*S[2*Ee+1],We=Ae*rt-Ie*He,qe=Ae*He+Ie*rt,Ke=S[3*Ee],st=y*S[3*Ee+1],ut=Ue*Ke-ze*st,nt=Ue*st+ze*Ke,vt=Ye+We,it=Xe+qe,Ve=Ye-We,ht=Xe-qe,ct=_t+ut,St=bt+nt,Ct=y*(_t-ut),Dt=y*(bt-nt),Tt=vt+ct,At=it+St,sr=vt-ct,Lt=it-St,Kt=Ve+Dt,yt=ht-Ct,qt=Ve-Dt,Qt=ht+Ct;e[xe]=Tt,e[xe+1]=At,e[be]=Kt,e[be+1]=yt,e[we]=sr,e[we+1]=Lt,e[ve]=qt,e[ve+1]=Qt}}},r.prototype._singleTransform2=function(e,i,s){const o=this._out,u=this._data,l=u[i],d=u[i+1],m=u[i+s],y=u[i+s+1],S=l+m,X=d+y,he=l-m,Ce=d-y;o[e]=S,o[e+1]=X,o[e+2]=he,o[e+3]=Ce},r.prototype._singleTransform4=function(e,i,s){const o=this._out,u=this._data,l=this._inv?-1:1,d=s*2,m=s*3,y=u[i],S=u[i+1],X=u[i+s],he=u[i+s+1],Ce=u[i+d],Ee=u[i+d+1],xe=u[i+m],be=u[i+m+1],we=y+Ce,ve=S+Ee,ke=y-Ce,De=S-Ee,Oe=X+xe,Le=he+be,Ae=l*(X-xe),Ie=l*(he-be),Ue=we+Oe,ze=ve+Le,Ye=ke+Ie,Xe=De-Ae,tt=we-Oe,lt=ve-Le,_t=ke-Ie,bt=De+Ae;o[e]=Ue,o[e+1]=ze,o[e+2]=Ye,o[e+3]=Xe,o[e+4]=tt,o[e+5]=lt,o[e+6]=_t,o[e+7]=bt},r.prototype._realTransform4=function(){var e=this._out,i=this._csize,s=this._width,o=1<<s,u=i/o<<1,l,d,m=this._bitrev;if(u===4)for(l=0,d=0;l<i;l+=u,d++){const lr=m[d];this._singleRealTransform2(l,lr>>>1,o>>>1)}else for(l=0,d=0;l<i;l+=u,d++){const lr=m[d];this._singleRealTransform4(l,lr>>>1,o>>>1)}var y=this._inv?-1:1,S=this.table;for(o>>=2;o>=2;o>>=2){u=i/o<<1;var X=u>>>1,he=X>>>1,Ce=he>>>1;for(l=0;l<i;l+=u)for(var Ee=0,xe=0;Ee<=Ce;Ee+=2,xe+=o){var be=l+Ee,we=be+he,ve=we+he,ke=ve+he,De=e[be],Oe=e[be+1],Le=e[we],Ae=e[we+1],Ie=e[ve],Ue=e[ve+1],ze=e[ke],Ye=e[ke+1],Xe=De,tt=Oe,lt=S[xe],_t=y*S[xe+1],bt=Le*lt-Ae*_t,rt=Le*_t+Ae*lt,He=S[2*xe],We=y*S[2*xe+1],qe=Ie*He-Ue*We,Ke=Ie*We+Ue*He,st=S[3*xe],ut=y*S[3*xe+1],nt=ze*st-Ye*ut,vt=ze*ut+Ye*st,it=Xe+qe,Ve=tt+Ke,ht=Xe-qe,ct=tt-Ke,St=bt+nt,Ct=rt+vt,Dt=y*(bt-nt),Tt=y*(rt-vt),At=it+St,sr=Ve+Ct,Lt=ht+Tt,Kt=ct-Dt;if(e[be]=At,e[be+1]=sr,e[we]=Lt,e[we+1]=Kt,Ee===0){var yt=it-St,qt=Ve-Ct;e[ve]=yt,e[ve+1]=qt;continue}if(Ee!==Ce){var Qt=ht,rr=-ct,It=it,_r=-Ve,cr=-y*Tt,Vt=-y*Dt,Gt=-y*Ct,er=-y*St,Yt=Qt+cr,ar=rr+Vt,yr=It+er,Jt=_r-Gt,br=l+he-Ee,Ot=l+X-Ee;e[br]=Yt,e[br+1]=ar,e[Ot]=yr,e[Ot+1]=Jt}}}},r.prototype._singleRealTransform2=function(e,i,s){const o=this._out,u=this._data,l=u[i],d=u[i+s],m=l+d,y=l-d;o[e]=m,o[e+1]=0,o[e+2]=y,o[e+3]=0},r.prototype._singleRealTransform4=function(e,i,s){const o=this._out,u=this._data,l=this._inv?-1:1,d=s*2,m=s*3,y=u[i],S=u[i+s],X=u[i+d],he=u[i+m],Ce=y+X,Ee=y-X,xe=S+he,be=l*(S-he),we=Ce+xe,ve=Ee,ke=-be,De=Ce-xe,Oe=Ee,Le=be;o[e]=we,o[e+1]=0,o[e+2]=ve,o[e+3]=ke,o[e+4]=De,o[e+5]=0,o[e+6]=Oe,o[e+7]=Le},fft}requireFft();function convolutionSeparable(r,n,e,i){const s=new Array(r.length);let o,u,l,d;d=n[1],l=(d.length-1)/2,u=new Array(e+d.length-1),o=new Array(e);for(let m=0;m<i;m++){for(let y=0;y<e;y++)o[y]=r[m*e+y];directConvolution(o,d,u);for(let y=0;y<e;y++)s[m*e+y]=u[l+y]}d=n[0],l=(d.length-1)/2,u=new Array(i+d.length-1),o=new Array(i);for(let m=0;m<e;m++){for(let y=0;y<i;y++)o[y]=s[y*e+m];directConvolution(o,d,u);for(let y=0;y<i;y++)s[y*e+m]=u[l+y]}return s}var matrix$1={};const toString=Object.prototype.toString;function isAnyArray(r){const n=toString.call(r);return n.endsWith("Array]")&&!n.includes("Big")}const libEsm=Object.freeze(Object.defineProperty({__proto__:null,isAnyArray},Symbol.toStringTag,{value:"Module"})),require$$0$2=getAugmentedNamespace(libEsm);function max$1(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!isAnyArray(r))throw new TypeError("input must be an array");if(r.length===0)throw new TypeError("input must not be empty");var e=n.fromIndex,i=e===void 0?0:e,s=n.toIndex,o=s===void 0?r.length:s;if(i<0||i>=r.length||!Number.isInteger(i))throw new Error("fromIndex must be a positive integer smaller than length");if(o<=i||o>r.length||!Number.isInteger(o))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var u=r[i],l=i+1;l<o;l++)r[l]>u&&(u=r[l]);return u}function min$1(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!isAnyArray(r))throw new TypeError("input must be an array");if(r.length===0)throw new TypeError("input must not be empty");var e=n.fromIndex,i=e===void 0?0:e,s=n.toIndex,o=s===void 0?r.length:s;if(i<0||i>=r.length||!Number.isInteger(i))throw new Error("fromIndex must be a positive integer smaller than length");if(o<=i||o>r.length||!Number.isInteger(o))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var u=r[i],l=i+1;l<o;l++)r[l]<u&&(u=r[l]);return u}function rescale(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(isAnyArray(r)){if(r.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var e;if(n.output!==void 0){if(!isAnyArray(n.output))throw new TypeError("output option must be an array if specified");e=n.output}else e=new Array(r.length);var i=min$1(r),s=max$1(r);if(i===s)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var o=n.min,u=o===void 0?n.autoMinMax?i:0:o,l=n.max,d=l===void 0?n.autoMinMax?s:1:l;if(u>=d)throw new RangeError("min option must be smaller than max option");for(var m=(d-u)/(s-i),y=0;y<r.length;y++)e[y]=(r[y]-i)*m+u;return e}const libEs6=Object.freeze(Object.defineProperty({__proto__:null,default:rescale},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(libEs6);var hasRequiredMatrix;function requireMatrix(){var pr,yl,Tr;if(hasRequiredMatrix)return matrix$1;hasRequiredMatrix=1,Object.defineProperty(matrix$1,"__esModule",{value:!0});var r=require$$0$2,n=require$$1;const e=" ".repeat(2),i=" ".repeat(4);function s(){return o(this)}function o(Be,Pe={}){const{maxRows:Re=15,maxColumns:Se=10,maxNumSize:Te=8,padMinus:Fe="auto"}=Pe;return`${Be.constructor.name} {
${e}[
${i}${u(Be,Re,Se,Te,Fe)}
${e}]
${e}rows: ${Be.rows}
${e}columns: ${Be.columns}
}`}function u(Be,Pe,Re,Se,Te){const{rows:Fe,columns:Ge}=Be,Je=Math.min(Fe,Pe),Qe=Math.min(Ge,Re),et=[];if(Te==="auto"){Te=!1;e:for(let pt=0;pt<Je;pt++)for(let at=0;at<Qe;at++)if(Be.get(pt,at)<0){Te=!0;break e}}for(let pt=0;pt<Je;pt++){let at=[];for(let Pt=0;Pt<Qe;Pt++)at.push(l(Be.get(pt,Pt),Se,Te));et.push(`${at.join(" ")}`)}return Qe!==Ge&&(et[et.length-1]+=` ... ${Ge-Re} more columns`),Je!==Fe&&et.push(`... ${Fe-Pe} more rows`),et.join(`
${i}`)}function l(Be,Pe,Re){return(Be>=0&&Re?` ${d(Be,Pe-1)}`:d(Be,Pe)).padEnd(Pe)}function d(Be,Pe){let Re=Be.toString();if(Re.length<=Pe)return Re;let Se=Be.toFixed(Pe);if(Se.length>Pe&&(Se=Be.toFixed(Math.max(0,Pe-(Se.length-Pe)))),Se.length<=Pe&&!Se.startsWith("0.000")&&!Se.startsWith("-0.000"))return Se;let Te=Be.toExponential(Pe);return Te.length>Pe&&(Te=Be.toExponential(Math.max(0,Pe-(Te.length-Pe)))),Te.slice(0)}function m(Be,Pe){Be.prototype.add=function(Se){return typeof Se=="number"?this.addS(Se):this.addM(Se)},Be.prototype.addS=function(Se){for(let Te=0;Te<this.rows;Te++)for(let Fe=0;Fe<this.columns;Fe++)this.set(Te,Fe,this.get(Te,Fe)+Se);return this},Be.prototype.addM=function(Se){if(Se=Pe.checkMatrix(Se),this.rows!==Se.rows||this.columns!==Se.columns)throw new RangeError("Matrices dimensions must be equal");for(let Te=0;Te<this.rows;Te++)for(let Fe=0;Fe<this.columns;Fe++)this.set(Te,Fe,this.get(Te,Fe)+Se.get(Te,Fe));return this},Be.add=function(Se,Te){return new Pe(Se).add(Te)},Be.prototype.sub=function(Se){return typeof Se=="number"?this.subS(Se):this.subM(Se)},Be.prototype.subS=function(Se){for(let Te=0;Te<this.rows;Te++)for(let Fe=0;Fe<this.columns;Fe++)this.set(Te,Fe,this.get(Te,Fe)-Se);return this},Be.prototype.subM=function(Se){if(Se=Pe.checkMatrix(Se),this.rows!==Se.rows||this.columns!==Se.columns)throw new RangeError("Matrices dimensions must be equal");for(let Te=0;Te<this.rows;Te++)for(let Fe=0;Fe<this.columns;Fe++)this.set(Te,Fe,this.get(Te,Fe)-Se.get(Te,Fe));return this},Be.sub=function(Se,Te){return new Pe(Se).sub(Te)},Be.prototype.subtract=Be.prototype.sub,Be.prototype.subtractS=Be.prototype.subS,Be.prototype.subtractM=Be.prototype.subM,Be.subtract=Be.sub,Be.prototype.mul=function(Se){return typeof Se=="number"?this.mulS(Se):this.mulM(Se)},Be.prototype.mulS=function(Se){for(let Te=0;Te<this.rows;Te++)for(let Fe=0;Fe<this.columns;Fe++)this.set(Te,Fe,this.get(Te,Fe)*Se);return this},Be.prototype.mulM=function(Se){if(Se=Pe.checkMatrix(Se),this.rows!==Se.rows||this.columns!==Se.columns)throw new RangeError("Matrices dimensions must be equal");for(let Te=0;Te<this.rows;Te++)for(let Fe=0;Fe<this.columns;Fe++)this.set(Te,Fe,this.get(Te,Fe)*Se.get(Te,Fe));return this},Be.mul=function(Se,Te){return new Pe(Se).mul(Te)},Be.prototype.multiply=Be.prototype.mul,Be.prototype.multiplyS=Be.prototype.mulS,Be.prototype.multiplyM=Be.prototype.mulM,Be.multiply=Be.mul,Be.prototype.div=function(Se){return typeof Se=="number"?this.divS(Se):this.divM(Se)},Be.prototype.divS=function(Se){for(let Te=0;Te<this.rows;Te++)for(let Fe=0;Fe<this.columns;Fe++)this.set(Te,Fe,this.get(Te,Fe)/Se);return this},Be.prototype.divM=function(Se){if(Se=Pe.checkMatrix(Se),this.rows!==Se.rows||this.columns!==Se.columns)throw new RangeError("Matrices dimensions must be equal");for(let Te=0;Te<this.rows;Te++)for(let Fe=0;Fe<this.columns;Fe++)this.set(Te,Fe,this.get(Te,Fe)/Se.get(Te,Fe));return this},Be.div=function(Se,Te){return new Pe(Se).div(Te)},Be.prototype.divide=Be.prototype.div,Be.prototype.divideS=Be.prototype.divS,Be.prototype.divideM=Be.prototype.divM,Be.divide=Be.div,Be.prototype.mod=function(Se){return typeof Se=="number"?this.modS(Se):this.modM(Se)},Be.prototype.modS=function(Se){for(let Te=0;Te<this.rows;Te++)for(let Fe=0;Fe<this.columns;Fe++)this.set(Te,Fe,this.get(Te,Fe)%Se);return this},Be.prototype.modM=function(Se){if(Se=Pe.checkMatrix(Se),this.rows!==Se.rows||this.columns!==Se.columns)throw new RangeError("Matrices dimensions must be equal");for(let Te=0;Te<this.rows;Te++)for(let Fe=0;Fe<this.columns;Fe++)this.set(Te,Fe,this.get(Te,Fe)%Se.get(Te,Fe));return this},Be.mod=function(Se,Te){return new Pe(Se).mod(Te)},Be.prototype.modulus=Be.prototype.mod,Be.prototype.modulusS=Be.prototype.modS,Be.prototype.modulusM=Be.prototype.modM,Be.modulus=Be.mod,Be.prototype.and=function(Se){return typeof Se=="number"?this.andS(Se):this.andM(Se)},Be.prototype.andS=function(Se){for(let Te=0;Te<this.rows;Te++)for(let Fe=0;Fe<this.columns;Fe++)this.set(Te,Fe,this.get(Te,Fe)&Se);return this},Be.prototype.andM=function(Se){if(Se=Pe.checkMatrix(Se),this.rows!==Se.rows||this.columns!==Se.columns)throw new RangeError("Matrices dimensions must be equal");for(let Te=0;Te<this.rows;Te++)for(let Fe=0;Fe<this.columns;Fe++)this.set(Te,Fe,this.get(Te,Fe)&Se.get(Te,Fe));return this},Be.and=function(Se,Te){return new Pe(Se).and(Te)},Be.prototype.or=function(Se){return typeof Se=="number"?this.orS(Se):this.orM(Se)},Be.prototype.orS=function(Se){for(let Te=0;Te<this.rows;Te++)for(let Fe=0;Fe<this.columns;Fe++)this.set(Te,Fe,this.get(Te,Fe)|Se);return this},Be.prototype.orM=function(Se){if(Se=Pe.checkMatrix(Se),this.rows!==Se.rows||this.columns!==Se.columns)throw new RangeError("Matrices dimensions must be equal");for(let Te=0;Te<this.rows;Te++)for(let Fe=0;Fe<this.columns;Fe++)this.set(Te,Fe,this.get(Te,Fe)|Se.get(Te,Fe));return this},Be.or=function(Se,Te){return new Pe(Se).or(Te)},Be.prototype.xor=function(Se){return typeof Se=="number"?this.xorS(Se):this.xorM(Se)},Be.prototype.xorS=function(Se){for(let Te=0;Te<this.rows;Te++)for(let Fe=0;Fe<this.columns;Fe++)this.set(Te,Fe,this.get(Te,Fe)^Se);return this},Be.prototype.xorM=function(Se){if(Se=Pe.checkMatrix(Se),this.rows!==Se.rows||this.columns!==Se.columns)throw new RangeError("Matrices dimensions must be equal");for(let Te=0;Te<this.rows;Te++)for(let Fe=0;Fe<this.columns;Fe++)this.set(Te,Fe,this.get(Te,Fe)^Se.get(Te,Fe));return this},Be.xor=function(Se,Te){return new Pe(Se).xor(Te)},Be.prototype.leftShift=function(Se){return typeof Se=="number"?this.leftShiftS(Se):this.leftShiftM(Se)},Be.prototype.leftShiftS=function(Se){for(let Te=0;Te<this.rows;Te++)for(let Fe=0;Fe<this.columns;Fe++)this.set(Te,Fe,this.get(Te,Fe)<<Se);return this},Be.prototype.leftShiftM=function(Se){if(Se=Pe.checkMatrix(Se),this.rows!==Se.rows||this.columns!==Se.columns)throw new RangeError("Matrices dimensions must be equal");for(let Te=0;Te<this.rows;Te++)for(let Fe=0;Fe<this.columns;Fe++)this.set(Te,Fe,this.get(Te,Fe)<<Se.get(Te,Fe));return this},Be.leftShift=function(Se,Te){return new Pe(Se).leftShift(Te)},Be.prototype.signPropagatingRightShift=function(Se){return typeof Se=="number"?this.signPropagatingRightShiftS(Se):this.signPropagatingRightShiftM(Se)},Be.prototype.signPropagatingRightShiftS=function(Se){for(let Te=0;Te<this.rows;Te++)for(let Fe=0;Fe<this.columns;Fe++)this.set(Te,Fe,this.get(Te,Fe)>>Se);return this},Be.prototype.signPropagatingRightShiftM=function(Se){if(Se=Pe.checkMatrix(Se),this.rows!==Se.rows||this.columns!==Se.columns)throw new RangeError("Matrices dimensions must be equal");for(let Te=0;Te<this.rows;Te++)for(let Fe=0;Fe<this.columns;Fe++)this.set(Te,Fe,this.get(Te,Fe)>>Se.get(Te,Fe));return this},Be.signPropagatingRightShift=function(Se,Te){return new Pe(Se).signPropagatingRightShift(Te)},Be.prototype.rightShift=function(Se){return typeof Se=="number"?this.rightShiftS(Se):this.rightShiftM(Se)},Be.prototype.rightShiftS=function(Se){for(let Te=0;Te<this.rows;Te++)for(let Fe=0;Fe<this.columns;Fe++)this.set(Te,Fe,this.get(Te,Fe)>>>Se);return this},Be.prototype.rightShiftM=function(Se){if(Se=Pe.checkMatrix(Se),this.rows!==Se.rows||this.columns!==Se.columns)throw new RangeError("Matrices dimensions must be equal");for(let Te=0;Te<this.rows;Te++)for(let Fe=0;Fe<this.columns;Fe++)this.set(Te,Fe,this.get(Te,Fe)>>>Se.get(Te,Fe));return this},Be.rightShift=function(Se,Te){return new Pe(Se).rightShift(Te)},Be.prototype.zeroFillRightShift=Be.prototype.rightShift,Be.prototype.zeroFillRightShiftS=Be.prototype.rightShiftS,Be.prototype.zeroFillRightShiftM=Be.prototype.rightShiftM,Be.zeroFillRightShift=Be.rightShift,Be.prototype.not=function(){for(let Se=0;Se<this.rows;Se++)for(let Te=0;Te<this.columns;Te++)this.set(Se,Te,~this.get(Se,Te));return this},Be.not=function(Se){return new Pe(Se).not()},Be.prototype.abs=function(){for(let Se=0;Se<this.rows;Se++)for(let Te=0;Te<this.columns;Te++)this.set(Se,Te,Math.abs(this.get(Se,Te)));return this},Be.abs=function(Se){return new Pe(Se).abs()},Be.prototype.acos=function(){for(let Se=0;Se<this.rows;Se++)for(let Te=0;Te<this.columns;Te++)this.set(Se,Te,Math.acos(this.get(Se,Te)));return this},Be.acos=function(Se){return new Pe(Se).acos()},Be.prototype.acosh=function(){for(let Se=0;Se<this.rows;Se++)for(let Te=0;Te<this.columns;Te++)this.set(Se,Te,Math.acosh(this.get(Se,Te)));return this},Be.acosh=function(Se){return new Pe(Se).acosh()},Be.prototype.asin=function(){for(let Se=0;Se<this.rows;Se++)for(let Te=0;Te<this.columns;Te++)this.set(Se,Te,Math.asin(this.get(Se,Te)));return this},Be.asin=function(Se){return new Pe(Se).asin()},Be.prototype.asinh=function(){for(let Se=0;Se<this.rows;Se++)for(let Te=0;Te<this.columns;Te++)this.set(Se,Te,Math.asinh(this.get(Se,Te)));return this},Be.asinh=function(Se){return new Pe(Se).asinh()},Be.prototype.atan=function(){for(let Se=0;Se<this.rows;Se++)for(let Te=0;Te<this.columns;Te++)this.set(Se,Te,Math.atan(this.get(Se,Te)));return this},Be.atan=function(Se){return new Pe(Se).atan()},Be.prototype.atanh=function(){for(let Se=0;Se<this.rows;Se++)for(let Te=0;Te<this.columns;Te++)this.set(Se,Te,Math.atanh(this.get(Se,Te)));return this},Be.atanh=function(Se){return new Pe(Se).atanh()},Be.prototype.cbrt=function(){for(let Se=0;Se<this.rows;Se++)for(let Te=0;Te<this.columns;Te++)this.set(Se,Te,Math.cbrt(this.get(Se,Te)));return this},Be.cbrt=function(Se){return new Pe(Se).cbrt()},Be.prototype.ceil=function(){for(let Se=0;Se<this.rows;Se++)for(let Te=0;Te<this.columns;Te++)this.set(Se,Te,Math.ceil(this.get(Se,Te)));return this},Be.ceil=function(Se){return new Pe(Se).ceil()},Be.prototype.clz32=function(){for(let Se=0;Se<this.rows;Se++)for(let Te=0;Te<this.columns;Te++)this.set(Se,Te,Math.clz32(this.get(Se,Te)));return this},Be.clz32=function(Se){return new Pe(Se).clz32()},Be.prototype.cos=function(){for(let Se=0;Se<this.rows;Se++)for(let Te=0;Te<this.columns;Te++)this.set(Se,Te,Math.cos(this.get(Se,Te)));return this},Be.cos=function(Se){return new Pe(Se).cos()},Be.prototype.cosh=function(){for(let Se=0;Se<this.rows;Se++)for(let Te=0;Te<this.columns;Te++)this.set(Se,Te,Math.cosh(this.get(Se,Te)));return this},Be.cosh=function(Se){return new Pe(Se).cosh()},Be.prototype.exp=function(){for(let Se=0;Se<this.rows;Se++)for(let Te=0;Te<this.columns;Te++)this.set(Se,Te,Math.exp(this.get(Se,Te)));return this},Be.exp=function(Se){return new Pe(Se).exp()},Be.prototype.expm1=function(){for(let Se=0;Se<this.rows;Se++)for(let Te=0;Te<this.columns;Te++)this.set(Se,Te,Math.expm1(this.get(Se,Te)));return this},Be.expm1=function(Se){return new Pe(Se).expm1()},Be.prototype.floor=function(){for(let Se=0;Se<this.rows;Se++)for(let Te=0;Te<this.columns;Te++)this.set(Se,Te,Math.floor(this.get(Se,Te)));return this},Be.floor=function(Se){return new Pe(Se).floor()},Be.prototype.fround=function(){for(let Se=0;Se<this.rows;Se++)for(let Te=0;Te<this.columns;Te++)this.set(Se,Te,Math.fround(this.get(Se,Te)));return this},Be.fround=function(Se){return new Pe(Se).fround()},Be.prototype.log=function(){for(let Se=0;Se<this.rows;Se++)for(let Te=0;Te<this.columns;Te++)this.set(Se,Te,Math.log(this.get(Se,Te)));return this},Be.log=function(Se){return new Pe(Se).log()},Be.prototype.log1p=function(){for(let Se=0;Se<this.rows;Se++)for(let Te=0;Te<this.columns;Te++)this.set(Se,Te,Math.log1p(this.get(Se,Te)));return this},Be.log1p=function(Se){return new Pe(Se).log1p()},Be.prototype.log10=function(){for(let Se=0;Se<this.rows;Se++)for(let Te=0;Te<this.columns;Te++)this.set(Se,Te,Math.log10(this.get(Se,Te)));return this},Be.log10=function(Se){return new Pe(Se).log10()},Be.prototype.log2=function(){for(let Se=0;Se<this.rows;Se++)for(let Te=0;Te<this.columns;Te++)this.set(Se,Te,Math.log2(this.get(Se,Te)));return this},Be.log2=function(Se){return new Pe(Se).log2()},Be.prototype.round=function(){for(let Se=0;Se<this.rows;Se++)for(let Te=0;Te<this.columns;Te++)this.set(Se,Te,Math.round(this.get(Se,Te)));return this},Be.round=function(Se){return new Pe(Se).round()},Be.prototype.sign=function(){for(let Se=0;Se<this.rows;Se++)for(let Te=0;Te<this.columns;Te++)this.set(Se,Te,Math.sign(this.get(Se,Te)));return this},Be.sign=function(Se){return new Pe(Se).sign()},Be.prototype.sin=function(){for(let Se=0;Se<this.rows;Se++)for(let Te=0;Te<this.columns;Te++)this.set(Se,Te,Math.sin(this.get(Se,Te)));return this},Be.sin=function(Se){return new Pe(Se).sin()},Be.prototype.sinh=function(){for(let Se=0;Se<this.rows;Se++)for(let Te=0;Te<this.columns;Te++)this.set(Se,Te,Math.sinh(this.get(Se,Te)));return this},Be.sinh=function(Se){return new Pe(Se).sinh()},Be.prototype.sqrt=function(){for(let Se=0;Se<this.rows;Se++)for(let Te=0;Te<this.columns;Te++)this.set(Se,Te,Math.sqrt(this.get(Se,Te)));return this},Be.sqrt=function(Se){return new Pe(Se).sqrt()},Be.prototype.tan=function(){for(let Se=0;Se<this.rows;Se++)for(let Te=0;Te<this.columns;Te++)this.set(Se,Te,Math.tan(this.get(Se,Te)));return this},Be.tan=function(Se){return new Pe(Se).tan()},Be.prototype.tanh=function(){for(let Se=0;Se<this.rows;Se++)for(let Te=0;Te<this.columns;Te++)this.set(Se,Te,Math.tanh(this.get(Se,Te)));return this},Be.tanh=function(Se){return new Pe(Se).tanh()},Be.prototype.trunc=function(){for(let Se=0;Se<this.rows;Se++)for(let Te=0;Te<this.columns;Te++)this.set(Se,Te,Math.trunc(this.get(Se,Te)));return this},Be.trunc=function(Se){return new Pe(Se).trunc()},Be.pow=function(Se,Te){return new Pe(Se).pow(Te)},Be.prototype.pow=function(Se){return typeof Se=="number"?this.powS(Se):this.powM(Se)},Be.prototype.powS=function(Se){for(let Te=0;Te<this.rows;Te++)for(let Fe=0;Fe<this.columns;Fe++)this.set(Te,Fe,this.get(Te,Fe)**Se);return this},Be.prototype.powM=function(Se){if(Se=Pe.checkMatrix(Se),this.rows!==Se.rows||this.columns!==Se.columns)throw new RangeError("Matrices dimensions must be equal");for(let Te=0;Te<this.rows;Te++)for(let Fe=0;Fe<this.columns;Fe++)this.set(Te,Fe,this.get(Te,Fe)**Se.get(Te,Fe));return this}}function y(Be,Pe,Re){let Se=Re?Be.rows:Be.rows-1;if(Pe<0||Pe>Se)throw new RangeError("Row index out of range")}function S(Be,Pe,Re){let Se=Re?Be.columns:Be.columns-1;if(Pe<0||Pe>Se)throw new RangeError("Column index out of range")}function X(Be,Pe){if(Pe.to1DArray&&(Pe=Pe.to1DArray()),Pe.length!==Be.columns)throw new RangeError("vector size must be the same as the number of columns");return Pe}function he(Be,Pe){if(Pe.to1DArray&&(Pe=Pe.to1DArray()),Pe.length!==Be.rows)throw new RangeError("vector size must be the same as the number of rows");return Pe}function Ce(Be,Pe){if(!r.isAnyArray(Pe))throw new TypeError("row indices must be an array");for(let Re=0;Re<Pe.length;Re++)if(Pe[Re]<0||Pe[Re]>=Be.rows)throw new RangeError("row indices are out of range")}function Ee(Be,Pe){if(!r.isAnyArray(Pe))throw new TypeError("column indices must be an array");for(let Re=0;Re<Pe.length;Re++)if(Pe[Re]<0||Pe[Re]>=Be.columns)throw new RangeError("column indices are out of range")}function xe(Be,Pe,Re,Se,Te){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(we("startRow",Pe),we("endRow",Re),we("startColumn",Se),we("endColumn",Te),Pe>Re||Se>Te||Pe<0||Pe>=Be.rows||Re<0||Re>=Be.rows||Se<0||Se>=Be.columns||Te<0||Te>=Be.columns)throw new RangeError("Submatrix indices are out of range")}function be(Be,Pe=0){let Re=[];for(let Se=0;Se<Be;Se++)Re.push(Pe);return Re}function we(Be,Pe){if(typeof Pe!="number")throw new TypeError(`${Be} must be a number`)}function ve(Be){if(Be.isEmpty())throw new Error("Empty matrix has no elements to index")}function ke(Be){let Pe=be(Be.rows);for(let Re=0;Re<Be.rows;++Re)for(let Se=0;Se<Be.columns;++Se)Pe[Re]+=Be.get(Re,Se);return Pe}function De(Be){let Pe=be(Be.columns);for(let Re=0;Re<Be.rows;++Re)for(let Se=0;Se<Be.columns;++Se)Pe[Se]+=Be.get(Re,Se);return Pe}function Oe(Be){let Pe=0;for(let Re=0;Re<Be.rows;Re++)for(let Se=0;Se<Be.columns;Se++)Pe+=Be.get(Re,Se);return Pe}function Le(Be){let Pe=be(Be.rows,1);for(let Re=0;Re<Be.rows;++Re)for(let Se=0;Se<Be.columns;++Se)Pe[Re]*=Be.get(Re,Se);return Pe}function Ae(Be){let Pe=be(Be.columns,1);for(let Re=0;Re<Be.rows;++Re)for(let Se=0;Se<Be.columns;++Se)Pe[Se]*=Be.get(Re,Se);return Pe}function Ie(Be){let Pe=1;for(let Re=0;Re<Be.rows;Re++)for(let Se=0;Se<Be.columns;Se++)Pe*=Be.get(Re,Se);return Pe}function Ue(Be,Pe,Re){const Se=Be.rows,Te=Be.columns,Fe=[];for(let Ge=0;Ge<Se;Ge++){let Je=0,Qe=0,et=0;for(let pt=0;pt<Te;pt++)et=Be.get(Ge,pt)-Re[Ge],Je+=et,Qe+=et*et;Pe?Fe.push((Qe-Je*Je/Te)/(Te-1)):Fe.push((Qe-Je*Je/Te)/Te)}return Fe}function ze(Be,Pe,Re){const Se=Be.rows,Te=Be.columns,Fe=[];for(let Ge=0;Ge<Te;Ge++){let Je=0,Qe=0,et=0;for(let pt=0;pt<Se;pt++)et=Be.get(pt,Ge)-Re[Ge],Je+=et,Qe+=et*et;Pe?Fe.push((Qe-Je*Je/Se)/(Se-1)):Fe.push((Qe-Je*Je/Se)/Se)}return Fe}function Ye(Be,Pe,Re){const Se=Be.rows,Te=Be.columns,Fe=Se*Te;let Ge=0,Je=0,Qe=0;for(let et=0;et<Se;et++)for(let pt=0;pt<Te;pt++)Qe=Be.get(et,pt)-Re,Ge+=Qe,Je+=Qe*Qe;return Pe?(Je-Ge*Ge/Fe)/(Fe-1):(Je-Ge*Ge/Fe)/Fe}function Xe(Be,Pe){for(let Re=0;Re<Be.rows;Re++)for(let Se=0;Se<Be.columns;Se++)Be.set(Re,Se,Be.get(Re,Se)-Pe[Re])}function tt(Be,Pe){for(let Re=0;Re<Be.rows;Re++)for(let Se=0;Se<Be.columns;Se++)Be.set(Re,Se,Be.get(Re,Se)-Pe[Se])}function lt(Be,Pe){for(let Re=0;Re<Be.rows;Re++)for(let Se=0;Se<Be.columns;Se++)Be.set(Re,Se,Be.get(Re,Se)-Pe)}function _t(Be){const Pe=[];for(let Re=0;Re<Be.rows;Re++){let Se=0;for(let Te=0;Te<Be.columns;Te++)Se+=Be.get(Re,Te)**2/(Be.columns-1);Pe.push(Math.sqrt(Se))}return Pe}function bt(Be,Pe){for(let Re=0;Re<Be.rows;Re++)for(let Se=0;Se<Be.columns;Se++)Be.set(Re,Se,Be.get(Re,Se)/Pe[Re])}function rt(Be){const Pe=[];for(let Re=0;Re<Be.columns;Re++){let Se=0;for(let Te=0;Te<Be.rows;Te++)Se+=Be.get(Te,Re)**2/(Be.rows-1);Pe.push(Math.sqrt(Se))}return Pe}function He(Be,Pe){for(let Re=0;Re<Be.rows;Re++)for(let Se=0;Se<Be.columns;Se++)Be.set(Re,Se,Be.get(Re,Se)/Pe[Se])}function We(Be){const Pe=Be.size-1;let Re=0;for(let Se=0;Se<Be.columns;Se++)for(let Te=0;Te<Be.rows;Te++)Re+=Be.get(Te,Se)**2/Pe;return Math.sqrt(Re)}function qe(Be,Pe){for(let Re=0;Re<Be.rows;Re++)for(let Se=0;Se<Be.columns;Se++)Be.set(Re,Se,Be.get(Re,Se)/Pe)}class Ke{static from1DArray(Pe,Re,Se){if(Pe*Re!==Se.length)throw new RangeError("data length does not match given dimensions");let Fe=new nt(Pe,Re);for(let Ge=0;Ge<Pe;Ge++)for(let Je=0;Je<Re;Je++)Fe.set(Ge,Je,Se[Ge*Re+Je]);return Fe}static rowVector(Pe){let Re=new nt(1,Pe.length);for(let Se=0;Se<Pe.length;Se++)Re.set(0,Se,Pe[Se]);return Re}static columnVector(Pe){let Re=new nt(Pe.length,1);for(let Se=0;Se<Pe.length;Se++)Re.set(Se,0,Pe[Se]);return Re}static zeros(Pe,Re){return new nt(Pe,Re)}static ones(Pe,Re){return new nt(Pe,Re).fill(1)}static rand(Pe,Re,Se={}){if(typeof Se!="object")throw new TypeError("options must be an object");const{random:Te=Math.random}=Se;let Fe=new nt(Pe,Re);for(let Ge=0;Ge<Pe;Ge++)for(let Je=0;Je<Re;Je++)Fe.set(Ge,Je,Te());return Fe}static randInt(Pe,Re,Se={}){if(typeof Se!="object")throw new TypeError("options must be an object");const{min:Te=0,max:Fe=1e3,random:Ge=Math.random}=Se;if(!Number.isInteger(Te))throw new TypeError("min must be an integer");if(!Number.isInteger(Fe))throw new TypeError("max must be an integer");if(Te>=Fe)throw new RangeError("min must be smaller than max");let Je=Fe-Te,Qe=new nt(Pe,Re);for(let et=0;et<Pe;et++)for(let pt=0;pt<Re;pt++){let at=Te+Math.round(Ge()*Je);Qe.set(et,pt,at)}return Qe}static eye(Pe,Re,Se){Re===void 0&&(Re=Pe),Se===void 0&&(Se=1);let Te=Math.min(Pe,Re),Fe=this.zeros(Pe,Re);for(let Ge=0;Ge<Te;Ge++)Fe.set(Ge,Ge,Se);return Fe}static diag(Pe,Re,Se){let Te=Pe.length;Re===void 0&&(Re=Te),Se===void 0&&(Se=Re);let Fe=Math.min(Te,Re,Se),Ge=this.zeros(Re,Se);for(let Je=0;Je<Fe;Je++)Ge.set(Je,Je,Pe[Je]);return Ge}static min(Pe,Re){Pe=this.checkMatrix(Pe),Re=this.checkMatrix(Re);let Se=Pe.rows,Te=Pe.columns,Fe=new nt(Se,Te);for(let Ge=0;Ge<Se;Ge++)for(let Je=0;Je<Te;Je++)Fe.set(Ge,Je,Math.min(Pe.get(Ge,Je),Re.get(Ge,Je)));return Fe}static max(Pe,Re){Pe=this.checkMatrix(Pe),Re=this.checkMatrix(Re);let Se=Pe.rows,Te=Pe.columns,Fe=new this(Se,Te);for(let Ge=0;Ge<Se;Ge++)for(let Je=0;Je<Te;Je++)Fe.set(Ge,Je,Math.max(Pe.get(Ge,Je),Re.get(Ge,Je)));return Fe}static checkMatrix(Pe){return Ke.isMatrix(Pe)?Pe:new nt(Pe)}static isMatrix(Pe){return Pe!=null&&Pe.klass==="Matrix"}get size(){return this.rows*this.columns}apply(Pe){if(typeof Pe!="function")throw new TypeError("callback must be a function");for(let Re=0;Re<this.rows;Re++)for(let Se=0;Se<this.columns;Se++)Pe.call(this,Re,Se);return this}to1DArray(){let Pe=[];for(let Re=0;Re<this.rows;Re++)for(let Se=0;Se<this.columns;Se++)Pe.push(this.get(Re,Se));return Pe}to2DArray(){let Pe=[];for(let Re=0;Re<this.rows;Re++){Pe.push([]);for(let Se=0;Se<this.columns;Se++)Pe[Re].push(this.get(Re,Se))}return Pe}toJSON(){return this.to2DArray()}isRowVector(){return this.rows===1}isColumnVector(){return this.columns===1}isVector(){return this.rows===1||this.columns===1}isSquare(){return this.rows===this.columns}isEmpty(){return this.rows===0||this.columns===0}isSymmetric(){if(this.isSquare()){for(let Pe=0;Pe<this.rows;Pe++)for(let Re=0;Re<=Pe;Re++)if(this.get(Pe,Re)!==this.get(Re,Pe))return!1;return!0}return!1}isDistance(){if(!this.isSymmetric())return!1;for(let Pe=0;Pe<this.rows;Pe++)if(this.get(Pe,Pe)!==0)return!1;return!0}isEchelonForm(){let Pe=0,Re=0,Se=-1,Te=!0,Fe=!1;for(;Pe<this.rows&&Te;){for(Re=0,Fe=!1;Re<this.columns&&Fe===!1;)this.get(Pe,Re)===0?Re++:this.get(Pe,Re)===1&&Re>Se?(Fe=!0,Se=Re):(Te=!1,Fe=!0);Pe++}return Te}isReducedEchelonForm(){let Pe=0,Re=0,Se=-1,Te=!0,Fe=!1;for(;Pe<this.rows&&Te;){for(Re=0,Fe=!1;Re<this.columns&&Fe===!1;)this.get(Pe,Re)===0?Re++:this.get(Pe,Re)===1&&Re>Se?(Fe=!0,Se=Re):(Te=!1,Fe=!0);for(let Ge=Re+1;Ge<this.rows;Ge++)this.get(Pe,Ge)!==0&&(Te=!1);Pe++}return Te}echelonForm(){let Pe=this.clone(),Re=0,Se=0;for(;Re<Pe.rows&&Se<Pe.columns;){let Te=Re;for(let Fe=Re;Fe<Pe.rows;Fe++)Pe.get(Fe,Se)>Pe.get(Te,Se)&&(Te=Fe);if(Pe.get(Te,Se)===0)Se++;else{Pe.swapRows(Re,Te);let Fe=Pe.get(Re,Se);for(let Ge=Se;Ge<Pe.columns;Ge++)Pe.set(Re,Ge,Pe.get(Re,Ge)/Fe);for(let Ge=Re+1;Ge<Pe.rows;Ge++){let Je=Pe.get(Ge,Se)/Pe.get(Re,Se);Pe.set(Ge,Se,0);for(let Qe=Se+1;Qe<Pe.columns;Qe++)Pe.set(Ge,Qe,Pe.get(Ge,Qe)-Pe.get(Re,Qe)*Je)}Re++,Se++}}return Pe}reducedEchelonForm(){let Pe=this.echelonForm(),Re=Pe.columns,Se=Pe.rows,Te=Se-1;for(;Te>=0;)if(Pe.maxRow(Te)===0)Te--;else{let Fe=0,Ge=!1;for(;Fe<Se&&Ge===!1;)Pe.get(Te,Fe)===1?Ge=!0:Fe++;for(let Je=0;Je<Te;Je++){let Qe=Pe.get(Je,Fe);for(let et=Fe;et<Re;et++){let pt=Pe.get(Je,et)-Qe*Pe.get(Te,et);Pe.set(Je,et,pt)}}Te--}return Pe}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(Pe={}){if(typeof Pe!="object")throw new TypeError("options must be an object");const{rows:Re=1,columns:Se=1}=Pe;if(!Number.isInteger(Re)||Re<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(Se)||Se<=0)throw new TypeError("columns must be a positive integer");let Te=new nt(this.rows*Re,this.columns*Se);for(let Fe=0;Fe<Re;Fe++)for(let Ge=0;Ge<Se;Ge++)Te.setSubMatrix(this,this.rows*Fe,this.columns*Ge);return Te}fill(Pe){for(let Re=0;Re<this.rows;Re++)for(let Se=0;Se<this.columns;Se++)this.set(Re,Se,Pe);return this}neg(){return this.mulS(-1)}getRow(Pe){y(this,Pe);let Re=[];for(let Se=0;Se<this.columns;Se++)Re.push(this.get(Pe,Se));return Re}getRowVector(Pe){return nt.rowVector(this.getRow(Pe))}setRow(Pe,Re){y(this,Pe),Re=X(this,Re);for(let Se=0;Se<this.columns;Se++)this.set(Pe,Se,Re[Se]);return this}swapRows(Pe,Re){y(this,Pe),y(this,Re);for(let Se=0;Se<this.columns;Se++){let Te=this.get(Pe,Se);this.set(Pe,Se,this.get(Re,Se)),this.set(Re,Se,Te)}return this}getColumn(Pe){S(this,Pe);let Re=[];for(let Se=0;Se<this.rows;Se++)Re.push(this.get(Se,Pe));return Re}getColumnVector(Pe){return nt.columnVector(this.getColumn(Pe))}setColumn(Pe,Re){S(this,Pe),Re=he(this,Re);for(let Se=0;Se<this.rows;Se++)this.set(Se,Pe,Re[Se]);return this}swapColumns(Pe,Re){S(this,Pe),S(this,Re);for(let Se=0;Se<this.rows;Se++){let Te=this.get(Se,Pe);this.set(Se,Pe,this.get(Se,Re)),this.set(Se,Re,Te)}return this}addRowVector(Pe){Pe=X(this,Pe);for(let Re=0;Re<this.rows;Re++)for(let Se=0;Se<this.columns;Se++)this.set(Re,Se,this.get(Re,Se)+Pe[Se]);return this}subRowVector(Pe){Pe=X(this,Pe);for(let Re=0;Re<this.rows;Re++)for(let Se=0;Se<this.columns;Se++)this.set(Re,Se,this.get(Re,Se)-Pe[Se]);return this}mulRowVector(Pe){Pe=X(this,Pe);for(let Re=0;Re<this.rows;Re++)for(let Se=0;Se<this.columns;Se++)this.set(Re,Se,this.get(Re,Se)*Pe[Se]);return this}divRowVector(Pe){Pe=X(this,Pe);for(let Re=0;Re<this.rows;Re++)for(let Se=0;Se<this.columns;Se++)this.set(Re,Se,this.get(Re,Se)/Pe[Se]);return this}addColumnVector(Pe){Pe=he(this,Pe);for(let Re=0;Re<this.rows;Re++)for(let Se=0;Se<this.columns;Se++)this.set(Re,Se,this.get(Re,Se)+Pe[Re]);return this}subColumnVector(Pe){Pe=he(this,Pe);for(let Re=0;Re<this.rows;Re++)for(let Se=0;Se<this.columns;Se++)this.set(Re,Se,this.get(Re,Se)-Pe[Re]);return this}mulColumnVector(Pe){Pe=he(this,Pe);for(let Re=0;Re<this.rows;Re++)for(let Se=0;Se<this.columns;Se++)this.set(Re,Se,this.get(Re,Se)*Pe[Re]);return this}divColumnVector(Pe){Pe=he(this,Pe);for(let Re=0;Re<this.rows;Re++)for(let Se=0;Se<this.columns;Se++)this.set(Re,Se,this.get(Re,Se)/Pe[Re]);return this}mulRow(Pe,Re){y(this,Pe);for(let Se=0;Se<this.columns;Se++)this.set(Pe,Se,this.get(Pe,Se)*Re);return this}mulColumn(Pe,Re){S(this,Pe);for(let Se=0;Se<this.rows;Se++)this.set(Se,Pe,this.get(Se,Pe)*Re);return this}max(Pe){if(this.isEmpty())return NaN;switch(Pe){case"row":{const Re=new Array(this.rows).fill(Number.NEGATIVE_INFINITY);for(let Se=0;Se<this.rows;Se++)for(let Te=0;Te<this.columns;Te++)this.get(Se,Te)>Re[Se]&&(Re[Se]=this.get(Se,Te));return Re}case"column":{const Re=new Array(this.columns).fill(Number.NEGATIVE_INFINITY);for(let Se=0;Se<this.rows;Se++)for(let Te=0;Te<this.columns;Te++)this.get(Se,Te)>Re[Te]&&(Re[Te]=this.get(Se,Te));return Re}case void 0:{let Re=this.get(0,0);for(let Se=0;Se<this.rows;Se++)for(let Te=0;Te<this.columns;Te++)this.get(Se,Te)>Re&&(Re=this.get(Se,Te));return Re}default:throw new Error(`invalid option: ${Pe}`)}}maxIndex(){ve(this);let Pe=this.get(0,0),Re=[0,0];for(let Se=0;Se<this.rows;Se++)for(let Te=0;Te<this.columns;Te++)this.get(Se,Te)>Pe&&(Pe=this.get(Se,Te),Re[0]=Se,Re[1]=Te);return Re}min(Pe){if(this.isEmpty())return NaN;switch(Pe){case"row":{const Re=new Array(this.rows).fill(Number.POSITIVE_INFINITY);for(let Se=0;Se<this.rows;Se++)for(let Te=0;Te<this.columns;Te++)this.get(Se,Te)<Re[Se]&&(Re[Se]=this.get(Se,Te));return Re}case"column":{const Re=new Array(this.columns).fill(Number.POSITIVE_INFINITY);for(let Se=0;Se<this.rows;Se++)for(let Te=0;Te<this.columns;Te++)this.get(Se,Te)<Re[Te]&&(Re[Te]=this.get(Se,Te));return Re}case void 0:{let Re=this.get(0,0);for(let Se=0;Se<this.rows;Se++)for(let Te=0;Te<this.columns;Te++)this.get(Se,Te)<Re&&(Re=this.get(Se,Te));return Re}default:throw new Error(`invalid option: ${Pe}`)}}minIndex(){ve(this);let Pe=this.get(0,0),Re=[0,0];for(let Se=0;Se<this.rows;Se++)for(let Te=0;Te<this.columns;Te++)this.get(Se,Te)<Pe&&(Pe=this.get(Se,Te),Re[0]=Se,Re[1]=Te);return Re}maxRow(Pe){if(y(this,Pe),this.isEmpty())return NaN;let Re=this.get(Pe,0);for(let Se=1;Se<this.columns;Se++)this.get(Pe,Se)>Re&&(Re=this.get(Pe,Se));return Re}maxRowIndex(Pe){y(this,Pe),ve(this);let Re=this.get(Pe,0),Se=[Pe,0];for(let Te=1;Te<this.columns;Te++)this.get(Pe,Te)>Re&&(Re=this.get(Pe,Te),Se[1]=Te);return Se}minRow(Pe){if(y(this,Pe),this.isEmpty())return NaN;let Re=this.get(Pe,0);for(let Se=1;Se<this.columns;Se++)this.get(Pe,Se)<Re&&(Re=this.get(Pe,Se));return Re}minRowIndex(Pe){y(this,Pe),ve(this);let Re=this.get(Pe,0),Se=[Pe,0];for(let Te=1;Te<this.columns;Te++)this.get(Pe,Te)<Re&&(Re=this.get(Pe,Te),Se[1]=Te);return Se}maxColumn(Pe){if(S(this,Pe),this.isEmpty())return NaN;let Re=this.get(0,Pe);for(let Se=1;Se<this.rows;Se++)this.get(Se,Pe)>Re&&(Re=this.get(Se,Pe));return Re}maxColumnIndex(Pe){S(this,Pe),ve(this);let Re=this.get(0,Pe),Se=[0,Pe];for(let Te=1;Te<this.rows;Te++)this.get(Te,Pe)>Re&&(Re=this.get(Te,Pe),Se[0]=Te);return Se}minColumn(Pe){if(S(this,Pe),this.isEmpty())return NaN;let Re=this.get(0,Pe);for(let Se=1;Se<this.rows;Se++)this.get(Se,Pe)<Re&&(Re=this.get(Se,Pe));return Re}minColumnIndex(Pe){S(this,Pe),ve(this);let Re=this.get(0,Pe),Se=[0,Pe];for(let Te=1;Te<this.rows;Te++)this.get(Te,Pe)<Re&&(Re=this.get(Te,Pe),Se[0]=Te);return Se}diag(){let Pe=Math.min(this.rows,this.columns),Re=[];for(let Se=0;Se<Pe;Se++)Re.push(this.get(Se,Se));return Re}norm(Pe="frobenius"){switch(Pe){case"max":return this.max();case"frobenius":return Math.sqrt(this.dot(this));default:throw new RangeError(`unknown norm type: ${Pe}`)}}cumulativeSum(){let Pe=0;for(let Re=0;Re<this.rows;Re++)for(let Se=0;Se<this.columns;Se++)Pe+=this.get(Re,Se),this.set(Re,Se,Pe);return this}dot(Pe){Ke.isMatrix(Pe)&&(Pe=Pe.to1DArray());let Re=this.to1DArray();if(Re.length!==Pe.length)throw new RangeError("vectors do not have the same size");let Se=0;for(let Te=0;Te<Re.length;Te++)Se+=Re[Te]*Pe[Te];return Se}mmul(Pe){Pe=nt.checkMatrix(Pe);let Re=this.rows,Se=this.columns,Te=Pe.columns,Fe=new nt(Re,Te),Ge=new Float64Array(Se);for(let Je=0;Je<Te;Je++){for(let Qe=0;Qe<Se;Qe++)Ge[Qe]=Pe.get(Qe,Je);for(let Qe=0;Qe<Re;Qe++){let et=0;for(let pt=0;pt<Se;pt++)et+=this.get(Qe,pt)*Ge[pt];Fe.set(Qe,Je,et)}}return Fe}mpow(Pe){if(!this.isSquare())throw new RangeError("Matrix must be square");if(!Number.isInteger(Pe)||Pe<0)throw new RangeError("Exponent must be a non-negative integer");let Re=nt.eye(this.rows),Se=this;for(let Te=Pe;Te>1;Te/=2)Te&1&&(Re=Re.mmul(Se)),Se=Se.mmul(Se);return Re}strassen2x2(Pe){Pe=nt.checkMatrix(Pe);let Re=new nt(2,2);const Se=this.get(0,0),Te=Pe.get(0,0),Fe=this.get(0,1),Ge=Pe.get(0,1),Je=this.get(1,0),Qe=Pe.get(1,0),et=this.get(1,1),pt=Pe.get(1,1),at=(Se+et)*(Te+pt),Pt=(Je+et)*Te,Bt=Se*(Ge-pt),wt=et*(Qe-Te),Mt=(Se+Fe)*pt,Zt=(Je-Se)*(Te+Ge),ft=(Fe-et)*(Qe+pt),Nt=at+wt-Mt+ft,ir=Bt+Mt,xr=Pt+wt,Cr=at-Pt+Bt+Zt;return Re.set(0,0,Nt),Re.set(0,1,ir),Re.set(1,0,xr),Re.set(1,1,Cr),Re}strassen3x3(Pe){Pe=nt.checkMatrix(Pe);let Re=new nt(3,3);const Se=this.get(0,0),Te=this.get(0,1),Fe=this.get(0,2),Ge=this.get(1,0),Je=this.get(1,1),Qe=this.get(1,2),et=this.get(2,0),pt=this.get(2,1),at=this.get(2,2),Pt=Pe.get(0,0),Bt=Pe.get(0,1),wt=Pe.get(0,2),Mt=Pe.get(1,0),Zt=Pe.get(1,1),ft=Pe.get(1,2),Nt=Pe.get(2,0),ir=Pe.get(2,1),xr=Pe.get(2,2),Cr=(Se+Te+Fe-Ge-Je-pt-at)*Zt,Br=(Se-Ge)*(-Bt+Zt),gr=Je*(-Pt+Bt+Mt-Zt-ft-Nt+xr),tr=(-Se+Ge+Je)*(Pt-Bt+Zt),$r=(Ge+Je)*(-Pt+Bt),gt=Se*Pt,$t=(-Se+et+pt)*(Pt-wt+ft),nr=(-Se+et)*(wt-ft),Ht=(et+pt)*(-Pt+wt),Nr=(Se+Te+Fe-Je-Qe-et-pt)*ft,Dr=pt*(-Pt+wt+Mt-Zt-ft-Nt+ir),Ar=(-Fe+pt+at)*(Zt+Nt-ir),Ur=(Fe-at)*(Zt-ir),Fr=Fe*Nt,bn=(pt+at)*(-Nt+ir),Gr=(-Fe+Je+Qe)*(ft+Nt-xr),Rn=(Fe-Qe)*(ft-xr),mn=(Je+Qe)*(-Nt+xr),Rr=Te*Mt,Kr=Qe*ir,rn=Ge*wt,dn=et*Bt,Zr=at*xr,es=gt+Fr+Rr,Is=Cr+tr+$r+gt+Ar+Fr+bn,ts=gt+$t+Ht+Nr+Fr+Gr+mn,yi=Br+gr+tr+gt+Fr+Gr+Rn,No=Br+tr+$r+gt+Kr,rs=Fr+Gr+Rn+mn+rn,Lr=gt+$t+nr+Dr+Ar+Ur+Fr,Ls=Ar+Ur+Fr+bn+dn,Bs=gt+$t+nr+Ht+Zr;return Re.set(0,0,es),Re.set(0,1,Is),Re.set(0,2,ts),Re.set(1,0,yi),Re.set(1,1,No),Re.set(1,2,rs),Re.set(2,0,Lr),Re.set(2,1,Ls),Re.set(2,2,Bs),Re}mmulStrassen(Pe){Pe=nt.checkMatrix(Pe);let Re=this.clone(),Se=Re.rows,Te=Re.columns,Fe=Pe.rows,Ge=Pe.columns;Te!==Fe&&console.warn(`Multiplying ${Se} x ${Te} and ${Fe} x ${Ge} matrix: dimensions do not match.`);function Je(at,Pt,Bt){let wt=at.rows,Mt=at.columns;if(wt===Pt&&Mt===Bt)return at;{let Zt=Ke.zeros(Pt,Bt);return Zt=Zt.setSubMatrix(at,0,0),Zt}}let Qe=Math.max(Se,Fe),et=Math.max(Te,Ge);Re=Je(Re,Qe,et),Pe=Je(Pe,Qe,et);function pt(at,Pt,Bt,wt){if(Bt<=512||wt<=512)return at.mmul(Pt);Bt%2===1&&wt%2===1?(at=Je(at,Bt+1,wt+1),Pt=Je(Pt,Bt+1,wt+1)):Bt%2===1?(at=Je(at,Bt+1,wt),Pt=Je(Pt,Bt+1,wt)):wt%2===1&&(at=Je(at,Bt,wt+1),Pt=Je(Pt,Bt,wt+1));let Mt=parseInt(at.rows/2,10),Zt=parseInt(at.columns/2,10),ft=at.subMatrix(0,Mt-1,0,Zt-1),Nt=Pt.subMatrix(0,Mt-1,0,Zt-1),ir=at.subMatrix(0,Mt-1,Zt,at.columns-1),xr=Pt.subMatrix(0,Mt-1,Zt,Pt.columns-1),Cr=at.subMatrix(Mt,at.rows-1,0,Zt-1),Br=Pt.subMatrix(Mt,Pt.rows-1,0,Zt-1),gr=at.subMatrix(Mt,at.rows-1,Zt,at.columns-1),tr=Pt.subMatrix(Mt,Pt.rows-1,Zt,Pt.columns-1),$r=pt(Ke.add(ft,gr),Ke.add(Nt,tr),Mt,Zt),gt=pt(Ke.add(Cr,gr),Nt,Mt,Zt),$t=pt(ft,Ke.sub(xr,tr),Mt,Zt),nr=pt(gr,Ke.sub(Br,Nt),Mt,Zt),Ht=pt(Ke.add(ft,ir),tr,Mt,Zt),Nr=pt(Ke.sub(Cr,ft),Ke.add(Nt,xr),Mt,Zt),Dr=pt(Ke.sub(ir,gr),Ke.add(Br,tr),Mt,Zt),Ar=Ke.add($r,nr);Ar.sub(Ht),Ar.add(Dr);let Ur=Ke.add($t,Ht),Fr=Ke.add(gt,nr),bn=Ke.sub($r,gt);bn.add($t),bn.add(Nr);let Gr=Ke.zeros(2*Ar.rows,2*Ar.columns);return Gr=Gr.setSubMatrix(Ar,0,0),Gr=Gr.setSubMatrix(Ur,Ar.rows,0),Gr=Gr.setSubMatrix(Fr,0,Ar.columns),Gr=Gr.setSubMatrix(bn,Ar.rows,Ar.columns),Gr.subMatrix(0,Bt-1,0,wt-1)}return pt(Re,Pe,Qe,et)}scaleRows(Pe={}){if(typeof Pe!="object")throw new TypeError("options must be an object");const{min:Re=0,max:Se=1}=Pe;if(!Number.isFinite(Re))throw new TypeError("min must be a number");if(!Number.isFinite(Se))throw new TypeError("max must be a number");if(Re>=Se)throw new RangeError("min must be smaller than max");let Te=new nt(this.rows,this.columns);for(let Fe=0;Fe<this.rows;Fe++){const Ge=this.getRow(Fe);Ge.length>0&&n(Ge,{min:Re,max:Se,output:Ge}),Te.setRow(Fe,Ge)}return Te}scaleColumns(Pe={}){if(typeof Pe!="object")throw new TypeError("options must be an object");const{min:Re=0,max:Se=1}=Pe;if(!Number.isFinite(Re))throw new TypeError("min must be a number");if(!Number.isFinite(Se))throw new TypeError("max must be a number");if(Re>=Se)throw new RangeError("min must be smaller than max");let Te=new nt(this.rows,this.columns);for(let Fe=0;Fe<this.columns;Fe++){const Ge=this.getColumn(Fe);Ge.length&&n(Ge,{min:Re,max:Se,output:Ge}),Te.setColumn(Fe,Ge)}return Te}flipRows(){const Pe=Math.ceil(this.columns/2);for(let Re=0;Re<this.rows;Re++)for(let Se=0;Se<Pe;Se++){let Te=this.get(Re,Se),Fe=this.get(Re,this.columns-1-Se);this.set(Re,Se,Fe),this.set(Re,this.columns-1-Se,Te)}return this}flipColumns(){const Pe=Math.ceil(this.rows/2);for(let Re=0;Re<this.columns;Re++)for(let Se=0;Se<Pe;Se++){let Te=this.get(Se,Re),Fe=this.get(this.rows-1-Se,Re);this.set(Se,Re,Fe),this.set(this.rows-1-Se,Re,Te)}return this}kroneckerProduct(Pe){Pe=nt.checkMatrix(Pe);let Re=this.rows,Se=this.columns,Te=Pe.rows,Fe=Pe.columns,Ge=new nt(Re*Te,Se*Fe);for(let Je=0;Je<Re;Je++)for(let Qe=0;Qe<Se;Qe++)for(let et=0;et<Te;et++)for(let pt=0;pt<Fe;pt++)Ge.set(Te*Je+et,Fe*Qe+pt,this.get(Je,Qe)*Pe.get(et,pt));return Ge}kroneckerSum(Pe){if(Pe=nt.checkMatrix(Pe),!this.isSquare()||!Pe.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let Re=this.rows,Se=Pe.rows,Te=this.kroneckerProduct(nt.eye(Se,Se)),Fe=nt.eye(Re,Re).kroneckerProduct(Pe);return Te.add(Fe)}transpose(){let Pe=new nt(this.columns,this.rows);for(let Re=0;Re<this.rows;Re++)for(let Se=0;Se<this.columns;Se++)Pe.set(Se,Re,this.get(Re,Se));return Pe}sortRows(Pe=st){for(let Re=0;Re<this.rows;Re++)this.setRow(Re,this.getRow(Re).sort(Pe));return this}sortColumns(Pe=st){for(let Re=0;Re<this.columns;Re++)this.setColumn(Re,this.getColumn(Re).sort(Pe));return this}subMatrix(Pe,Re,Se,Te){xe(this,Pe,Re,Se,Te);let Fe=new nt(Re-Pe+1,Te-Se+1);for(let Ge=Pe;Ge<=Re;Ge++)for(let Je=Se;Je<=Te;Je++)Fe.set(Ge-Pe,Je-Se,this.get(Ge,Je));return Fe}subMatrixRow(Pe,Re,Se){if(Re===void 0&&(Re=0),Se===void 0&&(Se=this.columns-1),Re>Se||Re<0||Re>=this.columns||Se<0||Se>=this.columns)throw new RangeError("Argument out of range");let Te=new nt(Pe.length,Se-Re+1);for(let Fe=0;Fe<Pe.length;Fe++)for(let Ge=Re;Ge<=Se;Ge++){if(Pe[Fe]<0||Pe[Fe]>=this.rows)throw new RangeError(`Row index out of range: ${Pe[Fe]}`);Te.set(Fe,Ge-Re,this.get(Pe[Fe],Ge))}return Te}subMatrixColumn(Pe,Re,Se){if(Re===void 0&&(Re=0),Se===void 0&&(Se=this.rows-1),Re>Se||Re<0||Re>=this.rows||Se<0||Se>=this.rows)throw new RangeError("Argument out of range");let Te=new nt(Se-Re+1,Pe.length);for(let Fe=0;Fe<Pe.length;Fe++)for(let Ge=Re;Ge<=Se;Ge++){if(Pe[Fe]<0||Pe[Fe]>=this.columns)throw new RangeError(`Column index out of range: ${Pe[Fe]}`);Te.set(Ge-Re,Fe,this.get(Ge,Pe[Fe]))}return Te}setSubMatrix(Pe,Re,Se){if(Pe=nt.checkMatrix(Pe),Pe.isEmpty())return this;let Te=Re+Pe.rows-1,Fe=Se+Pe.columns-1;xe(this,Re,Te,Se,Fe);for(let Ge=0;Ge<Pe.rows;Ge++)for(let Je=0;Je<Pe.columns;Je++)this.set(Re+Ge,Se+Je,Pe.get(Ge,Je));return this}selection(Pe,Re){Ce(this,Pe),Ee(this,Re);let Se=new nt(Pe.length,Re.length);for(let Te=0;Te<Pe.length;Te++){let Fe=Pe[Te];for(let Ge=0;Ge<Re.length;Ge++){let Je=Re[Ge];Se.set(Te,Ge,this.get(Fe,Je))}}return Se}trace(){let Pe=Math.min(this.rows,this.columns),Re=0;for(let Se=0;Se<Pe;Se++)Re+=this.get(Se,Se);return Re}clone(){return this.constructor.copy(this,new nt(this.rows,this.columns))}static copy(Pe,Re){for(const[Se,Te,Fe]of Pe.entries())Re.set(Se,Te,Fe);return Re}sum(Pe){switch(Pe){case"row":return ke(this);case"column":return De(this);case void 0:return Oe(this);default:throw new Error(`invalid option: ${Pe}`)}}product(Pe){switch(Pe){case"row":return Le(this);case"column":return Ae(this);case void 0:return Ie(this);default:throw new Error(`invalid option: ${Pe}`)}}mean(Pe){const Re=this.sum(Pe);switch(Pe){case"row":{for(let Se=0;Se<this.rows;Se++)Re[Se]/=this.columns;return Re}case"column":{for(let Se=0;Se<this.columns;Se++)Re[Se]/=this.rows;return Re}case void 0:return Re/this.size;default:throw new Error(`invalid option: ${Pe}`)}}variance(Pe,Re={}){if(typeof Pe=="object"&&(Re=Pe,Pe=void 0),typeof Re!="object")throw new TypeError("options must be an object");const{unbiased:Se=!0,mean:Te=this.mean(Pe)}=Re;if(typeof Se!="boolean")throw new TypeError("unbiased must be a boolean");switch(Pe){case"row":{if(!r.isAnyArray(Te))throw new TypeError("mean must be an array");return Ue(this,Se,Te)}case"column":{if(!r.isAnyArray(Te))throw new TypeError("mean must be an array");return ze(this,Se,Te)}case void 0:{if(typeof Te!="number")throw new TypeError("mean must be a number");return Ye(this,Se,Te)}default:throw new Error(`invalid option: ${Pe}`)}}standardDeviation(Pe,Re){typeof Pe=="object"&&(Re=Pe,Pe=void 0);const Se=this.variance(Pe,Re);if(Pe===void 0)return Math.sqrt(Se);for(let Te=0;Te<Se.length;Te++)Se[Te]=Math.sqrt(Se[Te]);return Se}center(Pe,Re={}){if(typeof Pe=="object"&&(Re=Pe,Pe=void 0),typeof Re!="object")throw new TypeError("options must be an object");const{center:Se=this.mean(Pe)}=Re;switch(Pe){case"row":{if(!r.isAnyArray(Se))throw new TypeError("center must be an array");return Xe(this,Se),this}case"column":{if(!r.isAnyArray(Se))throw new TypeError("center must be an array");return tt(this,Se),this}case void 0:{if(typeof Se!="number")throw new TypeError("center must be a number");return lt(this,Se),this}default:throw new Error(`invalid option: ${Pe}`)}}scale(Pe,Re={}){if(typeof Pe=="object"&&(Re=Pe,Pe=void 0),typeof Re!="object")throw new TypeError("options must be an object");let Se=Re.scale;switch(Pe){case"row":{if(Se===void 0)Se=_t(this);else if(!r.isAnyArray(Se))throw new TypeError("scale must be an array");return bt(this,Se),this}case"column":{if(Se===void 0)Se=rt(this);else if(!r.isAnyArray(Se))throw new TypeError("scale must be an array");return He(this,Se),this}case void 0:{if(Se===void 0)Se=We(this);else if(typeof Se!="number")throw new TypeError("scale must be a number");return qe(this,Se),this}default:throw new Error(`invalid option: ${Pe}`)}}toString(Pe){return o(this,Pe)}[Symbol.iterator](){return this.entries()}*entries(){for(let Pe=0;Pe<this.rows;Pe++)for(let Re=0;Re<this.columns;Re++)yield[Pe,Re,this.get(Pe,Re)]}*values(){for(let Pe=0;Pe<this.rows;Pe++)for(let Re=0;Re<this.columns;Re++)yield this.get(Pe,Re)}}Ke.prototype.klass="Matrix",typeof Symbol<"u"&&(Ke.prototype[Symbol.for("nodejs.util.inspect.custom")]=s);function st(Be,Pe){return Be-Pe}function ut(Be){return Be.every(Pe=>typeof Pe=="number")}Ke.random=Ke.rand,Ke.randomInt=Ke.randInt,Ke.diagonal=Ke.diag,Ke.prototype.diagonal=Ke.prototype.diag,Ke.identity=Ke.eye,Ke.prototype.negate=Ke.prototype.neg,Ke.prototype.tensorProduct=Ke.prototype.kroneckerProduct;const Pr=class Pr extends Ke{constructor(Re,Se){super();vl(this,pr);Uu(this,"data");if(Pr.isMatrix(Re))_l(this,pr,yl).call(this,Re.rows,Re.columns),Pr.copy(Re,this);else if(Number.isInteger(Re)&&Re>=0)_l(this,pr,yl).call(this,Re,Se);else if(r.isAnyArray(Re)){const Te=Re;if(Re=Te.length,Se=Re?Te[0].length:0,typeof Se!="number")throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let Fe=0;Fe<Re;Fe++){if(Te[Fe].length!==Se)throw new RangeError("Inconsistent array dimensions");if(!ut(Te[Fe]))throw new TypeError("Input data contains non-numeric values");this.data.push(Float64Array.from(Te[Fe]))}this.rows=Re,this.columns=Se}else throw new TypeError("First argument must be a positive number or an array")}set(Re,Se,Te){return this.data[Re][Se]=Te,this}get(Re,Se){return this.data[Re][Se]}removeRow(Re){return y(this,Re),this.data.splice(Re,1),this.rows-=1,this}addRow(Re,Se){return Se===void 0&&(Se=Re,Re=this.rows),y(this,Re,!0),Se=Float64Array.from(X(this,Se)),this.data.splice(Re,0,Se),this.rows+=1,this}removeColumn(Re){S(this,Re);for(let Se=0;Se<this.rows;Se++){const Te=new Float64Array(this.columns-1);for(let Fe=0;Fe<Re;Fe++)Te[Fe]=this.data[Se][Fe];for(let Fe=Re+1;Fe<this.columns;Fe++)Te[Fe-1]=this.data[Se][Fe];this.data[Se]=Te}return this.columns-=1,this}addColumn(Re,Se){typeof Se>"u"&&(Se=Re,Re=this.columns),S(this,Re,!0),Se=he(this,Se);for(let Te=0;Te<this.rows;Te++){const Fe=new Float64Array(this.columns+1);let Ge=0;for(;Ge<Re;Ge++)Fe[Ge]=this.data[Te][Ge];for(Fe[Ge++]=Se[Te];Ge<this.columns+1;Ge++)Fe[Ge]=this.data[Te][Ge-1];this.data[Te]=Fe}return this.columns+=1,this}};pr=new WeakSet,yl=function(Re,Se){if(this.data=[],Number.isInteger(Se)&&Se>=0)for(let Te=0;Te<Re;Te++)this.data.push(new Float64Array(Se));else throw new TypeError("nColumns must be a positive integer");this.rows=Re,this.columns=Se};let nt=Pr;m(Ke,nt);const jr=class jr extends Ke{constructor(Re){super();vl(this,Tr);if(nt.isMatrix(Re)){if(!Re.isSymmetric())throw new TypeError("not symmetric data");Fo(this,Tr,nt.copy(Re,new nt(Re.rows,Re.rows)))}else if(Number.isInteger(Re)&&Re>=0)Fo(this,Tr,new nt(Re,Re));else if(Fo(this,Tr,new nt(Re)),!this.isSymmetric())throw new TypeError("not symmetric data")}get size(){return jn(this,Tr).size}get rows(){return jn(this,Tr).rows}get columns(){return jn(this,Tr).columns}get diagonalSize(){return this.rows}static isSymmetricMatrix(Re){return nt.isMatrix(Re)&&Re.klassType==="SymmetricMatrix"}static zeros(Re){return new this(Re)}static ones(Re){return new this(Re).fill(1)}clone(){const Re=new jr(this.diagonalSize);for(const[Se,Te,Fe]of this.upperRightEntries())Re.set(Se,Te,Fe);return Re}toMatrix(){return new nt(this)}get(Re,Se){return jn(this,Tr).get(Re,Se)}set(Re,Se,Te){return jn(this,Tr).set(Re,Se,Te),jn(this,Tr).set(Se,Re,Te),this}removeCross(Re){return jn(this,Tr).removeRow(Re),jn(this,Tr).removeColumn(Re),this}addCross(Re,Se){Se===void 0&&(Se=Re,Re=this.diagonalSize);const Te=Se.slice();return Te.splice(Re,1),jn(this,Tr).addRow(Re,Te),jn(this,Tr).addColumn(Re,Se),this}applyMask(Re){if(Re.length!==this.diagonalSize)throw new RangeError("Mask size do not match with matrix size");const Se=[];for(const[Te,Fe]of Re.entries())Fe||Se.push(Te);Se.reverse();for(const Te of Se)this.removeCross(Te);return this}toCompact(){const{diagonalSize:Re}=this,Se=new Array(Re*(Re+1)/2);for(let Te=0,Fe=0,Ge=0;Ge<Se.length;Ge++)Se[Ge]=this.get(Fe,Te),++Te>=Re&&(Te=++Fe);return Se}static fromCompact(Re){const Se=Re.length,Te=(Math.sqrt(8*Se+1)-1)/2;if(!Number.isInteger(Te))throw new TypeError(`This array is not a compact representation of a Symmetric Matrix, ${JSON.stringify(Re)}`);const Fe=new jr(Te);for(let Ge=0,Je=0,Qe=0;Qe<Se;Qe++)Fe.set(Ge,Je,Re[Qe]),++Ge>=Te&&(Ge=++Je);return Fe}*upperRightEntries(){for(let Re=0,Se=0;Re<this.diagonalSize;void 0){const Te=this.get(Re,Se);yield[Re,Se,Te],++Se>=this.diagonalSize&&(Se=++Re)}}*upperRightValues(){for(let Re=0,Se=0;Re<this.diagonalSize;void 0)yield this.get(Re,Se),++Se>=this.diagonalSize&&(Se=++Re)}};Tr=new WeakMap;let vt=jr;vt.prototype.klassType="SymmetricMatrix";class it extends vt{static isDistanceMatrix(Pe){return vt.isSymmetricMatrix(Pe)&&Pe.klassSubType==="DistanceMatrix"}constructor(Pe){if(super(Pe),!this.isDistance())throw new TypeError("Provided arguments do no produce a distance matrix")}set(Pe,Re,Se){return Pe===Re&&(Se=0),super.set(Pe,Re,Se)}addCross(Pe,Re){return Re===void 0&&(Re=Pe,Pe=this.diagonalSize),Re=Re.slice(),Re[Pe]=0,super.addCross(Pe,Re)}toSymmetricMatrix(){return new vt(this)}clone(){const Pe=new it(this.diagonalSize);for(const[Re,Se,Te]of this.upperRightEntries())Re!==Se&&Pe.set(Re,Se,Te);return Pe}toCompact(){const{diagonalSize:Pe}=this,Re=(Pe-1)*Pe/2,Se=new Array(Re);for(let Te=1,Fe=0,Ge=0;Ge<Se.length;Ge++)Se[Ge]=this.get(Fe,Te),++Te>=Pe&&(Te=++Fe+1);return Se}static fromCompact(Pe){const Re=Pe.length;if(Re===0)return new this(0);const Se=(Math.sqrt(8*Re+1)+1)/2;if(!Number.isInteger(Se))throw new TypeError(`This array is not a compact representation of a DistanceMatrix, ${JSON.stringify(Pe)}`);const Te=new this(Se);for(let Fe=1,Ge=0,Je=0;Je<Re;Je++)Te.set(Fe,Ge,Pe[Je]),++Fe>=Se&&(Fe=++Ge+1);return Te}}it.prototype.klassSubType="DistanceMatrix";class Ve extends Ke{constructor(Pe,Re,Se){super(),this.matrix=Pe,this.rows=Re,this.columns=Se}}class ht extends Ve{constructor(Pe,Re){S(Pe,Re),super(Pe,Pe.rows,1),this.column=Re}set(Pe,Re,Se){return this.matrix.set(Pe,this.column,Se),this}get(Pe){return this.matrix.get(Pe,this.column)}}class ct extends Ve{constructor(Pe,Re){Ee(Pe,Re),super(Pe,Pe.rows,Re.length),this.columnIndices=Re}set(Pe,Re,Se){return this.matrix.set(Pe,this.columnIndices[Re],Se),this}get(Pe,Re){return this.matrix.get(Pe,this.columnIndices[Re])}}class St extends Ve{constructor(Pe){super(Pe,Pe.rows,Pe.columns)}set(Pe,Re,Se){return this.matrix.set(Pe,this.columns-Re-1,Se),this}get(Pe,Re){return this.matrix.get(Pe,this.columns-Re-1)}}class Ct extends Ve{constructor(Pe){super(Pe,Pe.rows,Pe.columns)}set(Pe,Re,Se){return this.matrix.set(this.rows-Pe-1,Re,Se),this}get(Pe,Re){return this.matrix.get(this.rows-Pe-1,Re)}}class Dt extends Ve{constructor(Pe,Re){y(Pe,Re),super(Pe,1,Pe.columns),this.row=Re}set(Pe,Re,Se){return this.matrix.set(this.row,Re,Se),this}get(Pe,Re){return this.matrix.get(this.row,Re)}}class Tt extends Ve{constructor(Pe,Re){Ce(Pe,Re),super(Pe,Re.length,Pe.columns),this.rowIndices=Re}set(Pe,Re,Se){return this.matrix.set(this.rowIndices[Pe],Re,Se),this}get(Pe,Re){return this.matrix.get(this.rowIndices[Pe],Re)}}class At extends Ve{constructor(Pe,Re,Se){Ce(Pe,Re),Ee(Pe,Se),super(Pe,Re.length,Se.length),this.rowIndices=Re,this.columnIndices=Se}set(Pe,Re,Se){return this.matrix.set(this.rowIndices[Pe],this.columnIndices[Re],Se),this}get(Pe,Re){return this.matrix.get(this.rowIndices[Pe],this.columnIndices[Re])}}class sr extends Ve{constructor(Pe,Re,Se,Te,Fe){xe(Pe,Re,Se,Te,Fe),super(Pe,Se-Re+1,Fe-Te+1),this.startRow=Re,this.startColumn=Te}set(Pe,Re,Se){return this.matrix.set(this.startRow+Pe,this.startColumn+Re,Se),this}get(Pe,Re){return this.matrix.get(this.startRow+Pe,this.startColumn+Re)}}class Lt extends Ve{constructor(Pe){super(Pe,Pe.columns,Pe.rows)}set(Pe,Re,Se){return this.matrix.set(Re,Pe,Se),this}get(Pe,Re){return this.matrix.get(Re,Pe)}}class Kt extends Ke{constructor(Pe,Re={}){const{rows:Se=1}=Re;if(Pe.length%Se!==0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=Se,this.columns=Pe.length/Se,this.data=Pe}set(Pe,Re,Se){let Te=this._calculateIndex(Pe,Re);return this.data[Te]=Se,this}get(Pe,Re){let Se=this._calculateIndex(Pe,Re);return this.data[Se]}_calculateIndex(Pe,Re){return Pe*this.columns+Re}}class yt extends Ke{constructor(Pe){super(),this.data=Pe,this.rows=Pe.length,this.columns=Pe[0].length}set(Pe,Re,Se){return this.data[Pe][Re]=Se,this}get(Pe,Re){return this.data[Pe][Re]}}function qt(Be,Pe){if(r.isAnyArray(Be))return Be[0]&&r.isAnyArray(Be[0])?new yt(Be):new Kt(Be,Pe);throw new Error("the argument is not an array")}class Qt{constructor(Pe){Pe=yt.checkMatrix(Pe);let Re=Pe.clone(),Se=Re.rows,Te=Re.columns,Fe=new Float64Array(Se),Ge=1,Je,Qe,et,pt,at,Pt,Bt,wt,Mt;for(Je=0;Je<Se;Je++)Fe[Je]=Je;for(wt=new Float64Array(Se),Qe=0;Qe<Te;Qe++){for(Je=0;Je<Se;Je++)wt[Je]=Re.get(Je,Qe);for(Je=0;Je<Se;Je++){for(Mt=Math.min(Je,Qe),at=0,et=0;et<Mt;et++)at+=Re.get(Je,et)*wt[et];wt[Je]-=at,Re.set(Je,Qe,wt[Je])}for(pt=Qe,Je=Qe+1;Je<Se;Je++)Math.abs(wt[Je])>Math.abs(wt[pt])&&(pt=Je);if(pt!==Qe){for(et=0;et<Te;et++)Pt=Re.get(pt,et),Re.set(pt,et,Re.get(Qe,et)),Re.set(Qe,et,Pt);Bt=Fe[pt],Fe[pt]=Fe[Qe],Fe[Qe]=Bt,Ge=-Ge}if(Qe<Se&&Re.get(Qe,Qe)!==0)for(Je=Qe+1;Je<Se;Je++)Re.set(Je,Qe,Re.get(Je,Qe)/Re.get(Qe,Qe))}this.LU=Re,this.pivotVector=Fe,this.pivotSign=Ge}isSingular(){let Pe=this.LU,Re=Pe.columns;for(let Se=0;Se<Re;Se++)if(Pe.get(Se,Se)===0)return!0;return!1}solve(Pe){Pe=nt.checkMatrix(Pe);let Re=this.LU;if(Re.rows!==Pe.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let Te=Pe.columns,Fe=Pe.subMatrixRow(this.pivotVector,0,Te-1),Ge=Re.columns,Je,Qe,et;for(et=0;et<Ge;et++)for(Je=et+1;Je<Ge;Je++)for(Qe=0;Qe<Te;Qe++)Fe.set(Je,Qe,Fe.get(Je,Qe)-Fe.get(et,Qe)*Re.get(Je,et));for(et=Ge-1;et>=0;et--){for(Qe=0;Qe<Te;Qe++)Fe.set(et,Qe,Fe.get(et,Qe)/Re.get(et,et));for(Je=0;Je<et;Je++)for(Qe=0;Qe<Te;Qe++)Fe.set(Je,Qe,Fe.get(Je,Qe)-Fe.get(et,Qe)*Re.get(Je,et))}return Fe}get determinant(){let Pe=this.LU;if(!Pe.isSquare())throw new Error("Matrix must be square");let Re=this.pivotSign,Se=Pe.columns;for(let Te=0;Te<Se;Te++)Re*=Pe.get(Te,Te);return Re}get lowerTriangularMatrix(){let Pe=this.LU,Re=Pe.rows,Se=Pe.columns,Te=new nt(Re,Se);for(let Fe=0;Fe<Re;Fe++)for(let Ge=0;Ge<Se;Ge++)Fe>Ge?Te.set(Fe,Ge,Pe.get(Fe,Ge)):Fe===Ge?Te.set(Fe,Ge,1):Te.set(Fe,Ge,0);return Te}get upperTriangularMatrix(){let Pe=this.LU,Re=Pe.rows,Se=Pe.columns,Te=new nt(Re,Se);for(let Fe=0;Fe<Re;Fe++)for(let Ge=0;Ge<Se;Ge++)Fe<=Ge?Te.set(Fe,Ge,Pe.get(Fe,Ge)):Te.set(Fe,Ge,0);return Te}get pivotPermutationVector(){return Array.from(this.pivotVector)}}function rr(Be,Pe){let Re=0;return Math.abs(Be)>Math.abs(Pe)?(Re=Pe/Be,Math.abs(Be)*Math.sqrt(1+Re*Re)):Pe!==0?(Re=Be/Pe,Math.abs(Pe)*Math.sqrt(1+Re*Re)):0}class It{constructor(Pe){Pe=yt.checkMatrix(Pe);let Re=Pe.clone(),Se=Pe.rows,Te=Pe.columns,Fe=new Float64Array(Te),Ge,Je,Qe,et;for(Qe=0;Qe<Te;Qe++){let pt=0;for(Ge=Qe;Ge<Se;Ge++)pt=rr(pt,Re.get(Ge,Qe));if(pt!==0){for(Re.get(Qe,Qe)<0&&(pt=-pt),Ge=Qe;Ge<Se;Ge++)Re.set(Ge,Qe,Re.get(Ge,Qe)/pt);for(Re.set(Qe,Qe,Re.get(Qe,Qe)+1),Je=Qe+1;Je<Te;Je++){for(et=0,Ge=Qe;Ge<Se;Ge++)et+=Re.get(Ge,Qe)*Re.get(Ge,Je);for(et=-et/Re.get(Qe,Qe),Ge=Qe;Ge<Se;Ge++)Re.set(Ge,Je,Re.get(Ge,Je)+et*Re.get(Ge,Qe))}}Fe[Qe]=-pt}this.QR=Re,this.Rdiag=Fe}solve(Pe){Pe=nt.checkMatrix(Pe);let Re=this.QR,Se=Re.rows;if(Pe.rows!==Se)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let Te=Pe.columns,Fe=Pe.clone(),Ge=Re.columns,Je,Qe,et,pt;for(et=0;et<Ge;et++)for(Qe=0;Qe<Te;Qe++){for(pt=0,Je=et;Je<Se;Je++)pt+=Re.get(Je,et)*Fe.get(Je,Qe);for(pt=-pt/Re.get(et,et),Je=et;Je<Se;Je++)Fe.set(Je,Qe,Fe.get(Je,Qe)+pt*Re.get(Je,et))}for(et=Ge-1;et>=0;et--){for(Qe=0;Qe<Te;Qe++)Fe.set(et,Qe,Fe.get(et,Qe)/this.Rdiag[et]);for(Je=0;Je<et;Je++)for(Qe=0;Qe<Te;Qe++)Fe.set(Je,Qe,Fe.get(Je,Qe)-Fe.get(et,Qe)*Re.get(Je,et))}return Fe.subMatrix(0,Ge-1,0,Te-1)}isFullRank(){let Pe=this.QR.columns;for(let Re=0;Re<Pe;Re++)if(this.Rdiag[Re]===0)return!1;return!0}get upperTriangularMatrix(){let Pe=this.QR,Re=Pe.columns,Se=new nt(Re,Re),Te,Fe;for(Te=0;Te<Re;Te++)for(Fe=0;Fe<Re;Fe++)Te<Fe?Se.set(Te,Fe,Pe.get(Te,Fe)):Te===Fe?Se.set(Te,Fe,this.Rdiag[Te]):Se.set(Te,Fe,0);return Se}get orthogonalMatrix(){let Pe=this.QR,Re=Pe.rows,Se=Pe.columns,Te=new nt(Re,Se),Fe,Ge,Je,Qe;for(Je=Se-1;Je>=0;Je--){for(Fe=0;Fe<Re;Fe++)Te.set(Fe,Je,0);for(Te.set(Je,Je,1),Ge=Je;Ge<Se;Ge++)if(Pe.get(Je,Je)!==0){for(Qe=0,Fe=Je;Fe<Re;Fe++)Qe+=Pe.get(Fe,Je)*Te.get(Fe,Ge);for(Qe=-Qe/Pe.get(Je,Je),Fe=Je;Fe<Re;Fe++)Te.set(Fe,Ge,Te.get(Fe,Ge)+Qe*Pe.get(Fe,Je))}}return Te}}class _r{constructor(Pe,Re={}){if(Pe=yt.checkMatrix(Pe),Pe.isEmpty())throw new Error("Matrix must be non-empty");let Se=Pe.rows,Te=Pe.columns;const{computeLeftSingularVectors:Fe=!0,computeRightSingularVectors:Ge=!0,autoTranspose:Je=!1}=Re;let Qe=!!Fe,et=!!Ge,pt=!1,at;if(Se<Te)if(!Je)at=Pe.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{at=Pe.transpose(),Se=at.rows,Te=at.columns,pt=!0;let gt=Qe;Qe=et,et=gt}else at=Pe.clone();let Pt=Math.min(Se,Te),Bt=Math.min(Se+1,Te),wt=new Float64Array(Bt),Mt=new nt(Se,Pt),Zt=new nt(Te,Te),ft=new Float64Array(Te),Nt=new Float64Array(Se),ir=new Float64Array(Bt);for(let gt=0;gt<Bt;gt++)ir[gt]=gt;let xr=Math.min(Se-1,Te),Cr=Math.max(0,Math.min(Te-2,Se)),Br=Math.max(xr,Cr);for(let gt=0;gt<Br;gt++){if(gt<xr){wt[gt]=0;for(let $t=gt;$t<Se;$t++)wt[gt]=rr(wt[gt],at.get($t,gt));if(wt[gt]!==0){at.get(gt,gt)<0&&(wt[gt]=-wt[gt]);for(let $t=gt;$t<Se;$t++)at.set($t,gt,at.get($t,gt)/wt[gt]);at.set(gt,gt,at.get(gt,gt)+1)}wt[gt]=-wt[gt]}for(let $t=gt+1;$t<Te;$t++){if(gt<xr&&wt[gt]!==0){let nr=0;for(let Ht=gt;Ht<Se;Ht++)nr+=at.get(Ht,gt)*at.get(Ht,$t);nr=-nr/at.get(gt,gt);for(let Ht=gt;Ht<Se;Ht++)at.set(Ht,$t,at.get(Ht,$t)+nr*at.get(Ht,gt))}ft[$t]=at.get(gt,$t)}if(Qe&&gt<xr)for(let $t=gt;$t<Se;$t++)Mt.set($t,gt,at.get($t,gt));if(gt<Cr){ft[gt]=0;for(let $t=gt+1;$t<Te;$t++)ft[gt]=rr(ft[gt],ft[$t]);if(ft[gt]!==0){ft[gt+1]<0&&(ft[gt]=0-ft[gt]);for(let $t=gt+1;$t<Te;$t++)ft[$t]/=ft[gt];ft[gt+1]+=1}if(ft[gt]=-ft[gt],gt+1<Se&&ft[gt]!==0){for(let $t=gt+1;$t<Se;$t++)Nt[$t]=0;for(let $t=gt+1;$t<Se;$t++)for(let nr=gt+1;nr<Te;nr++)Nt[$t]+=ft[nr]*at.get($t,nr);for(let $t=gt+1;$t<Te;$t++){let nr=-ft[$t]/ft[gt+1];for(let Ht=gt+1;Ht<Se;Ht++)at.set(Ht,$t,at.get(Ht,$t)+nr*Nt[Ht])}}if(et)for(let $t=gt+1;$t<Te;$t++)Zt.set($t,gt,ft[$t])}}let gr=Math.min(Te,Se+1);if(xr<Te&&(wt[xr]=at.get(xr,xr)),Se<gr&&(wt[gr-1]=0),Cr+1<gr&&(ft[Cr]=at.get(Cr,gr-1)),ft[gr-1]=0,Qe){for(let gt=xr;gt<Pt;gt++){for(let $t=0;$t<Se;$t++)Mt.set($t,gt,0);Mt.set(gt,gt,1)}for(let gt=xr-1;gt>=0;gt--)if(wt[gt]!==0){for(let $t=gt+1;$t<Pt;$t++){let nr=0;for(let Ht=gt;Ht<Se;Ht++)nr+=Mt.get(Ht,gt)*Mt.get(Ht,$t);nr=-nr/Mt.get(gt,gt);for(let Ht=gt;Ht<Se;Ht++)Mt.set(Ht,$t,Mt.get(Ht,$t)+nr*Mt.get(Ht,gt))}for(let $t=gt;$t<Se;$t++)Mt.set($t,gt,-Mt.get($t,gt));Mt.set(gt,gt,1+Mt.get(gt,gt));for(let $t=0;$t<gt-1;$t++)Mt.set($t,gt,0)}else{for(let $t=0;$t<Se;$t++)Mt.set($t,gt,0);Mt.set(gt,gt,1)}}if(et)for(let gt=Te-1;gt>=0;gt--){if(gt<Cr&&ft[gt]!==0)for(let $t=gt+1;$t<Te;$t++){let nr=0;for(let Ht=gt+1;Ht<Te;Ht++)nr+=Zt.get(Ht,gt)*Zt.get(Ht,$t);nr=-nr/Zt.get(gt+1,gt);for(let Ht=gt+1;Ht<Te;Ht++)Zt.set(Ht,$t,Zt.get(Ht,$t)+nr*Zt.get(Ht,gt))}for(let $t=0;$t<Te;$t++)Zt.set($t,gt,0);Zt.set(gt,gt,1)}let tr=gr-1,$r=Number.EPSILON;for(;gr>0;){let gt,$t;for(gt=gr-2;gt>=-1&&gt!==-1;gt--){const nr=Number.MIN_VALUE+$r*Math.abs(wt[gt]+Math.abs(wt[gt+1]));if(Math.abs(ft[gt])<=nr||Number.isNaN(ft[gt])){ft[gt]=0;break}}if(gt===gr-2)$t=4;else{let nr;for(nr=gr-1;nr>=gt&&nr!==gt;nr--){let Ht=(nr!==gr?Math.abs(ft[nr]):0)+(nr!==gt+1?Math.abs(ft[nr-1]):0);if(Math.abs(wt[nr])<=$r*Ht){wt[nr]=0;break}}nr===gt?$t=3:nr===gr-1?$t=1:($t=2,gt=nr)}switch(gt++,$t){case 1:{let nr=ft[gr-2];ft[gr-2]=0;for(let Ht=gr-2;Ht>=gt;Ht--){let Nr=rr(wt[Ht],nr),Dr=wt[Ht]/Nr,Ar=nr/Nr;if(wt[Ht]=Nr,Ht!==gt&&(nr=-Ar*ft[Ht-1],ft[Ht-1]=Dr*ft[Ht-1]),et)for(let Ur=0;Ur<Te;Ur++)Nr=Dr*Zt.get(Ur,Ht)+Ar*Zt.get(Ur,gr-1),Zt.set(Ur,gr-1,-Ar*Zt.get(Ur,Ht)+Dr*Zt.get(Ur,gr-1)),Zt.set(Ur,Ht,Nr)}break}case 2:{let nr=ft[gt-1];ft[gt-1]=0;for(let Ht=gt;Ht<gr;Ht++){let Nr=rr(wt[Ht],nr),Dr=wt[Ht]/Nr,Ar=nr/Nr;if(wt[Ht]=Nr,nr=-Ar*ft[Ht],ft[Ht]=Dr*ft[Ht],Qe)for(let Ur=0;Ur<Se;Ur++)Nr=Dr*Mt.get(Ur,Ht)+Ar*Mt.get(Ur,gt-1),Mt.set(Ur,gt-1,-Ar*Mt.get(Ur,Ht)+Dr*Mt.get(Ur,gt-1)),Mt.set(Ur,Ht,Nr)}break}case 3:{const nr=Math.max(Math.abs(wt[gr-1]),Math.abs(wt[gr-2]),Math.abs(ft[gr-2]),Math.abs(wt[gt]),Math.abs(ft[gt])),Ht=wt[gr-1]/nr,Nr=wt[gr-2]/nr,Dr=ft[gr-2]/nr,Ar=wt[gt]/nr,Ur=ft[gt]/nr,Fr=((Nr+Ht)*(Nr-Ht)+Dr*Dr)/2,bn=Ht*Dr*(Ht*Dr);let Gr=0;(Fr!==0||bn!==0)&&(Fr<0?Gr=0-Math.sqrt(Fr*Fr+bn):Gr=Math.sqrt(Fr*Fr+bn),Gr=bn/(Fr+Gr));let Rn=(Ar+Ht)*(Ar-Ht)+Gr,mn=Ar*Ur;for(let Rr=gt;Rr<gr-1;Rr++){let Kr=rr(Rn,mn);Kr===0&&(Kr=Number.MIN_VALUE);let rn=Rn/Kr,dn=mn/Kr;if(Rr!==gt&&(ft[Rr-1]=Kr),Rn=rn*wt[Rr]+dn*ft[Rr],ft[Rr]=rn*ft[Rr]-dn*wt[Rr],mn=dn*wt[Rr+1],wt[Rr+1]=rn*wt[Rr+1],et)for(let Zr=0;Zr<Te;Zr++)Kr=rn*Zt.get(Zr,Rr)+dn*Zt.get(Zr,Rr+1),Zt.set(Zr,Rr+1,-dn*Zt.get(Zr,Rr)+rn*Zt.get(Zr,Rr+1)),Zt.set(Zr,Rr,Kr);if(Kr=rr(Rn,mn),Kr===0&&(Kr=Number.MIN_VALUE),rn=Rn/Kr,dn=mn/Kr,wt[Rr]=Kr,Rn=rn*ft[Rr]+dn*wt[Rr+1],wt[Rr+1]=-dn*ft[Rr]+rn*wt[Rr+1],mn=dn*ft[Rr+1],ft[Rr+1]=rn*ft[Rr+1],Qe&&Rr<Se-1)for(let Zr=0;Zr<Se;Zr++)Kr=rn*Mt.get(Zr,Rr)+dn*Mt.get(Zr,Rr+1),Mt.set(Zr,Rr+1,-dn*Mt.get(Zr,Rr)+rn*Mt.get(Zr,Rr+1)),Mt.set(Zr,Rr,Kr)}ft[gr-2]=Rn;break}case 4:{if(wt[gt]<=0&&(wt[gt]=wt[gt]<0?-wt[gt]:0,et))for(let nr=0;nr<=tr;nr++)Zt.set(nr,gt,-Zt.get(nr,gt));for(;gt<tr&&!(wt[gt]>=wt[gt+1]);){let nr=wt[gt];if(wt[gt]=wt[gt+1],wt[gt+1]=nr,et&&gt<Te-1)for(let Ht=0;Ht<Te;Ht++)nr=Zt.get(Ht,gt+1),Zt.set(Ht,gt+1,Zt.get(Ht,gt)),Zt.set(Ht,gt,nr);if(Qe&&gt<Se-1)for(let Ht=0;Ht<Se;Ht++)nr=Mt.get(Ht,gt+1),Mt.set(Ht,gt+1,Mt.get(Ht,gt)),Mt.set(Ht,gt,nr);gt++}gr--;break}}}if(pt){let gt=Zt;Zt=Mt,Mt=gt}this.m=Se,this.n=Te,this.s=wt,this.U=Mt,this.V=Zt}solve(Pe){let Re=Pe,Se=this.threshold,Te=this.s.length,Fe=nt.zeros(Te,Te);for(let Pt=0;Pt<Te;Pt++)Math.abs(this.s[Pt])<=Se?Fe.set(Pt,Pt,0):Fe.set(Pt,Pt,1/this.s[Pt]);let Ge=this.U,Je=this.rightSingularVectors,Qe=Je.mmul(Fe),et=Je.rows,pt=Ge.rows,at=nt.zeros(et,pt);for(let Pt=0;Pt<et;Pt++)for(let Bt=0;Bt<pt;Bt++){let wt=0;for(let Mt=0;Mt<Te;Mt++)wt+=Qe.get(Pt,Mt)*Ge.get(Bt,Mt);at.set(Pt,Bt,wt)}return at.mmul(Re)}solveForDiagonal(Pe){return this.solve(nt.diag(Pe))}inverse(){let Pe=this.V,Re=this.threshold,Se=Pe.rows,Te=Pe.columns,Fe=new nt(Se,this.s.length);for(let pt=0;pt<Se;pt++)for(let at=0;at<Te;at++)Math.abs(this.s[at])>Re&&Fe.set(pt,at,Pe.get(pt,at)/this.s[at]);let Ge=this.U,Je=Ge.rows,Qe=Ge.columns,et=new nt(Se,Je);for(let pt=0;pt<Se;pt++)for(let at=0;at<Je;at++){let Pt=0;for(let Bt=0;Bt<Qe;Bt++)Pt+=Fe.get(pt,Bt)*Ge.get(at,Bt);et.set(pt,at,Pt)}return et}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let Pe=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,Re=0,Se=this.s;for(let Te=0,Fe=Se.length;Te<Fe;Te++)Se[Te]>Pe&&Re++;return Re}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return nt.diag(this.s)}}function cr(Be,Pe=!1){return Be=yt.checkMatrix(Be),Pe?new _r(Be).inverse():Vt(Be,nt.eye(Be.rows))}function Vt(Be,Pe,Re=!1){return Be=yt.checkMatrix(Be),Pe=yt.checkMatrix(Pe),Re?new _r(Be).solve(Pe):Be.isSquare()?new Qt(Be).solve(Pe):new It(Be).solve(Pe)}function Gt(Be){if(Be=nt.checkMatrix(Be),Be.isSquare()){if(Be.columns===0)return 1;let Pe,Re,Se,Te;if(Be.columns===2)return Pe=Be.get(0,0),Re=Be.get(0,1),Se=Be.get(1,0),Te=Be.get(1,1),Pe*Te-Re*Se;if(Be.columns===3){let Fe,Ge,Je;return Fe=new At(Be,[1,2],[1,2]),Ge=new At(Be,[1,2],[0,2]),Je=new At(Be,[1,2],[0,1]),Pe=Be.get(0,0),Re=Be.get(0,1),Se=Be.get(0,2),Pe*Gt(Fe)-Re*Gt(Ge)+Se*Gt(Je)}else return new Qt(Be).determinant}else throw Error("determinant can only be calculated for a square matrix")}function er(Be,Pe){let Re=[];for(let Se=0;Se<Be;Se++)Se!==Pe&&Re.push(Se);return Re}function Yt(Be,Pe,Re,Se=1e-9,Te=1e-9){if(Be>Te)return new Array(Pe.rows+1).fill(0);{let Fe=Pe.addRow(Re,[0]);for(let Ge=0;Ge<Fe.rows;Ge++)Math.abs(Fe.get(Ge,0))<Se&&Fe.set(Ge,0,0);return Fe.to1DArray()}}function ar(Be,Pe={}){const{thresholdValue:Re=1e-9,thresholdError:Se=1e-9}=Pe;Be=nt.checkMatrix(Be);let Te=Be.rows,Fe=new nt(Te,Te);for(let Ge=0;Ge<Te;Ge++){let Je=nt.columnVector(Be.getRow(Ge)),Qe=Be.subMatrixRow(er(Te,Ge)).transpose(),pt=new _r(Qe).solve(Je),at=nt.sub(Je,Qe.mmul(pt)).abs().max();Fe.setRow(Ge,Yt(at,pt,Ge,Re,Se))}return Fe}function yr(Be,Pe=Number.EPSILON){if(Be=nt.checkMatrix(Be),Be.isEmpty())return Be.transpose();let Re=new _r(Be,{autoTranspose:!0}),Se=Re.leftSingularVectors,Te=Re.rightSingularVectors,Fe=Re.diagonal;for(let Ge=0;Ge<Fe.length;Ge++)Math.abs(Fe[Ge])>Pe?Fe[Ge]=1/Fe[Ge]:Fe[Ge]=0;return Te.mmul(nt.diag(Fe).mmul(Se.transpose()))}function Jt(Be,Pe=Be,Re={}){Be=new nt(Be);let Se=!1;if(typeof Pe=="object"&&!nt.isMatrix(Pe)&&!r.isAnyArray(Pe)?(Re=Pe,Pe=Be,Se=!0):Pe=new nt(Pe),Be.rows!==Pe.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:Te=!0}=Re;Te&&(Be=Be.center("column"),Se||(Pe=Pe.center("column")));const Fe=Be.transpose().mmul(Pe);for(let Ge=0;Ge<Fe.rows;Ge++)for(let Je=0;Je<Fe.columns;Je++)Fe.set(Ge,Je,Fe.get(Ge,Je)*(1/(Be.rows-1)));return Fe}function br(Be,Pe=Be,Re={}){Be=new nt(Be);let Se=!1;if(typeof Pe=="object"&&!nt.isMatrix(Pe)&&!r.isAnyArray(Pe)?(Re=Pe,Pe=Be,Se=!0):Pe=new nt(Pe),Be.rows!==Pe.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:Te=!0,scale:Fe=!0}=Re;Te&&(Be.center("column"),Se||Pe.center("column")),Fe&&(Be.scale("column"),Se||Pe.scale("column"));const Ge=Be.standardDeviation("column",{unbiased:!0}),Je=Se?Ge:Pe.standardDeviation("column",{unbiased:!0}),Qe=Be.transpose().mmul(Pe);for(let et=0;et<Qe.rows;et++)for(let pt=0;pt<Qe.columns;pt++)Qe.set(et,pt,Qe.get(et,pt)*(1/(Ge[et]*Je[pt]))*(1/(Be.rows-1)));return Qe}class Ot{constructor(Pe,Re={}){const{assumeSymmetric:Se=!1}=Re;if(Pe=yt.checkMatrix(Pe),!Pe.isSquare())throw new Error("Matrix is not a square matrix");if(Pe.isEmpty())throw new Error("Matrix must be non-empty");let Te=Pe.columns,Fe=new nt(Te,Te),Ge=new Float64Array(Te),Je=new Float64Array(Te),Qe=Pe,et,pt,at=!1;if(Se?at=!0:at=Pe.isSymmetric(),at){for(et=0;et<Te;et++)for(pt=0;pt<Te;pt++)Fe.set(et,pt,Qe.get(et,pt));lr(Te,Je,Ge,Fe),hr(Te,Je,Ge,Fe)}else{let Pt=new nt(Te,Te),Bt=new Float64Array(Te);for(pt=0;pt<Te;pt++)for(et=0;et<Te;et++)Pt.set(et,pt,Qe.get(et,pt));Ft(Te,Pt,Bt,Fe),kt(Te,Je,Ge,Fe,Pt)}this.n=Te,this.e=Je,this.d=Ge,this.V=Fe}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let Pe=this.n,Re=this.e,Se=this.d,Te=new nt(Pe,Pe),Fe,Ge;for(Fe=0;Fe<Pe;Fe++){for(Ge=0;Ge<Pe;Ge++)Te.set(Fe,Ge,0);Te.set(Fe,Fe,Se[Fe]),Re[Fe]>0?Te.set(Fe,Fe+1,Re[Fe]):Re[Fe]<0&&Te.set(Fe,Fe-1,Re[Fe])}return Te}}function lr(Be,Pe,Re,Se){let Te,Fe,Ge,Je,Qe,et,pt,at;for(Qe=0;Qe<Be;Qe++)Re[Qe]=Se.get(Be-1,Qe);for(Je=Be-1;Je>0;Je--){for(at=0,Ge=0,et=0;et<Je;et++)at=at+Math.abs(Re[et]);if(at===0)for(Pe[Je]=Re[Je-1],Qe=0;Qe<Je;Qe++)Re[Qe]=Se.get(Je-1,Qe),Se.set(Je,Qe,0),Se.set(Qe,Je,0);else{for(et=0;et<Je;et++)Re[et]/=at,Ge+=Re[et]*Re[et];for(Te=Re[Je-1],Fe=Math.sqrt(Ge),Te>0&&(Fe=-Fe),Pe[Je]=at*Fe,Ge=Ge-Te*Fe,Re[Je-1]=Te-Fe,Qe=0;Qe<Je;Qe++)Pe[Qe]=0;for(Qe=0;Qe<Je;Qe++){for(Te=Re[Qe],Se.set(Qe,Je,Te),Fe=Pe[Qe]+Se.get(Qe,Qe)*Te,et=Qe+1;et<=Je-1;et++)Fe+=Se.get(et,Qe)*Re[et],Pe[et]+=Se.get(et,Qe)*Te;Pe[Qe]=Fe}for(Te=0,Qe=0;Qe<Je;Qe++)Pe[Qe]/=Ge,Te+=Pe[Qe]*Re[Qe];for(pt=Te/(Ge+Ge),Qe=0;Qe<Je;Qe++)Pe[Qe]-=pt*Re[Qe];for(Qe=0;Qe<Je;Qe++){for(Te=Re[Qe],Fe=Pe[Qe],et=Qe;et<=Je-1;et++)Se.set(et,Qe,Se.get(et,Qe)-(Te*Pe[et]+Fe*Re[et]));Re[Qe]=Se.get(Je-1,Qe),Se.set(Je,Qe,0)}}Re[Je]=Ge}for(Je=0;Je<Be-1;Je++){if(Se.set(Be-1,Je,Se.get(Je,Je)),Se.set(Je,Je,1),Ge=Re[Je+1],Ge!==0){for(et=0;et<=Je;et++)Re[et]=Se.get(et,Je+1)/Ge;for(Qe=0;Qe<=Je;Qe++){for(Fe=0,et=0;et<=Je;et++)Fe+=Se.get(et,Je+1)*Se.get(et,Qe);for(et=0;et<=Je;et++)Se.set(et,Qe,Se.get(et,Qe)-Fe*Re[et])}}for(et=0;et<=Je;et++)Se.set(et,Je+1,0)}for(Qe=0;Qe<Be;Qe++)Re[Qe]=Se.get(Be-1,Qe),Se.set(Be-1,Qe,0);Se.set(Be-1,Be-1,1),Pe[0]=0}function hr(Be,Pe,Re,Se){let Te,Fe,Ge,Je,Qe,et,pt,at,Pt,Bt,wt,Mt,Zt,ft,Nt,ir;for(Ge=1;Ge<Be;Ge++)Pe[Ge-1]=Pe[Ge];Pe[Be-1]=0;let xr=0,Cr=0,Br=Number.EPSILON;for(et=0;et<Be;et++){for(Cr=Math.max(Cr,Math.abs(Re[et])+Math.abs(Pe[et])),pt=et;pt<Be&&!(Math.abs(Pe[pt])<=Br*Cr);)pt++;if(pt>et)do{for(Te=Re[et],at=(Re[et+1]-Te)/(2*Pe[et]),Pt=rr(at,1),at<0&&(Pt=-Pt),Re[et]=Pe[et]/(at+Pt),Re[et+1]=Pe[et]*(at+Pt),Bt=Re[et+1],Fe=Te-Re[et],Ge=et+2;Ge<Be;Ge++)Re[Ge]-=Fe;for(xr=xr+Fe,at=Re[pt],wt=1,Mt=wt,Zt=wt,ft=Pe[et+1],Nt=0,ir=0,Ge=pt-1;Ge>=et;Ge--)for(Zt=Mt,Mt=wt,ir=Nt,Te=wt*Pe[Ge],Fe=wt*at,Pt=rr(at,Pe[Ge]),Pe[Ge+1]=Nt*Pt,Nt=Pe[Ge]/Pt,wt=at/Pt,at=wt*Re[Ge]-Nt*Te,Re[Ge+1]=Fe+Nt*(wt*Te+Nt*Re[Ge]),Qe=0;Qe<Be;Qe++)Fe=Se.get(Qe,Ge+1),Se.set(Qe,Ge+1,Nt*Se.get(Qe,Ge)+wt*Fe),Se.set(Qe,Ge,wt*Se.get(Qe,Ge)-Nt*Fe);at=-Nt*ir*Zt*ft*Pe[et]/Bt,Pe[et]=Nt*at,Re[et]=wt*at}while(Math.abs(Pe[et])>Br*Cr);Re[et]=Re[et]+xr,Pe[et]=0}for(Ge=0;Ge<Be-1;Ge++){for(Qe=Ge,at=Re[Ge],Je=Ge+1;Je<Be;Je++)Re[Je]<at&&(Qe=Je,at=Re[Je]);if(Qe!==Ge)for(Re[Qe]=Re[Ge],Re[Ge]=at,Je=0;Je<Be;Je++)at=Se.get(Je,Ge),Se.set(Je,Ge,Se.get(Je,Qe)),Se.set(Je,Qe,at)}}function Ft(Be,Pe,Re,Se){let Te=0,Fe=Be-1,Ge,Je,Qe,et,pt,at,Pt;for(at=Te+1;at<=Fe-1;at++){for(Pt=0,et=at;et<=Fe;et++)Pt=Pt+Math.abs(Pe.get(et,at-1));if(Pt!==0){for(Qe=0,et=Fe;et>=at;et--)Re[et]=Pe.get(et,at-1)/Pt,Qe+=Re[et]*Re[et];for(Je=Math.sqrt(Qe),Re[at]>0&&(Je=-Je),Qe=Qe-Re[at]*Je,Re[at]=Re[at]-Je,pt=at;pt<Be;pt++){for(Ge=0,et=Fe;et>=at;et--)Ge+=Re[et]*Pe.get(et,pt);for(Ge=Ge/Qe,et=at;et<=Fe;et++)Pe.set(et,pt,Pe.get(et,pt)-Ge*Re[et])}for(et=0;et<=Fe;et++){for(Ge=0,pt=Fe;pt>=at;pt--)Ge+=Re[pt]*Pe.get(et,pt);for(Ge=Ge/Qe,pt=at;pt<=Fe;pt++)Pe.set(et,pt,Pe.get(et,pt)-Ge*Re[pt])}Re[at]=Pt*Re[at],Pe.set(at,at-1,Pt*Je)}}for(et=0;et<Be;et++)for(pt=0;pt<Be;pt++)Se.set(et,pt,et===pt?1:0);for(at=Fe-1;at>=Te+1;at--)if(Pe.get(at,at-1)!==0){for(et=at+1;et<=Fe;et++)Re[et]=Pe.get(et,at-1);for(pt=at;pt<=Fe;pt++){for(Je=0,et=at;et<=Fe;et++)Je+=Re[et]*Se.get(et,pt);for(Je=Je/Re[at]/Pe.get(at,at-1),et=at;et<=Fe;et++)Se.set(et,pt,Se.get(et,pt)+Je*Re[et])}}}function kt(Be,Pe,Re,Se,Te){let Fe=Be-1,Ge=0,Je=Be-1,Qe=Number.EPSILON,et=0,pt=0,at=0,Pt=0,Bt=0,wt=0,Mt=0,Zt=0,ft,Nt,ir,xr,Cr,Br,gr,tr,$r,gt,$t,nr,Ht,Nr,Dr;for(ft=0;ft<Be;ft++)for((ft<Ge||ft>Je)&&(Re[ft]=Te.get(ft,ft),Pe[ft]=0),Nt=Math.max(ft-1,0);Nt<Be;Nt++)pt=pt+Math.abs(Te.get(ft,Nt));for(;Fe>=Ge;){for(xr=Fe;xr>Ge&&(wt=Math.abs(Te.get(xr-1,xr-1))+Math.abs(Te.get(xr,xr)),wt===0&&(wt=pt),!(Math.abs(Te.get(xr,xr-1))<Qe*wt));)xr--;if(xr===Fe)Te.set(Fe,Fe,Te.get(Fe,Fe)+et),Re[Fe]=Te.get(Fe,Fe),Pe[Fe]=0,Fe--,Zt=0;else if(xr===Fe-1){if(gr=Te.get(Fe,Fe-1)*Te.get(Fe-1,Fe),at=(Te.get(Fe-1,Fe-1)-Te.get(Fe,Fe))/2,Pt=at*at+gr,Mt=Math.sqrt(Math.abs(Pt)),Te.set(Fe,Fe,Te.get(Fe,Fe)+et),Te.set(Fe-1,Fe-1,Te.get(Fe-1,Fe-1)+et),tr=Te.get(Fe,Fe),Pt>=0){for(Mt=at>=0?at+Mt:at-Mt,Re[Fe-1]=tr+Mt,Re[Fe]=Re[Fe-1],Mt!==0&&(Re[Fe]=tr-gr/Mt),Pe[Fe-1]=0,Pe[Fe]=0,tr=Te.get(Fe,Fe-1),wt=Math.abs(tr)+Math.abs(Mt),at=tr/wt,Pt=Mt/wt,Bt=Math.sqrt(at*at+Pt*Pt),at=at/Bt,Pt=Pt/Bt,Nt=Fe-1;Nt<Be;Nt++)Mt=Te.get(Fe-1,Nt),Te.set(Fe-1,Nt,Pt*Mt+at*Te.get(Fe,Nt)),Te.set(Fe,Nt,Pt*Te.get(Fe,Nt)-at*Mt);for(ft=0;ft<=Fe;ft++)Mt=Te.get(ft,Fe-1),Te.set(ft,Fe-1,Pt*Mt+at*Te.get(ft,Fe)),Te.set(ft,Fe,Pt*Te.get(ft,Fe)-at*Mt);for(ft=Ge;ft<=Je;ft++)Mt=Se.get(ft,Fe-1),Se.set(ft,Fe-1,Pt*Mt+at*Se.get(ft,Fe)),Se.set(ft,Fe,Pt*Se.get(ft,Fe)-at*Mt)}else Re[Fe-1]=tr+at,Re[Fe]=tr+at,Pe[Fe-1]=Mt,Pe[Fe]=-Mt;Fe=Fe-2,Zt=0}else{if(tr=Te.get(Fe,Fe),$r=0,gr=0,xr<Fe&&($r=Te.get(Fe-1,Fe-1),gr=Te.get(Fe,Fe-1)*Te.get(Fe-1,Fe)),Zt===10){for(et+=tr,ft=Ge;ft<=Fe;ft++)Te.set(ft,ft,Te.get(ft,ft)-tr);wt=Math.abs(Te.get(Fe,Fe-1))+Math.abs(Te.get(Fe-1,Fe-2)),tr=$r=.75*wt,gr=-.4375*wt*wt}if(Zt===30&&(wt=($r-tr)/2,wt=wt*wt+gr,wt>0)){for(wt=Math.sqrt(wt),$r<tr&&(wt=-wt),wt=tr-gr/(($r-tr)/2+wt),ft=Ge;ft<=Fe;ft++)Te.set(ft,ft,Te.get(ft,ft)-wt);et+=wt,tr=$r=gr=.964}for(Zt=Zt+1,Cr=Fe-2;Cr>=xr&&(Mt=Te.get(Cr,Cr),Bt=tr-Mt,wt=$r-Mt,at=(Bt*wt-gr)/Te.get(Cr+1,Cr)+Te.get(Cr,Cr+1),Pt=Te.get(Cr+1,Cr+1)-Mt-Bt-wt,Bt=Te.get(Cr+2,Cr+1),wt=Math.abs(at)+Math.abs(Pt)+Math.abs(Bt),at=at/wt,Pt=Pt/wt,Bt=Bt/wt,!(Cr===xr||Math.abs(Te.get(Cr,Cr-1))*(Math.abs(Pt)+Math.abs(Bt))<Qe*(Math.abs(at)*(Math.abs(Te.get(Cr-1,Cr-1))+Math.abs(Mt)+Math.abs(Te.get(Cr+1,Cr+1))))));)Cr--;for(ft=Cr+2;ft<=Fe;ft++)Te.set(ft,ft-2,0),ft>Cr+2&&Te.set(ft,ft-3,0);for(ir=Cr;ir<=Fe-1&&(Nr=ir!==Fe-1,ir!==Cr&&(at=Te.get(ir,ir-1),Pt=Te.get(ir+1,ir-1),Bt=Nr?Te.get(ir+2,ir-1):0,tr=Math.abs(at)+Math.abs(Pt)+Math.abs(Bt),tr!==0&&(at=at/tr,Pt=Pt/tr,Bt=Bt/tr)),tr!==0);ir++)if(wt=Math.sqrt(at*at+Pt*Pt+Bt*Bt),at<0&&(wt=-wt),wt!==0){for(ir!==Cr?Te.set(ir,ir-1,-wt*tr):xr!==Cr&&Te.set(ir,ir-1,-Te.get(ir,ir-1)),at=at+wt,tr=at/wt,$r=Pt/wt,Mt=Bt/wt,Pt=Pt/at,Bt=Bt/at,Nt=ir;Nt<Be;Nt++)at=Te.get(ir,Nt)+Pt*Te.get(ir+1,Nt),Nr&&(at=at+Bt*Te.get(ir+2,Nt),Te.set(ir+2,Nt,Te.get(ir+2,Nt)-at*Mt)),Te.set(ir,Nt,Te.get(ir,Nt)-at*tr),Te.set(ir+1,Nt,Te.get(ir+1,Nt)-at*$r);for(ft=0;ft<=Math.min(Fe,ir+3);ft++)at=tr*Te.get(ft,ir)+$r*Te.get(ft,ir+1),Nr&&(at=at+Mt*Te.get(ft,ir+2),Te.set(ft,ir+2,Te.get(ft,ir+2)-at*Bt)),Te.set(ft,ir,Te.get(ft,ir)-at),Te.set(ft,ir+1,Te.get(ft,ir+1)-at*Pt);for(ft=Ge;ft<=Je;ft++)at=tr*Se.get(ft,ir)+$r*Se.get(ft,ir+1),Nr&&(at=at+Mt*Se.get(ft,ir+2),Se.set(ft,ir+2,Se.get(ft,ir+2)-at*Bt)),Se.set(ft,ir,Se.get(ft,ir)-at),Se.set(ft,ir+1,Se.get(ft,ir+1)-at*Pt)}}}if(pt!==0){for(Fe=Be-1;Fe>=0;Fe--)if(at=Re[Fe],Pt=Pe[Fe],Pt===0)for(xr=Fe,Te.set(Fe,Fe,1),ft=Fe-1;ft>=0;ft--){for(gr=Te.get(ft,ft)-at,Bt=0,Nt=xr;Nt<=Fe;Nt++)Bt=Bt+Te.get(ft,Nt)*Te.get(Nt,Fe);if(Pe[ft]<0)Mt=gr,wt=Bt;else if(xr=ft,Pe[ft]===0?Te.set(ft,Fe,gr!==0?-Bt/gr:-Bt/(Qe*pt)):(tr=Te.get(ft,ft+1),$r=Te.get(ft+1,ft),Pt=(Re[ft]-at)*(Re[ft]-at)+Pe[ft]*Pe[ft],Br=(tr*wt-Mt*Bt)/Pt,Te.set(ft,Fe,Br),Te.set(ft+1,Fe,Math.abs(tr)>Math.abs(Mt)?(-Bt-gr*Br)/tr:(-wt-$r*Br)/Mt)),Br=Math.abs(Te.get(ft,Fe)),Qe*Br*Br>1)for(Nt=ft;Nt<=Fe;Nt++)Te.set(Nt,Fe,Te.get(Nt,Fe)/Br)}else if(Pt<0)for(xr=Fe-1,Math.abs(Te.get(Fe,Fe-1))>Math.abs(Te.get(Fe-1,Fe))?(Te.set(Fe-1,Fe-1,Pt/Te.get(Fe,Fe-1)),Te.set(Fe-1,Fe,-(Te.get(Fe,Fe)-at)/Te.get(Fe,Fe-1))):(Dr=Xt(0,-Te.get(Fe-1,Fe),Te.get(Fe-1,Fe-1)-at,Pt),Te.set(Fe-1,Fe-1,Dr[0]),Te.set(Fe-1,Fe,Dr[1])),Te.set(Fe,Fe-1,0),Te.set(Fe,Fe,1),ft=Fe-2;ft>=0;ft--){for(gt=0,$t=0,Nt=xr;Nt<=Fe;Nt++)gt=gt+Te.get(ft,Nt)*Te.get(Nt,Fe-1),$t=$t+Te.get(ft,Nt)*Te.get(Nt,Fe);if(gr=Te.get(ft,ft)-at,Pe[ft]<0)Mt=gr,Bt=gt,wt=$t;else if(xr=ft,Pe[ft]===0?(Dr=Xt(-gt,-$t,gr,Pt),Te.set(ft,Fe-1,Dr[0]),Te.set(ft,Fe,Dr[1])):(tr=Te.get(ft,ft+1),$r=Te.get(ft+1,ft),nr=(Re[ft]-at)*(Re[ft]-at)+Pe[ft]*Pe[ft]-Pt*Pt,Ht=(Re[ft]-at)*2*Pt,nr===0&&Ht===0&&(nr=Qe*pt*(Math.abs(gr)+Math.abs(Pt)+Math.abs(tr)+Math.abs($r)+Math.abs(Mt))),Dr=Xt(tr*Bt-Mt*gt+Pt*$t,tr*wt-Mt*$t-Pt*gt,nr,Ht),Te.set(ft,Fe-1,Dr[0]),Te.set(ft,Fe,Dr[1]),Math.abs(tr)>Math.abs(Mt)+Math.abs(Pt)?(Te.set(ft+1,Fe-1,(-gt-gr*Te.get(ft,Fe-1)+Pt*Te.get(ft,Fe))/tr),Te.set(ft+1,Fe,(-$t-gr*Te.get(ft,Fe)-Pt*Te.get(ft,Fe-1))/tr)):(Dr=Xt(-Bt-$r*Te.get(ft,Fe-1),-wt-$r*Te.get(ft,Fe),Mt,Pt),Te.set(ft+1,Fe-1,Dr[0]),Te.set(ft+1,Fe,Dr[1]))),Br=Math.max(Math.abs(Te.get(ft,Fe-1)),Math.abs(Te.get(ft,Fe))),Qe*Br*Br>1)for(Nt=ft;Nt<=Fe;Nt++)Te.set(Nt,Fe-1,Te.get(Nt,Fe-1)/Br),Te.set(Nt,Fe,Te.get(Nt,Fe)/Br)}for(ft=0;ft<Be;ft++)if(ft<Ge||ft>Je)for(Nt=ft;Nt<Be;Nt++)Se.set(ft,Nt,Te.get(ft,Nt));for(Nt=Be-1;Nt>=Ge;Nt--)for(ft=Ge;ft<=Je;ft++){for(Mt=0,ir=Ge;ir<=Math.min(Nt,Je);ir++)Mt=Mt+Se.get(ft,ir)*Te.get(ir,Nt);Se.set(ft,Nt,Mt)}}}function Xt(Be,Pe,Re,Se){let Te,Fe;return Math.abs(Re)>Math.abs(Se)?(Te=Se/Re,Fe=Re+Te*Se,[(Be+Te*Pe)/Fe,(Pe-Te*Be)/Fe]):(Te=Re/Se,Fe=Se+Te*Re,[(Te*Be+Pe)/Fe,(Te*Pe-Be)/Fe])}class wr{constructor(Pe){if(Pe=yt.checkMatrix(Pe),!Pe.isSymmetric())throw new Error("Matrix is not symmetric");let Re=Pe,Se=Re.rows,Te=new nt(Se,Se),Fe=!0,Ge,Je,Qe;for(Je=0;Je<Se;Je++){let et=0;for(Qe=0;Qe<Je;Qe++){let pt=0;for(Ge=0;Ge<Qe;Ge++)pt+=Te.get(Qe,Ge)*Te.get(Je,Ge);pt=(Re.get(Je,Qe)-pt)/Te.get(Qe,Qe),Te.set(Je,Qe,pt),et=et+pt*pt}for(et=Re.get(Je,Je)-et,Fe&&(Fe=et>0),Te.set(Je,Je,Math.sqrt(Math.max(et,0))),Qe=Je+1;Qe<Se;Qe++)Te.set(Je,Qe,0)}this.L=Te,this.positiveDefinite=Fe}isPositiveDefinite(){return this.positiveDefinite}solve(Pe){Pe=yt.checkMatrix(Pe);let Re=this.L,Se=Re.rows;if(Pe.rows!==Se)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");let Te=Pe.columns,Fe=Pe.clone(),Ge,Je,Qe;for(Qe=0;Qe<Se;Qe++)for(Je=0;Je<Te;Je++){for(Ge=0;Ge<Qe;Ge++)Fe.set(Qe,Je,Fe.get(Qe,Je)-Fe.get(Ge,Je)*Re.get(Qe,Ge));Fe.set(Qe,Je,Fe.get(Qe,Je)/Re.get(Qe,Qe))}for(Qe=Se-1;Qe>=0;Qe--)for(Je=0;Je<Te;Je++){for(Ge=Qe+1;Ge<Se;Ge++)Fe.set(Qe,Je,Fe.get(Qe,Je)-Fe.get(Ge,Je)*Re.get(Ge,Qe));Fe.set(Qe,Je,Fe.get(Qe,Je)/Re.get(Qe,Qe))}return Fe}get lowerTriangularMatrix(){return this.L}}class fr{constructor(Pe,Re={}){Pe=yt.checkMatrix(Pe);let{Y:Se}=Re;const{scaleScores:Te=!1,maxIterations:Fe=1e3,terminationCriteria:Ge=1e-10}=Re;let Je;if(Se){if(r.isAnyArray(Se)&&typeof Se[0]=="number"?Se=nt.columnVector(Se):Se=yt.checkMatrix(Se),Se.rows!==Pe.rows)throw new Error("Y should have the same number of rows as X");Je=Se.getColumnVector(0)}else Je=Pe.getColumnVector(0);let Qe=1,et,pt,at,Pt;for(let Bt=0;Bt<Fe&&Qe>Ge;Bt++)at=Pe.transpose().mmul(Je).div(Je.transpose().mmul(Je).get(0,0)),at=at.div(at.norm()),et=Pe.mmul(at).div(at.transpose().mmul(at).get(0,0)),Bt>0&&(Qe=et.clone().sub(Pt).pow(2).sum()),Pt=et.clone(),Se?(pt=Se.transpose().mmul(et).div(et.transpose().mmul(et).get(0,0)),pt=pt.div(pt.norm()),Je=Se.mmul(pt).div(pt.transpose().mmul(pt).get(0,0))):Je=et;if(Se){let Bt=Pe.transpose().mmul(et).div(et.transpose().mmul(et).get(0,0));Bt=Bt.div(Bt.norm());let wt=Pe.clone().sub(et.clone().mmul(Bt.transpose())),Mt=Je.transpose().mmul(et).div(et.transpose().mmul(et).get(0,0)),Zt=Se.clone().sub(et.clone().mulS(Mt.get(0,0)).mmul(pt.transpose()));this.t=et,this.p=Bt.transpose(),this.w=at.transpose(),this.q=pt,this.u=Je,this.s=et.transpose().mmul(et),this.xResidual=wt,this.yResidual=Zt,this.betas=Mt}else this.w=at.transpose(),this.s=et.transpose().mmul(et).sqrt(),Te?this.t=et.clone().div(this.s.get(0,0)):this.t=et,this.xResidual=Pe.sub(et.mmul(at.transpose()))}}return matrix$1.AbstractMatrix=Ke,matrix$1.CHO=wr,matrix$1.CholeskyDecomposition=wr,matrix$1.DistanceMatrix=it,matrix$1.EVD=Ot,matrix$1.EigenvalueDecomposition=Ot,matrix$1.LU=Qt,matrix$1.LuDecomposition=Qt,matrix$1.Matrix=nt,matrix$1.MatrixColumnSelectionView=ct,matrix$1.MatrixColumnView=ht,matrix$1.MatrixFlipColumnView=St,matrix$1.MatrixFlipRowView=Ct,matrix$1.MatrixRowSelectionView=Tt,matrix$1.MatrixRowView=Dt,matrix$1.MatrixSelectionView=At,matrix$1.MatrixSubView=sr,matrix$1.MatrixTransposeView=Lt,matrix$1.NIPALS=fr,matrix$1.Nipals=fr,matrix$1.QR=It,matrix$1.QrDecomposition=It,matrix$1.SVD=_r,matrix$1.SingularValueDecomposition=_r,matrix$1.SymmetricMatrix=vt,matrix$1.WrapperMatrix1D=Kt,matrix$1.WrapperMatrix2D=yt,matrix$1.correlation=br,matrix$1.covariance=Jt,matrix$1.default=nt,matrix$1.determinant=Gt,matrix$1.inverse=cr,matrix$1.linearDependencies=ar,matrix$1.pseudoInverse=yr,matrix$1.solve=Vt,matrix$1.wrap=qt,matrix$1}var matrixExports=requireMatrix();const matrix=getDefaultExportFromCjs(matrixExports),Matrix$1=matrixExports.Matrix,SVD=matrixExports.SVD,SingularValueDecomposition=matrixExports.SingularValueDecomposition;matrix.Matrix?matrix.Matrix:matrixExports.Matrix;const inverse=matrixExports.inverse,solve=matrixExports.solve;function getSeparatedKernel(r){const n=new SVD(r,{autoTranspose:!0});if(n.rank!==1)return null;const e=Math.sqrt(n.s[0]),i=n.U.to2DArray().map(o=>o[0]*e),s=n.V.to2DArray().map(o=>o[0]*e);return[i,s]}function convolution(r,n={}){let{channels:e,bitDepth:i,normalize:s=!1,divisor:o=1,border:u="copy",algorithm:l="auto"}=n,d={};i&&(d.bitDepth=i);let m=Image.createFrom(this,d);if(e=validateArrayOfChannels(this,e),l!=="separable")({kernel:r}=validateKernel(r));else if(!Array.isArray(r)||r.length!==2)throw new RangeError("separable convolution requires two arrays of numbers to represent the kernel");if(l==="auto"){let ke=getSeparatedKernel(r);ke!==null?(l="separable",r=ke):(r.length>9||r[0].length>9)&&this.width<=4096&&this.height<=4096?l="fft":l="direct"}let y,S;l==="separable"?(y=Math.floor(r[0].length/2),S=Math.floor(r[1].length/2)):(y=Math.floor(r.length/2),S=Math.floor(r[0].length/2));let X=m.isClamped,he=new Array(this.height*this.width),Ce,Ee,xe,be,we,ve;for(be=0;be<e.length;be++){for(we=e[be],xe=0;xe<this.height;xe++)for(Ee=0;Ee<this.width;Ee++)Ce=xe*this.width+Ee,he[Ce]=this.data[Ce*this.channels+we];if(l==="direct")ve=srcExports$2.direct(he,r,{rows:this.height,cols:this.width,normalize:s,divisor:o});else if(l==="separable"){if(ve=convolutionSeparable(he,r,this.width,this.height),s){o=0;for(let ke=0;ke<r[0].length;ke++)for(let De=0;De<r[1].length;De++)o+=r[0][ke]*r[1][De]}if(o!==1)for(let ke=0;ke<ve.length;ke++)ve[ke]/=o}else ve=srcExports$2.fft(he,r,{rows:this.height,cols:this.width,normalize:s,divisor:o});for(xe=0;xe<this.height;xe++)for(Ee=0;Ee<this.width;Ee++)Ce=xe*this.width+Ee,X?m.data[Ce*this.channels+we]=clamp(ve[Ce],m):m.data[Ce*this.channels+we]=ve[Ce]}if(this.alpha&&!e.includes(this.channels))for(Ee=this.components;Ee<this.data.length;Ee=Ee+this.channels)m.data[Ee]=this.data[Ee];return u!=="periodic"&&m.setBorder({size:[S,y],algorithm:u}),m}function gradientFilter(r={}){let{direction:n="xy",border:e="copy",kernelX:i,kernelY:s,channels:o,bitDepth:u=this.bitDepth}=r;switch(this.checkProcessable("gradientFilter",{bitDepth:[8,16]}),n){case"x":if(!i)throw new Error("kernelX option is missing");return convolution.call(this,i,{channels:o,border:e,bitDepth:u});case"y":if(!s)throw new Error("kernelY option is missing");return convolution.call(this,s,{channels:o,border:e,bitDepth:u});case"xy":{if(!i)throw new Error("kernelX option is missing");if(!s)throw new Error("kernelY option is missing");const l=convolution.call(this,i,{channels:o,border:e,bitDepth:32}),d=convolution.call(this,s,{channels:o,border:e,bitDepth:32});return l.hypotenuse(d,{bitDepth:u,channels:o})}default:throw new Error(`Unknown parameter direction: ${n}`)}}function sobelFilter(r){return gradientFilter.call(this,Object.assign({},r,{kernelX:SOBEL_X,kernelY:SOBEL_Y}))}function scharrFilter(r){return gradientFilter.call(this,Object.assign({},r,{kernelX:SCHARR_X,kernelY:SCHARR_Y}))}var newArray_1,hasRequiredNewArray;function requireNewArray(){if(hasRequiredNewArray)return newArray_1;hasRequiredNewArray=1,newArray_1=r;function r(n,e){n=n||0;for(var i=new Array(n),s=0;s<n;s++)i[s]=e;return i}return newArray_1}var newArrayExports=requireNewArray();const newArray=getDefaultExportFromCjs(newArrayExports);function level(r={}){let{algorithm:n="range",channels:e,min:i=this.min,max:s=this.max}=r;switch(this.checkProcessable("level",{bitDepth:[8,16,32]}),e=validateArrayOfChannels(this,{channels:e}),e.length!==this.channel&&(Array.isArray(i)&&i.length===this.channels&&(i=i.filter((o,u)=>e.includes(u))),Array.isArray(s)&&s.length===this.channels&&(s=s.filter((o,u)=>e.includes(u)))),n){case"range":i<0&&(i=0),s>this.maxValue&&(s=this.maxValue),Array.isArray(i)||(i=newArray(e.length,i)),Array.isArray(s)||(s=newArray(e.length,s)),processImage(this,i,s,e);break;default:throw new Error(`level: algorithm not implement: ${n}`)}return this}function processImage(r,n,e,i){let s=1e-5,o=new Array(i.length);for(let u=0;u<i.length;u++)n[u]===0&&e[u]===r.maxValue||e[u]===n[u]?o[u]=0:o[u]=(r.maxValue+1-s)/(e[u]-n[u]),n[u]+=(.5-s/2)/o[u];for(let u=0;u<i.length;u++){let l=i[u];if(o[u]!==0)for(let d=0;d<r.data.length;d+=r.channels)r.data[d+l]=Math.min(Math.max(0,(r.data[d+l]-n[u])*o[u]+.5|0),r.maxValue)}}var isArrayType,hasRequiredIsArrayType;function requireIsArrayType(){if(hasRequiredIsArrayType)return isArrayType;hasRequiredIsArrayType=1;var r=Object.prototype.toString;return isArrayType=function(e){return r.call(e).substr(-6,5)==="Array"},isArrayType}var isArrayTypeExports=requireIsArrayType();const isArray=getDefaultExportFromCjs(isArrayTypeExports);function checkNumberArray(r){if(isNaN(r)){if(r instanceof Image)return r.data;if(!isArray(r))throw new Error("checkNumberArray: the value should be either a number, array or Image");return r}else{if(r<=0)throw new Error("checkNumberArray: the value must be greater than 0");return r}}function add(r,n={}){let{channels:e}=n;if(this.checkProcessable("add",{bitDepth:[8,16]}),e=validateArrayOfChannels(this,{channels:e}),r=checkNumberArray(r),isNaN(r)){if(this.data.length!==r.length)throw new Error("add: the data size is different");for(let i=0;i<e.length;i++){let s=e[i];for(let o=0;o<this.data.length;o+=this.channels)this.data[o+s]=Math.max(0,Math.min(this.maxValue,this.data[o+s]+r[o+s]>>0))}}else for(let i=0;i<e.length;i++){let s=e[i];for(let o=0;o<this.data.length;o+=this.channels)this.data[o+s]=Math.min(this.maxValue,this.data[o+s]+r>>0)}return this}function subtract(r,n={}){let{channels:e}=n;if(this.checkProcessable("subtract",{bitDepth:[8,16]}),e=validateArrayOfChannels(this,{channels:e}),r=checkNumberArray(r),isNaN(r)){if(this.data.length!==r.length)throw new Error("subtract: the data size is different");for(let i=0;i<e.length;i++){let s=e[i];for(let o=0;o<this.data.length;o+=this.channels)this.data[o+s]=Math.max(0,Math.min(this.maxValue,this.data[o+s]-r[o+s]>>0))}}else for(let i=0;i<e.length;i++){let s=e[i];for(let o=0;o<this.data.length;o+=this.channels)this.data[o+s]=Math.max(0,this.data[o+s]-r>>0)}return this}function subtractImage(r,n={}){let{channels:e,absolute:i=!1}=n;if(this.checkProcessable("subtractImage",{bitDepth:[8,16]}),this.width!==r.width||this.height!==r.height)throw new Error("subtractImage: both images must have the same size");if(this.alpha!==r.alpha||this.bitDepth!==r.bitDepth)throw new Error("subtractImage: both images must have the same alpha and bitDepth");if(this.channels!==r.channels)throw new Error("subtractImage: both images must have the same number of channels");let s=this.clone();e=validateArrayOfChannels(this,{channels:e});for(let o=0;o<e.length;o++){let u=e[o];for(let l=u;l<this.data.length;l+=this.channels){let d=this.data[l]-r.data[l];i?s.data[l]=Math.abs(d):s.data[l]=Math.max(d,0)}}return s}function hypotenuse(r,n={}){let{bitDepth:e=this.bitDepth,channels:i}=n;if(this.checkProcessable("hypotenuse",{bitDepth:[8,16,32]}),this.width!==r.width||this.height!==r.height)throw new Error("hypotenuse: both images must have the same size");if(this.alpha!==r.alpha||this.bitDepth!==r.bitDepth)throw new Error("hypotenuse: both images must have the same alpha and bitDepth");if(this.channels!==r.channels)throw new Error("hypotenuse: both images must have the same number of channels");let s=Image.createFrom(this,{bitDepth:e});i=validateArrayOfChannels(this,{channels:i});let o=s.isClamped;for(let u=0;u<i.length;u++){let l=i[u];for(let d=l;d<this.data.length;d+=this.channels){let m=Math.hypot(this.data[d],r.data[d]);o?s.data[d]=Math.min(Math.max(Math.round(m),0),s.maxValue):s.data[d]=m}}return s}function multiply(r,n={}){let{channels:e}=n;if(this.checkProcessable("multiply",{bitDepth:[8,16]}),r<=0)throw new Error("multiply: the value must be greater than 0");if(e=validateArrayOfChannels(this,{channels:e}),r=checkNumberArray(r),isNaN(r)){if(this.data.length!==r.length)throw new Error("multiply: the data size is different");for(let i=0;i<e.length;i++){let s=e[i];for(let o=0;o<this.data.length;o+=this.channels)this.data[o+s]=Math.max(0,Math.min(this.maxValue,this.data[o+s]*r[o+s]>>0))}}else for(let i=0;i<e.length;i++){let s=e[i];for(let o=0;o<this.data.length;o+=this.channels)this.data[o+s]=Math.min(this.maxValue,this.data[o+s]*r>>0)}return this}function divide(r,n={}){let{channels:e}=n;if(this.checkProcessable("divide",{bitDepth:[8,16]}),e=validateArrayOfChannels(this,{channels:e}),r=checkNumberArray(r),isNaN(r)){if(this.data.length!==r.length)throw new Error("divide: the: the data size is different");for(let i=0;i<e.length;i++){let s=e[i];for(let o=0;o<this.data.length;o+=this.channels)this.data[o+s]=Math.max(0,Math.min(this.maxValue,this.data[o+s]/r[o+s]>>0))}}else for(let i=0;i<e.length;i++){let s=e[i];for(let o=0;o<this.data.length;o+=this.channels)this.data[o+s]=Math.min(this.maxValue,this.data[o+s]/r>>0)}return this}class BaseRegression{constructor(){if(new.target===BaseRegression)throw new Error("BaseRegression must be subclassed")}predict(n){if(typeof n=="number")return this._predict(n);if(isAnyArray(n)){const e=[];for(let i=0;i<n.length;i++)e.push(this._predict(n[i]));return e}else throw new TypeError("x must be a number or array")}_predict(){throw new Error("_predict must be implemented")}train(){}toString(){return""}toLaTeX(){return""}score(n,e){if(!isAnyArray(n)||!isAnyArray(e)||n.length!==e.length)throw new Error("x and y must be arrays of the same length");const i=n.length,s=new Array(i);for(let he=0;he<i;he++)s[he]=this._predict(n[he]);let o=0,u=0,l=0,d=0,m=0,y=0,S=0;for(let he=0;he<i;he++)o+=s[he],u+=e[he],m+=s[he]*s[he],y+=e[he]*e[he],S+=s[he]*e[he],e[he]!==0&&(l+=(e[he]-s[he])*(e[he]-s[he])/e[he]),d+=(e[he]-s[he])*(e[he]-s[he]);const X=(i*S-o*u)/Math.sqrt((i*m-o*o)*(i*y-u*u));return{r:X,r2:X*X,chi2:l,rmsd:Math.sqrt(d/i)}}}function squaredEuclidean(r,n){let e=0;for(let i=0;i<r.length;i++)e+=(r[i]-n[i])*(r[i]-n[i]);return e}function euclidean(r,n){return Math.sqrt(squaredEuclidean(r,n))}const euclidean$1=Object.freeze(Object.defineProperty({__proto__:null,euclidean,squaredEuclidean},Symbol.toStringTag,{value:"Module"})),require$$0$1=getAugmentedNamespace(euclidean$1);var gaussianKernel,hasRequiredGaussianKernel;function requireGaussianKernel(){if(hasRequiredGaussianKernel)return gaussianKernel;hasRequiredGaussianKernel=1;const{squaredEuclidean:r}=require$$0$1,n={sigma:1};class e{constructor(s){s=Object.assign({},n,s),this.sigma=s.sigma,this.divisor=2*s.sigma*s.sigma}compute(s,o){const u=r(s,o);return Math.exp(-u/this.divisor)}}return gaussianKernel=e,gaussianKernel}var polynomialKernel,hasRequiredPolynomialKernel;function requirePolynomialKernel(){if(hasRequiredPolynomialKernel)return polynomialKernel;hasRequiredPolynomialKernel=1;const r={degree:1,constant:1,scale:1};class n{constructor(i){i=Object.assign({},r,i),this.degree=i.degree,this.constant=i.constant,this.scale=i.scale}compute(i,s){for(var o=0,u=0;u<i.length;u++)o+=i[u]*s[u];return Math.pow(this.scale*o+this.constant,this.degree)}}return polynomialKernel=n,polynomialKernel}var sigmoidKernel,hasRequiredSigmoidKernel;function requireSigmoidKernel(){if(hasRequiredSigmoidKernel)return sigmoidKernel;hasRequiredSigmoidKernel=1;const r={alpha:.01,constant:-Math.E};class n{constructor(i){i=Object.assign({},r,i),this.alpha=i.alpha,this.constant=i.constant}compute(i,s){for(var o=0,u=0;u<i.length;u++)o+=i[u]*s[u];return Math.tanh(this.alpha*o+this.constant)}}return sigmoidKernel=n,sigmoidKernel}var anovaKernel,hasRequiredAnovaKernel;function requireAnovaKernel(){if(hasRequiredAnovaKernel)return anovaKernel;hasRequiredAnovaKernel=1;const r={sigma:1,degree:1};class n{constructor(i){i=Object.assign({},r,i),this.sigma=i.sigma,this.degree=i.degree}compute(i,s){for(var o=0,u=Math.min(i.length,s.length),l=1;l<=u;++l)o+=Math.pow(Math.exp(-this.sigma*Math.pow(Math.pow(i[l-1],l)-Math.pow(s[l-1],l),2)),this.degree);return o}}return anovaKernel=n,anovaKernel}var cauchyKernel,hasRequiredCauchyKernel;function requireCauchyKernel(){if(hasRequiredCauchyKernel)return cauchyKernel;hasRequiredCauchyKernel=1;const{squaredEuclidean:r}=require$$0$1,n={sigma:1};class e{constructor(s){s=Object.assign({},n,s),this.sigma=s.sigma}compute(s,o){return 1/(1+r(s,o)/(this.sigma*this.sigma))}}return cauchyKernel=e,cauchyKernel}var exponentialKernel,hasRequiredExponentialKernel;function requireExponentialKernel(){if(hasRequiredExponentialKernel)return exponentialKernel;hasRequiredExponentialKernel=1;const{euclidean:r}=require$$0$1,n={sigma:1};class e{constructor(s){s=Object.assign({},n,s),this.sigma=s.sigma,this.divisor=2*s.sigma*s.sigma}compute(s,o){const u=r(s,o);return Math.exp(-u/this.divisor)}}return exponentialKernel=e,exponentialKernel}var histogramIntersectionKernel,hasRequiredHistogramIntersectionKernel;function requireHistogramIntersectionKernel(){if(hasRequiredHistogramIntersectionKernel)return histogramIntersectionKernel;hasRequiredHistogramIntersectionKernel=1;class r{compute(e,i){for(var s=Math.min(e.length,i.length),o=0,u=0;u<s;++u)o+=Math.min(e[u],i[u]);return o}}return histogramIntersectionKernel=r,histogramIntersectionKernel}var laplacianKernel,hasRequiredLaplacianKernel;function requireLaplacianKernel(){if(hasRequiredLaplacianKernel)return laplacianKernel;hasRequiredLaplacianKernel=1;const{euclidean:r}=require$$0$1,n={sigma:1};class e{constructor(s){s=Object.assign({},n,s),this.sigma=s.sigma}compute(s,o){const u=r(s,o);return Math.exp(-u/this.sigma)}}return laplacianKernel=e,laplacianKernel}var multiquadraticKernel,hasRequiredMultiquadraticKernel;function requireMultiquadraticKernel(){if(hasRequiredMultiquadraticKernel)return multiquadraticKernel;hasRequiredMultiquadraticKernel=1;const{squaredEuclidean:r}=require$$0$1,n={constant:1};class e{constructor(s){s=Object.assign({},n,s),this.constant=s.constant}compute(s,o){return Math.sqrt(r(s,o)+this.constant*this.constant)}}return multiquadraticKernel=e,multiquadraticKernel}var rationalQuadraticKernel,hasRequiredRationalQuadraticKernel;function requireRationalQuadraticKernel(){if(hasRequiredRationalQuadraticKernel)return rationalQuadraticKernel;hasRequiredRationalQuadraticKernel=1;const{squaredEuclidean:r}=require$$0$1,n={constant:1};class e{constructor(s){s=Object.assign({},n,s),this.constant=s.constant}compute(s,o){const u=r(s,o);return 1-u/(u+this.constant)}}return rationalQuadraticKernel=e,rationalQuadraticKernel}var kernel,hasRequiredKernel;function requireKernel(){if(hasRequiredKernel)return kernel;hasRequiredKernel=1;const{Matrix:r,MatrixTransposeView:n}=requireMatrix(),e=requireGaussianKernel(),i=requirePolynomialKernel(),s=requireSigmoidKernel(),o=requireAnovaKernel(),u=requireCauchyKernel(),l=requireExponentialKernel(),d=requireHistogramIntersectionKernel(),m=requireLaplacianKernel(),y=requireMultiquadraticKernel(),S=requireRationalQuadraticKernel(),X={gaussian:e,rbf:e,polynomial:i,poly:i,anova:o,cauchy:u,exponential:l,histogram:d,min:d,laplacian:m,multiquadratic:y,rational:S,sigmoid:s,mlp:s};class he{constructor(Ee,xe){if(this.kernelType=Ee,Ee!=="linear")if(typeof Ee=="string"){Ee=Ee.toLowerCase();var be=X[Ee];if(be)this.kernelFunction=new be(xe);else throw new Error(`unsupported kernel type: ${Ee}`)}else if(typeof Ee=="object"&&typeof Ee.compute=="function")this.kernelFunction=Ee;else throw new TypeError("first argument must be a valid kernel type or instance")}compute(Ee,xe){if(Ee=r.checkMatrix(Ee),xe===void 0?xe=Ee:xe=r.checkMatrix(xe),this.kernelType==="linear")return Ee.mmul(new n(xe));const be=new r(Ee.rows,xe.rows);if(Ee===xe)for(let we=0;we<Ee.rows;we++)for(let ve=we;ve<Ee.rows;ve++){const ke=this.kernelFunction.compute(Ee.getRow(we),Ee.getRow(ve));be.set(we,ve,ke),be.set(ve,we,ke)}else for(let we=0;we<Ee.rows;we++)for(let ve=0;ve<xe.rows;ve++)be.set(we,ve,this.kernelFunction.compute(Ee.getRow(we),xe.getRow(ve)));return be}}return kernel=he,kernel}var kernelExports=requireKernel();const Kernel=getDefaultExportFromCjs(kernelExports),defaultOptions$3={lambda:.1,kernelType:"gaussian",kernelOptions:{},computeCoefficient:!1};class KernelRidgeRegression extends BaseRegression{constructor(n,e,i){if(super(),n===!0)this.alpha=e.alpha,this.inputs=e.inputs,this.kernelType=e.kernelType,this.kernelOptions=e.kernelOptions,this.kernel=new Kernel(e.kernelType,e.kernelOptions);else{n=Matrix$1.checkMatrix(n),i=Object.assign({},defaultOptions$3,i);const s=new Kernel(i.kernelType,i.kernelOptions),o=s.compute(n),u=n.rows;o.add(Matrix$1.eye(u,u).mul(i.lambda)),this.alpha=solve(o,e),this.inputs=n,this.kernelType=i.kernelType,this.kernelOptions=i.kernelOptions,this.kernel=s}}_predict(n){return this.kernel.compute([n],this.inputs).mmul(this.alpha).getRow(0)}toJSON(){return{name:"kernelRidgeRegression",alpha:this.alpha,inputs:this.inputs,kernelType:this.kernelType,kernelOptions:this.kernelOptions}}static load(n){if(n.name!=="kernelRidgeRegression")throw new TypeError("not a KRR model");return new KernelRidgeRegression(!0,n)}}function background$1(r,n,e){const i=new KernelRidgeRegression(r,n,e),s=new Array(this.size);for(let l=0;l<this.width;l++)for(let d=0;d<this.height;d++)s[d*this.width+l]=[l,d];const o=i.predict(s),u=Image.createFrom(this);for(let l=0;l<this.size;l++)u.data[l]=Math.min(this.maxValue,Math.max(0,o[l][0]));return u}function dilate(r={}){let{kernel:n=[[1,1,1],[1,1,1],[1,1,1]],iterations:e=1}=r;if(this.checkProcessable("dilate",{bitDepth:[1,8,16],components:1,alpha:0}),n.columns%2===0||n.rows%2===0)throw new TypeError("dilate: The number of rows and columns of the kernel must be odd");let i=!0;e:for(const o of n)for(const u of o)if(u!==1){i=!1;break e}let s=this;for(let o=0;o<e;o++)if(this.bitDepth===1)if(i){const u=s.clone();s=dilateOnceBinaryOnlyOnes(s,u,n.length,n[0].length)}else{const u=Image.createFrom(s);s=dilateOnceBinary(s,u,n)}else if(i){const u=Image.createFrom(s);s=dilateOnceGreyOnlyOnes(s,u,n.length,n[0].length)}else{const u=Image.createFrom(s);s=dilateOnceGrey(s,u,n)}return s}function dilateOnceGrey(r,n,e){const i=e.length,s=e[0].length;let o=(i-1)/2,u=(s-1)/2;for(let l=0;l<r.height;l++)for(let d=0;d<r.width;d++){let m=0;for(let y=0;y<s;y++)for(let S=0;S<i;S++){if(e[S][y]!==1)continue;let X=S-o+d,he=y-u+l;if(X<0||he<0||X>=r.width||he>=r.height)continue;const Ce=r.getValueXY(X,he,0);Ce>m&&(m=Ce)}n.setValueXY(d,l,0,m)}return n}function dilateOnceGreyOnlyOnes(r,n,e,i){const s=(e-1)/2,o=(i-1)/2,u=[];for(let l=0;l<r.width;l++)u.push(0);for(let l=0;l<r.height;l++){for(let d=0;d<r.width;d++){let m=0;for(let y=Math.max(0,l-o);y<Math.min(r.height,l+o+1);y++){const S=r.getValueXY(d,y,0);S>m&&(m=S)}u[d]=m}for(let d=0;d<r.width;d++){let m=0;for(let y=Math.max(0,d-s);y<Math.min(r.width,d+s+1);y++)u[y]>m&&(m=u[y]);n.setValueXY(d,l,0,m)}}return n}function dilateOnceBinary(r,n,e){const i=e.length,s=e[0].length;let o=(i-1)/2,u=(s-1)/2;for(let l=0;l<r.height;l++)for(let d=0;d<r.width;d++){let m=0;e:for(let y=0;y<s;y++)for(let S=0;S<i;S++){if(e[S][y]!==1)continue;let X=S-o+d,he=y-u+l;if(he<0||X<0||X>=r.width||he>=r.height)continue;if(r.getBitXY(X,he)===1){m=1;break e}}m===1&&n.setBitXY(d,l)}return n}function dilateOnceBinaryOnlyOnes(r,n,e,i){const s=(e-1)/2,o=(i-1)/2,u=[];for(let l=0;l<r.width;l++)u.push(1);for(let l=0;l<r.height;l++){for(let d=0;d<r.width;d++){u[d]=0;for(let m=Math.max(0,l-o);m<Math.min(r.height,l+o+1);m++)if(r.getBitXY(d,m)===1){u[d]=1;break}}for(let d=0;d<r.width;d++)if(n.getBitXY(d,l)!==1){for(let m=Math.max(0,d-s);m<Math.min(r.width,d+s+1);m++)if(u[m]===1){n.setBitXY(d,l);break}}}return n}function erode(r={}){let{kernel:n=[[1,1,1],[1,1,1],[1,1,1]],iterations:e=1}=r;if(this.checkProcessable("erode",{bitDepth:[1,8,16],components:1,alpha:0}),n.columns%2===0||n.rows%2===0)throw new TypeError("erode: The number of rows and columns of the kernel must be odd");let i=!0;e:for(const o of n)for(const u of o)if(u!==1){i=!1;break e}let s=this;for(let o=0;o<e;o++)if(this.bitDepth===1)if(i){const u=s.clone();s=erodeOnceBinaryOnlyOnes(s,u,n.length,n[0].length)}else{const u=Image.createFrom(s);s=erodeOnceBinary(s,u,n)}else if(i){const u=Image.createFrom(s);s=erodeOnceGreyOnlyOnes(s,u,n.length,n[0].length)}else{const u=Image.createFrom(s);s=erodeOnceGrey(s,u,n)}return s}function erodeOnceGrey(r,n,e){const i=e.length,s=e[0].length;let o=(i-1)/2,u=(s-1)/2;for(let l=0;l<r.height;l++)for(let d=0;d<r.width;d++){let m=r.maxValue;for(let y=0;y<s;y++)for(let S=0;S<i;S++){if(e[S][y]!==1)continue;let X=S-o+d,he=y-u+l;if(X<0||he<0||X>=r.width||he>=r.height)continue;const Ce=r.getValueXY(X,he,0);Ce<m&&(m=Ce)}n.setValueXY(d,l,0,m)}return n}function erodeOnceGreyOnlyOnes(r,n,e,i){const s=(e-1)/2,o=(i-1)/2,u=[];for(let l=0;l<r.width;l++)u.push(0);for(let l=0;l<r.height;l++){for(let d=0;d<r.width;d++){let m=r.maxValue;for(let y=Math.max(0,l-o);y<Math.min(r.height,l+o+1);y++){const S=r.getValueXY(d,y,0);S<m&&(m=S)}u[d]=m}for(let d=0;d<r.width;d++){let m=r.maxValue;for(let y=Math.max(0,d-s);y<Math.min(r.width,d+s+1);y++)u[y]<m&&(m=u[y]);n.setValueXY(d,l,0,m)}}return n}function erodeOnceBinary(r,n,e){const i=e.length,s=e[0].length;let o=(i-1)/2,u=(s-1)/2;for(let l=0;l<r.height;l++)for(let d=0;d<r.width;d++){let m=1;e:for(let y=0;y<s;y++)for(let S=0;S<i;S++){if(e[S][y]!==1)continue;let X=S-o+d,he=y-u+l;if(he<0||X<0||X>=r.width||he>=r.height)continue;if(r.getBitXY(X,he)===0){m=0;break e}}m===1&&n.setBitXY(d,l)}return n}function erodeOnceBinaryOnlyOnes(r,n,e,i){const s=(e-1)/2,o=(i-1)/2,u=[];for(let l=0;l<r.width;l++)u.push(0);for(let l=0;l<r.height;l++){for(let d=0;d<r.width;d++){u[d]=1;for(let m=Math.max(0,l-o);m<Math.min(r.height,l+o+1);m++)if(r.getBitXY(d,m)===0){u[d]=0;break}}for(let d=0;d<r.width;d++)if(n.getBitXY(d,l)!==0){for(let m=Math.max(0,d-s);m<Math.min(r.width,d+s+1);m++)if(u[m]===0){n.clearBitXY(d,l);break}}}return n}function open(r={}){let{kernel:n=[[1,1,1],[1,1,1],[1,1,1]],iterations:e=1}=r;if(this.checkProcessable("open",{bitDepth:[8,16],components:1,alpha:0}),n.columns%2===0||n.rows%2===0)throw new TypeError("open: The number of rows and columns of the kernel must be odd");let i=this;for(let s=0;s<e;s++)i=i.erode({kernel:n}),i=i.dilate({kernel:n});return i}function close(r={}){let{kernel:n=[[1,1,1],[1,1,1],[1,1,1]],iterations:e=1}=r;if(this.checkProcessable("close",{bitDepth:[1,8,16],components:1,alpha:0}),n.columns%2===0||n.rows%2===0)throw new TypeError("close: The number of rows and columns of the kernel must be odd");let i=this;for(let s=0;s<e;s++)i=i.dilate({kernel:n}).erode({kernel:n});return i}function topHat(r={}){let{kernel:n=[[1,1,1],[1,1,1],[1,1,1]],iterations:e=1}=r;if(this.checkProcessable("topHat",{bitDepth:[8,16],components:1,alpha:0}),n.length%2===0||n[0].length%2===0)throw new TypeError("topHat: The number of rows and columns of the kernel must be odd");let i=this;for(let s=0;s<e;s++)i=i.open({kernel:n}).subtractImage(i,{absolute:!0});return i}function blackHat(r={}){let{kernel:n=[[1,1,1],[1,1,1],[1,1,1]],iterations:e=1}=r;if(this.checkProcessable("blackHat",{bitDepth:[8,16],components:1,alpha:0}),n.columns%2===0||n.rows%2===0)throw new TypeError("blackHat: The number of rows and columns of the kernel must be odd");let i=this;for(let s=0;s<e;s++)i=i.close({kernel:n}).subtractImage(i,{absolute:!0});return i}function morphologicalGradient(r={}){let{kernel:n=[[1,1,1],[1,1,1],[1,1,1]],iterations:e=1}=r;if(this.checkProcessable("morphologicalGradient",{bitDepth:[8,16],components:1,alpha:0}),n.columns%2===0||n.rows%2===0)throw new TypeError("morphologicalGradient: The number of rows and columns of the kernel must be odd");let i=this;for(let s=0;s<e;s++){let o=i.dilate({kernel:n}),u=i.erode({kernel:n});i=o.subtractImage(u,{absolute:!0})}return i}function order4Points(r){let n=0,e=0,i=0,s=0,o=r[0][0],u=0;for(let m=1;m<r.length;m++)r[m][0]<o&&(o=r[m][0],u=m);let l=r[(u+1)%r.length][0],d=(u+1)%r.length;for(let m=1;m<r.length;m++)r[m][0]<l&&m!==u&&(l=r[m][0],d=m);return r[d][1]<r[u][1]?(n=r[d],s=r[u],u!==(d+1)%4?(e=r[(d+1)%4],i=r[(d+2)%4]):(e=r[(d+2)%4],i=r[(d+3)%4])):(s=r[d],n=r[u],d!==(u+1)%4?(e=r[(u+1)%4],i=r[(u+2)%4]):(e=r[(u+2)%4],i=r[(u+3)%4])),[n,e,i,s]}function distance2Points(r,n){return Math.sqrt(Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2))}function crossVect(r,n){return[r[1]*n[2]-r[2]*n[1],r[2]*n[0]-r[0]*n[2],r[0]*n[1]-r[1]*n[0]]}function dotVect(r,n){return r[0]*n[0]+r[1]*n[1]+r[2]*n[2]}function computeWidthAndHeigth(r,n,e,i,s,o){let u=Math.max(distance2Points(r,n),distance2Points(i,e)),l=Math.max(distance2Points(r,i),distance2Points(n,e)),d=0,m=0,y=Math.ceil(s/2),S=Math.ceil(o/2),X=u/l,he=[r[0],r[1],1],Ce=[n[0],n[1],1],Ee=[i[0],i[1],1],xe=[e[0],e[1],1],be=dotVect(crossVect(he,xe),Ee)/dotVect(crossVect(Ce,xe),Ee),we=dotVect(crossVect(he,xe),Ce)/dotVect(crossVect(Ee,xe),Ce),ve=[be*Ce[0]-he[0],be*Ce[1]-he[1],be*Ce[2]-he[2]],ke=[we*Ee[0]-he[0],we*Ee[1]-he[1],we*Ee[2]-he[2]],De=ve[0],Oe=ve[1],Le=ve[2],Ae=ke[0],Ie=ke[1],Ue=ke[2],ze=1/(Le*Ue)*(De*Ae-(De*Ue+Le*Ae)*y+Le*Ue*y*y+(Oe*Ie-(Oe*Ue+Le*Ie)*S+Le*Ue*S*S));ze>=0?ze=Math.sqrt(ze):ze=Math.sqrt(-ze);let Ye=new Matrix$1([[ze,0,y],[0,ze,S],[0,0,1]]),Xe=Ye.transpose(),tt=inverse(Xe),lt=inverse(Ye),_t=Matrix$1.rowVector(ve),bt=Matrix$1.rowVector(ke),rt=Math.sqrt(dotVect(_t.mmul(tt).mmul(lt).to1DArray(),ve)/dotVect(bt.mmul(tt).mmul(lt).to1DArray(),ke));return rt===0||X===0?(d=Math.ceil(u),m=Math.ceil(l)):rt<X?(d=Math.ceil(u),m=Math.ceil(d/rt)):(m=Math.ceil(l),d=Math.ceil(rt*m)),[d,m]}function projectionPoint(r,n,e,i,s,o,u,l,d,m,y,S){let[X,he]=[(e*r+i*n+s)/(d*r+m*n+1),(o*r+u*n+l)/(d*r+m*n+1)];return y.getValueXY(Math.floor(X),Math.floor(he),S)}function warpingFourPoints(r,n={}){let{calculateRatio:e=!0}=n;if(r.length!==4)throw new Error(`The array pts must have four elements, which are the four corners. Currently, pts have ${r.length} elements`);let[i,s,o,u]=r,l=[i,s,o,u],[d,m,y,S]=order4Points(l),X,he;e?[X,he]=computeWidthAndHeigth(d,m,y,S,this.width,this.height):(X=Math.ceil(Math.max(distance2Points(d,m),distance2Points(S,y))),he=Math.ceil(Math.max(distance2Points(d,S),distance2Points(m,y))));let Ce=Image.createFrom(this,{width:X,height:he}),[Ee,xe]=d,[be,we]=m,[ve,ke]=y,[De,Oe]=S,[Le,Ae]=[0,0],[Ie,Ue]=[0,X-1],[ze,Ye]=[he-1,X-1],[Xe,tt]=[he-1,0],lt=new Matrix$1([[Le,Ae,1,0,0,0,-Le*Ee,-Ae*Ee],[Ie,Ue,1,0,0,0,-Ie*be,-Ue*be],[ze,Ye,1,0,0,0,-ze*ve,-Ae*ve],[Xe,tt,1,0,0,0,-Xe*De,-tt*De],[0,0,0,Le,Ae,1,-Le*xe,-Ae*xe],[0,0,0,Ie,Ue,1,-Ie*we,-Ue*we],[0,0,0,ze,Ye,1,-ze*ke,-Ye*ke],[0,0,0,Xe,tt,1,-Xe*Oe,-tt*Oe]]),_t=Matrix$1.columnVector([Ee,be,ve,De,xe,we,ke,Oe]),rt=new SingularValueDecomposition(lt).solve(_t),[He,We,qe,Ke,st,ut,nt,vt]=rt.to1DArray(),it=new Matrix$1(he,X);for(let Ve=0;Ve<this.channels;Ve++){for(let ht=0;ht<he;ht++)for(let ct=0;ct<X;ct++)it.set(ht,ct,projectionPoint(ht,ct,He,We,qe,Ke,st,ut,nt,vt,this,Ve));Ce.setMatrix(it,{channel:Ve})}return Ce}function crop(r={}){let{x:n=0,y:e=0,width:i=this.width-n,height:s=this.height-e}=r;if(this.checkProcessable("crop",{bitDepth:[1,8,16]}),n=Math.round(n),e=Math.round(e),i=Math.round(i),s=Math.round(s),n>this.width-1||e>this.height-1)throw new RangeError(`crop: origin (x:${n}, y:${e}) out of range (${this.width-1}; ${this.height-1})`);if(i<=0||s<=0)throw new RangeError(`crop: width and height (width:${i}; height:${s}) must be positive numbers`);if(n<0||e<0)throw new RangeError(`crop: x and y (x:${n}, y:${e}) must be positive numbers`);if(i>this.width-n||s>this.height-e)throw new RangeError(`crop: (x: ${n}, y:${e}, width:${i}, height:${s}) size is out of range`);let o=this;if(this.bitDepth===1){const u=new Image(i,s,{kind:"BINARY",parent:this});o=cropBinary(this,u,n,e,i,s)}else{const u=Image.createFrom(this,{width:i,height:s,position:[n,e]});o=cropDefault(this,u,n,e,i,s)}return o}function cropDefault(r,n,e,i,s,o){let u=s*r.channels,l=i+o,d=0,m=e*r.channels;for(let y=i;y<l;y++){let S=y*r.width*r.channels+m,X=S+u;for(;S<X;S++)n.data[d++]=r.data[S]}return n}function cropBinary(r,n,e,i,s,o){let u=s*r.channels,l=i+o,d=0,m=e*r.channels;for(let y=i;y<l;y++){let S=y*r.width*r.channels+m,X=S+u;for(;S<X;S++)r.getBit(S)&&n.setBit(d),++d}return n}function cropAlpha(r={}){this.checkProcessable("cropAlpha",{alpha:1});const{threshold:n=this.maxValue}=r;let e=findLeft(this,n,this.components);if(e===-1)throw new Error("Could not find new dimensions. Threshold may be too high.");let i=findTop(this,n,this.components,e),s=findBottom(this,n,this.components,e),o=findRight(this,n,this.components,e,i,s);return this.crop({x:e,y:i,width:o-e+1,height:s-i+1})}function findLeft(r,n,e){for(let i=0;i<r.width;i++)for(let s=0;s<r.height;s++)if(r.getValueXY(i,s,e)>=n)return i;return-1}function findTop(r,n,e,i){for(let s=0;s<r.height;s++)for(let o=i;o<r.width;o++)if(r.getValueXY(o,s,e)>=n)return s;return-1}function findBottom(r,n,e,i){for(let s=r.height-1;s>=0;s--)for(let o=i;o<r.width;o++)if(r.getValueXY(o,s,e)>=n)return s;return-1}function findRight(r,n,e,i,s,o){for(let u=r.width-1;u>=i;u--)for(let l=s;l<=o;l++)if(r.getValueXY(u,l,e)>=n)return u;return-1}function getFactor(r){if(typeof r=="string"){const n=r[r.length-1];r=parseFloat(r),n==="%"&&(r/=100)}return r}function getThreshold$1(r,n){if(!n)throw Error("getThreshold : the maxValue should be specified");if(typeof r=="string"){if(r[r.length-1]!=="%")throw Error("getThreshold : if the value is a string it must finish by %");return parseFloat(r)/100*n}else{if(typeof r=="number")return r<1?r*n:r;throw Error("getThreshold : the value is not valid")}}function factorDimensions(r,n,e){r=getFactor(r);let i=Math.round(r*n),s=Math.round(r*e);return i<=0&&(i=1),s<=0&&(s=1),{width:i,height:s}}function checkRow(r,n){if(n<0||n>=r.height)throw new RangeError(`row must be included between 0 and ${r.height-1}. Current value: ${n}`)}function checkColumn(r,n){if(n<0||n>=r.width)throw new RangeError(`column must be included between 0 and ${r.width-1}. Current value: ${n}`)}function checkChannel(r,n){if(n<0||n>=r.channels)throw new RangeError(`channel must be included between 0 and ${r.channels-1}. Current value: ${n}`)}const validInterpolations={nearestneighbor:"nearestNeighbor",nearestneighbour:"nearestNeighbor",bilinear:"bilinear"};function checkInterpolation(r){if(typeof r!="string")throw new TypeError("interpolation must be a string");if(r=r.toLowerCase(),!validInterpolations[r])throw new RangeError(`invalid interpolation algorithm: ${r}`);return validInterpolations[r]}function nearestNeighbor(r,n,e){const i=this.width/n,s=this.height/e;if(this.bitDepth>1)for(let o=0;o<n;o++){const u=Math.floor((o+.5)*i);for(let l=0;l<e;l++){const d=Math.floor((l+.5)*s);for(let m=0;m<this.channels;m++)r.setValueXY(o,l,m,this.getValueXY(u,d,m))}}else for(let o=0;o<n;o++){const u=Math.floor((o+.5)*i);for(let l=0;l<e;l++){const d=Math.floor((l+.5)*s);this.getBitXY(u,d)&&r.setBitXY(o,l)}}}function resize(r={}){const{factor:n=1,interpolation:e=validInterpolations.nearestneighbor,preserveAspectRatio:i=!0}=r,s=checkInterpolation(e);let o=r.width,u=r.height;if(o||(u&&i?o=Math.round(u*(this.width/this.height)):o=this.width),u||(i?u=Math.round(o*(this.height/this.width)):u=this.height),{width:o,height:u}=factorDimensions(n,o,u),o===this.width&&u===this.height){const y=this.clone();return y.position=[0,0],y}let l=Math.round((this.width-o)/2),d=Math.round((this.height-u)/2);const m=Image.createFrom(this,{width:o,height:u,position:[l,d]});switch(s){case validInterpolations.nearestneighbor:nearestNeighbor.call(this,m,o,u);break;default:throw new Error(`unsupported resize interpolation: ${s}`)}return m}function hsv(){this.checkProcessable("hsv",{bitDepth:[8,16],alpha:[0,1],colorModel:[RGB$1]});let r=Image.createFrom(this,{colorModel:HSV}),n=0,e=this.data;for(let i=0;i<e.length;i+=this.channels){let s=e[i],o=e[i+1],u=e[i+2],l=Math.min(s,o,u),d=Math.max(s,o,u),m=d-l,y=0,S=d===0?0:m/d,X=d;if(d!==l){switch(d){case s:y=(o-u)/m+(o<u?6:0);break;case o:y=(u-s)/m+2;break;case u:y=(s-o)/m+4;break;default:throw new Error("unreachable")}y/=6}r.data[n++]=y*this.maxValue,r.data[n++]=S*this.maxValue,r.data[n++]=X,this.alpha&&(r.data[n++]=e[i+3])}return r}function hsl$1(){this.checkProcessable("hsl",{bitDepth:[8,16],alpha:[0,1],colorModel:[RGB$1]});let r=Image.createFrom(this,{colorModel:HSL}),n=Math.floor(this.maxValue/2),e=0,i=this.data;for(let s=0;s<i.length;s+=this.channels){let o=i[s],u=i[s+1],l=i[s+2],d=Math.max(o,u,l),m=Math.min(o,u,l),y=0,S=0,X=(d+m)/2;if(d!==m){let he=d-m;switch(S=X>n?he/(2-d-m):he/(d+m),d){case o:y=(u-l)/he+(u<l?6:0);break;case u:y=(l-o)/he+2;break;case l:y=(o-u)/he+4;break;default:throw new Error("unreachable")}y/=6}r.data[e++]=y*this.maxValue,r.data[e++]=S*this.maxValue,r.data[e++]=X,this.alpha&&(r.data[e++]=i[s+3])}return r}function cmyk(){this.checkProcessable("cmyk",{bitDepth:[8,16],alpha:[0,1],colorModel:[RGB$1]});let r=Image.createFrom(this,{components:4,colorModel:CMYK$1}),n=0,e=this.data;for(let i=0;i<e.length;i+=this.channels){let s=e[i],o=e[i+1],u=e[i+2],l=Math.min(this.maxValue-s,this.maxValue-o,this.maxValue-u),d=(this.maxValue-s-l)/(1-l/this.maxValue),m=(this.maxValue-o-l)/(1-l/this.maxValue),y=(this.maxValue-u-l)/(1-l/this.maxValue);r.data[n++]=Math.round(d),r.data[n++]=Math.round(m),r.data[n++]=Math.round(y),r.data[n++]=Math.round(l),this.alpha&&(r.data[n++]=e[i+3])}return r}function rgba8(){return new Image(this.width,this.height,this.getRGBAData(),{kind:"RGBA",parent:this})}const methods$1={luma709(r,n,e){return r*6966+n*23436+e*2366>>15},luma601(r,n,e){return r*9798+n*19235+e*3735>>15},maximum(r,n,e){return Math.max(r,n,e)},minimum(r,n,e){return Math.min(r,n,e)},average(r,n,e){return(r+n+e)/3>>0},minmax(r,n,e){return(Math.max(r,n,e)+Math.min(r,n,e))/2},red(r){return r},green(r,n){return n},blue(r,n,e){return e},cyan(r,n,e,i){let s=methods$1.black(r,n,e,i);return(i.maxValue-r-s)/(1-s/i.maxValue)>>0},magenta(r,n,e,i){let s=methods$1.black(r,n,e,i);return(i.maxValue-n-s)/(1-s/i.maxValue)>>0},yellow(r,n,e,i){let s=methods$1.black(r,n,e,i);return(i.maxValue-e-s)/(1-s/i.maxValue)>>0},black(r,n,e,i){return Math.min(i.maxValue-r,i.maxValue-n,i.maxValue-e)},hue(r,n,e,i){let s=methods$1.min(r,n,e),o=methods$1.max(r,n,e);if(o===s)return 0;let u=0,l=o-s;switch(o){case r:u=(n-e)/l+(n<e?6:0);break;case n:u=(e-r)/l+2;break;case e:u=(r-n)/l+4;break;default:throw new Error("unreachable")}return u/6*i.maxValue>>0},saturation(r,n,e,i){let s=methods$1.min(r,n,e),o=methods$1.max(r,n,e),u=o-s;return o===0?0:u/o*i.maxValue},lightness(r,n,e){let i=methods$1.min(r,n,e);return(methods$1.max(r,n,e)+i)/2}};Object.defineProperty(methods$1,"luminosity",{enumerable:!1,value:methods$1.lightness});Object.defineProperty(methods$1,"luminance",{enumerable:!1,value:methods$1.lightness});Object.defineProperty(methods$1,"min",{enumerable:!1,value:methods$1.minimum});Object.defineProperty(methods$1,"max",{enumerable:!1,value:methods$1.maximum});Object.defineProperty(methods$1,"brightness",{enumerable:!1,value:methods$1.maximum});Object.keys(methods$1).forEach(r=>{});function grey(r={}){let{algorithm:n="luma709",keepAlpha:e=!1,mergeAlpha:i=!0}=r;if(typeof n!="string"&&typeof n!="function")throw new TypeError("algorithm must be a string or a function");this.checkProcessable("grey",{bitDepth:[8,16],alpha:[0,1]}),this.components===1&&(n="red"),e&=this.alpha,i&=this.alpha,e&&(i=!1);let s=getOutputImage(this,r,{components:1,alpha:e,colorModel:GREY$1}),o;if(typeof n=="function")o=n;else if(o=methods$1[n.toLowerCase()],!o)throw new Error(`unsupported grey algorithm: ${n}`);let u=0;for(let l=0;l<this.data.length;l+=this.channels)i?s.data[u++]=clamp(o(this.data[l],this.data[l+1],this.data[l+2],this)*this.data[l+this.components]/this.maxValue,this):(s.data[u++]=clamp(o(this.data[l],this.data[l+1],this.data[l+2],this),this),s.alpha&&(s.data[u++]=this.data[l+this.components]));return s}function huang(r){let n=0;for(let y=0;y<r.length;y++)if(r[y]!==0){n=y;break}let e=r.length-1;for(let y=r.length-1;y>=n;y--)if(r[y]!==0){e=y;break}let i=1/(e-n),s=new Array(r.length),o=0,u=0;for(let y=n;y<r.length;y++)o+=y*r[y],u+=r[y],s[y]=o/u;let l=new Array(r.length);o=u=0;for(let y=e;y>0;y--)o+=y*r[y],u+=r[y],l[y-1]=o/u;let d=-1,m=Number.MAX_VALUE;for(let y=0;y<r.length;y++){let S=0,X;for(let he=0;he<=y;he++)X=1/(1+i*Math.abs(he-s[y])),X<1e-6||X>.999999||(S+=r[he]*(-X*Math.log(X)-(1-X)*Math.log(1-X)));for(let he=y+1;he<r.length;he++)X=1/(1+i*Math.abs(he-l[y])),X<1e-6||X>.999999||(S+=r[he]*(-X*Math.log(X)-(1-X)*Math.log(1-X)));S<m&&(m=S,d=y)}return d}function intermodes(r){let n=r.slice(),e=0;for(;!bimodalTest$1(n);){let s=0,o=0,u=n[0];for(let l=0;l<r.length-1;l++)s=o,o=u,u=n[l+1],n[l]=(s+o+u)/3;if(n[r.length-1]=(o+u)/3,e++,e>1e4)throw new Error("Intermodes Threshold not found after 10000 iterations")}let i=0;for(let s=1;s<r.length-1;s++)n[s-1]<n[s]&&n[s+1]<n[s]&&(i+=s);return Math.floor(i/2)}function bimodalTest$1(r){let n=!1,e=0;for(let i=1;i<r.length-1;i++)if(r[i-1]<r[i]&&r[i+1]<r[i]&&(e++,e>2))return!1;return e===2&&(n=!0),n}function isodata(r){let n,e,i,s,o=0;for(let u=1;u<r.length;u++)if(r[u]>0){o=u+1;break}for(;;){n=0,i=0;for(let u=0;u<o;u++)i=i+r[u],n=n+r[u]*u;s=0,e=0;for(let u=o+1;u<r.length;u++)e+=r[u],s+=r[u]*u;if(i>0&&e>0&&(n/=i,s/=e,o===Math.round((n+s)/2)))break;if(o++,o>r.length-2)throw new Error("Threshold not found")}return o}function li(r,n){let e,i,s,o,u,l,d,m,y,S,X,he;X=.5,S=0;for(let Ce=0;Ce<r.length;Ce++)S+=Ce*r[Ce];S/=n,d=S;do{l=d,e=l+.5|0,i=0,o=0;for(let Ce=0;Ce<=e;Ce++)i+=Ce*r[Ce],o+=r[Ce];m=o===0?0:i/o,s=0,u=0;for(let Ce=e+1;Ce<r.length;Ce++)s+=Ce*r[Ce],u+=r[Ce];y=u===0?0:s/u,he=(m-y)/(Math.log(m)-Math.log(y)),he<-Number.EPSILON?d=he-.5|0:d=he+.5|0}while(Math.abs(d-l)>X);return e}function maxEntropy(r,n){let e=new Array(r.length);for(let X=0;X<r.length;X++)e[X]=r[X]/n;let i=new Array(r.length),s=new Array(r.length);i[0]=e[0],s[0]=1-i[0];for(let X=1;X<r.length;X++)i[X]=i[X-1]+e[X],s[X]=1-i[X];let o=0;for(let X=0;X<r.length;X++)if(Math.abs(i[X])>=Number.EPSILON){o=X;break}let u=r.length-1;for(let X=r.length-1;X>=o;X--)if(Math.abs(s[X])>=Number.EPSILON){u=X;break}let l=-1,d,m=Number.MIN_VALUE,y,S;for(let X=o;X<=u;X++){y=0;for(let he=0;he<=X;he++)r[he]!==0&&(y-=e[he]/i[X]*Math.log(e[he]/i[X]));S=0;for(let he=X+1;he<r.length;he++)r[he]!==0&&(S-=e[he]/s[X]*Math.log(e[he]/s[X]));d=y+S,m<d&&(m=d,l=X)}return l}function mean$1(r,n){let e=0;for(let i=0;i<r.length;i++)e+=i*r[i];return Math.floor(e/n)}function minError(r,n){let e,i=-2,s,o,u,l,d,m,y,S,X,he,Ce,Ee=0;for(let xe=0;xe<r.length;xe++)Ee+=xe*r[xe];for(Ee/=n,e=Ee;e!==i;){let xe=sumA(r,e),be=sumA(r,r.length-1),we=sumB(r,e),ve=sumB(r,r.length-1),ke=sumC(r,e),De=sumC(r,r.length-1);if(s=we/xe,o=(ve-we)/(be-xe),u=xe/be,l=(be-xe)/be,d=ke/xe-s*s,m=(De-ke)/(be-xe)-o*o,y=1/d-1/m,S=s/d-o/m,X=s*s/d-o*o/m+Math.log10(d*(l*l)/(m*(u*u))),he=S*S-y*X,he<0)return e;i=e,Ce=(S+Math.sqrt(he))/y,isNaN(Ce)?e=i:e=Math.floor(Ce)}return e}function sumA(r,n){let e=0;for(let i=0;i<=n;i++)e+=r[i];return e}function sumB(r,n){let e=0;for(let i=0;i<=n;i++)e+=i*r[i];return e}function sumC(r,n){let e=0;for(let i=0;i<=n;i++)e+=i*i*r[i];return e}function minimum(r){if(r.length<2)return 0;let n=0,e=-1,i=-1,s=new Array(r.length);for(let o=0;o<r.length;o++)s[o]=r[o],r[o]>0&&(i=o);for(;!bimodalTest(s);)if(s=smoothed(s),n++,n>1e4)return e;return e=minimumBetweenPeeks(s,i),e}function smoothed(r){let n=new Array(r.length);for(let e=1;e<r.length-1;e++)n[e]=(r[e-1]+r[e]+r[e+1])/3;return n[0]=(r[0]+r[1])/3,n[r.length-1]=(r[r.length-2]+r[r.length-1])/3,n}function minimumBetweenPeeks(r,n){let e;for(let i=1;i<n;i++)if(r[i-1]>r[i]&&r[i+1]>=r[i]){e=i;break}return e}function bimodalTest(r){let n=r.length,e=!1,i=0;for(let s=1;s<n-1;s++)if(r[s-1]<r[s]&&r[s+1]<r[s]&&(i++,i>2))return!1;return i===2&&(e=!0),e}function moments(r,n){let e=1,i=0,s=0,o=0,u=0,l,d,m,y,S,X,he=-1,Ce=r.length,Ee=new Array(Ce);for(let xe=0;xe<Ce;xe++)Ee[xe]=r[xe]/n;for(let xe=0;xe<Ce;xe++)i+=xe*Ee[xe],s+=xe*xe*Ee[xe],o+=xe*xe*xe*Ee[xe];d=e*s-i*i,m=(-s*s+i*o)/d,y=(e*-o+s*i)/d,S=.5*(-y-Math.sqrt(y*y-4*m)),X=.5*(-y+Math.sqrt(y*y-4*m)),l=(X-i)/(X-S);for(let xe=0;xe<Ce;xe++)if(u+=Ee[xe],u>l){he=xe;break}return he}function otsu(r,n){let e=0,i=0,s=0,o=0,u=0;for(let l=0;l<r.length;l++)u+=l*r[l];for(let l=0;l<r.length;l++){i=i+r[l];const d=n-i;if(i===0||d===0)continue;e=e+l*r[l];const m=(u-e)/d,y=i*d*(e/i-m)*(e/i-m);y>=s&&(o=l,s=y)}return o}function percentile(r){let n=-1,e=.5,i=new Array(r.length),s=partialSum(r,r.length-1),o=1;for(let u=0;u<r.length;u++)i[u]=Math.abs(partialSum(r,u)/s-e),i[u]<o&&(o=i[u],n=u);return n}function partialSum(r,n){let e=0;for(let i=0;i<=n;i++)e+=r[i];return e}function renyiEntropy(r,n){let e,i,s,o=new Array(r.length),u=new Array(r.length),l=new Array(r.length),d=0,m=0,y=0,S=0,X=0,he=0,Ee=1/(1-.5),be=1/(1-2);for(let De=0;De<r.length;De++)o[De]=r[De]/n;u[0]=o[0],l[0]=1-u[0];for(let De=1;De<r.length;De++)u[De]=u[De-1]+o[De],l[De]=1-u[De];i=0;for(let De=0;De<r.length;De++)if(Math.abs(u[De])>=Number.EPSILON){i=De;break}s=r.length-1;for(let De=r.length-1;De>=i;De--)if(Math.abs(l[De])>=Number.EPSILON){s=De;break}for(let De=i;De<=s;De++){let Oe=0,Le=0,Ae=0;for(let lt=0;lt<=De;lt++)r[lt]!==0&&(Oe-=o[lt]/u[De]*Math.log(o[lt]/u[De])),Le+=Math.sqrt(o[lt]/u[De]),Ae+=o[lt]*o[lt]/(u[De]*u[De]);let Ie=0,Ue=0,ze=0;for(let lt=De+1;lt<r.length;lt++)r[lt]!==0&&(Ie-=o[lt]/l[De]*Math.log(o[lt]/l[De])),Ue+=Math.sqrt(o[lt]/l[De]),ze+=o[lt]*o[lt]/(l[De]*l[De]);let Ye=Oe+Ie,Xe=Ee*(Le*Ue>0?Math.log(Le*Ue):0),tt=be*(Ae*ze>0?Math.log(Ae*ze):0);Ye>S&&(S=Ye,d=De),Xe>X&&(X=Xe,m=De),tt>he&&(he=tt,y=De)}let we=[d,m,y];we.sort((De,Oe)=>De-Oe);let ve;Math.abs(we[0]-we[1])<=5?Math.abs(we[1]-we[2])<=5?ve=[1,2,1]:ve=[0,1,3]:Math.abs(we[1]-we[2])<=5?ve=[3,1,0]:ve=[1,2,1];let ke=u[we[2]]-u[we[0]];return e=Math.round(we[0]*(u[we[0]]+.25*ke*ve[0])+.25*we[1]*ke*ve[1]+we[2]*(l[we[2]]+.25*ke*ve[2])),e}function shanbhag(r,n){let e=new Array(r.length);for(let he=0;he<r.length;he++)e[he]=r[he]/n;let i=new Array(r.length),s=new Array(r.length);i[0]=e[0],s[0]=1-i[0];for(let he=1;he<r.length;he++)i[he]=i[he-1]+e[he],s[he]=1-i[he];let o=0;for(let he=0;he<r.length;he++)if(Math.abs(i[he])>=Number.EPSILON){o=he;break}let u=r.length-1;for(let he=r.length-1;he>=o;he--)if(Math.abs(s[he])>=Number.EPSILON){u=he;break}let l=-1,d=Number.MAX_VALUE,m,y,S,X;for(let he=o;he<=u;he++){S=0,m=.5/i[he];for(let Ce=1;Ce<=he;Ce++)S-=e[Ce]*Math.log(1-m*i[Ce-1]);S*=m,X=0,m=.5/s[he];for(let Ce=he+1;Ce<r.length;Ce++)X-=e[Ce]*Math.log(1-m*s[Ce]);X*=m,y=Math.abs(S-X),y<d&&(d=y,l=he)}return l}function triangle$1(r){let n=0,e=0,i=0,s=0;for(let S=0;S<r.length;S++)if(r[S]>0){n=S;break}n>0&&n--;for(let S=r.length-1;S>0;S--)if(r[S]>0){s=S;break}s<r.length-1&&s++;for(let S=0;S<r.length;S++)r[S]>e&&(i=S,e=r[S]);let o=!1;if(i-n<s-i){o=!0;let S=0,X=r.length-1;for(;S<X;){let he=r[S];r[S]=r[X],r[X]=he,S++,X--}n=r.length-1-s,i=r.length-1-i}if(n===i)return n;let u,l,d;u=r[i],l=n-i,d=Math.sqrt(u*u+l*l),u/=d,l/=d,d=u*n+l*r[n];let m=n,y=0;for(let S=n+1;S<=i;S++){let X=u*S+l*r[S]-d;X>y&&(m=S,y=X)}if(m--,o){let S=0,X=r.length-1;for(;S<X;){let he=r[S];r[S]=r[X],r[X]=he,S++,X--}return r.length-1-m}else return m}function yen(r,n){let e=new Array(r.length);for(let m=0;m<r.length;m++)e[m]=r[m]/n;let i=new Array(r.length);i[0]=e[0];for(let m=1;m<r.length;m++)i[m]=i[m-1]+e[m];let s=new Array(r.length);s[0]=e[0]*e[0];for(let m=1;m<r.length;m++)s[m]=s[m-1]+e[m]*e[m];let o=new Array(r.length);o[r.length-1]=0;for(let m=r.length-2;m>=0;m--)o[m]=o[m+1]+e[m+1]*e[m+1];let u=-1,l=Number.MIN_VALUE,d;for(let m=0;m<r.length;m++)d=-1*(s[m]*o[m]>0?Math.log(s[m]*o[m]):0)+2*(i[m]*(1-i[m])>0?Math.log(i[m]*(1-i[m])):0),d>l&&(l=d,u=m);return u}const methods={huang,intermodes,isodata,li,maxentropy:maxEntropy,mean:mean$1,minerror:minError,minimum,moments,otsu,percentile,renyientropy:renyiEntropy,shanbhag,triangle:triangle$1,yen},names={};Object.keys(methods).forEach(r=>{names[r]=r});function getThreshold(r={}){let{algorithm:n=names.otsu}=r;this.checkProcessable("getThreshold",{components:1,bitDepth:[8,16]});let e=methods[n.toLowerCase()];if(e){let i=this.getHistogram();return e(i,this.size)}else throw new Error(`unknown thresholding algorithm: ${n}`)}const THRESHOLD="threshold";function mask(r={}){let{algorithm:n=THRESHOLD,threshold:e=.5,useAlpha:i=!0,invert:s=!1}=r;this.checkProcessable("mask",{components:1,bitDepth:[8,16]}),n===THRESHOLD?e=getThreshold$1(e,this.maxValue):e=getThreshold.call(this,r);let o=new Image(this.width,this.height,{kind:"BINARY",parent:this}),u=0;if(this.alpha&&i)for(let l=0;l<this.data.length;l+=this.channels){let d=this.data[l]+(this.maxValue-this.data[l])*(this.maxValue-this.data[l+1])/this.maxValue;(s&&d<=e||!s&&d>=e)&&o.setBit(u),u++}else for(let l=0;l<this.data.length;l+=this.channels)(s&&this.data[l]<=e||!s&&this.data[l]>=e)&&o.setBit(u),u++;return o}function copyImage(r,n,e,i){let s=r.width,o=r.height,u=n.width,l=r.channels;for(let d=0;d<s;d++)for(let m=0;m<o;m++)for(let y=0;y<l;y++){let S=(m*s+d)*l+y,X=((i+m)*u+e+d)*l+y;n.data[X]=r.data[S]}}function pad(r={}){let{size:n=0,algorithm:e="copy",color:i}=r;if(this.checkProcessable("pad",{bitDepth:[8,16]}),e==="set"){if(i.length!==this.channels)throw new Error(`pad: the color array must have the same length as the number of channels. Here: ${this.channels}`);for(let d=0;d<i.length;d++)i[d]===0&&(i[d]=.001)}else i=newArray(this.channels,null);Array.isArray(n)||(n=[n,n]);let s=this.width+n[0]*2,o=this.height+n[1]*2,u=this.channels,l=Image.createFrom(this,{width:s,height:o});copyImage(this,l,n[0],n[1]);for(let d=n[0];d<s-n[0];d++)for(let m=0;m<u;m++){let y=i[m]||l.data[(n[1]*s+d)*u+m];for(let S=0;S<n[1];S++)l.data[(S*s+d)*u+m]=y;y=i[m]||l.data[((o-n[1]-1)*s+d)*u+m];for(let S=o-n[1];S<o;S++)l.data[(S*s+d)*u+m]=y}for(let d=0;d<o;d++)for(let m=0;m<u;m++){let y=i[m]||l.data[(d*s+n[0])*u+m];for(let S=0;S<n[0];S++)l.data[(d*s+S)*u+m]=y;y=i[m]||l.data[(d*s+s-n[0]-1)*u+m];for(let S=s-n[0];S<s;S++)l.data[(d*s+S)*u+m]=y}return l}function colorDepth(r=8){if(this.checkProcessable("colorDepth",{bitDepth:[1,8,16]}),![8,16].includes(r))throw Error("You need to specify the new colorDepth as 8 or 16");if(this.bitDepth===r)return this.clone();let n=Image.createFrom(this,{bitDepth:r});switch(r){case 8:if(this.bitDepth===1)for(let e=0;e<this.size;e++)this.getBit(e)&&(n.data[e]=255);else for(let e=0;e<this.data.length;e++)n.data[e]=this.data[e]>>8;break;case 16:if(this.bitDepth===1)for(let e=0;e<this.size;e++)this.getBit(e)&&(n.data[e]=65535);else for(let e=0;e<this.data.length;e++)n.data[e]=this.data[e]<<8|this.data[e];break;default:throw new Error("colorDepth conversion unexpected case")}return n}function rotateFree(r,n={}){const{interpolation:e=validInterpolations.nearestneighbor,width:i=this.width,height:s=this.height}=n;if(typeof r!="number")throw new TypeError("degrees must be a number");const o=checkInterpolation(e),u=r*Math.PI/180,l=Math.floor(Math.abs(i*Math.cos(u))+Math.abs(s*Math.sin(u))),d=Math.floor(Math.abs(s*Math.cos(u))+Math.abs(i*Math.sin(u))),m=Math.cos(-u),y=Math.sin(-u);let S=l/2,X=d/2;l%2===0?(S=S-.5,d%2===0?X=X-.5:X=Math.floor(X)):(S=Math.floor(S),d%2===0?X=X-.5:X=Math.floor(X));const he=Math.floor(i/2-S),Ce=Math.floor(s/2-X);if(this.bitDepth===1){const Ee=new Image(l,d,{kind:"BINARY",parent:this});switch(o){case validInterpolations.nearestneighbor:return rotateBinaryNearestNeighbor(this,Ee,he,Ce,S,X,m,y);case validInterpolations.bilinear:return rotateBinaryBilinear(this,Ee,he,Ce,S,X,m,y);default:throw new Error(`unsupported rotate interpolation: ${o}`)}}else{const Ee=Image.createFrom(this,{width:l,height:d});switch(o){case validInterpolations.nearestneighbor:return rotateNearestNeighbor(this,Ee,he,Ce,S,X,m,y);case validInterpolations.bilinear:return rotateBilinear(this,Ee,he,Ce,S,X,m,y);default:throw new Error(`unsupported rotate interpolation: ${o}`)}}}function rotateNearestNeighbor(r,n,e,i,s,o,u,l){for(let d=0;d<n.width;d+=1)for(let m=0;m<n.height;m+=1)for(let y=0;y<r.channels;y++){let S=Math.round((d-s)*u-(m-o)*l+s)+e,X=Math.round((m-o)*u+(d-s)*l+o)+i;S<0||S>=r.width||X<0||X>=r.height?r.alpha===1&&y===r.channels-1?n.setValueXY(d,m,y,0):n.setValueXY(d,m,y,r.maxValue):n.setValueXY(d,m,y,r.getValueXY(S,X,y))}return n}function rotateBinaryNearestNeighbor(r,n,e,i,s,o,u,l){for(let d=0;d<n.width;d+=1)for(let m=0;m<n.height;m+=1){let y=Math.round((d-s)*u-(m-o)*l+s)+e,S=Math.round((m-o)*u+(d-s)*l+o)+i;(y<0||y>=r.width||S<0||S>=r.height||r.getBitXY(y,S))&&n.setBitXY(d,m)}return n}function rotateBilinear(r,n,e,i,s,o,u,l){let d=r.width*r.channels;for(let m=0;m<n.height;m++)for(let y=0;y<n.width;y++){let S=(y-s)*u-(m-o)*l+s+e,X=(m-o)*u+(y-s)*l+o+i,he=S|0,Ce=X|0,Ee=S-he,xe=X-Ce;for(let be=0;be<r.channels;be++)if(S<0||S>=r.width||X<0||X>=r.height)r.alpha===1&&be===r.channels-1?n.setValueXY(y,m,be,0):n.setValueXY(y,m,be,r.maxValue);else{let we=(Ce*r.width+he)*r.channels+be,ve=r.data[we],ke=r.data[we+r.channels],De=r.data[we+d],Oe=r.data[we+d+r.channels],Le=ve+Ee*(ke-ve)+xe*(De-ve)+Ee*xe*(ve-ke-De+Oe)|0;n.setValueXY(y,m,be,Le)}}return n}function rotateBinaryBilinear(r,n,e,i,s,o,u,l){let d=r.width;for(let m=0;m<n.height;m++)for(let y=0;y<n.width;y++){let S=(y-s)*u-(m-o)*l+s+e,X=(m-o)*u+(y-s)*l+o+i,he=S|0,Ce=X|0,Ee=S-he,xe=X-Ce;if(S<0||S>=r.width||X<0||X>=r.height)n.setBitXY(y,m);else{let be=Ce*r.width+he,we=r.getBit(be),ve=r.getBit(be+1),ke=r.getBit(be+d),De=r.getBit(be+1+d);(we|Ee&ve-we|xe&ke-we|Ee&xe&we-ve-ke+De)>0&&n.setBitXY(y,m)}}return n}function rotate$1(r,n){if(this.checkProcessable("rotate",{bitDepth:[1,8,16]}),typeof r!="number")throw new TypeError("angle must be a number");switch(r<0&&(r=Math.ceil(-r/360)*360+r),r%360){case 0:return this.clone();case 90:return rotateRight.call(this);case 180:return rotate180.call(this);case 270:return rotateLeft.call(this);default:return rotateFree.call(this,r,n)}}function rotateLeft(){if(this.bitDepth===1){const r=new Image(this.height,this.width,{kind:"BINARY",parent:this}),n=r.height-1;for(let e=0;e<this.height;e++)for(let i=0;i<this.width;i++)this.getBitXY(i,e)&&r.setBitXY(e,n-i);return r}else{const r=Image.createFrom(this,{width:this.height,height:this.width}),n=r.height-1;for(let e=0;e<this.height;e++)for(let i=0;i<this.width;i++)for(let s=0;s<this.channels;s++)r.setValueXY(e,n-i,s,this.getValueXY(i,e,s));return r}}function rotateRight(){if(this.bitDepth===1){const r=new Image(this.height,this.width,{kind:"BINARY",parent:this}),n=r.width-1;for(let e=0;e<this.height;e++)for(let i=0;i<this.width;i++)this.getBitXY(i,e)&&r.setBitXY(n-e,i);return r}else{const r=Image.createFrom(this,{width:this.height,height:this.width}),n=r.width-1;for(let e=0;e<this.height;e++)for(let i=0;i<this.width;i++)for(let s=0;s<this.channels;s++)r.setValueXY(n-e,i,s,this.getValueXY(i,e,s));return r}}function rotate180(){if(this.bitDepth===1){const r=new Image(this.width,this.height,{kind:"BINARY",parent:this}),n=r.width-1,e=r.height-1;for(let i=0;i<this.height;i++)for(let s=0;s<this.width;s++)this.getBitXY(s,i)&&r.setBitXY(n-s,e-i);return r}else{const r=Image.createFrom(this),n=r.width-1,e=r.height-1;for(let i=0;i<this.height;i++)for(let s=0;s<this.width;s++)for(let o=0;o<this.channels;o++)r.setValueXY(n-s,e-i,o,this.getValueXY(s,i,o));return r}}function insert(r,n={}){const e=getImageParameters(r);this.checkProcessable("insert",e);let{x:i=0,y:s=0}=n;const o=getOutputImageOrInPlace(this,n,{copy:!0}),u=Math.min(o.height,s+r.height),l=Math.min(o.width,i+r.width);if(o.bitDepth===1)for(let d=s;d<u;d++)for(let m=i;m<l;m++)r.getBitXY(m-i,d-s)?o.setBitXY(m,d):o.clearBitXY(m,d);else for(let d=s;d<u;d++)for(let m=i;m<l;m++)o.setPixelXY(m,d,r.getPixelXY(m-i,d-s));return o}function setBorder(r={}){let{size:n=0,algorithm:e="copy",color:i}=r;if(this.checkProcessable("setBorder",{bitDepth:[8,16,32,64]}),e==="set"){if(i.length!==this.channels)throw new Error(`setBorder: the color array must have the same length as the number of channels. Here: ${this.channels}`);for(let l=0;l<i.length;l++)i[l]===0&&(i[l]=.001)}else i=newArray(this.channels,null);Array.isArray(n)||(n=[n,n]);let s=n[0],o=n[1],u=this.channels;for(let l=s;l<this.width-s;l++)for(let d=0;d<u;d++){let m=i[d]||this.data[(l+this.width*o)*u+d];for(let y=0;y<o;y++)this.data[(y*this.width+l)*u+d]=m;m=i[d]||this.data[(l+this.width*(this.height-o-1))*u+d];for(let y=this.height-o;y<this.height;y++)this.data[(y*this.width+l)*u+d]=m}for(let l=0;l<this.height;l++)for(let d=0;d<u;d++){let m=i[d]||this.data[(l*this.width+s)*u+d];for(let y=0;y<s;y++)this.data[(l*this.width+y)*u+d]=m;m=i[d]||this.data[(l*this.width+this.width-s-1)*u+d];for(let y=this.width-s;y<this.width;y++)this.data[(l*this.width+y)*u+d]=m}return this}function split(r={}){let{preserveAlpha:n=!0}=r;if(this.checkProcessable("split",{bitDepth:[8,16]}),this.components===1)return new Stack([this.clone()]);let e=new Stack,i=this.data;if(this.alpha&&n)for(let s=0;s<this.components;s++){let o=Image.createFrom(this,{components:1,alpha:!0,colorModel:GREY$1}),u=0;for(let l=0;l<i.length;l+=this.channels)o.data[u++]=i[l+s],o.data[u++]=i[l+this.components];e.push(o)}else for(let s=0;s<this.channels;s++){let o=Image.createFrom(this,{components:1,alpha:!1,colorModel:GREY$1}),u=0;for(let l=0;l<i.length;l+=this.channels)o.data[u++]=i[l+s];e.push(o)}return e}function getChannel(r,n={}){let{keepAlpha:e=!1,mergeAlpha:i=!1}=n;e&=this.alpha,i&=this.alpha,this.checkProcessable("getChannel",{bitDepth:[8,16]}),r=validateChannel(this,r);let s=Image.createFrom(this,{components:1,alpha:e,colorModel:GREY$1}),o=0;for(let u=0;u<this.data.length;u+=this.channels)i?s.data[o++]=this.data[u+r]*this.data[u+this.components]/this.maxValue:(s.data[o++]=this.data[u+r],e&&(s.data[o++]=this.data[u+this.components]));return s}function combineChannels(r=defaultCombineMethod,n={}){let{mergeAlpha:e=!1,keepAlpha:i=!1}=n;e&=this.alpha,i&=this.alpha,this.checkProcessable("combineChannels",{bitDepth:[8,16]});let s=Image.createFrom(this,{components:1,alpha:i,colorModel:GREY$1}),o=0;for(let u=0;u<this.size;u++){let l=r(this.getPixel(u));e?s.data[o++]=l*this.data[u*this.channels+this.components]/this.maxValue:(s.data[o++]=l,i&&(s.data[o++]=this.data[u*this.channels+this.components]))}return s}function defaultCombineMethod(r){return(r[0]+r[1]+r[2])/3}function setChannel(r,n){if(this.checkProcessable("setChannel",{bitDepth:[8,16]}),n.checkProcessable("setChannel (image parameter check)",{bitDepth:[this.bitDepth],alpha:[0],components:[1]}),n.width!==this.width||n.height!==this.height)throw new Error("Images must have exactly the same width and height");r=validateChannel(this,r);let e=r;for(let i=0;i<n.data.length;i++)this.data[e]=n.data[i],e+=this.channels;return this}function getSimilarity(r,n={}){let{shift:e=[0,0],average:i,channels:s,defaultAlpha:o,normalize:u,border:l=[0,0]}=n;if(this.checkProcessable("getSimilarity",{bitDepth:[8,16]}),Array.isArray(l)||(l=[l,l]),s=validateArrayOfChannels(this,{channels:s,defaultAlpha:o}),this.bitDepth!==r.bitDepth)throw new Error("Both images must have the same bitDepth");if(this.channels!==r.channels)throw new Error("Both images must have the same number of channels");if(this.colorModel!==r.colorModel)throw new Error("Both images must have the same colorModel");typeof i>"u"&&(i=!0);let d=Math.max(l[0],-e[0]),m=Math.min(this.width-l[0],this.width-e[0]),y=Math.max(l[1],-e[1]),S=Math.min(this.height-l[1],this.height-e[1]),X=newArray(s.length,0);for(let he=0;he<s.length;he++){let Ce=s[he],Ee=u?this.sum[Ce]:Math.max(this.sum[Ce],r.sum[Ce]),xe=u?r.sum[Ce]:Math.max(this.sum[Ce],r.sum[Ce]);if(Ee!==0&&xe!==0)for(let be=d;be<m;be++)for(let we=y;we<S;we++){let ve=be*this.multiplierX+we*this.multiplierY+Ce,ke=ve+e[0]*this.multiplierX+e[1]*this.multiplierY;X[he]+=Math.min(this.data[ve]/Ee,r.data[ke]/xe)}}return i?X.reduce((he,Ce)=>he+Ce)/X.length:X}function getPixelsGrid(r={}){let{sampling:n=[10,10],painted:e=!1,mask:i}=r;this.checkProcessable("getPixelsGrid",{bitDepth:[8,16],channels:1}),Array.isArray(n)||(n=[n,n]);const s=n[0],o=n[1],u=[],l=[],d=this.width/s,m=this.height/o;let y=Math.floor(d/2);for(let X=0;X<s;X++){let he=Math.floor(m/2);for(let Ce=0;Ce<o;Ce++){let Ee=Math.round(y),xe=Math.round(he);(!i||i.getBitXY(Ee,xe))&&(u.push([Ee,xe]),l.push(this.getPixelXY(Ee,xe))),he+=m}y+=d}const S={xyS:u,zS:l};return e&&(S.painted=this.rgba8().paintPoints(u)),S}function Matrix(r,n,e){const i=new Array(r);for(let s=0;s<r;s++)i[s]=new Array(n);if(e)for(let s=0;s<r;s++)for(let o=0;o<n;o++)i[s][o]=e;return i.width=r,i.height=n,Object.setPrototypeOf(i,Matrix.prototype),i}Matrix.prototype.localMin=function(r,n){let e=this[r][n],i=[r,n];for(let s=Math.max(0,r-1);s<Math.min(this.length,r+2);s++)for(let o=Math.max(0,n-1);o<Math.min(this[0].length,n+2);o++)this[s][o]<e&&(e=this[s][o],i=[s,o]);return{position:i,value:e}};Matrix.prototype.localMax=function(r,n){let e=this[r][n],i=[r,n];for(let s=Math.max(0,r-1);s<Math.min(this.length,r+2);s++)for(let o=Math.max(0,n-1);o<Math.min(this[0].length,n+2);o++)this[s][o]>e&&(e=this[s][o],i=[s,o]);return{position:i,value:e}};Matrix.prototype.localSearch=function(r,n,e){let i=[];for(let s=Math.max(0,r-1);s<Math.min(this.length,r+2);s++)for(let o=Math.max(0,n-1);o<Math.min(this[0].length,n+2);o++)this[s][o]===e&&i.push([s,o]);return i};function getBestMatch(r,n={}){let{border:e}=n;if(this.checkProcessable("getChannel",{bitDepth:[8,16]}),this.bitDepth!==r.bitDepth)throw new Error("Both images must have the same bitDepth");if(this.channels!==r.channels)throw new Error("Both images must have the same number of channels");if(this.colorModel!==r.colorModel)throw new Error("Both images must have the same colorModel");let i=new Matrix(r.width,r.height,-1/0),s=Math.floor(r.width/2),o=Math.floor(r.height/2),u=s,l=o,d=!1;for(;!d;){let m=i.localSearch(s,o,-1/0);for(let S=0;S<m.length;S++){let X=m[S],he=this.getSimilarity(r,{border:e,shift:[u-X[0],l-X[1]]});i[X[0]][X[1]]=he}let y=i.localMax(s,o);y.position[0]!==s||y.position[1]!==o?(s=y.position[0],o=y.position[1]):d=!0}return[s-u,o-l]}function getRow(r,n=0){this.checkProcessable("getRow",{bitDepth:[8,16]}),checkRow(this,r),checkChannel(this,n);let e=new Array(this.width),i=0,s=r*this.width*this.channels+n,o=s+this.width*this.channels;for(let u=s;u<o;u+=this.channels)e[i++]=this.data[u];return e}function getColumn(r,n=0){this.checkProcessable("getColumn",{bitDepth:[8,16]}),checkColumn(this,r),checkChannel(this,n);let e=new Array(this.height),i=0,s=this.width*this.channels;for(let o=n+r*this.channels;o<this.data.length;o+=s)e[i++]=this.data[o];return e}function getMatrix(r={}){let{channel:n}=r;if(this.checkProcessable("getMatrix",{bitDepth:[8,16]}),n===void 0){if(this.components>1)throw new RangeError("You need to define the channel for an image that contains more than one channel");n=0}let e=new Matrix$1(this.height,this.width);for(let i=0;i<this.height;i++)for(let s=0;s<this.width;s++)e.set(i,s,this.getValueXY(s,i,n));return e}function setMatrix(r,n={}){r=new Matrix$1(r);let{channel:e}=n;if(this.checkProcessable("getMatrix",{bitDepth:[8,16]}),e===void 0){if(this.components>1)throw new RangeError("You need to define the channel for an image that contains more than one channel");e=0}if(this.width!==r.columns||this.height!==r.rows)throw new RangeError("The size of the matrix must be equal to the size of the image");for(let i=0;i<this.height;i++)for(let s=0;s<this.width;s++)this.setValueXY(s,i,e,r.get(i,s));return this}function getPixelsArray(){this.checkProcessable("getPixelsArray",{bitDepth:[8,16,32]});let r=new Array(this.size),n=0;for(let e=0;e<this.data.length;e+=this.channels){let i=new Array(this.components);for(let s=0;s<this.components;s++)i[s]=this.data[e+s];r[n++]=i}return r}function getIntersection(r){let n=this,e=n.getClosestCommonParent(r),i=n.getRelativePosition(e,{defaultFurther:!0}),s=getRelativePositionForAllPixels(n,i),o=r.getRelativePosition(e,{defaultFurther:!0}),u=getRelativePositionForAllPixels(r,o),l=getCommonSurface(s,u),d={whitePixelsMask1:[],whitePixelsMask2:[],commonWhitePixels:[]};for(let m=0;m<l.length;m++){let y=l[m],S=[y[0]-i[0],y[1]-i[1]],X=[y[0]-o[0],y[1]-o[1]],he=n.getBitXY(S[0],S[1]),Ce=r.getBitXY(X[0],X[1]);he===1&&Ce===1&&d.commonWhitePixels.push(y)}for(let m=0;m<s.length;m++){let y,S;m!==0&&(y=Math.floor(m/n.width),S=m%n.width),n.getBitXY(y,S)===1&&d.whitePixelsMask1.push(s[m])}for(let m=0;m<u.length;m++){let y=0,S=0;m!==0&&(y=Math.floor(m/r.width),S=m%r.width),r.getBitXY(y,S)===1&&d.whitePixelsMask2.push(u[m])}return d}function getRelativePositionForAllPixels(r,n){let e=[];for(let i=0;i<r.height;i++)for(let s=0;s<r.width;s++){let o=[i,s];e.push([o[0]+n[0],o[1]+n[1]])}return e}function getCommonSurface(r,n){let e=0,i=0,s=[];for(;e<r.length&&i<n.length;)r[e][0]===n[i][0]&&r[e][1]===n[i][1]?(s.push(r[e]),e++,i++):r[e][0]<n[i][0]||r[e][0]===n[i][0]&&r[e][1]<n[i][1]?e++:i++;return s}function getClosestCommonParent(r){let n=getDepth(this),e=getDepth(r),i;if(n>=e?i=getFurthestParent(this,n):i=getFurthestParent(r,e),n===0||e===0)return i;let s=this,o=r;for(;n!==e;)if(n>e){if(s=s.parent,s===null)return i;n=n-1}else{if(o=o.parent,o===null)return i;e=e-1}for(;s!==o&&s!==null&&o!==null;)if(s=s.parent,o=o.parent,s===null||o===null)return i;return s!==o?i:s}function getDepth(r){let n=0,e=r;for(;e.parent!=null;)e=e.parent,n++;return n}function getFurthestParent(r,n){let e=r;for(;n>0;)e=e.parent,n=n-1;return e}const defaultOptions$2={lowThreshold:10,highThreshold:30,gaussianBlur:1.1},Gx=[[-1,0,1],[-2,0,2],[-1,0,1]],Gy=[[-1,-2,-1],[0,0,0],[1,2,1]],convOptions={bitDepth:32,mode:"periodic"};function cannyEdgeDetector(r,n){r.checkProcessable("Canny edge detector",{bitDepth:8,channels:1,components:1}),n=Object.assign({},defaultOptions$2,n);const e=r.width,i=r.height,s=r.maxValue,o={sigma:n.gaussianBlur,radius:3},u=r.gaussianFilter(o),l=u.convolution(Gy,convOptions),d=u.convolution(Gx,convOptions),m=d.hypotenuse(l),y=r.constructor,S=new y(e,i,{kind:"GREY",bitDepth:32}),X=new y(e,i,{kind:"GREY",bitDepth:32}),he=new y(e,i,{kind:"GREY"});for(var Ce=1;Ce<e-1;Ce++)for(var Ee=1;Ee<i-1;Ee++){var xe=(Math.round(Math.atan2(d.getValueXY(Ce,Ee,0),l.getValueXY(Ce,Ee,0))*(5/Math.PI))+5)%5;xe===0&&(m.getValueXY(Ce,Ee,0)<=m.getValueXY(Ce,Ee-1,0)||m.getValueXY(Ce,Ee,0)<=m.getValueXY(Ce,Ee+1,0))||xe===1&&(m.getValueXY(Ce,Ee,0)<=m.getValueXY(Ce-1,Ee+1,0)||m.getValueXY(Ce,Ee,0)<=m.getValueXY(Ce+1,Ee-1,0))||xe===2&&(m.getValueXY(Ce,Ee,0)<=m.getValueXY(Ce-1,Ee,0)||m.getValueXY(Ce,Ee,0)<=m.getValueXY(Ce+1,Ee,0))||xe===3&&(m.getValueXY(Ce,Ee,0)<=m.getValueXY(Ce-1,Ee-1,0)||m.getValueXY(Ce,Ee,0)<=m.getValueXY(Ce+1,Ee+1,0))||S.setValueXY(Ce,Ee,0,m.getValueXY(Ce,Ee,0))}for(Ce=0;Ce<e*i;++Ce){var be=S.data[Ce],we=0;be>n.highThreshold&&(we++,he.data[Ce]=s),be>n.lowThreshold&&we++,X.data[Ce]=we}var ve=[];for(Ce=1;Ce<e-1;++Ce)for(Ee=1;Ee<i-1;++Ee)if(X.getValueXY(Ce,Ee,0)===1){e:for(var ke=Ce-1;ke<Ce+2;++ke)for(var De=Ee-1;De<Ee+2;++De)if(X.getValueXY(ke,De,0)===2){ve.push([Ce,Ee]),he.setValueXY(Ce,Ee,0,s);break e}}for(;ve.length>0;){var Oe=[];for(Ce=0;Ce<ve.length;++Ce)for(Ee=-1;Ee<2;++Ee)for(ke=-1;ke<2;++ke)if(!(Ee===0&&ke===0)){var Le=ve[Ce][0]+Ee,Ae=ve[Ce][1]+ke;X.getValueXY(Le,Ae,0)===1&&he.getValueXY(Le,Ae,0)===0&&(Oe.push([Le,Ae]),he.setValueXY(Le,Ae,0,s))}ve=Oe}return he}function cannyEdge(r){return cannyEdgeDetector(this,r)}function extract(r,n={}){let{position:e}=n;if(this.checkProcessable("extract",{bitDepth:[1,8,16]}),!e&&(e=r.getRelativePosition(this),!e))throw new Error("extract : can not extract an image because the relative position can not be determined, try to specify manually the position as an array of 2 elements [x,y].");if(this.bitDepth>1){let i=Image.createFrom(this,{width:r.width,height:r.height,alpha:1,position:e,parent:this});for(let s=0;s<r.width;s++)for(let o=0;o<r.height;o++){for(let u=0;u<this.channels;u++){let l=this.getValueXY(s+e[0],o+e[1],u);i.setValueXY(s,o,u,l)}r.getBitXY(s,o)||i.setValueXY(s,o,this.components,0)}return i}else{let i=Image.createFrom(this,{width:r.width,height:r.height,position:e,parent:this});for(let s=0;s<r.height;s++)for(let o=0;o<r.width;o++)r.getBitXY(o,s)&&this.getBitXY(o+e[0],s+e[1])&&i.setBitXY(o,s);return i}}var fastList={exports:{}},hasRequiredFastList;function requireFastList(){return hasRequiredFastList||(hasRequiredFastList=1,function(r,n){(function(){function e(s,o,u){this.next=u,u&&(u.prev=this),this.prev=o,o&&(o.next=this),this.data=s}function i(){if(!(this instanceof i))return new i;this._head=null,this._tail=null,this.length=0}i.prototype={push:function(s){this._tail=new e(s,this._tail,null),this._head||(this._head=this._tail),this.length++},pop:function(){if(this.length!==0){var s=this._tail;return this._tail=s.prev,s.prev&&(s.prev=this._tail.next=null),this.length--,this.length===1?this._head=this._tail:this.length===0&&(this._head=this._tail=null),s.data}},unshift:function(s){this._head=new e(s,null,this._head),this._tail||(this._tail=this._head),this.length++},shift:function(){if(this.length!==0){var s=this._head;return this._head=s.next,s.next&&(s.next=this._head.prev=null),this.length--,this.length===1?this._tail=this._head:this.length===0&&(this._head=this._tail=null),s.data}},item:function(s){s<0&&(s=this.length+s);for(var o=this._head;s-- >0&&o;)o=o.next;return o?o.data:void 0},slice:function(s,o){if(s||(s=0),o||(o=this.length),o<0&&(o=this.length+o),s<0&&(s=this.length+s),o===s)return[];if(o<s)throw new Error("invalid offset: "+s+","+o+" (length="+this.length+")");for(var u=o-s,l=new Array(u),d=0,m=this._head;s-- >0&&m;)m=m.next;for(;d<u&&m;)l[d++]=m.data,m=m.next;return l},drop:function(){i.call(this)},forEach:function(s,o){for(var u=this._head,l=0,d=this.length;l<d&&u;)s.call(o||this,u.data,l,this),u=u.next,l++},map:function(s,o){var u=new i;return this.forEach(function(l,d,m){u.push(s.call(o||m,l,d,m))}),u},filter:function(s,o){var u=new i;return this.forEach(function(l,d,m){s.call(o||m,l,d,m)&&u.push(l)}),u},reduce:function(s,o,u){var l=0,d=this._head,m=this.length;for(o||(l=1,o=d&&d.data,d=d&&d.next);l<m&&d;)o=s.call(u||this,o,d.data,this),l++,d=d.next;return o}},r.exports=i})()}(fastList)),fastList.exports}var fastListExports=requireFastList();const LinkedList=getDefaultExportFromCjs(fastListExports);function floodFill(r={}){const{x:n=0,y:e=0,inPlace:i=!0}=r,s=i?this:Image.createFrom(this);if(this.checkProcessable("floodFill",{bitDepth:1}),this.getBitXY(n,e))return s;const u=new LinkedList;for(u.push(new Node$1(n,e));u.length>0;){const l=u.shift();s.setBitXY(l.x,l.y);for(let d=l.x+1;d<this.width&&(!s.getBitXY(d,l.y)&&!this.getBitXY(d,l.y));d++)s.setBitXY(d,l.y),l.y+1<this.height&&!this.getBitXY(d,l.y+1)&&u.push(new Node$1(d,l.y+1)),l.y-1>=0&&!this.getBitXY(d,l.y-1)&&u.push(new Node$1(d,l.y-1));for(let d=l.x-1;d>=0&&(!s.getBitXY(d,l.y)&&!this.getBitXY(d,l.y));d++)s.setBitXY(d,l.y),l.y+1<this.height&&!this.getBitXY(d,l.y+1)&&u.push(new Node$1(d,l.y+1)),l.y-1>=0&&!this.getBitXY(d,l.y-1)&&u.push(new Node$1(d,l.y-1))}return s}function Node$1(r,n){this.x=r,this.y=n}function hsv2rgb(r,n,e){n=n/100,e=e/100;var i=[],s=e*n,o=r/60,u=s*(1-Math.abs(o%2-1)),l=e-s;return o>=0&&o<1?i=[s,u,0]:o>=1&&o<2?i=[u,s,0]:o>=2&&o<3?i=[0,s,u]:r>=3&&o<4?i=[0,u,s]:r>=4&&o<5?i=[u,0,s]:r>=5&&o<=6?i=[s,0,u]:i=[0,0,0],{r:Math.round(255*(i[0]+l)),g:Math.round(255*(i[1]+l)),b:Math.round(255*(i[2]+l))}}function hsl2hsv(r,n,e){return n*=(e<50?e:100-e)/100,{h:r,s:2*n/(e+n)*100,v:e+n}}function hsl2rgb$1(r,n,e){var i=hsl2hsv(r,n,e);return hsv2rgb(i.h,i.s,i.v)}var colors={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]};function parse(r){return named(r)||hex3(r)||hex6(r)||rgb(r)||rgba$1(r)||hsl(r)||hsla(r)}function named(r){var n=colors[r.toLowerCase()];if(n)return{r:n[0],g:n[1],b:n[2],a:100}}function rgb(r){var n=r.match(/rgb\(([^)]+)\)/);if(n){var e=n[1].split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:100}}}function rgba$1(r){var n=r.match(/rgba\(([^)]+)\)/);if(n){var e=n[1].split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:e[3]*100}}}function hex6(r){if(r[0]==="#"&&r.length===7)return{r:parseInt(r.slice(1,3),16),g:parseInt(r.slice(3,5),16),b:parseInt(r.slice(5,7),16),a:100}}function hex3(r){if(r[0]==="#"&&r.length===4)return{r:parseInt(r[1]+r[1],16),g:parseInt(r[2]+r[2],16),b:parseInt(r[3]+r[3],16),a:100}}function hsl(r){var n=r.match(/hsl\(([^)]+)\)/);if(n){var e=n[1].split(/ *, */),i=parseInt(e[0],10),s=parseInt(e[1],10),o=parseInt(e[2],10),u=hsl2rgb$1(i,s,o);return _extends$3({},u,{a:100})}}function hsla(r){var n=r.match(/hsla\(([^)]+)\)/);if(n){var e=n[1].split(/ *, */),i=parseInt(e[0],10),s=parseInt(e[1],10),o=parseInt(e[2],10),u=parseInt(parseFloat(e[3])*100,10),l=hsl2rgb$1(i,s,o);return _extends$3({},l,{a:u})}}function css2array(r){let n=parse(r);return[n.r,n.g,n.b,Math.round(n.a*255/100)]}function hue2rgb(r,n,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?r+(n-r)*6*e:e<1/2?n:e<2/3?r+(n-r)*(2/3-e)*6:r}function hsl2rgb(r,n,e){let i,s,o,u,l,d;return n/=100,e/=100,n===0?u=l=d=e*255:(e<=.5?s=e*(n+1):s=e+n-e*n,i=e*2-s,o=r/360,u=hue2rgb(i,s,o+1/3),l=hue2rgb(i,s,o),d=hue2rgb(i,s,o-1/3)),{r:u,g:l,b:d}}function getDistinctColors(r){let n=new Array(r),e=0;for(let i=0;i<360;i+=360/r){e++;let s=hsl2rgb(i,100,30+e%4*15);n[e-1]=[Math.round(s.r*255),Math.round(s.g*255),Math.round(s.b*255)]}return n}function getRandomColor(){return[Math.floor(Math.random()*256),Math.floor(Math.random()*256),Math.floor(Math.random()*256)]}function getColors(r){let{color:n,colors:e,randomColors:i,numberColors:s=50}=r;if(n&&!Array.isArray(n)&&(n=css2array(n)),n)return[n];if(e)return e=e.map(function(o){return Array.isArray(o)?o:css2array(o)}),e;if(i){e=new Array(s);for(let o=0;o<s;o++)e[o]=getRandomColor()}return getDistinctColors(s)}function paintLabels(r,n,e={}){let{color:i="blue",colors:s,font:o="12px Helvetica",rotate:u=0}=e;if(this.checkProcessable("paintMasks",{channels:[3,4],bitDepth:[8,16],colorModel:RGB$1}),!Array.isArray(r))throw Error("paintLabels: labels must be an array");if(!Array.isArray(n))throw Error("paintLabels: positions must be an array");if(i&&!Array.isArray(i)&&(i=css2array(i)),s?s=s.map(function(m){return Array.isArray(m)?m:css2array(m)}):s=[i],r.length!==n.length)throw Error("paintLabels: positions and labels must be arrays from the same size");Array.isArray(o)||(o=[o]),Array.isArray(u)||(u=[u]);let d=this.getCanvas().getContext("2d");for(let m=0;m<r.length;m++){d.save();let y=s[m%s.length];d.fillStyle=`rgba(${y[0]},${y[1]},${y[2]},${y[3]/this.maxValue})`,d.font=o[m%o.length];let S=n[m];d.translate(S[0],S[1]),d.rotate(u[m%u.length]/180*Math.PI),d.fillText(r[m],0,0),d.restore()}return this.data=Uint8Array.from(d.getImageData(0,0,this.width,this.height).data),this}function paintMasks(r,n={}){let{alpha:e=255,labels:i=[],labelsPosition:s=[],labelColor:o="blue",labelFont:u="12px Helvetica"}=n;this.checkProcessable("paintMasks",{channels:[3,4],bitDepth:[8,16],colorModel:RGB$1});let l=getColors(Object.assign({},n,{numberColors:r.length}));Array.isArray(r)||(r=[r]);for(let d=0;d<r.length;d++){let m=r[d],y=l[d%l.length];for(let S=0;S<m.width;S++)for(let X=0;X<m.height;X++)if(m.getBitXY(S,X))for(let he=0;he<Math.min(this.components,y.length);he++)if(e===255)this.setValueXY(S+m.position[0],X+m.position[1],he,y[he]);else{let Ce=this.getValueXY(S+m.position[0],X+m.position[1],he);Ce=Math.round((Ce*(255-e)+y[he]*e)/255),this.setValueXY(S+m.position[0],X+m.position[1],he,Ce)}}if(Array.isArray(i)&&i.length>0){let m=this.getCanvas().getContext("2d");m.fillStyle=o,m.font=u;for(let y=0;y<Math.min(r.length,i.length);y++){let S=s[y]?s[y]:r[y].position;m.fillText(i[y],S[0],S[1])}this.data=Uint8Array.from(m.getImageData(0,0,this.width,this.height).data)}return this}function zerosMatrix(r,n){let e=new Array(r);for(let i=0;i<r;i++)e[i]=new Array(n).fill(0);return e}const cross=[[0,0,1,0,0],[0,0,1,0,0],[1,1,1,1,1],[0,0,1,0,0],[0,0,1,0,0]],smallCross=[[0,1,0],[1,1,1],[0,1,0]];class Shape{constructor(n={}){let{kind:e="cross",shape:i,size:s,width:o,height:u,filled:l=!0}=n;if(s&&(o=s,u=s),i)switch(i.toLowerCase()){case"square":case"rectangle":this.matrix=rectangle(o,u,{filled:l});break;case"circle":case"ellipse":this.matrix=ellipse(o,u,{filled:l});break;case"triangle":this.matrix=triangle(o,u,{filled:l});break;default:throw new Error(`Shape: unexpected shape: ${i}`)}else if(e)switch(e.toLowerCase()){case"cross":this.matrix=cross;break;case"smallcross":this.matrix=smallCross;break;default:throw new Error(`Shape: unexpected kind: ${e}`)}else throw new Error("Shape: expected a kind or a shape option");this.height=this.matrix.length,this.width=this.matrix[0].length,this.halfHeight=this.height/2>>0,this.halfWidth=this.width/2>>0}getPoints(){let n=this.matrix,e=[];for(let i=0;i<n.length;i++)for(let s=0;s<n[0].length;s++)n[i][s]&&e.push([s-this.halfWidth,i-this.halfHeight]);return e}getMask(){let n=new Image(this.width,this.height,{kind:BINARY});for(let e=0;e<this.matrix.length;e++)for(let i=0;i<this.matrix[0].length;i++)this.matrix[e][i]&&n.setBitXY(i,e);return n}}function rectangle(r,n,e){const i=zerosMatrix(n,r);if(e.filled)for(let s=0;s<n;s++)for(let o=0;o<r;o++)i[s][o]=1;else{for(let s of[0,n-1])for(let o=0;o<r;o++)i[s][o]=1;for(let s=0;s<n;s++)for(let o of[0,r-1])i[s][o]=1}return i}function ellipse(r,n,e){const i=zerosMatrix(n,r);let s=1-n%2,o=1-r%2,u=Math.floor((r-1)/2),l=Math.floor((n-1)/2),d=u*u,m=l*l;if(e.filled)for(let y=0;y<=l;y++){let S=Math.floor(Math.sqrt(d-d*y*y/m));for(let X=u-S;X<=u;X++)i[l-y][X]=1,i[l+y+s][X]=1,i[l-y][r-X-1]=1,i[l+y+s][r-X-1]=1}else{for(let y=0;y<=l;y++){let S=Math.floor(Math.sqrt(d-d*y*y/m)),X=u-S;i[l-y][X]=1,i[l+y+s][X]=1,i[l-y][r-X-1]=1,i[l+y+s][r-X-1]=1}for(let y=0;y<=u;y++){let S=Math.floor(Math.sqrt(m-m*y*y/d)),X=l-S;i[X][u-y]=1,i[X][u+y+o]=1,i[n-X-1][u-y]=1,i[n-X-1][u+y+o]=1}}return i}function triangle(r,n,e){if(!e.filled)throw new Error("Non filled triangle is not implemented");const i=zerosMatrix(n,r);for(let s=0;s<n;s++){let o=Math.floor((1-s/n)*r/2);for(let u=o;u<r-o;u++)i[s][u]=1}return i}function paintPoints(r,n={}){let{shape:e}=n;this.checkProcessable("paintPoints",{bitDepth:[8,16]});let i=getColors(Object.assign({},n,{numberColors:r.length})),s=new Shape(e).getPoints(),o=Math.min(this.channels,i[0].length);for(let u=0;u<r.length;u++){let l=i[u%i.length],d=r[u][0],m=r[u][1];for(let y=0;y<s.length;y++){let S=s[y][0],X=s[y][1];if(d+S>=0&&m+X>=0&&d+S<this.width&&m+X<this.height){let he=(d+S+(m+X)*this.width)*this.channels;for(let Ce=0;Ce<o;Ce++)this.data[he+Ce]=l[Ce]}}}return this}function paintPolyline(r,n={}){let{color:e=[this.maxValue,0,0],closed:i=!1}=n;this.checkProcessable("paintPoints",{bitDepth:[1,8,16]});let s=Math.min(this.channels,e.length);for(let o=0;o<r.length-1+i;o++){let u=r[o],l=r[(o+1)%r.length],d=l[0]-u[0],m=l[1]-u[1],y=Math.max(Math.abs(d),Math.abs(m)),S=d/y,X=m/y,he=u[0],Ce=u[1];for(let Ee=0;Ee<=y;Ee++){let xe=Math.round(he),be=Math.round(Ce);if(xe>=0&&be>=0&&xe<this.width&&be<this.height)if(this.bitDepth===1)this.setBitXY(xe,be);else{let we=(xe+be*this.width)*this.channels;for(let ve=0;ve<s;ve++)this.data[we+ve]=e[ve]}he=he+S,Ce=Ce+X}}return this}function paintPolylines(r,n={}){let e=Object.assign({},n);this.checkProcessable("paintPolylines",{bitDepth:[8,16]});let i=getColors(Object.assign({},n,{numberColors:r.length}));for(let s=0;s<r.length;s++)e.color=i[s%i.length],this.paintPolyline(r[s],e);return this}function paintPolygon(r,n={}){let{color:e=[this.maxValue,0,0],filled:i=!1}=n;this.checkProcessable("paintPoints",{bitDepth:[1,8,16]}),n.closed=!0;let s=deleteDouble(r);if(i===!1)return this.paintPolyline(r,n);{let o=Array(this.height);for(let u=0;u<this.height;u++){o[u]=[];for(let l=0;l<this.width;l++)o[u].push(0)}for(let u=0;u<s.length;u++){const l=lineBetweenTwoPoints(s[u],s[(u+1)%s.length]);for(let d=0;d<this.height;d++)for(let m=0;m<this.width;m++)isAtTheRightOfTheLine(m,d,l,this.height)&&(o[d][m]=o[d][m]===0?1:0)}for(let u=0;u<this.height;u++)for(let l=0;l<this.width;l++)if(o[u][l]===1)if(this.bitDepth===1)this.setBitXY(l,u);else{let d=Math.min(this.channels,e.length),m=(l+u*this.width)*this.channels;for(let y=0;y<d;y++)this.data[m+y]=e[y]}return this.paintPolyline(r,n)}}function deleteDouble(r){let n=[];for(let e=0;e<r.length;e++)if(!(r[e][0]===r[(e+1)%r.length][0]&&r[e][1]===r[(e+1)%r.length][1])){if(r[e][0]===r[(e-1+r.length)%r.length][0]&&r[e][1]===r[(e-1+r.length)%r.length][1])continue;if(r[(e+1)%r.length][0]===r[(e-1+r.length)%r.length][0]&&r[(e-1+r.length)%r.length][1]===r[(e+1)%r.length][1])continue;n.push(r[e])}return n}function lineBetweenTwoPoints(r,n){if(r[0]===n[0])return{a:0,b:r[0],vertical:!0};{const e=(n[1]-r[1])/(n[0]-r[0]),i=r[1]-e*r[0];return{a:e,b:i,vertical:!1}}}function isAtTheRightOfTheLine(r,n,e,i){if(e.vertical===!0)return e.b<=r;if(e.a===0)return!1;{const s=(n-e.b)/e.a;return s<r&&s>=0&&s<=i}}function paintPolygons(r,n={}){let e=Object.assign({},n);this.checkProcessable("paintPolygons",{bitDepth:[8,16]});let i=getColors(Object.assign({},n,{numberColors:r.length}));for(let s=0;s<r.length;s++)e.color=i[s%i.length],this.paintPolygon(r[s],e);return this}function getHistogram(r={}){let{maxSlots:n=256,channel:e,useAlpha:i=!0}=r;if(this.checkProcessable("getHistogram",{bitDepth:[1,8,16]}),e===void 0){if(this.components>1)throw new RangeError("You need to define the channel for an image that contains more than one channel");e=0}return getChannelHistogram.call(this,e,{useAlpha:i,maxSlots:n})}function getHistograms(r={}){const{maxSlots:n=256,useAlpha:e=!0}=r;this.checkProcessable("getHistograms",{bitDepth:[8,16]});let i=new Array(e?this.components:this.channels);for(let s=0;s<i.length;s++)i[s]=getChannelHistogram.call(this,s,{useAlpha:e,maxSlots:n});return i}function getChannelHistogram(r,n){let{useAlpha:e,maxSlots:i}=n;if(this.bitDepth===1){let d=[0,0];for(let m=0;m<this.height;m++)for(let y=0;y<this.width;y++){let S=this.getBitXY(m,y);S===0?d[0]+=1:S===1&&(d[1]+=1)}return d}let s=Math.log2(i);if(!isInteger(s))throw new RangeError("maxSlots must be a power of 2, for example: 64, 256, 1024");let o=0;this.bitDepth>s&&(o=this.bitDepth-s);let u=this.data,l=newArray(Math.pow(2,Math.min(this.bitDepth,s)),0);if(e&&this.alpha){let d=this.channels-r-1;for(let m=r;m<u.length;m+=this.channels)l[u[m]>>o]+=u[m+d]/this.maxValue}else for(let d=r;d<u.length;d+=this.channels)l[u[d]>>o]++;return l}function getColorHistogram(r={}){let{useAlpha:n=!0,nbSlots:e=512}=r;this.checkProcessable("getColorHistogram",{bitDepth:[8,16],components:[3]});let i=Math.log(e)/Math.log(8);if(i!==Math.floor(i))throw new RangeError("nbSlots must be a power of 8. Usually 8, 64, 512 or 4096");let s=this.bitDepth-i,o=this.data,u=newArray(Math.pow(8,i),0),l=Math.pow(2,i*2),d=Math.pow(2,i);for(let m=0;m<o.length;m+=this.channels){let y=(o[m]>>s)*l+(o[m+1]>>s)*d+(o[m+2]>>s);n&&this.alpha?u[y]+=o[m+this.channels-1]/this.maxValue:u[y]++}return u}function min(){this.checkProcessable("min",{bitDepth:[8,16,32]});let r=newArray(this.channels,1/0);for(let n=0;n<this.data.length;n+=this.channels)for(let e=0;e<this.channels;e++)this.data[n+e]<r[e]&&(r[e]=this.data[n+e]);return r}function max(){this.checkProcessable("max",{bitDepth:[8,16,32]});let r=newArray(this.channels,-1/0);for(let n=0;n<this.data.length;n+=this.channels)for(let e=0;e<this.channels;e++)this.data[n+e]>r[e]&&(r[e]=this.data[n+e]);return r}function sum(){this.checkProcessable("sum",{bitDepth:[8,16]});let r=newArray(this.channels,0);for(let n=0;n<this.data.length;n+=this.channels)for(let e=0;e<this.channels;e++)r[e]+=this.data[n+e];return r}function getMoment(r=0,n=0){this.checkProcessable("getMoment",{bitDepth:[1]});let e=0;for(let i=0;i<this.width;i++)for(let s=0;s<this.height;s++)this.getBitXY(i,s)===1&&(e+=i**r*s**n);return e}function localMaxima(r={}){let{mask:n,region:e=3,removeClosePoints:i=0,invert:s=!1,maxEquals:o=2}=r,u=this;this.checkProcessable("localMaxima",{bitDepth:[8,16],components:1}),e*=4;let l=s?0:1,d=[1,0,-1,0,1,1,-1,-1,2,0,-2,0,2,2,-2,-2],m=[0,1,0,-1,1,-1,1,-1,0,2,0,-2,2,-2,2,-2],y=e<=8?1:2,S=[];for(let X=y;X<u.height-y;X++)for(let he=y;he<u.width-y;he++){if(n&&n.getBitXY(he,X)!==l)continue;let Ce=0,Ee=0,xe=u.data[he+X*u.width];for(let be=0;be<e;be++)s?u.data[he+d[be]+(X+m[be])*u.width]>xe&&Ce++:u.data[he+d[be]+(X+m[be])*u.width]<xe&&Ce++,u.data[he+d[be]+(X+m[be])*u.width]===xe&&Ee++;Ce+Ee===e&&Ee<=o&&S.push([he,X])}if(i>0)for(let X=0;X<S.length;X++)for(let he=X+1;he<S.length;he++)Math.sqrt(Math.pow(S[X][0]-S[he][0],2)+Math.pow(S[X][1]-S[he][1],2))<i&&(S[X][0]=S[X][0]+S[he][0]>>1,S[X][1]=S[X][1]+S[he][1]>>1,S.splice(he,1),he--);return S}function mean(){let r=this.getHistograms({maxSlots:this.maxValue+1}),n=new Array(r.length);for(let e=0;e<r.length;e++){let i=r[e];n[e]=mean$2(i)}return n}function median(){let r=this.getHistograms({maxSlots:this.maxValue+1}),n=new Array(r.length);for(let e=0;e<r.length;e++){let i=r[e];n[e]=median$2(i)}return n}function points(){this.checkProcessable("points",{bitDepth:[1]});const r=[];for(let n=0;n<this.width;n++)for(let e=0;e<this.height;e++)this.getBitXY(n,e)===1&&r.push([n,e]);return r}function extendedPoints(){this.checkProcessable("extendedPoints",{bitDepth:[1]});const r=[];for(let n=0;n<this.height;n++)for(let e=0;e<this.width;e++)if(this.getBitXY(e,n)===1)for(r.push([e,n]),this.getBitXY(e+1,n)!==1?(r.push([e+1,n]),r.push([e+1,n+1]),this.getBitXY(e,n+1)!==1&&r.push([e,n+1])):this.getBitXY(e,n+1)!==1&&(r.push([e,n+1]),r.push([e+1,n+1]));e<this.width-2&&this.getBitXY(e+1,n)===1&&this.getBitXY(e+2,n)===1;)e++;return r}function getRelativePosition(r,n={}){if(this===r)return[0,0];let e=[0,0],i=this;for(;i;){if(i===r)return e;i.position&&(e[0]+=i.position[0],e[1]+=i.position[1]),i=i.parent}return n.defaultFurther?e:!1}function countAlphaPixels(r={}){let{alpha:n=1}=r;this.checkProcessable("countAlphaPixels",{bitDepth:[8,16],alpha:1});let e=0;if(n!==void 0){for(let i=this.components;i<this.data.length;i+=this.channels)this.data[i]===n&&e++;return e}else return this.size}function monotoneChainConvexHull$1(r,n={}){const{sorted:e}=n;e||(r=r.slice().sort(byXThenY));const i=r.length,s=new Array(i*2);let o=0;for(let l=0;l<i;l++){const d=r[l];for(;o>=2&&cw(s[o-2],s[o-1],d)<=0;)o--;s[o++]=d}const u=o+1;for(let l=i-2;l>=0;l--){const d=r[l];for(;o>=u&&cw(s[o-2],s[o-1],d)<=0;)o--;s[o++]=d}return s.slice(0,o-1)}function cw(r,n,e){return(n[1]-r[1])*(e[0]-r[0])-(n[0]-r[0])*(e[1]-r[1])}function byXThenY(r,n){return r[0]===n[0]?r[1]-n[1]:r[0]-n[0]}function monotoneChainConvexHull(){return monotoneChainConvexHull$1(this.extendedPoints,{sorted:!1})}function round(r){for(let n=0;n<r.length;n++)r[n][0]=Math.round(r[n][0]),r[n][1]=Math.round(r[n][1]);return r}function difference(r,n){return[r[0]-n[0],r[1]-n[1]]}function normalize(r){let n=Math.sqrt(r[0]**2+r[1]**2);return[r[0]/n,r[1]/n]}function rotate(r,n,e){e===void 0&&(e=new Array(n.length));let i=Math.cos(r),s=Math.sin(r);for(let o=0;o<e.length;++o)e[o]=[i*n[o][0]-s*n[o][1],s*n[o][0]+i*n[o][1]];return e}function perimeter(r){let n=0;for(let e=0;e<r.length;e++){let i=r[e][0],s=r[e][1],o=r[e===r.length-1?0:e+1][0],u=r[e===r.length-1?0:e+1][1];n+=Math.sqrt((o-i)**2+(u-s)**2)}return n}function surface(r){let n=0;for(let e=0;e<r.length;e++){let i=r[e][0],s=r[e===r.length-1?0:e+1][1],o=r[e===r.length-1?0:e+1][0],u=r[e][1];n+=i*s*.5,n-=o*u*.5}return Math.abs(n)}function minMax(r){let n=1/0,e=1/0,i=-1/0,s=-1/0;for(let o=0;o<r.length;o++)r[o][0]<n&&(n=r[o][0]),r[o][0]>i&&(i=r[o][0]),r[o][1]<e&&(e=r[o][1]),r[o][1]>s&&(s=r[o][1]);return[[n,e],[i,s]]}function moveToZeroZero(r,n){n===void 0&&(n=new Array(r.length).fill(0).map(()=>[]));let e=minMax(r),i=e[0][0],s=e[0][1];for(let o=0;o<r.length;o++)n[o][0]=r[o][0]-i,n[o][1]=r[o][1]-s;return n}function minimalBoundingRectangle(r={}){const{originalPoints:n=monotoneChainConvexHull.call(this)}=r;if(n.length===0)return[];if(n.length===1)return[n[0],n[0],n[0],n[0]];const e=new Array(n.length);let i=1/0,s=0,o;for(let u=0;u<e.length;u++){let l=getAngle$1(n[u],n[(u+1)%e.length]);rotate(-l,n,e);let d=e[u][0],m=e[u][1],y=e[(u+1)%e.length][0],S=e[(u+1)%e.length][1],X=!0,he=0,Ce=0,Ee=0;for(let ve=0;ve<e.length;ve++){let ke=e[ve][0],De=e[ve][1],Oe=(ke-d)/(y-d);X===!0?(X=!1,he=Oe,Ce=Oe):(Oe<he&&(he=Oe),Oe>Ce&&(Ce=Oe));let Le=(-(y-d)*De+y*m-S*d)/(y-d);Math.abs(Le)>Math.abs(Ee)&&(Ee=Le)}let xe=[d+he*(y-d),m],be=[d+Ce*(y-d),m],we=Math.abs(Ee*(he-Ce)*(y-d));we<i&&(s=l,i=we,o=[xe,be,[be[0],be[1]-Ee],[xe[0],xe[1]-Ee]])}return rotate(s,o,o),o}function getAngle$1(r,n){let e=difference(n,r),i=normalize(e),s=Math.acos(i[0]);return i[1]<0?-s:s}function extend$1(r){let n={inPlace:!0};r.extendMethod("invert",invert),r.extendMethod("abs",abs),r.extendMethod("level",level,n),r.extendMethod("add",add,n),r.extendMethod("subtract",subtract,n),r.extendMethod("subtractImage",subtractImage),r.extendMethod("multiply",multiply,n),r.extendMethod("divide",divide,n),r.extendMethod("hypotenuse",hypotenuse),r.extendMethod("background",background$1),r.extendMethod("flipX",flipX),r.extendMethod("flipY",flipY),r.extendMethod("blurFilter",blurFilter),r.extendMethod("medianFilter",medianFilter),r.extendMethod("gaussianFilter",gaussianFilter),r.extendMethod("sobelFilter",sobelFilter),r.extendMethod("gradientFilter",gradientFilter),r.extendMethod("scharrFilter",scharrFilter),r.extendMethod("dilate",dilate),r.extendMethod("erode",erode),r.extendMethod("open",open),r.extendMethod("close",close),r.extendMethod("topHat",topHat),r.extendMethod("blackHat",blackHat),r.extendMethod("morphologicalGradient",morphologicalGradient),r.extendMethod("warpingFourPoints",warpingFourPoints),r.extendMethod("crop",crop),r.extendMethod("cropAlpha",cropAlpha),r.extendMethod("resize",resize).extendMethod("scale",resize),r.extendMethod("hsv",hsv),r.extendMethod("hsl",hsl$1),r.extendMethod("cmyk",cmyk),r.extendMethod("rgba8",rgba8),r.extendMethod("grey",grey).extendMethod("gray",grey),r.extendMethod("mask",mask),r.extendMethod("pad",pad),r.extendMethod("colorDepth",colorDepth),r.extendMethod("setBorder",setBorder,n),r.extendMethod("rotate",rotate$1),r.extendMethod("rotateLeft",rotateLeft),r.extendMethod("rotateRight",rotateRight),r.extendMethod("insert",insert),r.extendMethod("getRow",getRow),r.extendMethod("getColumn",getColumn),r.extendMethod("getMatrix",getMatrix),r.extendMethod("setMatrix",setMatrix),r.extendMethod("getPixelsArray",getPixelsArray),r.extendMethod("getIntersection",getIntersection),r.extendMethod("getClosestCommonParent",getClosestCommonParent),r.extendMethod("getThreshold",getThreshold),r.extendMethod("split",split),r.extendMethod("getChannel",getChannel),r.extendMethod("combineChannels",combineChannels),r.extendMethod("setChannel",setChannel),r.extendMethod("getSimilarity",getSimilarity),r.extendMethod("getPixelsGrid",getPixelsGrid),r.extendMethod("getBestMatch",getBestMatch),r.extendMethod("cannyEdge",cannyEdge),r.extendMethod("convolution",convolution),r.extendMethod("extract",extract),r.extendMethod("floodFill",floodFill),r.extendMethod("paintLabels",paintLabels,n),r.extendMethod("paintMasks",paintMasks,n),r.extendMethod("paintPoints",paintPoints,n),r.extendMethod("paintPolyline",paintPolyline,n),r.extendMethod("paintPolylines",paintPolylines,n),r.extendMethod("paintPolygon",paintPolygon,n),r.extendMethod("paintPolygons",paintPolygons,n),r.extendMethod("countAlphaPixels",countAlphaPixels),r.extendMethod("monotoneChainConvexHull",monotoneChainConvexHull),r.extendMethod("minimalBoundingRectangle",minimalBoundingRectangle),r.extendMethod("getHistogram",getHistogram).extendProperty("histogram",getHistogram),r.extendMethod("getHistograms",getHistograms).extendProperty("histograms",getHistograms),r.extendMethod("getColorHistogram",getColorHistogram).extendProperty("colorHistogram",getColorHistogram),r.extendMethod("getMin",min).extendProperty("min",min),r.extendMethod("getMax",max).extendProperty("max",max),r.extendMethod("getSum",sum).extendProperty("sum",sum),r.extendMethod("getMoment",getMoment).extendProperty("moment",getMoment),r.extendMethod("getLocalMaxima",localMaxima),r.extendMethod("getMedian",median).extendProperty("median",median),r.extendMethod("getMean",mean).extendProperty("mean",mean),r.extendMethod("getPoints",points).extendProperty("points",points),r.extendMethod("getExtendedPoints",extendedPoints).extendProperty("extendedPoints",extendedPoints),r.extendMethod("getRelativePosition",getRelativePosition)}var quantities$1={exports:{}},quantities=quantities$1.exports,hasRequiredQuantities;function requireQuantities(){return hasRequiredQuantities||(hasRequiredQuantities=1,function(r,n){(function(e,i){r.exports=i()})(quantities,function(){function e(Be){return typeof Be=="string"||Be instanceof String}var i=Number.isFinite||window.isFinite;function s(Be){return i(Be)}function o(Be){return Be}function u(Be){var Pe={};return Be.filter(function(Re){return Pe.hasOwnProperty(Re)?!1:Pe[Re]=!0})}function l(Be,Pe){if(Pe.length!==Be.length)return!1;for(var Re=0;Re<Be.length;Re++)if(Pe[Re].compareArray&&!Pe[Re].compareArray(Be[Re])||Pe[Re]!==Be[Re])return!1;return!0}function d(Be,Pe){Object.keys(Pe).forEach(function(Re){Be[Re]=Pe[Re]})}function m(){for(var Be=1,Pe=0,Re=0;Re<arguments.length;Re++){var Se=arguments[Re];Pe=Pe+X(Se),Be*=Se}return Pe!==0?S(Be,Pe):Be}function y(Be,Pe){if(Pe===0)throw new Error("Divide by zero");var Re=Math.pow(10,X(Pe)),Se=Re/(Re*Pe);return m(Be,Se)}function S(Be,Pe){return Math.round(Be*Math.pow(10,Pe))/Math.pow(10,Pe)}function X(Be){if(!isFinite(Be))return 0;for(var Pe=0;Be%1!==0;)Be*=10,Pe++;return Pe}function he(){var Be;if(!this)return Be=Object.create(he.prototype),he.apply(Be,arguments),Be;Be=Error.apply(this,arguments),this.name="QtyError",this.message=Be.message,this.stack=Be.stack}he.prototype=Object.create(Error.prototype,{constructor:{value:he}});function Ce(Be,Pe){throw new he("Incompatible units: "+Be+" and "+Pe)}var Ee={"<googol>":[["googol"],1e100,"prefix"],"<kibi>":[["Ki","Kibi","kibi"],Math.pow(2,10),"prefix"],"<mebi>":[["Mi","Mebi","mebi"],Math.pow(2,20),"prefix"],"<gibi>":[["Gi","Gibi","gibi"],Math.pow(2,30),"prefix"],"<tebi>":[["Ti","Tebi","tebi"],Math.pow(2,40),"prefix"],"<pebi>":[["Pi","Pebi","pebi"],Math.pow(2,50),"prefix"],"<exi>":[["Ei","Exi","exi"],Math.pow(2,60),"prefix"],"<zebi>":[["Zi","Zebi","zebi"],Math.pow(2,70),"prefix"],"<yebi>":[["Yi","Yebi","yebi"],Math.pow(2,80),"prefix"],"<yotta>":[["Y","Yotta","yotta"],1e24,"prefix"],"<zetta>":[["Z","Zetta","zetta"],1e21,"prefix"],"<exa>":[["E","Exa","exa"],1e18,"prefix"],"<peta>":[["P","Peta","peta"],1e15,"prefix"],"<tera>":[["T","Tera","tera"],1e12,"prefix"],"<giga>":[["G","Giga","giga"],1e9,"prefix"],"<mega>":[["M","Mega","mega"],1e6,"prefix"],"<kilo>":[["k","kilo"],1e3,"prefix"],"<hecto>":[["h","Hecto","hecto"],100,"prefix"],"<deca>":[["da","Deca","deca","deka"],10,"prefix"],"<deci>":[["d","Deci","deci"],.1,"prefix"],"<centi>":[["c","Centi","centi"],.01,"prefix"],"<milli>":[["m","Milli","milli"],.001,"prefix"],"<micro>":[["u","","","Micro","mc","micro"],1e-6,"prefix"],"<nano>":[["n","Nano","nano"],1e-9,"prefix"],"<pico>":[["p","Pico","pico"],1e-12,"prefix"],"<femto>":[["f","Femto","femto"],1e-15,"prefix"],"<atto>":[["a","Atto","atto"],1e-18,"prefix"],"<zepto>":[["z","Zepto","zepto"],1e-21,"prefix"],"<yocto>":[["y","Yocto","yocto"],1e-24,"prefix"],"<1>":[["1","<1>"],1,""],"<meter>":[["m","meter","meters","metre","metres"],1,"length",["<meter>"]],"<inch>":[["in","inch","inches",'"'],.0254,"length",["<meter>"]],"<foot>":[["ft","foot","feet","'"],.3048,"length",["<meter>"]],"<yard>":[["yd","yard","yards"],.9144,"length",["<meter>"]],"<mile>":[["mi","mile","miles"],1609.344,"length",["<meter>"]],"<naut-mile>":[["nmi","naut-mile"],1852,"length",["<meter>"]],"<league>":[["league","leagues"],4828,"length",["<meter>"]],"<furlong>":[["furlong","furlongs"],201.2,"length",["<meter>"]],"<rod>":[["rd","rod","rods"],5.029,"length",["<meter>"]],"<mil>":[["mil","mils"],254e-7,"length",["<meter>"]],"<angstrom>":[["ang","angstrom","angstroms"],1e-10,"length",["<meter>"]],"<fathom>":[["fathom","fathoms"],1.829,"length",["<meter>"]],"<pica>":[["pica","picas"],.00423333333,"length",["<meter>"]],"<point>":[["pt","point","points"],.000352777778,"length",["<meter>"]],"<redshift>":[["z","red-shift","redshift"],1302773e20,"length",["<meter>"]],"<AU>":[["AU","astronomical-unit"],1495979e5,"length",["<meter>"]],"<light-second>":[["ls","light-second"],299792500,"length",["<meter>"]],"<light-minute>":[["lmin","light-minute"],1798755e4,"length",["<meter>"]],"<light-year>":[["ly","light-year"],9460528e9,"length",["<meter>"]],"<parsec>":[["pc","parsec","parsecs"],3085678e10,"length",["<meter>"]],"<datamile>":[["DM","datamile"],1828.8,"length",["<meter>"]],"<kilogram>":[["kg","kilogram","kilograms"],1,"mass",["<kilogram>"]],"<AMU>":[["u","AMU","amu"],1660538921e-36,"mass",["<kilogram>"]],"<dalton>":[["Da","Dalton","Daltons","dalton","daltons"],1660538921e-36,"mass",["<kilogram>"]],"<slug>":[["slug","slugs"],14.5939029,"mass",["<kilogram>"]],"<short-ton>":[["tn","ton","short-ton"],907.18474,"mass",["<kilogram>"]],"<metric-ton>":[["t","tonne","metric-ton"],1e3,"mass",["<kilogram>"]],"<carat>":[["ct","carat","carats"],2e-4,"mass",["<kilogram>"]],"<pound>":[["lbs","lb","pound","pounds","#"],.45359237,"mass",["<kilogram>"]],"<ounce>":[["oz","ounce","ounces"],.0283495231,"mass",["<kilogram>"]],"<gram>":[["g","gram","grams","gramme","grammes"],.001,"mass",["<kilogram>"]],"<grain>":[["grain","grains","gr"],6479891e-11,"mass",["<kilogram>"]],"<dram>":[["dram","drams","dr"],.0017718452,"mass",["<kilogram>"]],"<stone>":[["stone","stones","st"],6.35029318,"mass",["<kilogram>"]],"<hectare>":[["hectare"],1e4,"area",["<meter>","<meter>"]],"<acre>":[["acre","acres"],4046.85642,"area",["<meter>","<meter>"]],"<sqft>":[["sqft"],1,"area",["<foot>","<foot>"]],"<liter>":[["l","L","liter","liters","litre","litres"],.001,"volume",["<meter>","<meter>","<meter>"]],"<gallon>":[["gal","gallon","gallons"],.0037854118,"volume",["<meter>","<meter>","<meter>"]],"<gallon-imp>":[["galimp","gallon-imp","gallons-imp"],.00454609,"volume",["<meter>","<meter>","<meter>"]],"<quart>":[["qt","quart","quarts"],.00094635295,"volume",["<meter>","<meter>","<meter>"]],"<pint>":[["pt","pint","pints"],.000473176475,"volume",["<meter>","<meter>","<meter>"]],"<pint-imp>":[["ptimp","pint-imp","pints-imp"],.00056826125,"volume",["<meter>","<meter>","<meter>"]],"<cup>":[["cu","cup","cups"],.000236588238,"volume",["<meter>","<meter>","<meter>"]],"<fluid-ounce>":[["floz","fluid-ounce","fluid-ounces"],295735297e-13,"volume",["<meter>","<meter>","<meter>"]],"<fluid-ounce-imp>":[["flozimp","floz-imp","fluid-ounce-imp","fluid-ounces-imp"],284130625e-13,"volume",["<meter>","<meter>","<meter>"]],"<tablespoon>":[["tb","tbsp","tbs","tablespoon","tablespoons"],147867648e-13,"volume",["<meter>","<meter>","<meter>"]],"<teaspoon>":[["tsp","teaspoon","teaspoons"],492892161e-14,"volume",["<meter>","<meter>","<meter>"]],"<bushel>":[["bu","bsh","bushel","bushels"],.035239072,"volume",["<meter>","<meter>","<meter>"]],"<oilbarrel>":[["bbl","oilbarrel","oilbarrels","oil-barrel","oil-barrels"],.158987294928,"volume",["<meter>","<meter>","<meter>"]],"<beerbarrel>":[["bl","bl-us","beerbarrel","beerbarrels","beer-barrel","beer-barrels"],.1173477658,"volume",["<meter>","<meter>","<meter>"]],"<beerbarrel-imp>":[["blimp","bl-imp","beerbarrel-imp","beerbarrels-imp","beer-barrel-imp","beer-barrels-imp"],.16365924,"volume",["<meter>","<meter>","<meter>"]],"<kph>":[["kph"],.277777778,"speed",["<meter>"],["<second>"]],"<mph>":[["mph"],.44704,"speed",["<meter>"],["<second>"]],"<knot>":[["kt","kn","kts","knot","knots"],.514444444,"speed",["<meter>"],["<second>"]],"<fps>":[["fps"],.3048,"speed",["<meter>"],["<second>"]],"<gee>":[["gee"],9.80665,"acceleration",["<meter>"],["<second>","<second>"]],"<Gal>":[["Gal"],.01,"acceleration",["<meter>"],["<second>","<second>"]],"<kelvin>":[["degK","kelvin"],1,"temperature",["<kelvin>"]],"<celsius>":[["degC","celsius","celsius","centigrade"],1,"temperature",["<kelvin>"]],"<fahrenheit>":[["degF","fahrenheit"],5/9,"temperature",["<kelvin>"]],"<rankine>":[["degR","rankine"],5/9,"temperature",["<kelvin>"]],"<temp-K>":[["tempK","temp-K"],1,"temperature",["<temp-K>"]],"<temp-C>":[["tempC","temp-C"],1,"temperature",["<temp-K>"]],"<temp-F>":[["tempF","temp-F"],5/9,"temperature",["<temp-K>"]],"<temp-R>":[["tempR","temp-R"],5/9,"temperature",["<temp-K>"]],"<second>":[["s","sec","secs","second","seconds"],1,"time",["<second>"]],"<minute>":[["min","mins","minute","minutes"],60,"time",["<second>"]],"<hour>":[["h","hr","hrs","hour","hours"],3600,"time",["<second>"]],"<day>":[["d","day","days"],3600*24,"time",["<second>"]],"<week>":[["wk","week","weeks"],7*3600*24,"time",["<second>"]],"<fortnight>":[["fortnight","fortnights"],1209600,"time",["<second>"]],"<year>":[["y","yr","year","years","annum"],31556926,"time",["<second>"]],"<decade>":[["decade","decades"],315569260,"time",["<second>"]],"<century>":[["century","centuries"],3155692600,"time",["<second>"]],"<pascal>":[["Pa","pascal","Pascal"],1,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<bar>":[["bar","bars"],1e5,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<mmHg>":[["mmHg"],133.322368,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<inHg>":[["inHg"],3386.3881472,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<torr>":[["torr"],133.322368,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<atm>":[["atm","ATM","atmosphere","atmospheres"],101325,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<psi>":[["psi"],6894.76,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<cmh2o>":[["cmH2O","cmh2o"],98.0638,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<inh2o>":[["inH2O","inh2o"],249.082052,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<poise>":[["P","poise"],.1,"viscosity",["<kilogram>"],["<meter>","<second>"]],"<stokes>":[["St","stokes"],1e-4,"viscosity",["<meter>","<meter>"],["<second>"]],"<mole>":[["mol","mole"],1,"substance",["<mole>"]],"<molar>":[["M","molar"],1e3,"molar_concentration",["<mole>"],["<meter>","<meter>","<meter>"]],"<wtpercent>":[["wt%","wtpercent"],10,"molar_concentration",["<kilogram>"],["<meter>","<meter>","<meter>"]],"<katal>":[["kat","katal","Katal"],1,"activity",["<mole>"],["<second>"]],"<unit>":[["U","enzUnit","unit"],16667e-19,"activity",["<mole>"],["<second>"]],"<farad>":[["F","farad","Farad"],1,"capacitance",["<second>","<second>","<second>","<second>","<ampere>","<ampere>"],["<meter>","<meter>","<kilogram>"]],"<coulomb>":[["C","coulomb","Coulomb"],1,"charge",["<ampere>","<second>"]],"<Ah>":[["Ah"],3600,"charge",["<ampere>","<second>"]],"<ampere>":[["A","Ampere","ampere","amp","amps"],1,"current",["<ampere>"]],"<siemens>":[["S","Siemens","siemens"],1,"conductance",["<second>","<second>","<second>","<ampere>","<ampere>"],["<kilogram>","<meter>","<meter>"]],"<henry>":[["H","Henry","henry"],1,"inductance",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<ampere>","<ampere>"]],"<volt>":[["V","Volt","volt","volts"],1,"potential",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<second>","<ampere>"]],"<ohm>":[["Ohm","ohm","",""],1,"resistance",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<second>","<ampere>","<ampere>"]],"<weber>":[["Wb","weber","webers"],1,"magnetism",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<ampere>"]],"<tesla>":[["T","tesla","teslas"],1,"magnetism",["<kilogram>"],["<second>","<second>","<ampere>"]],"<gauss>":[["G","gauss"],1e-4,"magnetism",["<kilogram>"],["<second>","<second>","<ampere>"]],"<maxwell>":[["Mx","maxwell","maxwells"],1e-8,"magnetism",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<ampere>"]],"<oersted>":[["Oe","oersted","oersteds"],250/Math.PI,"magnetism",["<ampere>"],["<meter>"]],"<joule>":[["J","joule","Joule","joules","Joules"],1,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<erg>":[["erg","ergs"],1e-7,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<btu>":[["BTU","btu","BTUs"],1055.056,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<calorie>":[["cal","calorie","calories"],4.184,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<Calorie>":[["Cal","Calorie","Calories"],4184,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<therm-US>":[["th","therm","therms","Therm","therm-US"],105480400,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<Wh>":[["Wh"],3600,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<electronvolt>":[["eV","electronvolt","electronvolts"],1602176634e-28,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<newton>":[["N","Newton","newton"],1,"force",["<kilogram>","<meter>"],["<second>","<second>"]],"<dyne>":[["dyn","dyne"],1e-5,"force",["<kilogram>","<meter>"],["<second>","<second>"]],"<pound-force>":[["lbf","pound-force"],4.448222,"force",["<kilogram>","<meter>"],["<second>","<second>"]],"<hertz>":[["Hz","hertz","Hertz"],1,"frequency",["<1>"],["<second>"]],"<radian>":[["rad","radian","radians"],1,"angle",["<radian>"]],"<degree>":[["deg","degree","degrees"],Math.PI/180,"angle",["<radian>"]],"<arcminute>":[["arcmin","arcminute","arcminutes"],Math.PI/10800,"angle",["<radian>"]],"<arcsecond>":[["arcsec","arcsecond","arcseconds"],Math.PI/648e3,"angle",["<radian>"]],"<gradian>":[["gon","grad","gradian","grads"],Math.PI/200,"angle",["<radian>"]],"<steradian>":[["sr","steradian","steradians"],1,"solid_angle",["<steradian>"]],"<rotation>":[["rotation"],2*Math.PI,"angle",["<radian>"]],"<rpm>":[["rpm"],2*Math.PI/60,"angular_velocity",["<radian>"],["<second>"]],"<byte>":[["B","byte","bytes"],1,"information",["<byte>"]],"<bit>":[["b","bit","bits"],.125,"information",["<byte>"]],"<Bps>":[["Bps"],1,"information_rate",["<byte>"],["<second>"]],"<bps>":[["bps"],.125,"information_rate",["<byte>"],["<second>"]],"<dollar>":[["USD","dollar"],1,"currency",["<dollar>"]],"<cents>":[["cents"],.01,"currency",["<dollar>"]],"<candela>":[["cd","candela"],1,"luminosity",["<candela>"]],"<lumen>":[["lm","lumen"],1,"luminous_power",["<candela>","<steradian>"]],"<lux>":[["lux"],1,"illuminance",["<candela>","<steradian>"],["<meter>","<meter>"]],"<watt>":[["W","watt","watts"],1,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<volt-ampere>":[["VA","volt-ampere"],1,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<volt-ampere-reactive>":[["var","Var","VAr","VAR","volt-ampere-reactive"],1,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<horsepower>":[["hp","horsepower"],745.699872,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<gray>":[["Gy","gray","grays"],1,"radiation",["<meter>","<meter>"],["<second>","<second>"]],"<roentgen>":[["R","roentgen"],.00933,"radiation",["<meter>","<meter>"],["<second>","<second>"]],"<sievert>":[["Sv","sievert","sieverts"],1,"radiation",["<meter>","<meter>"],["<second>","<second>"]],"<becquerel>":[["Bq","becquerel","becquerels"],1,"radiation",["<1>"],["<second>"]],"<curie>":[["Ci","curie","curies"],37e9,"radiation",["<1>"],["<second>"]],"<cpm>":[["cpm"],1/60,"rate",["<count>"],["<second>"]],"<dpm>":[["dpm"],1/60,"rate",["<count>"],["<second>"]],"<bpm>":[["bpm"],1/60,"rate",["<count>"],["<second>"]],"<dot>":[["dot","dots"],1,"resolution",["<each>"]],"<pixel>":[["pixel","px"],1,"resolution",["<each>"]],"<ppi>":[["ppi"],1,"resolution",["<pixel>"],["<inch>"]],"<dpi>":[["dpi"],1,"typography",["<dot>"],["<inch>"]],"<cell>":[["cells","cell"],1,"counting",["<each>"]],"<each>":[["each"],1,"counting",["<each>"]],"<count>":[["count"],1,"counting",["<each>"]],"<base-pair>":[["bp","base-pair"],1,"counting",["<each>"]],"<nucleotide>":[["nt","nucleotide"],1,"counting",["<each>"]],"<molecule>":[["molecule","molecules"],1,"counting",["<1>"]],"<dozen>":[["doz","dz","dozen"],12,"prefix_only",["<each>"]],"<percent>":[["%","percent"],.01,"prefix_only",["<1>"]],"<ppm>":[["ppm"],1e-6,"prefix_only",["<1>"]],"<ppb>":[["ppb"],1e-9,"prefix_only",["<1>"]],"<ppt>":[["ppt"],1e-12,"prefix_only",["<1>"]],"<ppq>":[["ppq"],1e-15,"prefix_only",["<1>"]],"<gross>":[["gr","gross"],144,"prefix_only",["<dozen>","<dozen>"]],"<decibel>":[["dB","decibel","decibels"],1,"logarithmic",["<decibel>"]]},xe=["<meter>","<kilogram>","<second>","<mole>","<ampere>","<radian>","<kelvin>","<temp-K>","<byte>","<dollar>","<candela>","<each>","<steradian>","<decibel>"],be="<1>",we=[be];function ve(Be,Pe){var Re=Pe[1],Se=Pe[3]||[],Te=Pe[4]||[];if(!s(Re))throw new he(Be+": Invalid unit definition. 'scalar' must be a number");Se.forEach(function(Fe){if(Ee[Fe]===void 0)throw new he(Be+": Invalid unit definition. Unit "+Fe+" in 'numerator' is not recognized")}),Te.forEach(function(Fe){if(Ee[Fe]===void 0)throw new he(Be+": Invalid unit definition. Unit "+Fe+" in 'denominator' is not recognized")})}var ke={},De={},Oe={},Le={},Ae={};for(var Ie in Ee)if(Ee.hasOwnProperty(Ie)){var Ue=Ee[Ie];if(Ue[2]==="prefix"){ke[Ie]=Ue[1];for(var ze=0;ze<Ue[0].length;ze++)De[Ue[0][ze]]=Ie}else{ve(Ie,Ue),Oe[Ie]={scalar:Ue[1],numerator:Ue[3],denominator:Ue[4]};for(var Ye=0;Ye<Ue[0].length;Ye++)Le[Ue[0][Ye]]=Ie}Ae[Ie]=Ue[0][0]}function Xe(Be){var Pe,Re=[],Se=Object.keys(Ee);if(typeof Be>"u")for(Pe=0;Pe<Se.length;Pe++)["","prefix"].indexOf(Ee[Se[Pe]][2])===-1&&Re.push(Se[Pe].substr(1,Se[Pe].length-2));else{if(this.getKinds().indexOf(Be)===-1)throw new he("Kind not recognized");for(Pe=0;Pe<Se.length;Pe++)Ee[Se[Pe]][2]===Be&&Re.push(Se[Pe].substr(1,Se[Pe].length-2))}return Re.sort(function(Te,Fe){return Te.toLowerCase()<Fe.toLowerCase()?-1:Te.toLowerCase()>Fe.toLowerCase()?1:0})}function tt(Be){if(!Le[Be])throw new he("Unit not recognized");return Ee[Le[Be]][0]}var lt=["length","time","temperature","mass","current","substance","luminosity","currency","information","angle"];function _t(){if(this.signature)return this.signature;for(var Be=bt.call(this),Pe=0;Pe<Be.length;Pe++)Be[Pe]*=Math.pow(20,Pe);return Be.reduce(function(Re,Se){return Re+Se},0)}function bt(){if(!this.isBase())return bt.call(this.toBase());for(var Be=new Array(lt.length),Pe=0;Pe<Be.length;Pe++)Be[Pe]=0;for(var Re,Se,Te=0;Te<this.numerator.length;Te++)(Re=Ee[this.numerator[Te]])&&(Se=lt.indexOf(Re[2]),Se>=0&&(Be[Se]=Be[Se]+1));for(var Fe=0;Fe<this.denominator.length;Fe++)(Re=Ee[this.denominator[Fe]])&&(Se=lt.indexOf(Re[2]),Se>=0&&(Be[Se]=Be[Se]-1));return Be}var rt="[+-]",He="\\d+",We=rt+"?"+He,qe="\\."+He,Ke="(?:"+He+"(?:"+qe+")?)|(?:"+qe+")",st="[Ee]"+We,ut="(?:"+Ke+")(?:"+st+")?",nt=rt+"?\\s*"+ut,vt="("+nt+")?\\s*([^/]*)(?:/(.+))?",it=new RegExp("^"+vt+"$"),Ve="\\^|\\*{2}",ht="[01234]",ct=new RegExp("([^ \\*\\d]+?)(?:"+Ve+")?(-?"+ht+"(?![a-zA-Z]))"),St=new RegExp("([^ \\*\\d]+?)(?:"+Ve+")?("+ht+"(?![a-zA-Z]))");function Ct(Be){e(Be)||(Be=Be.toString()),Be=Be.trim();var Pe=it.exec(Be);if(!Pe)throw new he(Be+": Quantity not recognized");var Re=Pe[1];Re?(Re=Re.replace(/\s/g,""),this.scalar=parseFloat(Re)):this.scalar=1;for(var Se=Pe[2],Te=Pe[3],Fe,Ge,Je;Pe=ct.exec(Se);){if(Fe=parseFloat(Pe[2]),isNaN(Fe))throw new he("Unit exponent is not a number");if(Fe===0&&!Lt.test(Pe[1]))throw new he("Unit not recognized");Ge=Pe[1]+" ",Je="";for(var Qe=0;Qe<Math.abs(Fe);Qe++)Je+=Ge;Fe>=0?Se=Se.replace(Pe[0],Je):(Te=Te?Te+Je:Je,Se=Se.replace(Pe[0],""))}for(;Pe=St.exec(Te);){if(Fe=parseFloat(Pe[2]),isNaN(Fe))throw new he("Unit exponent is not a number");if(Fe===0&&!Lt.test(Pe[1]))throw new he("Unit not recognized");Ge=Pe[1]+" ",Je="";for(var et=0;et<Fe;et++)Je+=Ge;Te=Te.replace(Pe[0],Je)}Se&&(this.numerator=qt(Se.trim())),Te&&(this.denominator=qt(Te.trim()))}var Dt=Object.keys(De).sort(function(Be,Pe){return Pe.length-Be.length}).join("|"),Tt=Object.keys(Le).sort(function(Be,Pe){return Pe.length-Be.length}).join("|"),At="\\b|$",sr="("+Dt+")??("+Tt+")(?:"+At+")",Lt=new RegExp("^\\s*("+sr+"[\\s\\*]*)+$"),Kt=new RegExp(sr,"g"),yt={};function qt(Be){var Pe=yt[Be];if(Pe)return Pe;var Re,Se=[];if(!Lt.test(Be))throw new he("Unit not recognized");for(;Re=Kt.exec(Be);)Se.push(Re.slice(1));return Se=Se.map(function(Te){return De[Te[0]]?[De[Te[0]],Le[Te[1]]]:[Le[Te[1]]]}),Se=Se.reduce(function(Te,Fe){return Te.concat(Fe)},[]),Se=Se.filter(function(Te){return Te}),yt[Be]=Se,Se}function Qt(Be){if(!e(Be))throw new he("Argument should be a string");try{return this(Be)}catch{return null}}function rr(Be){return Be instanceof It}function It(Be,Pe){if(_r.apply(null,arguments),!rr(this))return new It(Be,Pe);if(this.scalar=null,this.baseScalar=null,this.signature=null,this._conversionCache={},this.numerator=we,this.denominator=we,cr(Be)?(this.scalar=Be.scalar,this.numerator=Be.numerator&&Be.numerator.length!==0?Be.numerator:we,this.denominator=Be.denominator&&Be.denominator.length!==0?Be.denominator:we):Pe?(Ct.call(this,Pe),this.scalar=Be):Ct.call(this,Be),this.denominator.join("*").indexOf("temp")>=0)throw new he("Cannot divide with temperatures");if(this.numerator.join("*").indexOf("temp")>=0){if(this.numerator.length>1)throw new he("Cannot multiply by temperatures");if(!l(this.denominator,we))throw new he("Cannot divide with temperatures")}if(this.initValue=Be,Vt.call(this),this.isTemperature()&&this.baseScalar<0)throw new he("Temperatures must not be less than absolute zero")}It.prototype={constructor:It};function _r(Be,Pe){if(Pe){if(!(s(Be)&&e(Pe)))throw new he("Only number accepted as initialization value when units are explicitly provided")}else if(!(e(Be)||s(Be)||rr(Be)||cr(Be)))throw new he("Only string, number or quantity accepted as single initialization value")}function cr(Be){return Be&&typeof Be=="object"&&Be.hasOwnProperty("scalar")}function Vt(){if(this.baseScalar)return this.baseScalar;if(this.isBase())this.baseScalar=this.scalar,this.signature=_t.call(this);else{var Be=this.toBase();this.baseScalar=Be.scalar,this.signature=Be.signature}}var Gt={"-312078":"elastance","-312058":"resistance","-312038":"inductance","-152058":"potential","-152040":"magnetism","-152038":"magnetism","-7997":"specific_volume","-79":"snap","-59":"jolt","-39":"acceleration","-38":"radiation","-20":"frequency","-19":"speed","-18":"viscosity","-17":"volumetric_flow","-1":"wavenumber",0:"unitless",1:"length",2:"area",3:"volume",20:"time",400:"temperature",7941:"yank",7942:"power",7959:"pressure",7961:"force",7962:"energy",7979:"viscosity",7981:"momentum",7982:"angular_momentum",7997:"density",7998:"area_density",8e3:"mass",152020:"radiation_exposure",159999:"magnetism",16e4:"current",160020:"charge",312058:"conductance",312078:"capacitance",3199980:"activity",3199997:"molar_concentration",32e5:"substance",63999998:"illuminance",64e6:"luminous_power",128e7:"currency","25599999980":"information_rate","25600000000":"information","511999999980":"angular_velocity","512000000000":"angle"};function er(){return u(Object.keys(Gt).map(function(Be){return Gt[Be]}))}It.prototype.kind=function(){return Gt[this.signature.toString()]},d(It.prototype,{isDegrees:function(){return(this.signature===null||this.signature===400)&&this.numerator.length===1&&l(this.denominator,we)&&(this.numerator[0].match(/<temp-[CFRK]>/)||this.numerator[0].match(/<(kelvin|celsius|rankine|fahrenheit)>/))},isTemperature:function(){return this.isDegrees()&&this.numerator[0].match(/<temp-[CFRK]>/)}});function Yt(Be,Pe){var Re=Be.units(),Se=Pe.to(Re),Te=It(Jt(Re));return It({scalar:Be.scalar-Se.scalar,numerator:Te.numerator,denominator:Te.denominator})}function ar(Be,Pe){var Re=Pe.to(Jt(Be.units()));return It({scalar:Be.scalar-Re.scalar,numerator:Be.numerator,denominator:Be.denominator})}function yr(Be,Pe){var Re=Pe.to(Jt(Be.units()));return It({scalar:Be.scalar+Re.scalar,numerator:Be.numerator,denominator:Be.denominator})}function Jt(Be){if(Be==="tempK")return"degK";if(Be==="tempC")return"degC";if(Be==="tempF")return"degF";if(Be==="tempR")return"degR";throw new he("Unknown type for temp conversion from: "+Be)}function br(Be,Pe){var Re=Ot(Be),Se=Pe.units(),Te;if(Se==="degK")Te=Re.scalar;else if(Se==="degC")Te=Re.scalar;else if(Se==="degF")Te=Re.scalar*9/5;else if(Se==="degR")Te=Re.scalar*9/5;else throw new he("Unknown type for degree conversion to: "+Se);return It({scalar:Te,numerator:Pe.numerator,denominator:Pe.denominator})}function Ot(Be){var Pe=Be.units(),Re;if(Pe.match(/(deg)[CFRK]/))Re=Be.baseScalar;else if(Pe==="tempK")Re=Be.scalar;else if(Pe==="tempC")Re=Be.scalar;else if(Pe==="tempF")Re=Be.scalar*5/9;else if(Pe==="tempR")Re=Be.scalar*5/9;else throw new he("Unknown type for temp conversion from: "+Pe);return It({scalar:Re,numerator:["<kelvin>"],denominator:we})}function lr(Be,Pe){var Re=Pe.units(),Se;if(Re==="tempK")Se=Be.baseScalar;else if(Re==="tempC")Se=Be.baseScalar-273.15;else if(Re==="tempF")Se=Be.baseScalar*9/5-459.67;else if(Re==="tempR")Se=Be.baseScalar*9/5;else throw new he("Unknown type for temp conversion to: "+Re);return It({scalar:Se,numerator:Pe.numerator,denominator:Pe.denominator})}function hr(Be){var Pe=Be.units(),Re;if(Pe.match(/(deg)[CFRK]/))Re=Be.baseScalar;else if(Pe==="tempK")Re=Be.scalar;else if(Pe==="tempC")Re=Be.scalar+273.15;else if(Pe==="tempF")Re=(Be.scalar+459.67)*5/9;else if(Pe==="tempR")Re=Be.scalar*5/9;else throw new he("Unknown type for temp conversion from: "+Pe);return It({scalar:Re,numerator:["<temp-K>"],denominator:we})}d(It.prototype,{to:function(Be){var Pe,Re;if(Be==null)return this;if(!e(Be))return this.to(Be.units());if(Pe=this._conversionCache[Be],Pe)return Pe;if(Re=It(Be),Re.units()===this.units())return this;if(!this.isCompatible(Re))this.isInverse(Re)?Re=this.inverse().to(Be):Ce(this.units(),Re.units());else if(Re.isTemperature())Re=lr(this,Re);else if(Re.isDegrees())Re=br(this,Re);else{var Se=y(this.baseScalar,Re.baseScalar);Re=It({scalar:Se,numerator:Re.numerator,denominator:Re.denominator})}return this._conversionCache[Be]=Re,Re},toBase:function(){if(this.isBase())return this;if(this.isTemperature())return hr(this);var Be=kt[this.units()];return Be||(Be=Xt(this.numerator,this.denominator),kt[this.units()]=Be),Be.mul(this.scalar)},toFloat:function(){if(this.isUnitless())return this.scalar;throw new he("Can't convert to Float unless unitless.  Use Unit#scalar")},toPrec:function(Be){if(e(Be)&&(Be=It(Be)),s(Be)&&(Be=It(Be+" "+this.units())),this.isUnitless()?Be.isUnitless()||Ce(this.units(),Be.units()):Be=Be.to(this.units()),Be.scalar===0)throw new he("Divide by zero");var Pe=m(Math.round(this.scalar/Be.scalar),Be.scalar);return It(Pe+this.units())}});function Ft(Be,Pe){var Re=It(Be),Se=It(Pe);if(Re.eq(Se))return o;var Te;return Re.isTemperature()?Te=function(Fe){return Re.mul(Fe).to(Se).scalar}:Te=function(Fe){return Fe*Re.baseScalar/Se.baseScalar},function(Ge){var Je,Qe,et;if(Array.isArray(Ge)){for(Qe=Ge.length,et=[],Je=0;Je<Qe;Je++)et.push(Te(Ge[Je]));return et}else return Te(Ge)}}var kt={};function Xt(Be,Pe){for(var Re=[],Se=[],Te=1,Fe,Ge=0;Ge<Be.length;Ge++)Fe=Be[Ge],ke[Fe]?Te=m(Te,ke[Fe]):Oe[Fe]&&(Te*=Oe[Fe].scalar,Oe[Fe].numerator&&Re.push(Oe[Fe].numerator),Oe[Fe].denominator&&Se.push(Oe[Fe].denominator));for(var Je=0;Je<Pe.length;Je++)Fe=Pe[Je],ke[Fe]?Te/=ke[Fe]:Oe[Fe]&&(Te/=Oe[Fe].scalar,Oe[Fe].numerator&&Se.push(Oe[Fe].numerator),Oe[Fe].denominator&&Re.push(Oe[Fe].denominator));return Re=Re.reduce(function(Qe,et){return Qe.concat(et)},[]),Se=Se.reduce(function(Qe,et){return Qe.concat(et)},[]),It({scalar:Te,numerator:Re,denominator:Se})}It.parse=Qt,It.getUnits=Xe,It.getAliases=tt,It.mulSafe=m,It.divSafe=y,It.getKinds=er,It.swiftConverter=Ft,It.Error=he,d(It.prototype,{add:function(Be){if(e(Be)&&(Be=It(Be)),this.isCompatible(Be)||Ce(this.units(),Be.units()),this.isTemperature()&&Be.isTemperature())throw new he("Cannot add two temperatures");return this.isTemperature()?yr(this,Be):Be.isTemperature()?yr(Be,this):It({scalar:this.scalar+Be.to(this).scalar,numerator:this.numerator,denominator:this.denominator})},sub:function(Be){if(e(Be)&&(Be=It(Be)),this.isCompatible(Be)||Ce(this.units(),Be.units()),this.isTemperature()&&Be.isTemperature())return Yt(this,Be);if(this.isTemperature())return ar(this,Be);if(Be.isTemperature())throw new he("Cannot subtract a temperature from a differential degree unit");return It({scalar:this.scalar-Be.to(this).scalar,numerator:this.numerator,denominator:this.denominator})},mul:function(Be){if(s(Be))return It({scalar:m(this.scalar,Be),numerator:this.numerator,denominator:this.denominator});if(e(Be)&&(Be=It(Be)),(this.isTemperature()||Be.isTemperature())&&!(this.isUnitless()||Be.isUnitless()))throw new he("Cannot multiply by temperatures");var Pe=this,Re=Be;Pe.isCompatible(Re)&&Pe.signature!==400&&(Re=Re.to(Pe));var Se=wr(Pe.numerator,Pe.denominator,Re.numerator,Re.denominator);return It({scalar:m(Pe.scalar,Re.scalar,Se[2]),numerator:Se[0],denominator:Se[1]})},div:function(Be){if(s(Be)){if(Be===0)throw new he("Divide by zero");return It({scalar:this.scalar/Be,numerator:this.numerator,denominator:this.denominator})}else e(Be)&&(Be=It(Be));if(Be.scalar===0)throw new he("Divide by zero");if(Be.isTemperature())throw new he("Cannot divide with temperatures");if(this.isTemperature()&&!Be.isUnitless())throw new he("Cannot divide with temperatures");var Pe=this,Re=Be;Pe.isCompatible(Re)&&Pe.signature!==400&&(Re=Re.to(Pe));var Se=wr(Pe.numerator,Pe.denominator,Re.denominator,Re.numerator);return It({scalar:m(Pe.scalar,Se[2])/Re.scalar,numerator:Se[0],denominator:Se[1]})},inverse:function(){if(this.isTemperature())throw new he("Cannot divide with temperatures");if(this.scalar===0)throw new he("Divide by zero");return It({scalar:1/this.scalar,numerator:this.denominator,denominator:this.numerator})}});function wr(Be,Pe,Re,Se){function Te(Bt){return Bt!==be}Be=Be.filter(Te),Re=Re.filter(Te),Pe=Pe.filter(Te),Se=Se.filter(Te);var Fe={};function Ge(Bt,wt){for(var Mt,Zt,ft,Nt=0;Nt<Bt.length;Nt++)if(ke[Bt[Nt]]?(Mt=Bt[Nt+1],Zt=Bt[Nt],ft=ke[Zt],Nt++):(Mt=Bt[Nt],Zt=null,ft=1),Mt&&Mt!==be)if(Fe[Mt]){Fe[Mt][0]+=wt;var ir=Fe[Mt][2]?ke[Fe[Mt][2]]:1;Fe[Mt][wt===1?3:4]*=y(ft,ir)}else Fe[Mt]=[wt,Mt,Zt,1,1]}Ge(Be,1),Ge(Pe,-1),Ge(Re,1),Ge(Se,-1);var Je=[],Qe=[],et=1;for(var pt in Fe)if(Fe.hasOwnProperty(pt)){var at=Fe[pt],Pt;if(at[0]>0)for(Pt=0;Pt<at[0];Pt++)Je.push(at[2]===null?at[1]:[at[2],at[1]]);else if(at[0]<0)for(Pt=0;Pt<-at[0];Pt++)Qe.push(at[2]===null?at[1]:[at[2],at[1]]);et*=y(at[3],at[4])}return Je.length===0&&(Je=we),Qe.length===0&&(Qe=we),Je=Je.reduce(function(Bt,wt){return Bt.concat(wt)},[]),Qe=Qe.reduce(function(Bt,wt){return Bt.concat(wt)},[]),[Je,Qe,et]}d(It.prototype,{eq:function(Be){return this.compareTo(Be)===0},lt:function(Be){return this.compareTo(Be)===-1},lte:function(Be){return this.eq(Be)||this.lt(Be)},gt:function(Be){return this.compareTo(Be)===1},gte:function(Be){return this.eq(Be)||this.gt(Be)},compareTo:function(Be){if(e(Be))return this.compareTo(It(Be));if(this.isCompatible(Be)||Ce(this.units(),Be.units()),this.baseScalar<Be.baseScalar)return-1;if(this.baseScalar===Be.baseScalar)return 0;if(this.baseScalar>Be.baseScalar)return 1},same:function(Be){return this.scalar===Be.scalar&&this.units()===Be.units()}}),d(It.prototype,{isUnitless:function(){return[this.numerator,this.denominator].every(function(Be){return l(Be,we)})},isCompatible:function(Be){return e(Be)?this.isCompatible(It(Be)):rr(Be)&&Be.signature!==void 0?this.signature===Be.signature:!1},isInverse:function(Be){return this.inverse().isCompatible(Be)},isBase:function(){return this._isBase!==void 0?this._isBase:this.isDegrees()&&this.numerator[0].match(/<(kelvin|temp-K)>/)?(this._isBase=!0,this._isBase):(this.numerator.concat(this.denominator).forEach(function(Be){Be!==be&&xe.indexOf(Be)===-1&&(this._isBase=!1)},this),this._isBase===!1?this._isBase:(this._isBase=!0,this._isBase))}});function fr(){}fr.prototype.get=function(Be){return arguments.length>1&&(Be=Array.apply(null,arguments)),Be.reduce(function(Pe,Re,Se){if(Pe){var Te=Pe[Re];return Se===Be.length-1?Te?Te.data:void 0:Te}},this)},fr.prototype.set=function(Be,Pe){return arguments.length>2&&(Be=Array.prototype.slice.call(arguments,0,-1),Pe=arguments[arguments.length-1]),Be.reduce(function(Re,Se,Te){var Fe=Re[Se];return Fe===void 0&&(Fe=Re[Se]={}),Te===Be.length-1?(Fe.data=Pe,Pe):Fe},this)};function pr(Be,Pe){return(Be+" "+Pe).trim()}It.formatter=pr,d(It.prototype,{units:function(){if(this._units!==void 0)return this._units;var Be=l(this.numerator,we),Pe=l(this.denominator,we);if(Be&&Pe)return this._units="",this._units;var Re=Pr(this.numerator),Se=Pr(this.denominator);return this._units=Re+(Pe?"":"/"+Se),this._units},toString:function(Be,Pe){var Re;if(s(Be))Re=this.units(),Pe=Be;else if(e(Be))Re=Be;else if(rr(Be))return this.toPrec(Be).toString(Pe);var Se=this.to(Re),Te=Pe!==void 0?S(Se.scalar,Pe):Se.scalar;return Se=(Te+" "+Se.units()).trim(),Se},format:function(Be,Pe){arguments.length===1&&typeof Be=="function"&&(Pe=Be,Be=void 0),Pe=Pe||It.formatter;var Re=this.to(Be);return Pe.call(this,Re.scalar,Re.units())}});var Mr=new fr;function Pr(Be){var Pe=Mr.get(Be);if(Pe)return Pe;var Re=l(Be,we);return Re?Pe="1":Pe=jr(Tr(Be)).join("*"),Mr.set(Be,Pe),Pe}function Tr(Be){for(var Pe=[],Re,Se,Te=0;Te<Be.length;Te++)Re=Be[Te],Se=Be[Te+1],ke[Re]?(Pe.push(Ae[Re]+Ae[Se]),Te++):Pe.push(Ae[Re]);return Pe}function jr(Be){var Pe=Be.reduce(function(Re,Se){var Te=Re[Se];return Te||Re.push(Te=Re[Se]=[Se,0]),Te[1]++,Re},[]);return Pe.map(function(Re){return Re[0]+(Re[1]>1?Re[1]:"")})}return It.version="1.8.0",It})}(quantities$1)),quantities$1.exports}var quantitiesExports=requireQuantities();const Qty=getDefaultExportFromCjs(quantitiesExports);function deepValue(r,n=""){let e=n.split(".");for(let i of e){if(r[i]===void 0)return;r=r[i]}return r}var orientation={exports:{}},twoProduct_1,hasRequiredTwoProduct;function requireTwoProduct(){if(hasRequiredTwoProduct)return twoProduct_1;hasRequiredTwoProduct=1,twoProduct_1=n;var r=+(Math.pow(2,27)+1);function n(e,i,s){var o=e*i,u=r*e,l=u-e,d=u-l,m=e-d,y=r*i,S=y-i,X=y-S,he=i-X,Ce=o-d*X,Ee=Ce-m*X,xe=Ee-d*he,be=m*he-xe;return s?(s[0]=be,s[1]=o,s):[be,o]}return twoProduct_1}var robustSum,hasRequiredRobustSum;function requireRobustSum(){if(hasRequiredRobustSum)return robustSum;hasRequiredRobustSum=1,robustSum=n;function r(e,i){var s=e+i,o=s-e,u=s-o,l=i-o,d=e-u,m=d+l;return m?[m,s]:[s]}function n(e,i){var s=e.length|0,o=i.length|0;if(s===1&&o===1)return r(e[0],i[0]);var u=s+o,l=new Array(u),d=0,m=0,y=0,S=Math.abs,X=e[m],he=S(X),Ce=i[y],Ee=S(Ce),xe,be;he<Ee?(be=X,m+=1,m<s&&(X=e[m],he=S(X))):(be=Ce,y+=1,y<o&&(Ce=i[y],Ee=S(Ce))),m<s&&he<Ee||y>=o?(xe=X,m+=1,m<s&&(X=e[m],he=S(X))):(xe=Ce,y+=1,y<o&&(Ce=i[y],Ee=S(Ce)));for(var we=xe+be,ve=we-xe,ke=be-ve,De=ke,Oe=we,Le,Ae,Ie,Ue,ze;m<s&&y<o;)he<Ee?(xe=X,m+=1,m<s&&(X=e[m],he=S(X))):(xe=Ce,y+=1,y<o&&(Ce=i[y],Ee=S(Ce))),be=De,we=xe+be,ve=we-xe,ke=be-ve,ke&&(l[d++]=ke),Le=Oe+we,Ae=Le-Oe,Ie=Le-Ae,Ue=we-Ae,ze=Oe-Ie,De=ze+Ue,Oe=Le;for(;m<s;)xe=X,be=De,we=xe+be,ve=we-xe,ke=be-ve,ke&&(l[d++]=ke),Le=Oe+we,Ae=Le-Oe,Ie=Le-Ae,Ue=we-Ae,ze=Oe-Ie,De=ze+Ue,Oe=Le,m+=1,m<s&&(X=e[m]);for(;y<o;)xe=Ce,be=De,we=xe+be,ve=we-xe,ke=be-ve,ke&&(l[d++]=ke),Le=Oe+we,Ae=Le-Oe,Ie=Le-Ae,Ue=we-Ae,ze=Oe-Ie,De=ze+Ue,Oe=Le,y+=1,y<o&&(Ce=i[y]);return De&&(l[d++]=De),Oe&&(l[d++]=Oe),d||(l[d++]=0),l.length=d,l}return robustSum}var twoSum,hasRequiredTwoSum;function requireTwoSum(){if(hasRequiredTwoSum)return twoSum;hasRequiredTwoSum=1,twoSum=r;function r(n,e,i){var s=n+e,o=s-n,u=s-o,l=e-o,d=n-u;return i?(i[0]=d+l,i[1]=s,i):[d+l,s]}return twoSum}var robustScale,hasRequiredRobustScale;function requireRobustScale(){if(hasRequiredRobustScale)return robustScale;hasRequiredRobustScale=1;var r=requireTwoProduct(),n=requireTwoSum();robustScale=e;function e(i,s){var o=i.length;if(o===1){var u=r(i[0],s);return u[0]?u:[u[1]]}var l=new Array(2*o),d=[.1,.1],m=[.1,.1],y=0;r(i[0],s,d),d[0]&&(l[y++]=d[0]);for(var S=1;S<o;++S){r(i[S],s,m);var X=d[1];n(X,m[0],d),d[0]&&(l[y++]=d[0]);var he=m[1],Ce=d[1],Ee=he+Ce,xe=Ee-he,be=Ce-xe;d[1]=Ee,be&&(l[y++]=be)}return d[1]&&(l[y++]=d[1]),y===0&&(l[y++]=0),l.length=y,l}return robustScale}var robustDiff,hasRequiredRobustDiff;function requireRobustDiff(){if(hasRequiredRobustDiff)return robustDiff;hasRequiredRobustDiff=1,robustDiff=n;function r(e,i){var s=e+i,o=s-e,u=s-o,l=i-o,d=e-u,m=d+l;return m?[m,s]:[s]}function n(e,i){var s=e.length|0,o=i.length|0;if(s===1&&o===1)return r(e[0],-i[0]);var u=s+o,l=new Array(u),d=0,m=0,y=0,S=Math.abs,X=e[m],he=S(X),Ce=-i[y],Ee=S(Ce),xe,be;he<Ee?(be=X,m+=1,m<s&&(X=e[m],he=S(X))):(be=Ce,y+=1,y<o&&(Ce=-i[y],Ee=S(Ce))),m<s&&he<Ee||y>=o?(xe=X,m+=1,m<s&&(X=e[m],he=S(X))):(xe=Ce,y+=1,y<o&&(Ce=-i[y],Ee=S(Ce)));for(var we=xe+be,ve=we-xe,ke=be-ve,De=ke,Oe=we,Le,Ae,Ie,Ue,ze;m<s&&y<o;)he<Ee?(xe=X,m+=1,m<s&&(X=e[m],he=S(X))):(xe=Ce,y+=1,y<o&&(Ce=-i[y],Ee=S(Ce))),be=De,we=xe+be,ve=we-xe,ke=be-ve,ke&&(l[d++]=ke),Le=Oe+we,Ae=Le-Oe,Ie=Le-Ae,Ue=we-Ae,ze=Oe-Ie,De=ze+Ue,Oe=Le;for(;m<s;)xe=X,be=De,we=xe+be,ve=we-xe,ke=be-ve,ke&&(l[d++]=ke),Le=Oe+we,Ae=Le-Oe,Ie=Le-Ae,Ue=we-Ae,ze=Oe-Ie,De=ze+Ue,Oe=Le,m+=1,m<s&&(X=e[m]);for(;y<o;)xe=Ce,be=De,we=xe+be,ve=we-xe,ke=be-ve,ke&&(l[d++]=ke),Le=Oe+we,Ae=Le-Oe,Ie=Le-Ae,Ue=we-Ae,ze=Oe-Ie,De=ze+Ue,Oe=Le,y+=1,y<o&&(Ce=-i[y]);return De&&(l[d++]=De),Oe&&(l[d++]=Oe),d||(l[d++]=0),l.length=d,l}return robustDiff}var hasRequiredOrientation;function requireOrientation(){return hasRequiredOrientation||(hasRequiredOrientation=1,function(r){var n=requireTwoProduct(),e=requireRobustSum(),i=requireRobustScale(),s=requireRobustDiff(),o=5,u=11102230246251565e-32,l=(3+16*u)*u,d=(7+56*u)*u;function m(ve,ke,De,Oe){return function(Ae,Ie,Ue){var ze=ve(ve(ke(Ie[1],Ue[0]),ke(-Ue[1],Ie[0])),ve(ke(Ae[1],Ie[0]),ke(-Ie[1],Ae[0]))),Ye=ve(ke(Ae[1],Ue[0]),ke(-Ue[1],Ae[0])),Xe=Oe(ze,Ye);return Xe[Xe.length-1]}}function y(ve,ke,De,Oe){return function(Ae,Ie,Ue,ze){var Ye=ve(ve(De(ve(ke(Ue[1],ze[0]),ke(-ze[1],Ue[0])),Ie[2]),ve(De(ve(ke(Ie[1],ze[0]),ke(-ze[1],Ie[0])),-Ue[2]),De(ve(ke(Ie[1],Ue[0]),ke(-Ue[1],Ie[0])),ze[2]))),ve(De(ve(ke(Ie[1],ze[0]),ke(-ze[1],Ie[0])),Ae[2]),ve(De(ve(ke(Ae[1],ze[0]),ke(-ze[1],Ae[0])),-Ie[2]),De(ve(ke(Ae[1],Ie[0]),ke(-Ie[1],Ae[0])),ze[2])))),Xe=ve(ve(De(ve(ke(Ue[1],ze[0]),ke(-ze[1],Ue[0])),Ae[2]),ve(De(ve(ke(Ae[1],ze[0]),ke(-ze[1],Ae[0])),-Ue[2]),De(ve(ke(Ae[1],Ue[0]),ke(-Ue[1],Ae[0])),ze[2]))),ve(De(ve(ke(Ie[1],Ue[0]),ke(-Ue[1],Ie[0])),Ae[2]),ve(De(ve(ke(Ae[1],Ue[0]),ke(-Ue[1],Ae[0])),-Ie[2]),De(ve(ke(Ae[1],Ie[0]),ke(-Ie[1],Ae[0])),Ue[2])))),tt=Oe(Ye,Xe);return tt[tt.length-1]}}function S(ve,ke,De,Oe){return function(Ae,Ie,Ue,ze,Ye){var Xe=ve(ve(ve(De(ve(De(ve(ke(ze[1],Ye[0]),ke(-Ye[1],ze[0])),Ue[2]),ve(De(ve(ke(Ue[1],Ye[0]),ke(-Ye[1],Ue[0])),-ze[2]),De(ve(ke(Ue[1],ze[0]),ke(-ze[1],Ue[0])),Ye[2]))),Ie[3]),ve(De(ve(De(ve(ke(ze[1],Ye[0]),ke(-Ye[1],ze[0])),Ie[2]),ve(De(ve(ke(Ie[1],Ye[0]),ke(-Ye[1],Ie[0])),-ze[2]),De(ve(ke(Ie[1],ze[0]),ke(-ze[1],Ie[0])),Ye[2]))),-Ue[3]),De(ve(De(ve(ke(Ue[1],Ye[0]),ke(-Ye[1],Ue[0])),Ie[2]),ve(De(ve(ke(Ie[1],Ye[0]),ke(-Ye[1],Ie[0])),-Ue[2]),De(ve(ke(Ie[1],Ue[0]),ke(-Ue[1],Ie[0])),Ye[2]))),ze[3]))),ve(De(ve(De(ve(ke(Ue[1],ze[0]),ke(-ze[1],Ue[0])),Ie[2]),ve(De(ve(ke(Ie[1],ze[0]),ke(-ze[1],Ie[0])),-Ue[2]),De(ve(ke(Ie[1],Ue[0]),ke(-Ue[1],Ie[0])),ze[2]))),-Ye[3]),ve(De(ve(De(ve(ke(ze[1],Ye[0]),ke(-Ye[1],ze[0])),Ie[2]),ve(De(ve(ke(Ie[1],Ye[0]),ke(-Ye[1],Ie[0])),-ze[2]),De(ve(ke(Ie[1],ze[0]),ke(-ze[1],Ie[0])),Ye[2]))),Ae[3]),De(ve(De(ve(ke(ze[1],Ye[0]),ke(-Ye[1],ze[0])),Ae[2]),ve(De(ve(ke(Ae[1],Ye[0]),ke(-Ye[1],Ae[0])),-ze[2]),De(ve(ke(Ae[1],ze[0]),ke(-ze[1],Ae[0])),Ye[2]))),-Ie[3])))),ve(ve(De(ve(De(ve(ke(Ie[1],Ye[0]),ke(-Ye[1],Ie[0])),Ae[2]),ve(De(ve(ke(Ae[1],Ye[0]),ke(-Ye[1],Ae[0])),-Ie[2]),De(ve(ke(Ae[1],Ie[0]),ke(-Ie[1],Ae[0])),Ye[2]))),ze[3]),ve(De(ve(De(ve(ke(Ie[1],ze[0]),ke(-ze[1],Ie[0])),Ae[2]),ve(De(ve(ke(Ae[1],ze[0]),ke(-ze[1],Ae[0])),-Ie[2]),De(ve(ke(Ae[1],Ie[0]),ke(-Ie[1],Ae[0])),ze[2]))),-Ye[3]),De(ve(De(ve(ke(Ue[1],ze[0]),ke(-ze[1],Ue[0])),Ie[2]),ve(De(ve(ke(Ie[1],ze[0]),ke(-ze[1],Ie[0])),-Ue[2]),De(ve(ke(Ie[1],Ue[0]),ke(-Ue[1],Ie[0])),ze[2]))),Ae[3]))),ve(De(ve(De(ve(ke(Ue[1],ze[0]),ke(-ze[1],Ue[0])),Ae[2]),ve(De(ve(ke(Ae[1],ze[0]),ke(-ze[1],Ae[0])),-Ue[2]),De(ve(ke(Ae[1],Ue[0]),ke(-Ue[1],Ae[0])),ze[2]))),-Ie[3]),ve(De(ve(De(ve(ke(Ie[1],ze[0]),ke(-ze[1],Ie[0])),Ae[2]),ve(De(ve(ke(Ae[1],ze[0]),ke(-ze[1],Ae[0])),-Ie[2]),De(ve(ke(Ae[1],Ie[0]),ke(-Ie[1],Ae[0])),ze[2]))),Ue[3]),De(ve(De(ve(ke(Ie[1],Ue[0]),ke(-Ue[1],Ie[0])),Ae[2]),ve(De(ve(ke(Ae[1],Ue[0]),ke(-Ue[1],Ae[0])),-Ie[2]),De(ve(ke(Ae[1],Ie[0]),ke(-Ie[1],Ae[0])),Ue[2]))),-ze[3]))))),tt=ve(ve(ve(De(ve(De(ve(ke(ze[1],Ye[0]),ke(-Ye[1],ze[0])),Ue[2]),ve(De(ve(ke(Ue[1],Ye[0]),ke(-Ye[1],Ue[0])),-ze[2]),De(ve(ke(Ue[1],ze[0]),ke(-ze[1],Ue[0])),Ye[2]))),Ae[3]),De(ve(De(ve(ke(ze[1],Ye[0]),ke(-Ye[1],ze[0])),Ae[2]),ve(De(ve(ke(Ae[1],Ye[0]),ke(-Ye[1],Ae[0])),-ze[2]),De(ve(ke(Ae[1],ze[0]),ke(-ze[1],Ae[0])),Ye[2]))),-Ue[3])),ve(De(ve(De(ve(ke(Ue[1],Ye[0]),ke(-Ye[1],Ue[0])),Ae[2]),ve(De(ve(ke(Ae[1],Ye[0]),ke(-Ye[1],Ae[0])),-Ue[2]),De(ve(ke(Ae[1],Ue[0]),ke(-Ue[1],Ae[0])),Ye[2]))),ze[3]),De(ve(De(ve(ke(Ue[1],ze[0]),ke(-ze[1],Ue[0])),Ae[2]),ve(De(ve(ke(Ae[1],ze[0]),ke(-ze[1],Ae[0])),-Ue[2]),De(ve(ke(Ae[1],Ue[0]),ke(-Ue[1],Ae[0])),ze[2]))),-Ye[3]))),ve(ve(De(ve(De(ve(ke(Ue[1],Ye[0]),ke(-Ye[1],Ue[0])),Ie[2]),ve(De(ve(ke(Ie[1],Ye[0]),ke(-Ye[1],Ie[0])),-Ue[2]),De(ve(ke(Ie[1],Ue[0]),ke(-Ue[1],Ie[0])),Ye[2]))),Ae[3]),De(ve(De(ve(ke(Ue[1],Ye[0]),ke(-Ye[1],Ue[0])),Ae[2]),ve(De(ve(ke(Ae[1],Ye[0]),ke(-Ye[1],Ae[0])),-Ue[2]),De(ve(ke(Ae[1],Ue[0]),ke(-Ue[1],Ae[0])),Ye[2]))),-Ie[3])),ve(De(ve(De(ve(ke(Ie[1],Ye[0]),ke(-Ye[1],Ie[0])),Ae[2]),ve(De(ve(ke(Ae[1],Ye[0]),ke(-Ye[1],Ae[0])),-Ie[2]),De(ve(ke(Ae[1],Ie[0]),ke(-Ie[1],Ae[0])),Ye[2]))),Ue[3]),De(ve(De(ve(ke(Ie[1],Ue[0]),ke(-Ue[1],Ie[0])),Ae[2]),ve(De(ve(ke(Ae[1],Ue[0]),ke(-Ue[1],Ae[0])),-Ie[2]),De(ve(ke(Ae[1],Ie[0]),ke(-Ie[1],Ae[0])),Ue[2]))),-Ye[3])))),lt=Oe(Xe,tt);return lt[lt.length-1]}}function X(ve){var ke=ve===3?m:ve===4?y:S;return ke(e,n,i,s)}var he=X(3),Ce=X(4),Ee=[function(){return 0},function(){return 0},function(ke,De){return De[0]-ke[0]},function(ke,De,Oe){var Le=(ke[1]-Oe[1])*(De[0]-Oe[0]),Ae=(ke[0]-Oe[0])*(De[1]-Oe[1]),Ie=Le-Ae,Ue;if(Le>0){if(Ae<=0)return Ie;Ue=Le+Ae}else if(Le<0){if(Ae>=0)return Ie;Ue=-(Le+Ae)}else return Ie;var ze=l*Ue;return Ie>=ze||Ie<=-ze?Ie:he(ke,De,Oe)},function(ke,De,Oe,Le){var Ae=ke[0]-Le[0],Ie=De[0]-Le[0],Ue=Oe[0]-Le[0],ze=ke[1]-Le[1],Ye=De[1]-Le[1],Xe=Oe[1]-Le[1],tt=ke[2]-Le[2],lt=De[2]-Le[2],_t=Oe[2]-Le[2],bt=Ie*Xe,rt=Ue*Ye,He=Ue*ze,We=Ae*Xe,qe=Ae*Ye,Ke=Ie*ze,st=tt*(bt-rt)+lt*(He-We)+_t*(qe-Ke),ut=(Math.abs(bt)+Math.abs(rt))*Math.abs(tt)+(Math.abs(He)+Math.abs(We))*Math.abs(lt)+(Math.abs(qe)+Math.abs(Ke))*Math.abs(_t),nt=d*ut;return st>nt||-st>nt?st:Ce(ke,De,Oe,Le)}];function xe(ve){var ke=Ee[ve.length];return ke||(ke=Ee[ve.length]=X(ve.length)),ke.apply(void 0,ve)}function be(ve,ke,De,Oe,Le,Ae,Ie){return function(ze,Ye,Xe,tt,lt){switch(arguments.length){case 0:case 1:return 0;case 2:return Oe(ze,Ye);case 3:return Le(ze,Ye,Xe);case 4:return Ae(ze,Ye,Xe,tt);case 5:return Ie(ze,Ye,Xe,tt,lt)}for(var _t=new Array(arguments.length),bt=0;bt<arguments.length;++bt)_t[bt]=arguments[bt];return ve(_t)}}function we(){for(;Ee.length<=o;)Ee.push(X(Ee.length));r.exports=be.apply(void 0,[xe].concat(Ee));for(var ve=0;ve<=o;++ve)r.exports[ve]=Ee[ve]}we()}(orientation)),orientation.exports}var robustPnp,hasRequiredRobustPnp;function requireRobustPnp(){if(hasRequiredRobustPnp)return robustPnp;hasRequiredRobustPnp=1,robustPnp=n;var r=requireOrientation();function n(e,i){for(var s=i[0],o=i[1],u=e.length,l=1,d=u,m=0,y=u-1;m<d;y=m++){var S=e[m],X=e[y],he=S[1],Ce=X[1];if(Ce<he){if(Ce<o&&o<he){var Ee=r(S,X,i);if(Ee===0)return 0;l^=0<Ee|0}else if(o===he){var xe=e[(m+1)%u],be=xe[1];if(he<be){var Ee=r(S,X,i);if(Ee===0)return 0;l^=0<Ee|0}}}else if(he<Ce){if(he<o&&o<Ce){var Ee=r(S,X,i);if(Ee===0)return 0;l^=Ee<0|0}else if(o===he){var xe=e[(m+1)%u],be=xe[1];if(be<he){var Ee=r(S,X,i);if(Ee===0)return 0;l^=Ee<0|0}}}else if(o===he){var we=Math.min(S[0],X[0]),ve=Math.max(S[0],X[0]);if(m===0){for(;y>0;){var ke=(y+u-1)%u,De=e[ke];if(De[1]!==o)break;var Oe=De[0];we=Math.min(we,Oe),ve=Math.max(ve,Oe),y=ke}if(y===0)return we<=s&&s<=ve?0:1;d=y+1}for(var Le=e[(y+u-1)%u][1];m+1<d;){var De=e[m+1];if(De[1]!==o)break;var Oe=De[0];we=Math.min(we,Oe),ve=Math.max(ve,Oe),m+=1}if(we<=s&&s<=ve)return 0;var Ae=e[(m+1)%u][1];s<we&&Le<o!=Ae<o&&(l^=1)}}return 2*l-1}return robustPnp}var robustPnpExports=requireRobustPnp();const robustPointInPolygon=getDefaultExportFromCjs(robustPnpExports);function feretDiameters(r={}){const{originalPoints:n=monotoneChainConvexHull.call(this)}=r;if(n.length===0)return{min:0,max:0,minLine:[],maxLine:[],aspectRatio:1};if(n.length===1)return{min:1,max:1,minLine:[n[0],n[0]],maxLine:[n[0],n[0]],aspectRatio:1};const e=new Array(n.length);let i=1/0,s=0,o=[];for(let m=0;m<n.length;m++){let y=getAngle(n[m],n[(m+1)%n.length]);rotate(-y,n,e);let S=0,X=[];for(let he=0;he<n.length;he++){let Ce=Math.abs(e[m][1]-e[he][1]);Ce>S&&(S=Ce,X=[],X.push([e[he][0],e[m][1]],[e[he][0],e[he][1]]))}S<i&&(i=S,s=y,o=X)}rotate(s,o,o);let u=0,l=[],d=0;for(let m=0;m<n.length-1;m++)for(let y=m+1;y<n.length;y++){let S=(n[m][0]-n[y][0])**2+(n[m][1]-n[y][1])**2;S>d&&(d=S,u=Math.sqrt(S),l=[n[m],n[y]])}return{min:i,minLine:o,max:u,maxLine:l,aspectRatio:i/u}}function getAngle(r,n){let e=difference(n,r),i=normalize(e),s=Math.acos(i[0]);return i[1]<0?-s:s}class Roi{constructor(n,e){this.map=n,this.id=e,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY,this.meanX=0,this.meanY=0,this.surface=0,this.computed={}}getMask(n={}){const{scale:e=1,kind:i=""}=n;let s;switch(i){case"contour":s=this.contourMask;break;case"box":s=this.boxMask;break;case"filled":s=this.filledMask;break;case"center":s=this.centerMask;break;case"mbr":s=this.mbrFilledMask;break;case"hull":s=this.convexHullFilledMask;break;case"hullContour":s=this.convexHullMask;break;case"mbrContour":s=this.mbrMask;break;case"feret":s=this.feretMask;break;default:s=this.mask}return e<1&&(s=s.resize({factor:e}),s.parent=this.mask.parent,s.position[0]+=this.minX,s.position[1]+=this.minY),s}get mean(){throw new Error("Roi mean not implemented yet")}get center(){return this.computed.center||(this.computed.center=[this.width/2>>0,this.height/2>>0]),this.computed.center}get ratio(){return this.width/this.height}get width(){return this.maxX-this.minX+1}get height(){return this.maxY-this.minY+1}_computExternalIDs(){let n=this.borderIDs,e=this.borderLengths;this.computed.externalIDs=[],this.computed.externalLengths=[];let i=this.internalIDs;for(let s=0;s<n.length;s++)i.includes(n[s])||(this.computed.externalIDs.push(n[s]),this.computed.externalLengths.push(e[s]))}get externalIDs(){return this.computed.externalIDs?this.computed.externalIDs:(this._computExternalIDs(),this.computed.externalIDs)}get externalLengths(){return this.computed.externalLengths?this.computed.externalLengths:(this._computExternalIDs(),this.computed.externalLengths)}_computeBorderIDs(){let n=getBorders(this);this.computed.borderIDs=n.ids,this.computed.borderLengths=n.lengths}get borderIDs(){return this.computed.borderIDs?this.computed.borderIDs:(this._computeBorderIDs(),this.computed.borderIDs)}get borderLengths(){return this.computed.borderLengths?this.computed.borderLengths:(this._computeBorderIDs(),this.computed.borderLengths)}get boxIDs(){return this.computed.boxIDs||(this.computed.boxIDs=getBoxIDs(this)),this.computed.boxIDs}get internalIDs(){return this.computed.internalIDs||(this.computed.internalIDs=getInternalIDs(this)),this.computed.internalIDs}get box(){return this.computed.box||(this.computed.box=getBox(this)),this.computed.box}get external(){return this.computed.external||(this.computed.external=getExternal(this)),this.computed.external}get holesInfo(){return this.computed.holesInfo||(this.computed.holesInfo=getHolesInfo(this)),this.computed.holesInfo}get border(){return this.computed.border||(this.computed.border=getBorder(this)),this.computed.border}get contourMask(){if(!this.computed.contourMask){let n=new Image(this.width,this.height,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(let e=0;e<this.width;e++)for(let i=0;i<this.height;i++)this.map.data[e+this.minX+(i+this.minY)*this.map.width]===this.id&&(e>0&&e<this.width-1&&i>0&&i<this.height-1?(this.map.data[e-1+this.minX+(i+this.minY)*this.map.width]!==this.id||this.map.data[e+1+this.minX+(i+this.minY)*this.map.width]!==this.id||this.map.data[e+this.minX+(i-1+this.minY)*this.map.width]!==this.id||this.map.data[e+this.minX+(i+1+this.minY)*this.map.width]!==this.id)&&n.setBitXY(e,i):n.setBitXY(e,i));this.computed.contourMask=n}return this.computed.contourMask}get boxMask(){if(!this.computed.boxMask){let n=new Image(this.width,this.height,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(let e=0;e<this.width;e++)n.setBitXY(e,0),n.setBitXY(e,this.height-1);for(let e=0;e<this.height;e++)n.setBitXY(0,e),n.setBitXY(this.width-1,e);this.computed.boxMask=n}return this.computed.boxMask}get mask(){if(!this.computed.mask){let n=new Image(this.width,this.height,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(let e=0;e<this.width;e++)for(let i=0;i<this.height;i++)this.map.data[e+this.minX+(i+this.minY)*this.map.width]===this.id&&n.setBitXY(e,i);this.computed.mask=n}return this.computed.mask}get filledMask(){if(!this.computed.filledMask){let n=new Image(this.width,this.height,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(let e=0;e<this.width;e++)for(let i=0;i<this.height;i++){let s=e+this.minX+(i+this.minY)*this.map.width;this.internalIDs.includes(this.map.data[s])&&n.setBitXY(e,i)}this.computed.filledMask=n}return this.computed.filledMask}get centerMask(){if(!this.computed.centerMask){let n=new Shape({kind:"smallCross"}).getMask();n.parent=this.map.parent,n.position=[this.minX+this.center[0]-1,this.minY+this.center[1]-1],this.computed.centerMask=n}return this.computed.centerMask}get convexHull(){if(!this.computed.convexHull){const n=[];for(let i=0;i<this.width;i++)for(let s=0;s<this.height;s++)this.map.data[i+this.minX+(s+this.minY)*this.map.width]===this.id&&(i>0&&i<this.width-1&&s>0&&s<this.height-1?(this.map.data[i-1+this.minX+(s+this.minY)*this.map.width]!==this.id||this.map.data[i+1+this.minX+(s+this.minY)*this.map.width]!==this.id||this.map.data[i+this.minX+(s-1+this.minY)*this.map.width]!==this.id||this.map.data[i+this.minX+(s+1+this.minY)*this.map.width]!==this.id)&&(n.push([i,s]),n.push([i+1,s]),n.push([i,s+1]),n.push([i+1,s+1])):(n.push([i,s]),n.push([i+1,s]),n.push([i,s+1]),n.push([i+1,s+1])));const e=monotoneChainConvexHull$1(n);this.computed.convexHull={polyline:e,surface:surface(e),perimeter:perimeter(e)}}return this.computed.convexHull}get convexHullMask(){if(!this.computed.convexHullMask){const n=this.convexHull,e=new Image(this.width+1,this.height+1,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});e.paintPolyline(n.polyline,{closed:!0}),this.computed.convexHullMask=e}return this.computed.convexHullMask}get convexHullFilledMask(){if(!this.computed.convexHullFilledMask){const n=this.convexHull,e=new Image(this.width,this.height,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(let i=0;i<this.width;i++)for(let s=0;s<this.height;s++)robustPointInPolygon(n.polyline,[i,s])!==1&&e.setBitXY(i,s);this.computed.convexHullFilledMask=e}return this.computed.convexHullFilledMask}get mbr(){if(!this.computed.mbr){let n=minimalBoundingRectangle({originalPoints:this.convexHull.polyline});if(n.length===0)this.computed.mbr={width:0,height:0,surface:0,perimeter:0,rectangle:n};else{let e=n[0],i=n[1],s=n[2],o=Math.sqrt((e[0]-i[0])**2+(e[1]-i[1])**2),u=Math.sqrt((s[0]-i[0])**2+(s[1]-i[1])**2);this.computed.mbr={width:o,height:u,elongation:1-o/u,aspectRatio:o/u,surface:o*u,perimeter:(o+u)*2,rectangle:n}}}return this.computed.mbr}get fillRatio(){return this.surface/(this.surface+this.holesInfo.surface)}get feretDiameters(){return this.computed.feretDiameters||(this.computed.feretDiameters=feretDiameters({originalPoints:this.convexHull.polyline})),this.computed.feretDiameters}get eqpc(){return this.computed.eqpc||(this.computed.eqpc=2*Math.sqrt(this.surface/Math.PI)),this.computed.eqpc}get perimeterInfo(){return this.computed.perimeterInfo||(this.computed.perimeterInfo=getPerimeterInfo(this)),this.computed.perimeterInfo}get perimeter(){let n=this.perimeterInfo,e=2-Math.sqrt(2);return n.one+n.two*2+n.three*3+n.four*4-e*(n.two+n.three*2+n.four)}get ped(){return this.computed.ped||(this.computed.ped=this.perimeter/Math.PI),this.computed.ped}get feretMask(){if(!this.computed.feretMask){const n=new Image(this.width+1,this.height+1,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});n.paintPolyline(this.feretDiameters.minLine),n.paintPolyline(this.feretDiameters.maxLine),this.computed.feretMask=n}return this.computed.feretMask}get mbrMask(){if(!this.computed.mbrMask){let n=round(this.mbr.rectangle);if(n.length>0){const e=minMax(n),i=new Image(e[1][0]-e[0][0]+1,e[1][1]-e[0][1]+1,{kind:BINARY,position:[this.minX+e[0][0],this.minY+e[0][1]],parent:this.map.parent});n=moveToZeroZero(n),i.paintPolyline(n,{closed:!0}),this.computed.mbrMask=i}else this.computed.mbrMask=new Image(1,1,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent})}return this.computed.mbrMask}get mbrFilledMask(){if(!this.computed.mbrFilledMask){const n=new Image(this.width,this.height,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent}),e=this.mask.minimalBoundingRectangle();for(let i=0;i<this.width;i++)for(let s=0;s<this.height;s++)robustPointInPolygon(e,[i,s])!==1&&n.setBitXY(i,s);this.computed.mbrFilledMask=n}return this.computed.mbrFilledMask}get points(){if(!this.computed.points){let n=[];for(let e=0;e<this.height;e++)for(let i=0;i<this.width;i++){let s=(e+this.minY)*this.map.width+i+this.minX;this.map.data[s]===this.id&&n.push([i,e])}this.computed.points=n}return this.computed.points}get maxLengthPoints(){if(!this.computed.maxLengthPoints){let n=0,e;const i=this.points;for(let s=0;s<i.length;s++)for(let o=s+1;o<i.length;o++){let u=Math.pow(i[s][0]-i[o][0],2)+Math.pow(i[s][1]-i[o][1],2);u>=n&&(n=u,e=[i[s],i[o]])}this.computed.maxLengthPoints=e}return this.computed.maxLengthPoints}get maxLength(){if(!this.computed.maxLength){let n=Math.sqrt(Math.pow(this.maxLengthPoints[0][0]-this.maxLengthPoints[1][0],2)+Math.pow(this.maxLengthPoints[0][1]-this.maxLengthPoints[1][1],2));this.computed.maxLength=n}return this.computed.maxLength}get roundness(){return 4*this.surface/(Math.PI*this.feretDiameters.max**2)}get sphericity(){return 2*Math.sqrt(this.surface*Math.PI)/this.perimeter}get solidity(){return this.surface/this.convexHull.surface}get angle(){if(!this.computed.angle){let n=this.maxLengthPoints,e=-Math.atan2(n[0][1]-n[1][1],n[0][0]-n[1][0])*180/Math.PI;this.computed.angle=e}return this.computed.angle}toJSON(){return{id:this.id,minX:this.minX,maxX:this.maxX,minY:this.minY,maxY:this.maxY,meanX:this.meanX,meanY:this.meanY,height:this.height,width:this.width,surface:this.surface,mbrWidth:this.mbr.width,mbrHeight:this.mbr.height,mbrSurface:this.mbr.surface,eqpc:this.eqpc,ped:this.ped,feretDiameterMin:this.feretDiameters.min,feretDiameterMax:this.feretDiameters.max,aspectRatio:this.feretDiameters.aspectRatio,fillRatio:this.fillRatio,sphericity:this.sphericity,roundness:this.roundness,solidity:this.solidity,perimeter:this.perimeter}}}function getBorders(r){let n=r.map,e=n.data,i=new Set,s=new Map,o=new Set,u=[1,0,-1,0],l=[0,1,0,-1];for(let y=r.minX;y<=r.maxX;y++)for(let S=r.minY;S<=r.maxY;S++){let X=y+S*n.width;if(e[X]===r.id)for(let he=0;he<4;he++){let Ce=y+u[he],Ee=S+l[he];if(Ce>=0&&Ee>=0&&Ce<n.width&&Ee<n.height){let xe=Ce+Ee*n.width;if(e[xe]!==r.id&&!o.has(xe)){o.add(xe),i.add(e[xe]);let be=s.get(e[xe]);be?s.set(e[xe],++be):s.set(e[xe],1)}}}}let d=Array.from(i),m=d.map(function(y){return s.get(y)});return{ids:d,lengths:m}}function getBoxIDs(r){let n=new Set,e=r.map,i=e.data;for(let s of[0,r.height-1])for(let o=0;o<r.width;o++){let u=(s+r.minY)*e.width+o+r.minX;if(o-r.minX>0&&i[u]===r.id&&i[u-1]!==r.id){let l=i[u-1];n.add(l)}if(e.width-o-r.minX>1&&i[u]===r.id&&i[u+1]!==r.id){let l=i[u+1];n.add(l)}}for(let s of[0,r.width-1])for(let o=0;o<r.height;o++){let u=(o+r.minY)*e.width+s+r.minX;if(o-r.minY>0&&i[u]===r.id&&i[u-e.width]!==r.id){let l=i[u-e.width];n.add(l)}if(e.height-o-r.minY>1&&i[u]===r.id&&i[u+e.width]!==r.id){let l=i[u+e.width];n.add(l)}}return Array.from(n)}function getBox(r){let n=0,e=r.map,i=e.data,s=[0];r.height>1&&(s[1]=r.height-1);for(let u of s)for(let l=1;l<r.width-1;l++){let d=(u+r.minY)*e.width+l+r.minX;i[d]===r.id&&n++}let o=[0];r.width>1&&(o[1]=r.width-1);for(let u of o)for(let l=0;l<r.height;l++){let d=(l+r.minY)*e.width+u+r.minX;i[d]===r.id&&n++}return n}function getBorder(r){let n=0,e=r.map,i=e.data;for(let s=1;s<r.width-1;s++)for(let o=1;o<r.height-1;o++){let u=(o+r.minY)*e.width+s+r.minX;i[u]===r.id&&(i[u-1]!==r.id||i[u+1]!==r.id||i[u-e.width]!==r.id||i[u+e.width]!==r.id)&&n++}return n+r.box}function getPerimeterInfo(r){let n=r.map,e=n.data,i=0,s=0,o=0,u=0;for(let l=0;l<r.width;l++)for(let d=0;d<r.height;d++){let m=(d+r.minY)*n.width+l+r.minX;if(e[m]===r.id){let y=0;switch((l===0||r.externalIDs.includes(e[m-1]))&&y++,(l===r.width-1||r.externalIDs.includes(e[m+1]))&&y++,(d===0||r.externalIDs.includes(e[m-n.width]))&&y++,(d===r.height-1||r.externalIDs.includes(e[m+n.width]))&&y++,y){case 1:i++;break;case 2:s++;break;case 3:o++;break;case 4:u++;break}}}return{one:i,two:s,three:o,four:u}}function getExternal(r){let n=0,e=r.map,i=e.data;for(let s=1;s<r.width-1;s++)for(let o=1;o<r.height-1;o++){let u=(o+r.minY)*e.width+s+r.minX;i[u]===r.id&&(r.externalIDs.includes(i[u-1])||r.externalIDs.includes(i[u+1])||r.externalIDs.includes(i[u-e.width])||r.externalIDs.includes(i[u+e.width]))&&n++}return n+r.box}function getHolesInfo(r){let n=0,e=r.map.width,i=r.map.data;for(let s=1;s<r.width-1;s++)for(let o=1;o<r.height-1;o++){let u=(o+r.minY)*e+s+r.minX;r.internalIDs.includes(i[u])&&i[u]!==r.id&&n++}return{number:r.internalIDs.length-1,surface:n}}function getInternalIDs(r){let n=[r.id],e=r.map,i=e.data;if(r.height>2)for(let o=0;o<r.width;o++){let u=r.minY*e.width+o+r.minX;if(n.includes(i[u])){let l=i[u+e.width];!n.includes(l)&&!r.boxIDs.includes(l)&&n.push(l)}}let s=new Array(4);for(let o=1;o<r.width-1;o++)for(let u=1;u<r.height-1;u++){let l=(u+r.minY)*e.width+o+r.minX;if(n.includes(i[l])){s[0]=i[l-1],s[1]=i[l+1],s[2]=i[l-e.width],s[3]=i[l+e.width];for(let d=0;d<4;d++){let m=s[d];!n.includes(m)&&!r.boxIDs.includes(m)&&n.push(m)}}}return n}class RoiLayer{constructor(n,e){this.roiMap=n,this.options=e,this.roi=this.createRoi()}createRoi(){let n=this.roiMap.data,e={};this.roiMap.positive=0,this.roiMap.negative=0;for(let l=0;l<n.length;l++)n[l]&&!e[n[l]]&&(e[n[l]]=!0,n[l]>0?this.roiMap.positive++:this.roiMap.negative++);let i={};for(let l in e)i[l]=new Roi(this.roiMap,l*1);let s=this.roiMap.width,o=this.roiMap.height;for(let l=0;l<o;l++)for(let d=0;d<s;d++){let m=l*s+d;if(n[m]!==0){const y=n[m],S=i[y];d<S.minX&&(S.minX=d),d>S.maxX&&(S.maxX=d),l<S.minY&&(S.minY=l),l>S.maxY&&(S.maxY=l),S.meanX+=d,S.meanY+=l,S.surface++}}let u=[];for(let l in e)i[l].meanX/=i[l].surface,i[l].meanY/=i[l].surface,u.push(i[l]);return u}}function commonBorderLength(r){let n=r.data,e=[1,0,-1,0],i=[0,1,0,-1],s=r.minMax,o=-s.min,u=s.max+o,l=[];for(let m=0;m<=u;m++)l.push(Object.create(null));for(let m=0;m<r.width;m++)for(let y=0;y<r.height;y++){let S=m+y*r.width,X=n[S];if(X!==0){let he=Object.create(null),Ce=!1;for(let Ee=0;Ee<4;Ee++){let xe=m+e[Ee],be=y+i[Ee];if(xe>=0&&be>=0&&xe<r.width&&be<r.height){let we=n[xe+be*r.width];X!==we&&(Ce=!0,we!==0&&he[we]===void 0&&(he[we]=!0,l[we+o][X]?l[we+o][X]++:l[we+o][X]=1))}else Ce=!0}Ce&&(l[X+o][X]?l[X+o][X]++:l[X+o][X]=1)}}let d={};for(let m=0;m<l.length;m++)Object.keys(l[m]).length>0&&(d[m-o]=l[m]);return d}function mergeRoi(r={}){const{algorithm:n="commonBorderLength",minCommonBorderLength:e=5,maxCommonBorderLength:i=100,minCommonBorderRatio:s=.3,maxCommonBorderRatio:o=1}=r;let u=function(xe,be,we){return xe[we]>=e&&xe[we]<=i};typeof n=="function"&&(u=n),n.toLowerCase()==="commonborderratio"&&(u=function(xe,be,we){let ve=Math.min(xe[we]/xe[be],1);return ve>=s&&ve<=o});const l=this,d=l.commonBorderLength;let m={},y={};for(let xe of Object.keys(d)){let be=d[xe],we=Object.keys(be);for(let ve of we)if(ve!==xe&&u(be,xe,ve)){let ke=ve;y[ve]&&(ke=y[ve]);let De=xe;if(y[xe]&&(De=y[xe]),Number(ke)!==De){let Oe=Math.min(ke,De),Le=Math.max(ke,De);if(m[Oe]||(m[Oe]={}),m[Oe][Le]=!0,y[Le]=Oe,m[Le]){for(let Ae of Object.keys(m[Le]))m[Oe][Ae]=!0,y[Ae]=Oe;delete m[Le]}}}}let S=l.minMax,X=-S.min,he=S.max+X,Ce=new Array(he+1).fill(0);for(let xe of Object.keys(y))Ce[Number(xe)+X]=y[xe];let Ee=l.data;for(let xe=0;xe<Ee.length;xe++){let be=Ee[xe];if(be!==0){let we=Ce[be+X];we!==0&&(Ee[xe]=we)}}return l.computed={},l}class RoiMap{constructor(n,e){this.parent=n,this.width=n.width,this.height=n.height,this.data=e,this.negative=0,this.positive=0}get total(){return this.negative+this.positive}get minMax(){let n=Number.MAX_SAFE_INTEGER,e=Number.MIN_SAFE_INTEGER;for(let i=0;i<this.data.length;i++)this.data[i]<n&&(n=this.data[i]),this.data[i]>e&&(e=this.data[i]);return{min:n,max:e}}get commonBorderLength(){return commonBorderLength(this)}mergeRoi(n={}){return mergeRoi.call(this,n)}mergeRois(n){const e=n[0],i=n.slice(1);for(let s=0;s<this.data.length;s++)i.includes(this.data[s])&&(this.data[s]=e)}rowsInfo(){let n=new Array(this.height),e=0;for(let i=0;i<this.data.length;i+=this.width){let s={row:e,positivePixel:0,negativePixel:0,zeroPixel:0,positiveRoi:0,negativeRoi:0,medianChange:0};n[e++]=s;let o={},u={},l=[],d=this.data[i],m=0;for(let y=i;y<i+this.width;y++){let S=this.data[y];d!==S&&(d=S,l.push(m),m=0),m++,S>0?(s.positivePixel++,o[S]||(o[S]=!0)):S<0?(s.negativePixel++,u[S]||(u[S]=!0)):s.zeroPixel++}l.push(m),s.medianChange=l.sort((y,S)=>y-S)[Math.floor(l.length/2)],s.positiveRoiIDs=Object.keys(o),s.negativeRoiIDs=Object.keys(u),s.positiveRoi=s.positiveRoiIDs.length,s.negativeRoi=s.negativeRoiIDs.length}return n}colsInfo(){let n=new Array(this.width),e=0;for(let i=0;i<this.width;i++){let s={col:e,positivePixel:0,negativePixel:0,zeroPixel:0,positiveRoi:0,negativeRoi:0,medianChange:0};n[e++]=s;let o={},u={},l=[],d=this.data[i],m=0;for(let y=i;y<i+this.data.length;y+=this.width){let S=this.data[y];d!==S&&(d=S,l.push(m),m=0),m++,S>0?(s.positivePixel++,o[S]||(o[S]=!0)):S<0?(s.negativePixel++,u[S]||(u[S]=!0)):s.zeroPixel++}l.push(m),s.medianChange=l.sort((y,S)=>y-S)[Math.floor(l.length/2)],s.positiveRoiIDs=Object.keys(o),s.negativeRoiIDs=Object.keys(u),s.positiveRoi=s.positiveRoiIDs.length,s.negativeRoi=s.negativeRoiIDs.length}return n}}function fromMask(r,n={}){const{allowCorners:e=!1}=n,i=65535;let s=new Int16Array(r.size),o=0,u=0,l=new Uint16Array(i+1),d=new Uint16Array(i+1);for(let y=0;y<r.width;y++)for(let S=0;S<r.height;S++)s[S*r.width+y]===0&&m(y,S);function m(y,S){let X=0,he=0,Ce=r.getBitXY(y,S),Ee=Ce?++o:--u;if(o>32767||u<-32768)throw new Error("Too many regions of interest");for(l[0]=y,d[0]=S;X<=he;){let xe=l[X&i],be=d[X&i];if(s[be*r.width+xe]=Ee,xe>0&&s[be*r.width+xe-1]===0&&r.getBitXY(xe-1,be)===Ce&&(he++,l[he&i]=xe-1,d[he&i]=be,s[be*r.width+xe-1]=-32768),be>0&&s[(be-1)*r.width+xe]===0&&r.getBitXY(xe,be-1)===Ce&&(he++,l[he&i]=xe,d[he&i]=be-1,s[(be-1)*r.width+xe]=-32768),xe<r.width-1&&s[be*r.width+xe+1]===0&&r.getBitXY(xe+1,be)===Ce&&(he++,l[he&i]=xe+1,d[he&i]=be,s[be*r.width+xe+1]=-32768),be<r.height-1&&s[(be+1)*r.width+xe]===0&&r.getBitXY(xe,be+1)===Ce&&(he++,l[he&i]=xe,d[he&i]=be+1,s[(be+1)*r.width+xe]=-32768),e&&(xe>0&&be>0&&s[(be-1)*r.width+xe-1]===0&&r.getBitXY(xe-1,be-1)===Ce&&(he++,l[he&i]=xe-1,d[he&i]=be-1,s[(be-1)*r.width+xe-1]=-32768),xe<r.width-1&&be>0&&s[(be-1)*r.width+xe+1]===0&&r.getBitXY(xe+1,be-1)===Ce&&(he++,l[he&i]=xe+1,d[he&i]=be-1,s[(be-1)*r.width+xe+1]=-32768),xe>0&&be<r.height-1&&s[(be+1)*r.width+xe-1]===0&&r.getBitXY(xe-1,be+1)===Ce&&(he++,l[he&i]=xe-1,d[he&i]=be+1,s[(be+1)*r.width+xe-1]=-32768),xe<r.width-1&&be<r.height-1&&s[(be+1)*r.width+xe+1]===0&&r.getBitXY(xe+1,be+1)===Ce&&(he++,l[he&i]=xe+1,d[he&i]=be+1,s[(be+1)*r.width+xe+1]=-32768)),X++,he-X>i)throw new Error("analyseMask can not finish, the array to manage internal data is not big enough.You could improve mask by changing MAX_ARRAY")}}return new RoiMap(r,s)}var DisjointSet_1,hasRequiredDisjointSet;function requireDisjointSet(){if(hasRequiredDisjointSet)return DisjointSet_1;hasRequiredDisjointSet=1;class r{constructor(){this.nodes=new Map}add(i){var s=this.nodes.get(i);return s||(s=new n(i),this.nodes.set(i,s)),s}union(i,s){const o=this.find(i),u=this.find(s);o!==u&&(o.rank<u.rank?o.parent=u:o.rank>u.rank?u.parent=o:(u.parent=o,o.rank++))}find(i){for(var s=i;s.parent!==null;)s=s.parent;for(var o=i;o.parent!==null;){var u=o;o=o.parent,u.parent=s}return s}connected(i,s){return this.find(i)===this.find(s)}}DisjointSet_1=r;function n(e){this.value=e,this.parent=null,this.rank=0}return DisjointSet_1}var DisjointSetExports=requireDisjointSet();const DisjointSet=getDefaultExportFromCjs(DisjointSetExports),direction4X=[-1,0],direction4Y=[0,-1],neighbours4=[null,null],direction8X=[-1,-1,0,1],direction8Y=[0,-1,-1,-1],neighbours8=[null,null,null,null];function fromMaskConnectedComponentLabelingAlgorithm(r,n={}){const{allowCorners:e=!1}=n;let i=4;e&&(i=8);let s,o,u;if(i===8)s=direction8X,o=direction8Y,u=neighbours8;else if(i===4)s=direction4X,o=direction4Y,u=neighbours4;else throw new RangeError(`unsupported neighbours count: ${i}`);const l=r.size,d=r.width,m=r.height,y=new Array(l),S=new Uint32Array(l),X=new DisjointSet;let he=1;for(let Ce=0;Ce<m;Ce++)for(let Ee=0;Ee<d;Ee++){const xe=Ee+Ce*d;if(r.getBit(xe)){let be=null;for(let we=0;we<u.length;we++){const ve=Ee+s[we],ke=Ce+o[we];if(ve>=0&&ke>=0&&ve<d&&ke<m){const De=ve+ke*d;let Oe=y[De];Oe?(u[we]=Oe,(!be||u[we].value<be.value)&&(be=u[we])):u[we]=null}}if(!be)y[xe]=X.add(he++);else{y[xe]=be;for(let we=0;we<u.length;we++)u[we]&&u[we]!==be&&X.union(be,u[we])}}}for(let Ce=0;Ce<m;Ce++)for(let Ee=0;Ee<d;Ee++){const xe=Ee+Ce*d;r.getBit(xe)&&(S[xe]=X.find(y[xe]).value)}return new RoiMap(r,S)}function fromMaxima(r={}){let{allowCorner:n=!0,onlyTop:e=!1,invert:i=!1}=r,s=this;s.checkProcessable("fromMaxima",{components:[1]});const o=1,u=2;let l=0,d=0,m=new Int16Array(s.size),y=new Int8Array(s.size),S=new Float32Array(s.size),X=1048575,he=new Uint16Array(X+1),Ce=new Uint16Array(X+1),Ee=0,xe=0,be=new Uint16Array(X+1),we=new Uint16Array(X+1),ve=0,ke=0;for(De(s);Ee<xe;){let Ae=he[Ee&X],Ie=Ce[Ee&X];Le(Ae,Ie,u),Ee++}return new RoiMap(s,m);function De({maxima:Ae=!0}){for(let Ie=1;Ie<s.height-1;Ie++)for(let Ue=1;Ue<s.width-1;Ue++){let ze=Ue+Ie*s.width;if(y[ze]===0){let Ye=Ae?s.data[ze]:-s.data[Ue+Ie*s.width];if(s.data[Ie*s.width+Ue-1]>Ye||s.data[Ie*s.width+Ue+1]>Ye||s.data[(Ie-1)*s.width+Ue]>Ye||s.data[(Ie+1)*s.width+Ue]>Ye||n&&(s.data[(Ie-1)*s.width+Ue-1]>Ye||s.data[(Ie-1)*s.width+Ue+1]>Ye||s.data[(Ie+1)*s.width+Ue-1]>Ye||s.data[(Ie+1)*s.width+Ue+1]>Ye))continue;m[ze]=Ae?++l:--d,Oe(Ue,Ie)||(Ae?--l:++d)}}}function Oe(Ae,Ie){let Ue=xe;ve=0,ke=1,be[0]=Ae,we[0]=Ie;let ze=!0;for(;ve<ke;){let Ye=be[ve&X],Xe=we[ve&X];ze&=Le(Ye,Xe,o),ve++}if(!ze){for(let Ye=0;Ye<ke;Ye++){let Xe=be[Ye&X],lt=we[Ye&X]*s.width+Xe;m[lt]=0}xe=Ue}return ze}function Le(Ae,Ie,Ue){let ze=m[Ie*s.width+Ae],Ye=s.data[Ie*s.width+Ae];for(let Xe=Ie-1;Xe<=Ie+1;Xe++)for(let tt=Ae-1;tt<=Ae+1;tt++){let lt=Xe*s.width+tt;if(y[lt]===0)switch(y[lt]=1,S[lt]=s.data[lt]-Ye,Ue){case o:if(S[lt]===0){if(tt===0||Xe===0||tt===s.width-1||Xe===s.height-1)return!1;m[lt]=ze,be[ke&X]=tt,we[ke&X]=Xe,ke++}else{if(S[lt]>0)return!1;e||(m[lt]=ze,he[xe&X]=tt,Ce[xe&X]=Xe,xe++)}break;case u:S[lt]<=0&&(m[lt]=ze,he[xe&X]=tt,Ce[xe&X]=Xe,xe++);break;default:throw new Error("unreachable")}}return!0}}function fromPoints(r,n={}){let e=new Shape(n),i=new Int16Array(this.size),s=0,o=e.getPoints();for(let u=0;u<r.length;u++){s++;let l=r[u][0],d=r[u][1];for(let m=0;m<o.length;m++){let y=o[m][0],S=o[m][1];l+y>=0&&d+S>=0&&l+y<this.width&&d+S<this.height&&(i[l+y+(d+S)*this.width]=s)}}return new RoiMap(this,i)}function commonjsRequire(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var priorityQueue={exports:{}},hasRequiredPriorityQueue;function requirePriorityQueue(){return hasRequiredPriorityQueue||(hasRequiredPriorityQueue=1,function(r,n){(function(e){r.exports=e()})(function(){return function e(i,s,o){function u(m,y){if(!s[m]){if(!i[m]){var S=typeof commonjsRequire=="function"&&commonjsRequire;if(!y&&S)return S(m,!0);if(l)return l(m,!0);var X=new Error("Cannot find module '"+m+"'");throw X.code="MODULE_NOT_FOUND",X}var he=s[m]={exports:{}};i[m][0].call(he.exports,function(Ce){var Ee=i[m][1][Ce];return u(Ee||Ce)},he,he.exports,e,i,s,o)}return s[m].exports}for(var l=typeof commonjsRequire=="function"&&commonjsRequire,d=0;d<o.length;d++)u(o[d]);return u}({1:[function(e,i,s){var o,u,l,d,m,y=function(X,he){for(var Ce in he)S.call(he,Ce)&&(X[Ce]=he[Ce]);function Ee(){this.constructor=X}return Ee.prototype=he.prototype,X.prototype=new Ee,X.__super__=he.prototype,X},S={}.hasOwnProperty;o=e("./PriorityQueue/AbstractPriorityQueue"),u=e("./PriorityQueue/ArrayStrategy"),d=e("./PriorityQueue/BinaryHeapStrategy"),l=e("./PriorityQueue/BHeapStrategy"),m=function(X){y(he,X);function he(Ce){Ce||(Ce={}),Ce.strategy||(Ce.strategy=d),Ce.comparator||(Ce.comparator=function(Ee,xe){return(Ee||0)-(xe||0)}),he.__super__.constructor.call(this,Ce)}return he}(o),m.ArrayStrategy=u,m.BinaryHeapStrategy=d,m.BHeapStrategy=l,i.exports=m},{"./PriorityQueue/AbstractPriorityQueue":2,"./PriorityQueue/ArrayStrategy":3,"./PriorityQueue/BHeapStrategy":4,"./PriorityQueue/BinaryHeapStrategy":5}],2:[function(e,i,s){i.exports=function(){function o(u){var l;if((u!=null?u.strategy:void 0)==null)throw"Must pass options.strategy, a strategy";if((u!=null?u.comparator:void 0)==null)throw"Must pass options.comparator, a comparator";this.priv=new u.strategy(u),this.length=(u!=null&&(l=u.initialValues)!=null?l.length:void 0)||0}return o.prototype.queue=function(u){this.length++,this.priv.queue(u)},o.prototype.dequeue=function(u){if(!this.length)throw"Empty queue";return this.length--,this.priv.dequeue()},o.prototype.peek=function(u){if(!this.length)throw"Empty queue";return this.priv.peek()},o.prototype.clear=function(){return this.length=0,this.priv.clear()},o}()},{}],3:[function(e,i,s){var o;o=function(u,l,d){var m,y,S;for(y=0,m=u.length;y<m;)S=y+m>>>1,d(u[S],l)>=0?y=S+1:m=S;return y},i.exports=function(){function u(l){var d;this.options=l,this.comparator=this.options.comparator,this.data=((d=this.options.initialValues)!=null?d.slice(0):void 0)||[],this.data.sort(this.comparator).reverse()}return u.prototype.queue=function(l){var d;d=o(this.data,l,this.comparator),this.data.splice(d,0,l)},u.prototype.dequeue=function(){return this.data.pop()},u.prototype.peek=function(){return this.data[this.data.length-1]},u.prototype.clear=function(){this.data.length=0},u}()},{}],4:[function(e,i,s){i.exports=function(){function o(u){var l,d,m,y,S,X,he,Ce;for(this.comparator=(u!=null?u.comparator:void 0)||function(Ee,xe){return Ee-xe},this.pageSize=(u!=null?u.pageSize:void 0)||512,this.length=0,he=0;1<<he<this.pageSize;)he+=1;if(1<<he!==this.pageSize)throw"pageSize must be a power of two";for(this._shift=he,this._emptyMemoryPageTemplate=l=[],d=0,S=this.pageSize;0<=S?d<S:d>S;0<=S?++d:--d)l.push(null);if(this._memory=[],this._mask=this.pageSize-1,u.initialValues)for(X=u.initialValues,m=0,y=X.length;m<y;m++)Ce=X[m],this.queue(Ce)}return o.prototype.queue=function(u){this.length+=1,this._write(this.length,u),this._bubbleUp(this.length,u)},o.prototype.dequeue=function(){var u,l;return u=this._read(1),l=this._read(this.length),this.length-=1,this.length>0&&(this._write(1,l),this._bubbleDown(1,l)),u},o.prototype.peek=function(){return this._read(1)},o.prototype.clear=function(){this.length=0,this._memory.length=0},o.prototype._write=function(u,l){var d;for(d=u>>this._shift;d>=this._memory.length;)this._memory.push(this._emptyMemoryPageTemplate.slice(0));return this._memory[d][u&this._mask]=l},o.prototype._read=function(u){return this._memory[u>>this._shift][u&this._mask]},o.prototype._bubbleUp=function(u,l){var d,m,y,S;for(d=this.comparator;u>1&&(m=u&this._mask,u<this.pageSize||m>3?y=u&~this._mask|m>>1:m<2?(y=u-this.pageSize>>this._shift,y+=y&~(this._mask>>1),y|=this.pageSize>>1):y=u-2,S=this._read(y),!(d(S,l)<0));)this._write(y,l),this._write(u,S),u=y},o.prototype._bubbleDown=function(u,l){var d,m,y,S,X;for(X=this.comparator;u<this.length;)if(u>this._mask&&!(u&this._mask-1)?d=m=u+2:u&this.pageSize>>1?(d=(u&~this._mask)>>1,d|=u&this._mask>>1,d=d+1<<this._shift,m=d+1):(d=u+(u&this._mask),m=d+1),d!==m&&m<=this.length)if(y=this._read(d),S=this._read(m),X(y,l)<0&&X(y,S)<=0)this._write(d,l),this._write(u,y),u=d;else if(X(S,l)<0)this._write(m,l),this._write(u,S),u=m;else break;else if(d<=this.length)if(y=this._read(d),X(y,l)<0)this._write(d,l),this._write(u,y),u=d;else break;else break},o}()},{}],5:[function(e,i,s){i.exports=function(){function o(u){var l;this.comparator=(u!=null?u.comparator:void 0)||function(d,m){return d-m},this.length=0,this.data=((l=u.initialValues)!=null?l.slice(0):void 0)||[],this._heapify()}return o.prototype._heapify=function(){var u,l,d;if(this.data.length>0)for(u=l=1,d=this.data.length;1<=d?l<d:l>d;u=1<=d?++l:--l)this._bubbleUp(u)},o.prototype.queue=function(u){this.data.push(u),this._bubbleUp(this.data.length-1)},o.prototype.dequeue=function(){var u,l;return l=this.data[0],u=this.data.pop(),this.data.length>0&&(this.data[0]=u,this._bubbleDown(0)),l},o.prototype.peek=function(){return this.data[0]},o.prototype.clear=function(){this.length=0,this.data.length=0},o.prototype._bubbleUp=function(u){for(var l,d;u>0&&(l=u-1>>>1,this.comparator(this.data[u],this.data[l])<0);)d=this.data[l],this.data[l]=this.data[u],this.data[u]=d,u=l},o.prototype._bubbleDown=function(u){var l,d,m,y,S;for(l=this.data.length-1;d=(u<<1)+1,y=d+1,m=u,d<=l&&this.comparator(this.data[d],this.data[m])<0&&(m=d),y<=l&&this.comparator(this.data[y],this.data[m])<0&&(m=y),m!==u;)S=this.data[m],this.data[m]=this.data[u],this.data[u]=S,u=m},o}()},{}]},{},[1])(1)})}(priorityQueue)),priorityQueue.exports}var priorityQueueExports=requirePriorityQueue();const PriorityQueue=getDefaultExportFromCjs(priorityQueueExports),dxs=[1,0,-1,0,1,1,-1,-1],dys=[0,1,0,-1,1,-1,1,-1];function fromWaterShed(r={}){let{points:n,mask:e,image:i,fillMaxValue:s=this.maxValue,invert:o=!1}=r,u=i||this;u.checkProcessable("fromWaterShed",{bitDepth:[8,16],components:1}),o=!o,n||(n=u.getLocalMaxima({invert:o,mask:e}));let l=o?0:1,d=new Int16Array(u.size),m=u.width,y=u.height,S=new PriorityQueue({comparator:(X,he)=>X[2]-he[2],strategy:PriorityQueue.BinaryHeapStrategy});for(let X=0;X<n.length;X++){let he=n[X][0]+n[X][1]*m;d[he]=X+1;let Ce=u.data[he];(o&&Ce<=s||!o&&Ce>=s)&&S.queue([n[X][0],n[X][1],Ce])}for(;S.length>0;){let X=S.dequeue(),he=X[0]+X[1]*m;for(let Ce=0;Ce<4;Ce++){let Ee=X[0]+dxs[Ce],xe=X[1]+dys[Ce];if(Ee>=0&&xe>=0&&Ee<m&&xe<y){let be=Ee+xe*m;if(!e||e.getBit(be)===l){let we=u.data[be];(o&&we<=s||!o&&we>=s)&&d[be]===0&&(d[be]=d[he],S.queue([X[0]+dxs[Ce],X[1]+dys[Ce],we]))}}}}return new RoiMap(u,d)}class RoiManager{constructor(n,e={}){this._image=n,this._options=e,this._options.label||(this._options.label="default"),this._layers={},this._painted=null}fromMaxima(n={}){let e=Object.assign({},this._options,n),i=fromMaxima.call(this._image,n);this._layers[e.label]=new RoiLayer(i,e)}fromPoints(n,e={}){let i=Object.assign({},this._options,e),s=fromPoints.call(this._image,n,e);return this._layers[i.label]=new RoiLayer(s,i),this}putMap(n,e={}){let i=new RoiMap(this._image,n),s=Object.assign({},this._options,e);return this._layers[s.label]=new RoiLayer(i,s),this}fromWaterShed(n={}){let e=Object.assign({},this._options,n),i=fromWaterShed.call(this._image,n);this._layers[e.label]=new RoiLayer(i,e)}fromMask(n,e={}){let i=Object.assign({},this._options,e),s=fromMask.call(this._image,n,e);return this._layers[i.label]=new RoiLayer(s,i),this}fromMaskConnectedComponentLabelingAlgorithm(n,e={}){let i=Object.assign({},this._options,e),s=fromMaskConnectedComponentLabelingAlgorithm.call(this._image,n,e);return this._layers[i.label]=new RoiLayer(s,i),this}getMap(n={}){let e=Object.assign({},this._options,n);return this._assertLayerWithLabel(e.label),this._layers[e.label].roiMap}rowsInfo(n={}){return this.getMap(n).rowsInfo()}colsInfo(n={}){return this.getMap(n).rowsInfo()}getRoiIds(n={}){let e=this.getRois(n);if(e){let i=new Array(e.length);for(let s=0;s<e.length;s++)i[s]=e[s].id;return i}throw new Error("ROIs not found")}getRois(n={}){let{label:e=this._options.label,positive:i=!0,negative:s=!0,minSurface:o=0,maxSurface:u=Number.POSITIVE_INFINITY,minWidth:l=0,maxWidth:d=Number.POSITIVE_INFINITY,minHeight:m=0,maxHeight:y=Number.POSITIVE_INFINITY,minRatio:S=0,maxRatio:X=Number.POSITIVE_INFINITY}=n;if(!this._layers[e])throw new Error(`this Roi layer (${e}) does not exist`);const he=this._layers[e].roi,Ce=[];for(const Ee of he)(Ee.id<0&&s||Ee.id>0&&i)&&Ee.surface>=o&&Ee.surface<=u&&Ee.width>=l&&Ee.width<=d&&Ee.height>=m&&Ee.height<=y&&Ee.ratio>=S&&Ee.ratio<=X&&Ce.push(Ee);return Ce}getRoi(n,e={}){const{label:i=this._options.label}=e;if(!this._layers[i])throw new Error(`this Roi layer (${i}) does not exist`);const s=this._layers[i].roi.find(o=>o.id===n);if(!s)throw new Error(`found no Roi with id ${n}`);return s}getMasks(n={}){let e=this.getRois(n),i=new Array(e.length);for(let s=0;s<e.length;s++)i[s]=e[s].getMask(n);return i}getAnalysisMasks(n={}){const{analysisProperty:e}=n;let i=`${e}Mask`,s=this.getRois(n);return s.length===0||!s[0][i]?[]:s.map(o=>o[i])}getData(n={}){let e=Object.assign({},this._options,n);return this._assertLayerWithLabel(e.label),this._layers[e.label].roiMap.data}paint(n={}){let{labelProperty:e,analysisProperty:i}=n;this._painted||(this._painted=this._image.rgba8());let s=this.getMasks(n);if(e){const o=this.getRois(n);n.labels=o.map(m=>deepValue(m,e));const u=Math.max(...n.labels);let l=!1,d=!1;if(e.includes("surface")?l=!0:/(?:perimeter|min|max|external|width|height|length)/.test(e)&&(d=!0),isFinite(u)){let m="";if(n.unit!=="pixel"&&n.pixelSize&&(d||l)){m=l?`${n.unit}^2`:n.unit;let y=l?"m^2":"m",S=l?n.pixelSize**2:n.pixelSize;const X=Qty.swiftConverter(y,m);n.labels=n.labels.map(he=>X(S*he))}u>50?n.labels=n.labels.map(y=>Math.round(y)+m):u>10?n.labels=n.labels.map(y=>y.toFixed(1)+m):n.labels=n.labels.map(y=>y.toFixed(2)+m)}n.labelsPosition=o.map(m=>[m.meanX,m.meanY])}if(this._painted.paintMasks(s,n),i){let o=this.getAnalysisMasks(n);this._painted.paintMasks(o,{color:n.analysisColor,alpha:n.analysisAlpha})}return this._painted}getMask(n={}){let e=new Image(this._image.width,this._image.height,{kind:"BINARY"}),i=this.getMasks(n);for(let s=0;s<i.length;s++){let o=i[s];for(let u=0;u<o.width;u++)for(let l=0;l<o.height;l++)o.getBitXY(u,l)&&e.setBitXY(u+o.position[0],l+o.position[1])}return e}resetPainted(n={}){const{image:e}=n;e?this._painted=this.image.rgba8():this._painted=this._image.rgba8()}mergeRoi(n={}){const e=this.getMap(n);return e.mergeRoi(n),this.putMap(e.data,n),this}mergeRois(n,e={}){if(!Array.isArray(n)||n.some(s=>!Number.isInteger(s)))throw new Error("Roi ids must be an array of integers");if(n.length<2)throw new Error("Roi ids must have at least two elements");if(new Set(n).size!==n.length)throw new Error("Roi ids must be all different");n.forEach(s=>this.getRoi(s));const i=this.getMap(e);return i.mergeRois(n),this.putMap(i.data,e),this}findCorrespondingRoi(n,e={}){let i=this.getRois(e),s=[];for(let o=0;o<i.length;o++){let u=i[o],l=u.minX,d=u.minY,m=u.points,y=Math.sign(u.id),S=correspondingRoisInformation(l,d,m,n,y);s.push(S)}return s}_assertLayerWithLabel(n){if(!this._layers[n])throw new Error(`no layer with label ${n}`)}}function correspondingRoisInformation(r,n,e,i,s){let o={id:[],surface:[],roiSurfaceCovered:[],same:0,opposite:0,total:0};for(let u=0;u<e.length;u++){let l=e[u],d=l[0],m=l[1],y=d+r+(m+n)*i.width,S=i.data[y];(S>0||S<0)&&(o.id.includes(S)?o.surface[o.id.indexOf(S)]+=1:(o.id.push(S),o.surface.push(1)))}for(let u=0;u<o.id.length;u++)Math.sign(o.id[u])===s?o.same+=o.surface[u]:o.opposite+=o.surface[u],o.roiSurfaceCovered[u]=o.surface[u]/e.length;return o.total=o.opposite+o.same,o}const objectToString=Object.prototype.toString;class Image{constructor(n,e,i,s){if(arguments.length===1?(s=n,{width:n,height:e,data:i}=s):i&&!i.length&&(s=i,{data:i}=s),n===void 0&&(n=1),e===void 0&&(e=1),s===void 0&&(s={}),typeof s!="object"||s===null)throw new TypeError("options must be an object");if(!Number.isInteger(n)||n<=0)throw new RangeError("width must be a positive integer");if(!Number.isInteger(e)||e<=0)throw new RangeError("height must be a positive integer");const{kind:o=RGBA}=s;if(typeof o!="string")throw new TypeError("kind must be a string");const u=getKind(o),l=Object.assign({},s);for(const Ee in u)l[Ee]===void 0&&(l[Ee]=u[Ee]);verifyKindDefinition(l);const{components:d,bitDepth:m,colorModel:y}=l,S=l.alpha+0,X=n*e,he=d+S,Ce=m===32?Number.MAX_VALUE:2**m-1;if(i===void 0)i=createPixelArray(X,d,S,he,m,Ce);else{const Ee=getTheoreticalPixelArraySize(X,he,m);if(i.length!==Ee)throw new RangeError(`incorrect data size: ${i.length}. Should be ${Ee}`)}this.width=n,this.height=e,this.data=i,this.size=X,this.components=d,this.alpha=S,this.bitDepth=m,this.maxValue=Ce,this.colorModel=y,this.channels=he,this.meta=s.meta||{},Object.defineProperty(this,"parent",{enumerable:!1,writable:!0,configurable:!0,value:s.parent||null}),this.position=s.position||[0,0],this.computed=null,this.sizes=[this.width,this.height],this.multiplierX=this.channels,this.multiplierY=this.channels*this.width,this.isClamped=this.bitDepth<32,this.borderSizes=[0,0]}get[Symbol.toStringTag](){return"IJSImage"}static isImage(n){return objectToString.call(n)==="[object IJSImage]"}static fromCanvas(n){const i=n.getContext("2d").getImageData(0,0,n.width,n.height);return new Image(i.width,i.height,i.data)}static createFrom(n,e){const i=getImageParameters(n);return Object.assign(i,{parent:n,position:[0,0]},e),new Image(i)}getRoiManager(n){return new RoiManager(this,n)}clone(){const n=this.data.slice();return new Image(this.width,this.height,n,this)}apply(n){for(let e=0;e<this.height;e++)for(let i=0;i<this.width;i++){let s=(e*this.width+i)*this.channels;n.call(this,s)}}}setValueMethods(Image);setBitMethods(Image);setExportMethods(Image);Image.prototype.checkProcessable=checkProcessable;Image.prototype.getRGBAData=getRGBAData;Image.load=load;Image.extendMethod=extendMethod;Image.extendProperty=extendProperty;extend$1(Image);var workerTemplate={},hasRequiredWorkerTemplate;function requireWorkerTemplate(){if(hasRequiredWorkerTemplate)return workerTemplate;hasRequiredWorkerTemplate=1;var r=function(){self.window=self;function e(){this._listeners={}}e.prototype.on=function(s,o){if(this._listeners[s])throw new RangeError("there is already a listener for "+s);if(typeof o!="function")throw new TypeError("callback argument must be a function");this._listeners[s]=o},e.prototype._send=function(s,o,u){u===void 0?u=[]:Array.isArray(u)||(u=[u]),self.postMessage({id:s,data:o},u)},e.prototype._trigger=function(s,o){if(!this._listeners[s])throw new Error("event "+s+" is not defined");this._listeners[s].apply(null,o)};var i=new e;self.onmessage=function(s){switch(s.data.action){case"exec":s.data.args.unshift(function(o,u){i._send(s.data.id,o,u)}),i._trigger(s.data.event,s.data.args);break;case"ping":i._send(s.data.id,"pong");break;default:throw new Error("unexpected action: "+s.data.action)}}},n=r.toString().split('"CODE";');return workerTemplate.newWorkerURL=function(i,s){var o=new Blob(["(",n[0],"importScripts.apply(self, "+JSON.stringify(s)+`);
`,"(",i,")();",n[1],")();"],{type:"application/javascript"});return URL.createObjectURL(o)},workerTemplate}var src$1,hasRequiredSrc$1;function requireSrc$1(){if(hasRequiredSrc$1)return src$1;hasRequiredSrc$1=1;var r=requireWorkerTemplate(),n=navigator.hardwareConcurrency||1;function e(i,s){if(typeof i!="string"&&typeof i!="function")throw new TypeError("func argument must be a function");if(s===void 0&&(s={}),typeof s!="object"||s===null)throw new TypeError("options argument must be an object");this._workerCode=i.toString(),s.maxWorkers===void 0||s.maxWorkers==="auto"?this._numWorkers=Math.min(n-1,1):s.maxWorkers>0?this._numWorkers=Math.min(s.maxWorkers,n):this._numWorkers=n,this._workers=new Map,this._timeout=s.timeout||0,this._terminateOnError=!!s.terminateOnError;var o=s.deps;typeof o=="string"&&(o=[o]),Array.isArray(o)||(o=void 0),this._id=0,this._terminated=!1,this._working=0,this._waiting=[],this._init(o)}return e.prototype._init=function(i){for(var s=r.newWorkerURL(this._workerCode,i),o=0;o<this._numWorkers;o++){var u=new Worker(s);u.onmessage=this._onmessage.bind(this,u),u.onerror=this._onerror.bind(this,u),u.running=!1,u.id=o,this._workers.set(u,null)}URL.revokeObjectURL(s)},e.prototype._onerror=function(i,s){if(!this._terminated){this._working--,i.running=!1;var o=this._workers.get(i);o&&o[1](s.message),this._workers.set(i,null),this._terminateOnError?this.terminate():this._exec()}},e.prototype._onmessage=function(i,s){if(!this._terminated){this._working--,i.running=!1;var o=this._workers.get(i);o&&o[0](s.data.data),this._workers.set(i,null),this._exec()}},e.prototype._exec=function(){for(var i of this._workers.keys()){if(this._working===this._numWorkers||this._waiting.length===0)return;if(!i.running)for(var s=0;s<this._waiting.length;s++){var o=this._waiting[s];if(!(typeof o[4]=="number"&&o[4]!==i.id)){this._waiting.splice(s,1),i.postMessage({action:"exec",event:o[0],args:o[1]},o[2]),i.running=!0,i.time=Date.now(),this._workers.set(i,o[3]),this._working++;break}}}},e.prototype.terminate=function(){if(!this._terminated){for(var i of this._workers)i[0].terminate(),i[1]&&i[1][1](new Error("Terminated"));this._workers.clear(),this._waiting=[],this._working=0,this._terminated=!0}},e.prototype.postAll=function(i,s){if(this._terminated)throw new Error("Cannot post (terminated)");var o=[];for(var u of this._workers.keys())o.push(this.post(i,s,[],u.id));return Promise.all(o)},e.prototype.post=function(i,s,o,u){s===void 0&&(s=[]),o===void 0&&(o=[]),Array.isArray(s)||(s=[s]),Array.isArray(o)||(o=[o]);var l=this;return new Promise(function(d,m){if(l._terminated)throw new Error("Cannot post (terminated)");l._waiting.push([i,s,o,[d,m],u]),l._exec()})},src$1=e,src$1}var srcExports$1=requireSrc$1();const WorkerManager=getDefaultExportFromCjs(srcExports$1),defaultOptions$1={regression:{kernelType:"polynomial",kernelOptions:{degree:2,constant:1}},threshold:.02,roi:{minSurface:100,positive:!1},sampling:20,include:[]};function run(r,n,e){n=Object.assign({},defaultOptions$1,n);const i=this.manager;return Array.isArray(r)?Promise.all(r.map(function(s){const o=runOnce(i,s,n);return typeof e=="function"&&o.then(e),o})):runOnce(i,r,n)}function runOnce(r,n,e){return r.post("data",[n,e]).then(function(i){for(let s in i)i[s]=new Image(i[s]);return i})}function work(){worker.on("data",function(r,n,e){n=new IJS(n);const i={},s=[],o=n.grey(),u=o.sobelFilter();he("sobel",u);const l=u.level().mask({threshold:e.threshold});he("mask",l);const d=u.getRoiManager();d.fromMask(l);const m=d.getMask(e.roi);he("realMask",m);const y=o.getPixelsGrid({sampling:e.sampling,mask:m}),S=n.getBackground(y.xyS,y.zS,e.regression);he("background",S);const X=n.subtract(S);i.result=X,s.push(X.data.buffer),r(i,s);function he(Ce,Ee){e.include.includes(Ce)&&(i[Ce]=Ee,s.push(Ee.data.buffer))}})}const background={run,work};function extend(r){r.extendMethod("background",background)}let Worker$1=class Hu{constructor(){this._url=null,this._deps=[null]}checkUrl(){if(this._url===null)throw new Error("image worker must be initialized with an URL")}get url(){return this._url}set url(n){if(typeof n!="string")throw new TypeError("worker URL must be a string");this._url=n,this._deps[0]=n}static extendMethod(n,e){let i,s,o={};function u(...l){return i||(this.checkUrl(),s=this.url,i=new WorkerManager(e.work,{deps:s}),o.manager=i),e.run.call(o,...l)}u.reset=function(){i&&(i.terminate(),i=new WorkerManager(e.work,{deps:s}),o.manager=i)},Hu.prototype[n]=u}};extend(Worker$1);function IsDevMode(){return window.location.href.includes(":5173")}var runtime={exports:{}},hasRequiredRuntime;function requireRuntime(){return hasRequiredRuntime||(hasRequiredRuntime=1,function(r){var n=function(e){var i=Object.prototype,s=i.hasOwnProperty,o=Object.defineProperty||function(He,We,qe){He[We]=qe.value},u,l=typeof Symbol=="function"?Symbol:{},d=l.iterator||"@@iterator",m=l.asyncIterator||"@@asyncIterator",y=l.toStringTag||"@@toStringTag";function S(He,We,qe){return Object.defineProperty(He,We,{value:qe,enumerable:!0,configurable:!0,writable:!0}),He[We]}try{S({},"")}catch{S=function(We,qe,Ke){return We[qe]=Ke}}function X(He,We,qe,Ke){var st=We&&We.prototype instanceof ve?We:ve,ut=Object.create(st.prototype),nt=new _t(Ke||[]);return o(ut,"_invoke",{value:Ye(He,qe,nt)}),ut}e.wrap=X;function he(He,We,qe){try{return{type:"normal",arg:He.call(We,qe)}}catch(Ke){return{type:"throw",arg:Ke}}}var Ce="suspendedStart",Ee="suspendedYield",xe="executing",be="completed",we={};function ve(){}function ke(){}function De(){}var Oe={};S(Oe,d,function(){return this});var Le=Object.getPrototypeOf,Ae=Le&&Le(Le(bt([])));Ae&&Ae!==i&&s.call(Ae,d)&&(Oe=Ae);var Ie=De.prototype=ve.prototype=Object.create(Oe);ke.prototype=De,o(Ie,"constructor",{value:De,configurable:!0}),o(De,"constructor",{value:ke,configurable:!0}),ke.displayName=S(De,y,"GeneratorFunction");function Ue(He){["next","throw","return"].forEach(function(We){S(He,We,function(qe){return this._invoke(We,qe)})})}e.isGeneratorFunction=function(He){var We=typeof He=="function"&&He.constructor;return We?We===ke||(We.displayName||We.name)==="GeneratorFunction":!1},e.mark=function(He){return Object.setPrototypeOf?Object.setPrototypeOf(He,De):(He.__proto__=De,S(He,y,"GeneratorFunction")),He.prototype=Object.create(Ie),He},e.awrap=function(He){return{__await:He}};function ze(He,We){function qe(ut,nt,vt,it){var Ve=he(He[ut],He,nt);if(Ve.type==="throw")it(Ve.arg);else{var ht=Ve.arg,ct=ht.value;return ct&&typeof ct=="object"&&s.call(ct,"__await")?We.resolve(ct.__await).then(function(St){qe("next",St,vt,it)},function(St){qe("throw",St,vt,it)}):We.resolve(ct).then(function(St){ht.value=St,vt(ht)},function(St){return qe("throw",St,vt,it)})}}var Ke;function st(ut,nt){function vt(){return new We(function(it,Ve){qe(ut,nt,it,Ve)})}return Ke=Ke?Ke.then(vt,vt):vt()}o(this,"_invoke",{value:st})}Ue(ze.prototype),S(ze.prototype,m,function(){return this}),e.AsyncIterator=ze,e.async=function(He,We,qe,Ke,st){st===void 0&&(st=Promise);var ut=new ze(X(He,We,qe,Ke),st);return e.isGeneratorFunction(We)?ut:ut.next().then(function(nt){return nt.done?nt.value:ut.next()})};function Ye(He,We,qe){var Ke=Ce;return function(ut,nt){if(Ke===xe)throw new Error("Generator is already running");if(Ke===be){if(ut==="throw")throw nt;return rt()}for(qe.method=ut,qe.arg=nt;;){var vt=qe.delegate;if(vt){var it=Xe(vt,qe);if(it){if(it===we)continue;return it}}if(qe.method==="next")qe.sent=qe._sent=qe.arg;else if(qe.method==="throw"){if(Ke===Ce)throw Ke=be,qe.arg;qe.dispatchException(qe.arg)}else qe.method==="return"&&qe.abrupt("return",qe.arg);Ke=xe;var Ve=he(He,We,qe);if(Ve.type==="normal"){if(Ke=qe.done?be:Ee,Ve.arg===we)continue;return{value:Ve.arg,done:qe.done}}else Ve.type==="throw"&&(Ke=be,qe.method="throw",qe.arg=Ve.arg)}}}function Xe(He,We){var qe=We.method,Ke=He.iterator[qe];if(Ke===u)return We.delegate=null,qe==="throw"&&He.iterator.return&&(We.method="return",We.arg=u,Xe(He,We),We.method==="throw")||qe!=="return"&&(We.method="throw",We.arg=new TypeError("The iterator does not provide a '"+qe+"' method")),we;var st=he(Ke,He.iterator,We.arg);if(st.type==="throw")return We.method="throw",We.arg=st.arg,We.delegate=null,we;var ut=st.arg;if(!ut)return We.method="throw",We.arg=new TypeError("iterator result is not an object"),We.delegate=null,we;if(ut.done)We[He.resultName]=ut.value,We.next=He.nextLoc,We.method!=="return"&&(We.method="next",We.arg=u);else return ut;return We.delegate=null,we}Ue(Ie),S(Ie,y,"Generator"),S(Ie,d,function(){return this}),S(Ie,"toString",function(){return"[object Generator]"});function tt(He){var We={tryLoc:He[0]};1 in He&&(We.catchLoc=He[1]),2 in He&&(We.finallyLoc=He[2],We.afterLoc=He[3]),this.tryEntries.push(We)}function lt(He){var We=He.completion||{};We.type="normal",delete We.arg,He.completion=We}function _t(He){this.tryEntries=[{tryLoc:"root"}],He.forEach(tt,this),this.reset(!0)}e.keys=function(He){var We=Object(He),qe=[];for(var Ke in We)qe.push(Ke);return qe.reverse(),function st(){for(;qe.length;){var ut=qe.pop();if(ut in We)return st.value=ut,st.done=!1,st}return st.done=!0,st}};function bt(He){if(He){var We=He[d];if(We)return We.call(He);if(typeof He.next=="function")return He;if(!isNaN(He.length)){var qe=-1,Ke=function st(){for(;++qe<He.length;)if(s.call(He,qe))return st.value=He[qe],st.done=!1,st;return st.value=u,st.done=!0,st};return Ke.next=Ke}}return{next:rt}}e.values=bt;function rt(){return{value:u,done:!0}}return _t.prototype={constructor:_t,reset:function(He){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(lt),!He)for(var We in this)We.charAt(0)==="t"&&s.call(this,We)&&!isNaN(+We.slice(1))&&(this[We]=u)},stop:function(){this.done=!0;var He=this.tryEntries[0],We=He.completion;if(We.type==="throw")throw We.arg;return this.rval},dispatchException:function(He){if(this.done)throw He;var We=this;function qe(it,Ve){return ut.type="throw",ut.arg=He,We.next=it,Ve&&(We.method="next",We.arg=u),!!Ve}for(var Ke=this.tryEntries.length-1;Ke>=0;--Ke){var st=this.tryEntries[Ke],ut=st.completion;if(st.tryLoc==="root")return qe("end");if(st.tryLoc<=this.prev){var nt=s.call(st,"catchLoc"),vt=s.call(st,"finallyLoc");if(nt&&vt){if(this.prev<st.catchLoc)return qe(st.catchLoc,!0);if(this.prev<st.finallyLoc)return qe(st.finallyLoc)}else if(nt){if(this.prev<st.catchLoc)return qe(st.catchLoc,!0)}else if(vt){if(this.prev<st.finallyLoc)return qe(st.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(He,We){for(var qe=this.tryEntries.length-1;qe>=0;--qe){var Ke=this.tryEntries[qe];if(Ke.tryLoc<=this.prev&&s.call(Ke,"finallyLoc")&&this.prev<Ke.finallyLoc){var st=Ke;break}}st&&(He==="break"||He==="continue")&&st.tryLoc<=We&&We<=st.finallyLoc&&(st=null);var ut=st?st.completion:{};return ut.type=He,ut.arg=We,st?(this.method="next",this.next=st.finallyLoc,we):this.complete(ut)},complete:function(He,We){if(He.type==="throw")throw He.arg;return He.type==="break"||He.type==="continue"?this.next=He.arg:He.type==="return"?(this.rval=this.arg=He.arg,this.method="return",this.next="end"):He.type==="normal"&&We&&(this.next=We),we},finish:function(He){for(var We=this.tryEntries.length-1;We>=0;--We){var qe=this.tryEntries[We];if(qe.finallyLoc===He)return this.complete(qe.completion,qe.afterLoc),lt(qe),we}},catch:function(He){for(var We=this.tryEntries.length-1;We>=0;--We){var qe=this.tryEntries[We];if(qe.tryLoc===He){var Ke=qe.completion;if(Ke.type==="throw"){var st=Ke.arg;lt(qe)}return st}}throw new Error("illegal catch attempt")},delegateYield:function(He,We,qe){return this.delegate={iterator:bt(He),resultName:We,nextLoc:qe},this.method==="next"&&(this.arg=u),we}},e}(r.exports);try{regeneratorRuntime=n}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}}(runtime)),runtime.exports}var getId,hasRequiredGetId;function requireGetId(){return hasRequiredGetId||(hasRequiredGetId=1,getId=(r,n)=>`${r}-${n}-${Math.random().toString(16).slice(3,8)}`),getId}var createJob,hasRequiredCreateJob;function requireCreateJob(){if(hasRequiredCreateJob)return createJob;hasRequiredCreateJob=1;const r=requireGetId();let n=0;return createJob=({id:e,action:i,payload:s={}})=>{let o=e;return typeof o>"u"&&(o=r("Job",n),n+=1),{id:o,action:i,payload:s}},createJob}var log={},hasRequiredLog;function requireLog(){if(hasRequiredLog)return log;hasRequiredLog=1;let r=!1;return log.logging=r,log.setLogging=n=>{r=n},log.log=(...n)=>r?console.log.apply(this,n):null,log}var createScheduler,hasRequiredCreateScheduler;function requireCreateScheduler(){if(hasRequiredCreateScheduler)return createScheduler;hasRequiredCreateScheduler=1;const r=requireCreateJob(),{log:n}=requireLog(),e=requireGetId();let i=0;return createScheduler=()=>{const s=e("Scheduler",i),o={},u={};let l=[];i+=1;const d=()=>l.length,m=()=>Object.keys(o).length,y=()=>{if(l.length!==0){const Ee=Object.keys(o);for(let xe=0;xe<Ee.length;xe+=1)if(typeof u[Ee[xe]]>"u"){l[0](o[Ee[xe]]);break}}},S=(Ee,xe)=>new Promise((be,we)=>{const ve=r({action:Ee,payload:xe});l.push(async ke=>{l.shift(),u[ke.id]=ve;try{be(await ke[Ee].apply(this,[...xe,ve.id]))}catch(De){we(De)}finally{delete u[ke.id],y()}}),n(`[${s}]: Add ${ve.id} to JobQueue`),n(`[${s}]: JobQueue length=${l.length}`),y()});return{addWorker:Ee=>(o[Ee.id]=Ee,n(`[${s}]: Add ${Ee.id}`),n(`[${s}]: Number of workers=${m()}`),y(),Ee.id),addJob:async(Ee,...xe)=>{if(m()===0)throw Error(`[${s}]: You need to have at least one worker before adding jobs`);return S(Ee,xe)},terminate:async()=>{Object.keys(o).forEach(async Ee=>{await o[Ee].terminate()}),l=[]},getQueueLen:d,getNumWorkers:m}},createScheduler}var getEnvironment,hasRequiredGetEnvironment;function requireGetEnvironment(){return hasRequiredGetEnvironment||(hasRequiredGetEnvironment=1,getEnvironment=r=>{const n={};return typeof WorkerGlobalScope<"u"?n.type="webworker":typeof document=="object"?n.type="browser":typeof process=="object"&&typeof commonjsRequire=="function"&&(n.type="node"),typeof r>"u"?n:n[r]}),getEnvironment}var resolvePaths,hasRequiredResolvePaths;function requireResolvePaths(){if(hasRequiredResolvePaths)return resolvePaths;hasRequiredResolvePaths=1;const n=requireGetEnvironment()("type")==="browser"?e=>new URL(e,window.location.href).href:e=>e;return resolvePaths=e=>{const i={...e};return["corePath","workerPath","langPath"].forEach(s=>{e[s]&&(i[s]=n(i[s]))}),i},resolvePaths}var OEM,hasRequiredOEM;function requireOEM(){return hasRequiredOEM||(hasRequiredOEM=1,OEM={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}),OEM}const name="tesseract.js",version="6.0.0",description="Pure Javascript Multilingual OCR",main="src/index.js",types="src/index.d.ts",unpkg="dist/tesseract.min.js",jsdelivr="dist/tesseract.min.js",scripts={start:"node scripts/server.js",build:"rimraf dist && webpack --config scripts/webpack.config.prod.js && rollup -c scripts/rollup.esm.mjs","profile:tesseract":"webpack-bundle-analyzer dist/tesseract-stats.json","profile:worker":"webpack-bundle-analyzer dist/worker-stats.json",prepublishOnly:"npm run build",wait:"rimraf dist && wait-on http://localhost:3000/dist/tesseract.min.js",test:"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:* test:node:all","test:node":"nyc mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser-tpl":"mocha-headless-chrome -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:detect":"npm run test:browser-tpl -- -f ./tests/detect.test.html","test:browser:recognize":"npm run test:browser-tpl -- -f ./tests/recognize.test.html","test:browser:scheduler":"npm run test:browser-tpl -- -f ./tests/scheduler.test.html","test:browser:FS":"npm run test:browser-tpl -- -f ./tests/FS.test.html",lint:"eslint src","lint:fix":"eslint --fix src",postinstall:"opencollective-postinstall || true"},browser$1={"./src/worker/node/index.js":"./src/worker/browser/index.js"},author="",contributors=["jeromewu"],license="Apache-2.0",devDependencies={"@babel/core":"^7.21.4","@babel/eslint-parser":"^7.21.3","@babel/preset-env":"^7.21.4","@rollup/plugin-commonjs":"^24.1.0",acorn:"^8.8.2","babel-loader":"^9.1.2",buffer:"^6.0.3",cors:"^2.8.5",eslint:"^7.32.0","eslint-config-airbnb-base":"^14.2.1","eslint-plugin-import":"^2.27.5","expect.js":"^0.3.1",express:"^4.18.2",mocha:"^10.2.0","mocha-headless-chrome":"^4.0.0","npm-run-all":"^4.1.5",nyc:"^15.1.0",rimraf:"^5.0.0",rollup:"^3.20.7","wait-on":"^7.0.1",webpack:"^5.79.0","webpack-bundle-analyzer":"^4.8.0","webpack-cli":"^5.0.1","webpack-dev-middleware":"^6.0.2","rollup-plugin-sourcemaps":"^0.6.3"},dependencies={"bmp-js":"^0.1.0","idb-keyval":"^6.2.0","is-url":"^1.2.4","node-fetch":"^2.6.9","opencollective-postinstall":"^2.0.3","regenerator-runtime":"^0.13.3","tesseract.js-core":"^6.0.0","wasm-feature-detect":"^1.2.11",zlibjs:"^0.3.1"},overrides={"@rollup/pluginutils":"^5.0.2"},repository={type:"git",url:"https://github.com/naptha/tesseract.js.git"},bugs={url:"https://github.com/naptha/tesseract.js/issues"},homepage="https://github.com/naptha/tesseract.js",collective={type:"opencollective",url:"https://opencollective.com/tesseractjs"},require$$0={name,version,description,main,types,unpkg,jsdelivr,scripts,browser:browser$1,author,contributors,license,devDependencies,dependencies,overrides,repository,bugs,homepage,collective};var defaultOptions,hasRequiredDefaultOptions$1;function requireDefaultOptions$1(){return hasRequiredDefaultOptions$1||(hasRequiredDefaultOptions$1=1,defaultOptions={workerBlobURL:!0,logger:()=>{}}),defaultOptions}var defaultOptions_1,hasRequiredDefaultOptions;function requireDefaultOptions(){if(hasRequiredDefaultOptions)return defaultOptions_1;hasRequiredDefaultOptions=1;const r=require$$0.version;return defaultOptions_1={...requireDefaultOptions$1(),workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${r}/dist/worker.min.js`},defaultOptions_1}var spawnWorker,hasRequiredSpawnWorker;function requireSpawnWorker(){return hasRequiredSpawnWorker||(hasRequiredSpawnWorker=1,spawnWorker=({workerPath:r,workerBlobURL:n})=>{let e;if(Blob&&URL&&n){const i=new Blob([`importScripts("${r}");`],{type:"application/javascript"});e=new Worker(URL.createObjectURL(i))}else e=new Worker(r);return e}),spawnWorker}var terminateWorker,hasRequiredTerminateWorker;function requireTerminateWorker(){return hasRequiredTerminateWorker||(hasRequiredTerminateWorker=1,terminateWorker=r=>{r.terminate()}),terminateWorker}var onMessage,hasRequiredOnMessage;function requireOnMessage(){return hasRequiredOnMessage||(hasRequiredOnMessage=1,onMessage=(r,n)=>{r.onmessage=({data:e})=>{n(e)}}),onMessage}var send,hasRequiredSend;function requireSend(){return hasRequiredSend||(hasRequiredSend=1,send=async(r,n)=>{r.postMessage(n)}),send}var loadImage_1,hasRequiredLoadImage;function requireLoadImage(){if(hasRequiredLoadImage)return loadImage_1;hasRequiredLoadImage=1;const r=e=>new Promise((i,s)=>{const o=new FileReader;o.onload=()=>{i(o.result)},o.onerror=({target:{error:{code:u}}})=>{s(Error(`File could not be read! Code=${u}`))},o.readAsArrayBuffer(e)}),n=async e=>{let i=e;if(typeof e>"u")return"undefined";if(typeof e=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(e)?i=atob(e.split(",")[1]).split("").map(s=>s.charCodeAt(0)):i=await(await fetch(e)).arrayBuffer();else if(typeof HTMLElement<"u"&&e instanceof HTMLElement)e.tagName==="IMG"&&(i=await n(e.src)),e.tagName==="VIDEO"&&(i=await n(e.poster)),e.tagName==="CANVAS"&&await new Promise(s=>{e.toBlob(async o=>{i=await r(o),s()})});else if(typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas){const s=await e.convertToBlob();i=await r(s)}else(e instanceof File||e instanceof Blob)&&(i=await r(e));return new Uint8Array(i)};return loadImage_1=n,loadImage_1}var browser,hasRequiredBrowser;function requireBrowser(){if(hasRequiredBrowser)return browser;hasRequiredBrowser=1;const r=requireDefaultOptions(),n=requireSpawnWorker(),e=requireTerminateWorker(),i=requireOnMessage(),s=requireSend(),o=requireLoadImage();return browser={defaultOptions:r,spawnWorker:n,terminateWorker:e,onMessage:i,send:s,loadImage:o},browser}var createWorker,hasRequiredCreateWorker;function requireCreateWorker(){if(hasRequiredCreateWorker)return createWorker;hasRequiredCreateWorker=1;const r=requireResolvePaths(),n=requireCreateJob(),{log:e}=requireLog(),i=requireGetId(),s=requireOEM(),{defaultOptions:o,spawnWorker:u,terminateWorker:l,onMessage:d,loadImage:m,send:y}=requireBrowser();let S=0;return createWorker=async(X="eng",he=s.LSTM_ONLY,Ce={},Ee={})=>{const xe=i("Worker",S),{logger:be,errorHandler:we,...ve}=r({...o,...Ce}),ke={},De=typeof X=="string"?X.split("+"):X;let Oe=he,Le=Ee;const Ae=[s.DEFAULT,s.LSTM_ONLY].includes(he)&&!ve.legacyCore;let Ie,Ue;const ze=new Promise((ht,ct)=>{Ue=ht,Ie=ct}),Ye=ht=>{Ie(ht.message)};let Xe=u(ve);Xe.onerror=Ye,S+=1;const tt=({id:ht,action:ct,payload:St})=>new Promise((Ct,Dt)=>{e(`[${xe}]: Start ${ht}, action=${ct}`);const Tt=`${ct}-${ht}`;ke[Tt]={resolve:Ct,reject:Dt},y(Xe,{workerId:xe,jobId:ht,action:ct,payload:St})}),lt=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),_t=ht=>tt(n({id:ht,action:"load",payload:{options:{lstmOnly:Ae,corePath:ve.corePath,logging:ve.logging}}})),bt=(ht,ct,St)=>tt(n({id:St,action:"FS",payload:{method:"writeFile",args:[ht,ct]}})),rt=(ht,ct)=>tt(n({id:ct,action:"FS",payload:{method:"readFile",args:[ht,{encoding:"utf8"}]}})),He=(ht,ct)=>tt(n({id:ct,action:"FS",payload:{method:"unlink",args:[ht]}})),We=(ht,ct,St)=>tt(n({id:St,action:"FS",payload:{method:ht,args:ct}})),qe=(ht,ct)=>tt(n({id:ct,action:"loadLanguage",payload:{langs:ht,options:{langPath:ve.langPath,dataPath:ve.dataPath,cachePath:ve.cachePath,cacheMethod:ve.cacheMethod,gzip:ve.gzip,lstmOnly:[s.DEFAULT,s.LSTM_ONLY].includes(Oe)&&!ve.legacyLang}}})),Ke=(ht,ct,St,Ct)=>tt(n({id:Ct,action:"initialize",payload:{langs:ht,oem:ct,config:St}})),st=(ht="eng",ct,St,Ct)=>{if(Ae&&[s.TESSERACT_ONLY,s.TESSERACT_LSTM_COMBINED].includes(ct))throw Error("Legacy model requested but code missing.");const Dt=ct||Oe;Oe=Dt;const Tt=St||Le;Le=Tt;const sr=(typeof ht=="string"?ht.split("+"):ht).filter(Lt=>!De.includes(Lt));return De.push(...sr),sr.length>0?qe(sr,Ct).then(()=>Ke(ht,Dt,Tt,Ct)):Ke(ht,Dt,Tt,Ct)},ut=(ht={},ct)=>tt(n({id:ct,action:"setParameters",payload:{params:ht}})),nt=async(ht,ct={},St={text:!0},Ct)=>tt(n({id:Ct,action:"recognize",payload:{image:await m(ht),options:ct,output:St}})),vt=async(ht,ct)=>{if(Ae)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return tt(n({id:ct,action:"detect",payload:{image:await m(ht)}}))},it=async()=>(Xe!==null&&(l(Xe),Xe=null),Promise.resolve());d(Xe,({workerId:ht,jobId:ct,status:St,action:Ct,data:Dt})=>{const Tt=`${Ct}-${ct}`;if(St==="resolve")e(`[${ht}]: Complete ${ct}`),ke[Tt].resolve({jobId:ct,data:Dt}),delete ke[Tt];else if(St==="reject")if(ke[Tt].reject(Dt),delete ke[Tt],Ct==="load"&&Ie(Dt),we)we(Dt);else throw Error(Dt);else St==="progress"&&be({...Dt,userJobId:ct})});const Ve={id:xe,worker:Xe,load:lt,writeText:bt,readText:rt,removeFile:He,FS:We,reinitialize:st,setParameters:ut,recognize:nt,detect:vt,terminate:it};return _t().then(()=>qe(X)).then(()=>Ke(X,he,Ee)).then(()=>Ue(Ve)).catch(()=>{}),ze},createWorker}var Tesseract,hasRequiredTesseract;function requireTesseract(){if(hasRequiredTesseract)return Tesseract;hasRequiredTesseract=1;const r=requireCreateWorker();return Tesseract={recognize:async(i,s,o)=>{const u=await r(s,1,o);return u.recognize(i).finally(async()=>{await u.terminate()})},detect:async(i,s)=>{const o=await r("osd",0,s);return o.detect(i).finally(async()=>{await o.terminate()})}},Tesseract}var languages,hasRequiredLanguages;function requireLanguages(){return hasRequiredLanguages||(hasRequiredLanguages=1,languages={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}),languages}var PSM,hasRequiredPSM;function requirePSM(){return hasRequiredPSM||(hasRequiredPSM=1,PSM={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}),PSM}var src,hasRequiredSrc;function requireSrc(){if(hasRequiredSrc)return src;hasRequiredSrc=1,requireRuntime();const r=requireCreateScheduler(),n=requireCreateWorker(),e=requireTesseract(),i=requireLanguages(),s=requireOEM(),o=requirePSM(),{setLogging:u}=requireLog();return src={languages:i,OEM:s,PSM:o,createScheduler:r,createWorker:n,setLogging:u,...e},src}var srcExports=requireSrc();window.addEventListener("load",async()=>{window.tesseractWorker=await srcExports.createWorker("eng",1,{workerPath:"/Tesseract/worker.js",langPath:"/Tesseract",corePath:"/Tesseract"}),window.doneInitStep()});function Scanner(){var[r,n]=reactExports.useState(!1),[e,i]=reactExports.useState("none"),[s,o]=reactExports.useState([]),[u,l]=reactExports.useState({});window.openScanner=(S,X)=>{document.body.requestFullscreen&&!window.matchMedia("(display-mode: standalone)").matches&&!IsDevMode()&&document.body.requestFullscreen(),l(S),o([X]),n(!0)};var d=reactExports.useRef(null),m=reactExports.useRef(null),y=()=>{d.current&&(i("loading"),Vibrate(),setTimeout(async()=>{var S=d.current.getScreenshot(),X=await Image.load(S),he=d.current.video.getBoundingClientRect(),Ce=m.current.getBoundingClientRect(),Ee=X.width/he.width,xe=Math.abs(he.x-Ce.x),be=Math.abs(he.y+Ce.y);X=X.crop({x:xe*Ee,y:be*Ee,width:Ce.width*Ee,height:Ce.height*Ee});var we=await X.toBlob("image/png"),ve;{var ve=await tesseractWorker.recognize(URL.createObjectURL(we));ve={body:ve.data.text}}var ke=s[0]||console.log;ke(ve.body),i("none"),setTimeout(()=>n(!1),0)}))};return jsxRuntimeExports.jsxs(Sidebar,{style:{height:"100%"},position:"bottom",className:"scannerContainer",visible:r,onHide:()=>n(!1),children:[jsxRuntimeExports.jsx(Button,{onClick:()=>n(!1),className:"scannerCloseButton",children:jsxRuntimeExports.jsx(IconX,{})}),jsxRuntimeExports.jsx(Webcam,{onUserMediaError:console.log,forceScreenshotSourceSize:!0,screenshotQuality:1,screenshotFormat:"image/png",ref:d,className:"camera",audio:!1,videoConstraints:{facingMode:"environment"}}),jsxRuntimeExports.jsx("img",{alt:"Scanner",src:"/Images/ScannerOverlayBackground.png",className:"scannerOverlay"}),jsxRuntimeExports.jsx("div",{ref:m,className:"scannerTarget"}),jsxRuntimeExports.jsxs("div",{className:"scanButtonRow",children:[jsxRuntimeExports.jsxs(Button,{className:"pickButton",children:[jsxRuntimeExports.jsx(IconFileUpload,{}),"",t("ACTION_CHOOSE")]}),jsxRuntimeExports.jsx(Button,{onClick:y,disabled:e=="loading",className:"scanButton",children:e=="loading"?jsxRuntimeExports.jsx(ProgressSpinner,{strokeWidth:"8"}):jsxRuntimeExports.jsx(IconTextScan2,{})}),jsxRuntimeExports.jsxs(Button,{onClick:()=>{(s[0]||console.log)(""),n(!1)},className:"skipButton",children:[jsxRuntimeExports.jsx(IconCodeOff,{}),"",t("ACTION_SKIP")]})]})]})}var lib={},hasRequiredLib;function requireLib(){if(hasRequiredLib)return lib;hasRequiredLib=1;var r=lib&&lib.__assign||function(){return r=Object.assign||function(De){for(var Oe,Le=1,Ae=arguments.length;Le<Ae;Le++){Oe=arguments[Le];for(var Ie in Oe)Object.prototype.hasOwnProperty.call(Oe,Ie)&&(De[Ie]=Oe[Ie])}return De},r.apply(this,arguments)},n=lib&&lib.__createBinding||(Object.create?function(De,Oe,Le,Ae){Ae===void 0&&(Ae=Le);var Ie=Object.getOwnPropertyDescriptor(Oe,Le);(!Ie||("get"in Ie?!Oe.__esModule:Ie.writable||Ie.configurable))&&(Ie={enumerable:!0,get:function(){return Oe[Le]}}),Object.defineProperty(De,Ae,Ie)}:function(De,Oe,Le,Ae){Ae===void 0&&(Ae=Le),De[Ae]=Oe[Le]}),e=lib&&lib.__setModuleDefault||(Object.create?function(De,Oe){Object.defineProperty(De,"default",{enumerable:!0,value:Oe})}:function(De,Oe){De.default=Oe}),i=lib&&lib.__importStar||function(De){if(De&&De.__esModule)return De;var Oe={};if(De!=null)for(var Le in De)Le!=="default"&&Object.prototype.hasOwnProperty.call(De,Le)&&n(Oe,De,Le);return e(Oe,De),Oe},s=lib&&lib.__rest||function(De,Oe){var Le={};for(var Ae in De)Object.prototype.hasOwnProperty.call(De,Ae)&&Oe.indexOf(Ae)<0&&(Le[Ae]=De[Ae]);if(De!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ie=0,Ae=Object.getOwnPropertySymbols(De);Ie<Ae.length;Ie++)Oe.indexOf(Ae[Ie])<0&&Object.prototype.propertyIsEnumerable.call(De,Ae[Ie])&&(Le[Ae[Ie]]=De[Ae[Ie]]);return Le};Object.defineProperty(lib,"__esModule",{value:!0});var o=i(requireReact()),u=89,l=90,d=77,m=57,y=219,S=222,X=192,he=100,Ce=3e3,Ee=typeof window<"u"&&"navigator"in window&&/Win/i.test(navigator.platform),xe=typeof window<"u"&&"navigator"in window&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),be="npm__react-simple-code-editor__textarea",we=`
/**
 * Reset the text fill color so that placeholder is visible
 */
.`.concat(be,`:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .`).concat(be,` {
    color: transparent !important;
  }

  .`).concat(be,`::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
`),ve=o.forwardRef(function(Oe,Le){var Ae=Oe.autoFocus,Ie=Oe.disabled,Ue=Oe.form,ze=Oe.highlight,Ye=Oe.ignoreTabKey,Xe=Ye===void 0?!1:Ye,tt=Oe.insertSpaces,lt=tt===void 0?!0:tt,_t=Oe.maxLength,bt=Oe.minLength,rt=Oe.name,He=Oe.onBlur,We=Oe.onClick,qe=Oe.onFocus,Ke=Oe.onKeyDown,st=Oe.onKeyUp,ut=Oe.onValueChange,nt=Oe.padding,vt=nt===void 0?0:nt,it=Oe.placeholder,Ve=Oe.preClassName,ht=Oe.readOnly,ct=Oe.required,St=Oe.style,Ct=Oe.tabSize,Dt=Ct===void 0?2:Ct,Tt=Oe.textareaClassName,At=Oe.textareaId,sr=Oe.value,Lt=s(Oe,["autoFocus","disabled","form","highlight","ignoreTabKey","insertSpaces","maxLength","minLength","name","onBlur","onClick","onFocus","onKeyDown","onKeyUp","onValueChange","padding","placeholder","preClassName","readOnly","required","style","tabSize","textareaClassName","textareaId","value"]),Kt=o.useRef({stack:[],offset:-1}),yt=o.useRef(null),qt=o.useState(!0),Qt=qt[0],rr=qt[1],It={paddingTop:typeof vt=="object"?vt.top:vt,paddingRight:typeof vt=="object"?vt.right:vt,paddingBottom:typeof vt=="object"?vt.bottom:vt,paddingLeft:typeof vt=="object"?vt.left:vt},_r=ze(sr),cr=function(Ot,lr){return Ot.substring(0,lr).split(`
`)},Vt=o.useCallback(function(Ot,lr){var hr,Ft,kt;lr===void 0&&(lr=!1);var Xt=Kt.current,wr=Xt.stack,fr=Xt.offset;if(wr.length&&fr>-1){Kt.current.stack=wr.slice(0,fr+1);var pr=Kt.current.stack.length;if(pr>he){var Mr=pr-he;Kt.current.stack=wr.slice(Mr,pr),Kt.current.offset=Math.max(Kt.current.offset-Mr,0)}}var Pr=Date.now();if(lr){var Tr=Kt.current.stack[Kt.current.offset];if(Tr&&Pr-Tr.timestamp<Ce){var jr=/[^a-z0-9]([a-z0-9]+)$/i,Be=(hr=cr(Tr.value,Tr.selectionStart).pop())===null||hr===void 0?void 0:hr.match(jr),Pe=(Ft=cr(Ot.value,Ot.selectionStart).pop())===null||Ft===void 0?void 0:Ft.match(jr);if(Be!=null&&Be[1]&&(!((kt=Pe==null?void 0:Pe[1])===null||kt===void 0)&&kt.startsWith(Be[1]))){Kt.current.stack[Kt.current.offset]=r(r({},Ot),{timestamp:Pr});return}}}Kt.current.stack.push(r(r({},Ot),{timestamp:Pr})),Kt.current.offset++},[]),Gt=o.useCallback(function(){var Ot=yt.current;if(Ot){var lr=Ot.value,hr=Ot.selectionStart,Ft=Ot.selectionEnd;Vt({value:lr,selectionStart:hr,selectionEnd:Ft})}},[Vt]),er=function(Ot){var lr=yt.current;lr&&(lr.value=Ot.value,lr.selectionStart=Ot.selectionStart,lr.selectionEnd=Ot.selectionEnd,ut==null||ut(Ot.value))},Yt=function(Ot){var lr=yt.current,hr=Kt.current.stack[Kt.current.offset];hr&&lr&&(Kt.current.stack[Kt.current.offset]=r(r({},hr),{selectionStart:lr.selectionStart,selectionEnd:lr.selectionEnd})),Vt(Ot),er(Ot)},ar=function(){var Ot=Kt.current,lr=Ot.stack,hr=Ot.offset,Ft=lr[hr-1];Ft&&(er(Ft),Kt.current.offset=Math.max(hr-1,0))},yr=function(){var Ot=Kt.current,lr=Ot.stack,hr=Ot.offset,Ft=lr[hr+1];Ft&&(er(Ft),Kt.current.offset=Math.min(hr+1,lr.length-1))},Jt=function(Ot){if(!(Ke&&(Ke(Ot),Ot.defaultPrevented))){Ot.key==="Escape"&&Ot.currentTarget.blur();var lr=Ot.currentTarget,hr=lr.value,Ft=lr.selectionStart,kt=lr.selectionEnd,Xt=(lt?" ":"	").repeat(Dt);if(Ot.key==="Tab"&&!Xe&&Qt)if(Ot.preventDefault(),Ot.shiftKey){var wr=cr(hr,Ft),fr=wr.length-1,pr=cr(hr,kt).length-1,Mr=hr.split(`
`).map(function(Je,Qe){return Qe>=fr&&Qe<=pr&&Je.startsWith(Xt)?Je.substring(Xt.length):Je}).join(`
`);if(hr!==Mr){var Pr=wr[fr];Yt({value:Mr,selectionStart:Pr!=null&&Pr.startsWith(Xt)?Ft-Xt.length:Ft,selectionEnd:kt-(hr.length-Mr.length)})}}else if(Ft!==kt){var wr=cr(hr,Ft),Tr=wr.length-1,jr=cr(hr,kt).length-1,Pr=wr[Tr];Yt({value:hr.split(`
`).map(function(et,pt){return pt>=Tr&&pt<=jr?Xt+et:et}).join(`
`),selectionStart:Pr&&/\S/.test(Pr)?Ft+Xt.length:Ft,selectionEnd:kt+Xt.length*(jr-Tr+1)})}else{var Be=Ft+Xt.length;Yt({value:hr.substring(0,Ft)+Xt+hr.substring(kt),selectionStart:Be,selectionEnd:Be})}else if(Ot.key==="Backspace"){var Pe=Ft!==kt,Re=hr.substring(0,Ft);if(Re.endsWith(Xt)&&!Pe){Ot.preventDefault();var Be=Ft-Xt.length;Yt({value:hr.substring(0,Ft-Xt.length)+hr.substring(kt),selectionStart:Be,selectionEnd:Be})}}else if(Ot.key==="Enter"){if(Ft===kt){var Se=cr(hr,Ft).pop(),Te=Se==null?void 0:Se.match(/^\s+/);if(Te!=null&&Te[0]){Ot.preventDefault();var Fe=`
`+Te[0],Be=Ft+Fe.length;Yt({value:hr.substring(0,Ft)+Fe+hr.substring(kt),selectionStart:Be,selectionEnd:Be})}}}else if(Ot.keyCode===m||Ot.keyCode===y||Ot.keyCode===S||Ot.keyCode===X){var Ge=void 0;Ot.keyCode===m&&Ot.shiftKey?Ge=["(",")"]:Ot.keyCode===y?Ot.shiftKey?Ge=["{","}"]:Ge=["[","]"]:Ot.keyCode===S?Ot.shiftKey?Ge=['"','"']:Ge=["'","'"]:Ot.keyCode===X&&!Ot.shiftKey&&(Ge=["`","`"]),Ft!==kt&&Ge&&(Ot.preventDefault(),Yt({value:hr.substring(0,Ft)+Ge[0]+hr.substring(Ft,kt)+Ge[1]+hr.substring(kt),selectionStart:Ft,selectionEnd:kt+2}))}else(xe?Ot.metaKey&&Ot.keyCode===l:Ot.ctrlKey&&Ot.keyCode===l)&&!Ot.shiftKey&&!Ot.altKey?(Ot.preventDefault(),ar()):(xe?Ot.metaKey&&Ot.keyCode===l&&Ot.shiftKey:Ee?Ot.ctrlKey&&Ot.keyCode===u:Ot.ctrlKey&&Ot.keyCode===l&&Ot.shiftKey)&&!Ot.altKey?(Ot.preventDefault(),yr()):Ot.keyCode===d&&Ot.ctrlKey&&(!xe||Ot.shiftKey)&&(Ot.preventDefault(),rr(function(Je){return!Je}))}},br=function(Ot){var lr=Ot.currentTarget,hr=lr.value,Ft=lr.selectionStart,kt=lr.selectionEnd;Vt({value:hr,selectionStart:Ft,selectionEnd:kt},!0),ut(hr)};return o.useEffect(function(){Gt()},[Gt]),o.useImperativeHandle(Le,function(){return{get session(){return{history:Kt.current}},set session(Ot){Kt.current=Ot.history}}},[]),o.createElement("div",r({},Lt,{style:r(r({},ke.container),St)}),o.createElement("pre",r({className:Ve,"aria-hidden":"true",style:r(r(r({},ke.editor),ke.highlight),It)},typeof _r=="string"?{dangerouslySetInnerHTML:{__html:_r+"<br />"}}:{children:_r})),o.createElement("textarea",{ref:function(Ot){return yt.current=Ot},style:r(r(r({},ke.editor),ke.textarea),It),className:be+(Tt?" ".concat(Tt):""),id:At,value:sr,onChange:br,onKeyDown:Jt,onClick:We,onKeyUp:st,onFocus:qe,onBlur:He,disabled:Ie,form:Ue,maxLength:_t,minLength:bt,name:rt,placeholder:it,readOnly:ht,required:ct,autoFocus:Ae,autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"data-gramm":!1}),o.createElement("style",{dangerouslySetInnerHTML:{__html:we}}))}),ke={container:{position:"relative",textAlign:"left",boxSizing:"border-box",padding:0,overflow:"hidden"},textarea:{position:"absolute",top:0,left:0,height:"100%",width:"100%",resize:"none",color:"inherit",overflow:"hidden",MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",WebkitTextFillColor:"transparent"},highlight:{position:"relative",pointerEvents:"none"},editor:{margin:0,border:0,background:"none",boxSizing:"inherit",display:"inherit",fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontVariantLigatures:"inherit",fontWeight:"inherit",letterSpacing:"inherit",lineHeight:"inherit",tabSize:"inherit",textIndent:"inherit",textRendering:"inherit",textTransform:"inherit",whiteSpace:"pre-wrap",wordBreak:"keep-all",overflowWrap:"break-word"}};return lib.default=ve,lib}var libExports=requireLib();const Editor=getDefaultExportFromCjs(libExports);var prismCore={exports:{}},hasRequiredPrismCore;function requirePrismCore(){return hasRequiredPrismCore||(hasRequiredPrismCore=1,function(r){var n=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var e=function(i){var s=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,o=0,u={},l={manual:i.Prism&&i.Prism.manual,disableWorkerMessageHandler:i.Prism&&i.Prism.disableWorkerMessageHandler,util:{encode:function we(ve){return ve instanceof d?new d(ve.type,we(ve.content),ve.alias):Array.isArray(ve)?ve.map(we):ve.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(we){return Object.prototype.toString.call(we).slice(8,-1)},objId:function(we){return we.__id||Object.defineProperty(we,"__id",{value:++o}),we.__id},clone:function we(ve,ke){ke=ke||{};var De,Oe;switch(l.util.type(ve)){case"Object":if(Oe=l.util.objId(ve),ke[Oe])return ke[Oe];De={},ke[Oe]=De;for(var Le in ve)ve.hasOwnProperty(Le)&&(De[Le]=we(ve[Le],ke));return De;case"Array":return Oe=l.util.objId(ve),ke[Oe]?ke[Oe]:(De=[],ke[Oe]=De,ve.forEach(function(Ae,Ie){De[Ie]=we(Ae,ke)}),De);default:return ve}},getLanguage:function(we){for(;we;){var ve=s.exec(we.className);if(ve)return ve[1].toLowerCase();we=we.parentElement}return"none"},setLanguage:function(we,ve){we.className=we.className.replace(RegExp(s,"gi"),""),we.classList.add("language-"+ve)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(De){var we=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(De.stack)||[])[1];if(we){var ve=document.getElementsByTagName("script");for(var ke in ve)if(ve[ke].src==we)return ve[ke]}return null}},isActive:function(we,ve,ke){for(var De="no-"+ve;we;){var Oe=we.classList;if(Oe.contains(ve))return!0;if(Oe.contains(De))return!1;we=we.parentElement}return!!ke}},languages:{plain:u,plaintext:u,text:u,txt:u,extend:function(we,ve){var ke=l.util.clone(l.languages[we]);for(var De in ve)ke[De]=ve[De];return ke},insertBefore:function(we,ve,ke,De){De=De||l.languages;var Oe=De[we],Le={};for(var Ae in Oe)if(Oe.hasOwnProperty(Ae)){if(Ae==ve)for(var Ie in ke)ke.hasOwnProperty(Ie)&&(Le[Ie]=ke[Ie]);ke.hasOwnProperty(Ae)||(Le[Ae]=Oe[Ae])}var Ue=De[we];return De[we]=Le,l.languages.DFS(l.languages,function(ze,Ye){Ye===Ue&&ze!=we&&(this[ze]=Le)}),Le},DFS:function we(ve,ke,De,Oe){Oe=Oe||{};var Le=l.util.objId;for(var Ae in ve)if(ve.hasOwnProperty(Ae)){ke.call(ve,Ae,ve[Ae],De||Ae);var Ie=ve[Ae],Ue=l.util.type(Ie);Ue==="Object"&&!Oe[Le(Ie)]?(Oe[Le(Ie)]=!0,we(Ie,ke,null,Oe)):Ue==="Array"&&!Oe[Le(Ie)]&&(Oe[Le(Ie)]=!0,we(Ie,ke,Ae,Oe))}}},plugins:{},highlightAll:function(we,ve){l.highlightAllUnder(document,we,ve)},highlightAllUnder:function(we,ve,ke){var De={callback:ke,container:we,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};l.hooks.run("before-highlightall",De),De.elements=Array.prototype.slice.apply(De.container.querySelectorAll(De.selector)),l.hooks.run("before-all-elements-highlight",De);for(var Oe=0,Le;Le=De.elements[Oe++];)l.highlightElement(Le,ve===!0,De.callback)},highlightElement:function(we,ve,ke){var De=l.util.getLanguage(we),Oe=l.languages[De];l.util.setLanguage(we,De);var Le=we.parentElement;Le&&Le.nodeName.toLowerCase()==="pre"&&l.util.setLanguage(Le,De);var Ae=we.textContent,Ie={element:we,language:De,grammar:Oe,code:Ae};function Ue(Ye){Ie.highlightedCode=Ye,l.hooks.run("before-insert",Ie),Ie.element.innerHTML=Ie.highlightedCode,l.hooks.run("after-highlight",Ie),l.hooks.run("complete",Ie),ke&&ke.call(Ie.element)}if(l.hooks.run("before-sanity-check",Ie),Le=Ie.element.parentElement,Le&&Le.nodeName.toLowerCase()==="pre"&&!Le.hasAttribute("tabindex")&&Le.setAttribute("tabindex","0"),!Ie.code){l.hooks.run("complete",Ie),ke&&ke.call(Ie.element);return}if(l.hooks.run("before-highlight",Ie),!Ie.grammar){Ue(l.util.encode(Ie.code));return}if(ve&&i.Worker){var ze=new Worker(l.filename);ze.onmessage=function(Ye){Ue(Ye.data)},ze.postMessage(JSON.stringify({language:Ie.language,code:Ie.code,immediateClose:!0}))}else Ue(l.highlight(Ie.code,Ie.grammar,Ie.language))},highlight:function(we,ve,ke){var De={code:we,grammar:ve,language:ke};if(l.hooks.run("before-tokenize",De),!De.grammar)throw new Error('The language "'+De.language+'" has no grammar.');return De.tokens=l.tokenize(De.code,De.grammar),l.hooks.run("after-tokenize",De),d.stringify(l.util.encode(De.tokens),De.language)},tokenize:function(we,ve){var ke=ve.rest;if(ke){for(var De in ke)ve[De]=ke[De];delete ve.rest}var Oe=new S;return X(Oe,Oe.head,we),y(we,Oe,ve,Oe.head,0),Ce(Oe)},hooks:{all:{},add:function(we,ve){var ke=l.hooks.all;ke[we]=ke[we]||[],ke[we].push(ve)},run:function(we,ve){var ke=l.hooks.all[we];if(!(!ke||!ke.length))for(var De=0,Oe;Oe=ke[De++];)Oe(ve)}},Token:d};i.Prism=l;function d(we,ve,ke,De){this.type=we,this.content=ve,this.alias=ke,this.length=(De||"").length|0}d.stringify=function we(ve,ke){if(typeof ve=="string")return ve;if(Array.isArray(ve)){var De="";return ve.forEach(function(Ue){De+=we(Ue,ke)}),De}var Oe={type:ve.type,content:we(ve.content,ke),tag:"span",classes:["token",ve.type],attributes:{},language:ke},Le=ve.alias;Le&&(Array.isArray(Le)?Array.prototype.push.apply(Oe.classes,Le):Oe.classes.push(Le)),l.hooks.run("wrap",Oe);var Ae="";for(var Ie in Oe.attributes)Ae+=" "+Ie+'="'+(Oe.attributes[Ie]||"").replace(/"/g,"&quot;")+'"';return"<"+Oe.tag+' class="'+Oe.classes.join(" ")+'"'+Ae+">"+Oe.content+"</"+Oe.tag+">"};function m(we,ve,ke,De){we.lastIndex=ve;var Oe=we.exec(ke);if(Oe&&De&&Oe[1]){var Le=Oe[1].length;Oe.index+=Le,Oe[0]=Oe[0].slice(Le)}return Oe}function y(we,ve,ke,De,Oe,Le){for(var Ae in ke)if(!(!ke.hasOwnProperty(Ae)||!ke[Ae])){var Ie=ke[Ae];Ie=Array.isArray(Ie)?Ie:[Ie];for(var Ue=0;Ue<Ie.length;++Ue){if(Le&&Le.cause==Ae+","+Ue)return;var ze=Ie[Ue],Ye=ze.inside,Xe=!!ze.lookbehind,tt=!!ze.greedy,lt=ze.alias;if(tt&&!ze.pattern.global){var _t=ze.pattern.toString().match(/[imsuy]*$/)[0];ze.pattern=RegExp(ze.pattern.source,_t+"g")}for(var bt=ze.pattern||ze,rt=De.next,He=Oe;rt!==ve.tail&&!(Le&&He>=Le.reach);He+=rt.value.length,rt=rt.next){var We=rt.value;if(ve.length>we.length)return;if(!(We instanceof d)){var qe=1,Ke;if(tt){if(Ke=m(bt,He,we,Xe),!Ke||Ke.index>=we.length)break;var vt=Ke.index,st=Ke.index+Ke[0].length,ut=He;for(ut+=rt.value.length;vt>=ut;)rt=rt.next,ut+=rt.value.length;if(ut-=rt.value.length,He=ut,rt.value instanceof d)continue;for(var nt=rt;nt!==ve.tail&&(ut<st||typeof nt.value=="string");nt=nt.next)qe++,ut+=nt.value.length;qe--,We=we.slice(He,ut),Ke.index-=He}else if(Ke=m(bt,0,We,Xe),!Ke)continue;var vt=Ke.index,it=Ke[0],Ve=We.slice(0,vt),ht=We.slice(vt+it.length),ct=He+We.length;Le&&ct>Le.reach&&(Le.reach=ct);var St=rt.prev;Ve&&(St=X(ve,St,Ve),He+=Ve.length),he(ve,St,qe);var Ct=new d(Ae,Ye?l.tokenize(it,Ye):it,lt,it);if(rt=X(ve,St,Ct),ht&&X(ve,rt,ht),qe>1){var Dt={cause:Ae+","+Ue,reach:ct};y(we,ve,ke,rt.prev,He,Dt),Le&&Dt.reach>Le.reach&&(Le.reach=Dt.reach)}}}}}}function S(){var we={value:null,prev:null,next:null},ve={value:null,prev:we,next:null};we.next=ve,this.head=we,this.tail=ve,this.length=0}function X(we,ve,ke){var De=ve.next,Oe={value:ke,prev:ve,next:De};return ve.next=Oe,De.prev=Oe,we.length++,Oe}function he(we,ve,ke){for(var De=ve.next,Oe=0;Oe<ke&&De!==we.tail;Oe++)De=De.next;ve.next=De,De.prev=ve,we.length-=Oe}function Ce(we){for(var ve=[],ke=we.head.next;ke!==we.tail;)ve.push(ke.value),ke=ke.next;return ve}if(!i.document)return i.addEventListener&&(l.disableWorkerMessageHandler||i.addEventListener("message",function(we){var ve=JSON.parse(we.data),ke=ve.language,De=ve.code,Oe=ve.immediateClose;i.postMessage(l.highlight(De,l.languages[ke],ke)),Oe&&i.close()},!1)),l;var Ee=l.util.currentScript();Ee&&(l.filename=Ee.src,Ee.hasAttribute("data-manual")&&(l.manual=!0));function xe(){l.manual||l.highlightAll()}if(!l.manual){var be=document.readyState;be==="loading"||be==="interactive"&&Ee&&Ee.defer?document.addEventListener("DOMContentLoaded",xe):window.requestAnimationFrame?window.requestAnimationFrame(xe):window.setTimeout(xe,16)}return l}(n);r.exports&&(r.exports=e),typeof commonjsGlobal<"u"&&(commonjsGlobal.Prism=e)}(prismCore)),prismCore.exports}var prismCoreExports=requirePrismCore();Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/};Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/});Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/;Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}});Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}});Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript"));Prism.languages.js=Prism.languages.javascript;var prismPython={},hasRequiredPrismPython;function requirePrismPython(){return hasRequiredPrismPython||(hasRequiredPrismPython=1,Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python),prismPython}requirePrismPython();var xterm={exports:{}},hasRequiredXterm;function requireXterm(){return hasRequiredXterm||(hasRequiredXterm=1,function(r,n){(function(e,i){r.exports=i()})(globalThis,()=>(()=>{var e={4567:function(u,l,d){var m=this&&this.__decorate||function(we,ve,ke,De){var Oe,Le=arguments.length,Ae=Le<3?ve:De===null?De=Object.getOwnPropertyDescriptor(ve,ke):De;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Ae=Reflect.decorate(we,ve,ke,De);else for(var Ie=we.length-1;Ie>=0;Ie--)(Oe=we[Ie])&&(Ae=(Le<3?Oe(Ae):Le>3?Oe(ve,ke,Ae):Oe(ve,ke))||Ae);return Le>3&&Ae&&Object.defineProperty(ve,ke,Ae),Ae},y=this&&this.__param||function(we,ve){return function(ke,De){ve(ke,De,we)}};Object.defineProperty(l,"__esModule",{value:!0}),l.AccessibilityManager=void 0;const S=d(9042),X=d(9924),he=d(844),Ce=d(4725),Ee=d(2585),xe=d(3656);let be=l.AccessibilityManager=class extends he.Disposable{constructor(we,ve,ke,De){super(),this._terminal=we,this._coreBrowserService=ke,this._renderService=De,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let Oe=0;Oe<this._terminal.rows;Oe++)this._rowElements[Oe]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[Oe]);if(this._topBoundaryFocusListener=Oe=>this._handleBoundaryFocus(Oe,0),this._bottomBoundaryFocusListener=Oe=>this._handleBoundaryFocus(Oe,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new X.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(Oe=>this._handleResize(Oe.rows))),this.register(this._terminal.onRender(Oe=>this._refreshRows(Oe.start,Oe.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(Oe=>this._handleChar(Oe))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(Oe=>this._handleTab(Oe))),this.register(this._terminal.onKey(Oe=>this._handleKey(Oe.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this.register((0,xe.addDisposableDomListener)(document,"selectionchange",()=>this._handleSelectionChange())),this.register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,he.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(we){for(let ve=0;ve<we;ve++)this._handleChar(" ")}_handleChar(we){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==we&&(this._charsToAnnounce+=we):this._charsToAnnounce+=we,we===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=S.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(we){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(we)||this._charsToConsume.push(we)}_refreshRows(we,ve){this._liveRegionDebouncer.refresh(we,ve,this._terminal.rows)}_renderRows(we,ve){const ke=this._terminal.buffer,De=ke.lines.length.toString();for(let Oe=we;Oe<=ve;Oe++){const Le=ke.lines.get(ke.ydisp+Oe),Ae=[],Ie=(Le==null?void 0:Le.translateToString(!0,void 0,void 0,Ae))||"",Ue=(ke.ydisp+Oe+1).toString(),ze=this._rowElements[Oe];ze&&(Ie.length===0?(ze.innerText="",this._rowColumns.set(ze,[0,1])):(ze.textContent=Ie,this._rowColumns.set(ze,Ae)),ze.setAttribute("aria-posinset",Ue),ze.setAttribute("aria-setsize",De))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(we,ve){const ke=we.target,De=this._rowElements[ve===0?1:this._rowElements.length-2];if(ke.getAttribute("aria-posinset")===(ve===0?"1":`${this._terminal.buffer.lines.length}`)||we.relatedTarget!==De)return;let Oe,Le;if(ve===0?(Oe=ke,Le=this._rowElements.pop(),this._rowContainer.removeChild(Le)):(Oe=this._rowElements.shift(),Le=ke,this._rowContainer.removeChild(Oe)),Oe.removeEventListener("focus",this._topBoundaryFocusListener),Le.removeEventListener("focus",this._bottomBoundaryFocusListener),ve===0){const Ae=this._createAccessibilityTreeNode();this._rowElements.unshift(Ae),this._rowContainer.insertAdjacentElement("afterbegin",Ae)}else{const Ae=this._createAccessibilityTreeNode();this._rowElements.push(Ae),this._rowContainer.appendChild(Ae)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(ve===0?-1:1),this._rowElements[ve===0?1:this._rowElements.length-2].focus(),we.preventDefault(),we.stopImmediatePropagation()}_handleSelectionChange(){var Ie;if(this._rowElements.length===0)return;const we=document.getSelection();if(!we)return;if(we.isCollapsed)return void(this._rowContainer.contains(we.anchorNode)&&this._terminal.clearSelection());if(!we.anchorNode||!we.focusNode)return void console.error("anchorNode and/or focusNode are null");let ve={node:we.anchorNode,offset:we.anchorOffset},ke={node:we.focusNode,offset:we.focusOffset};if((ve.node.compareDocumentPosition(ke.node)&Node.DOCUMENT_POSITION_PRECEDING||ve.node===ke.node&&ve.offset>ke.offset)&&([ve,ke]=[ke,ve]),ve.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(ve={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(ve.node))return;const De=this._rowElements.slice(-1)[0];if(ke.node.compareDocumentPosition(De)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(ke={node:De,offset:((Ie=De.textContent)==null?void 0:Ie.length)??0}),!this._rowContainer.contains(ke.node))return;const Oe=({node:Ue,offset:ze})=>{const Ye=Ue instanceof Text?Ue.parentNode:Ue;let Xe=parseInt(Ye==null?void 0:Ye.getAttribute("aria-posinset"),10)-1;if(isNaN(Xe))return console.warn("row is invalid. Race condition?"),null;const tt=this._rowColumns.get(Ye);if(!tt)return console.warn("columns is null. Race condition?"),null;let lt=ze<tt.length?tt[ze]:tt.slice(-1)[0]+1;return lt>=this._terminal.cols&&(++Xe,lt=0),{row:Xe,column:lt}},Le=Oe(ve),Ae=Oe(ke);if(Le&&Ae){if(Le.row>Ae.row||Le.row===Ae.row&&Le.column>=Ae.column)throw new Error("invalid range");this._terminal.select(Le.column,Le.row,(Ae.row-Le.row)*this._terminal.cols-Le.column+Ae.column)}}_handleResize(we){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let ve=this._rowContainer.children.length;ve<this._terminal.rows;ve++)this._rowElements[ve]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[ve]);for(;this._rowElements.length>we;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const we=this._coreBrowserService.mainDocument.createElement("div");return we.setAttribute("role","listitem"),we.tabIndex=-1,this._refreshRowDimensions(we),we}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let we=0;we<this._terminal.rows;we++)this._refreshRowDimensions(this._rowElements[we])}}_refreshRowDimensions(we){we.style.height=`${this._renderService.dimensions.css.cell.height}px`}};l.AccessibilityManager=be=m([y(1,Ee.IInstantiationService),y(2,Ce.ICoreBrowserService),y(3,Ce.IRenderService)],be)},3614:(u,l)=>{function d(X){return X.replace(/\r?\n/g,"\r")}function m(X,he){return he?"\x1B[200~"+X+"\x1B[201~":X}function y(X,he,Ce,Ee){X=m(X=d(X),Ce.decPrivateModes.bracketedPasteMode&&Ee.rawOptions.ignoreBracketedPasteMode!==!0),Ce.triggerDataEvent(X,!0),he.value=""}function S(X,he,Ce){const Ee=Ce.getBoundingClientRect(),xe=X.clientX-Ee.left-10,be=X.clientY-Ee.top-10;he.style.width="20px",he.style.height="20px",he.style.left=`${xe}px`,he.style.top=`${be}px`,he.style.zIndex="1000",he.focus()}Object.defineProperty(l,"__esModule",{value:!0}),l.rightClickHandler=l.moveTextAreaUnderMouseCursor=l.paste=l.handlePasteEvent=l.copyHandler=l.bracketTextForPaste=l.prepareTextForTerminal=void 0,l.prepareTextForTerminal=d,l.bracketTextForPaste=m,l.copyHandler=function(X,he){X.clipboardData&&X.clipboardData.setData("text/plain",he.selectionText),X.preventDefault()},l.handlePasteEvent=function(X,he,Ce,Ee){X.stopPropagation(),X.clipboardData&&y(X.clipboardData.getData("text/plain"),he,Ce,Ee)},l.paste=y,l.moveTextAreaUnderMouseCursor=S,l.rightClickHandler=function(X,he,Ce,Ee,xe){S(X,he,Ce),xe&&Ee.rightClickSelect(X),he.value=Ee.selectionText,he.select()}},7239:(u,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ColorContrastCache=void 0;const m=d(1505);l.ColorContrastCache=class{constructor(){this._color=new m.TwoKeyMap,this._css=new m.TwoKeyMap}setCss(y,S,X){this._css.set(y,S,X)}getCss(y,S){return this._css.get(y,S)}setColor(y,S,X){this._color.set(y,S,X)}getColor(y,S){return this._color.get(y,S)}clear(){this._color.clear(),this._css.clear()}}},3656:(u,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.addDisposableDomListener=void 0,l.addDisposableDomListener=function(d,m,y,S){d.addEventListener(m,y,S);let X=!1;return{dispose:()=>{X||(X=!0,d.removeEventListener(m,y,S))}}}},3551:function(u,l,d){var m=this&&this.__decorate||function(be,we,ve,ke){var De,Oe=arguments.length,Le=Oe<3?we:ke===null?ke=Object.getOwnPropertyDescriptor(we,ve):ke;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Le=Reflect.decorate(be,we,ve,ke);else for(var Ae=be.length-1;Ae>=0;Ae--)(De=be[Ae])&&(Le=(Oe<3?De(Le):Oe>3?De(we,ve,Le):De(we,ve))||Le);return Oe>3&&Le&&Object.defineProperty(we,ve,Le),Le},y=this&&this.__param||function(be,we){return function(ve,ke){we(ve,ke,be)}};Object.defineProperty(l,"__esModule",{value:!0}),l.Linkifier=void 0;const S=d(3656),X=d(8460),he=d(844),Ce=d(2585),Ee=d(4725);let xe=l.Linkifier=class extends he.Disposable{get currentLink(){return this._currentLink}constructor(be,we,ve,ke,De){super(),this._element=be,this._mouseService=we,this._renderService=ve,this._bufferService=ke,this._linkProviderService=De,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new X.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new X.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,he.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,he.toDisposable)(()=>{var Oe;this._lastMouseEvent=void 0,(Oe=this._activeProviderReplies)==null||Oe.clear()})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this.register((0,S.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,S.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,S.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,S.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(be){this._lastMouseEvent=be;const we=this._positionFromMouseEvent(be,this._element,this._mouseService);if(!we)return;this._isMouseOut=!1;const ve=be.composedPath();for(let ke=0;ke<ve.length;ke++){const De=ve[ke];if(De.classList.contains("xterm"))break;if(De.classList.contains("xterm-hover"))return}this._lastBufferCell&&we.x===this._lastBufferCell.x&&we.y===this._lastBufferCell.y||(this._handleHover(we),this._lastBufferCell=we)}_handleHover(be){if(this._activeLine!==be.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(be,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,be)||(this._clearCurrentLink(),this._askForLink(be,!0))}_askForLink(be,we){var ke,De;this._activeProviderReplies&&we||((ke=this._activeProviderReplies)==null||ke.forEach(Oe=>{Oe==null||Oe.forEach(Le=>{Le.link.dispose&&Le.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=be.y);let ve=!1;for(const[Oe,Le]of this._linkProviderService.linkProviders.entries())we?(De=this._activeProviderReplies)!=null&&De.get(Oe)&&(ve=this._checkLinkProviderResult(Oe,be,ve)):Le.provideLinks(be.y,Ae=>{var Ue,ze;if(this._isMouseOut)return;const Ie=Ae==null?void 0:Ae.map(Ye=>({link:Ye}));(Ue=this._activeProviderReplies)==null||Ue.set(Oe,Ie),ve=this._checkLinkProviderResult(Oe,be,ve),((ze=this._activeProviderReplies)==null?void 0:ze.size)===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(be.y,this._activeProviderReplies)})}_removeIntersectingLinks(be,we){const ve=new Set;for(let ke=0;ke<we.size;ke++){const De=we.get(ke);if(De)for(let Oe=0;Oe<De.length;Oe++){const Le=De[Oe],Ae=Le.link.range.start.y<be?0:Le.link.range.start.x,Ie=Le.link.range.end.y>be?this._bufferService.cols:Le.link.range.end.x;for(let Ue=Ae;Ue<=Ie;Ue++){if(ve.has(Ue)){De.splice(Oe--,1);break}ve.add(Ue)}}}}_checkLinkProviderResult(be,we,ve){var Oe;if(!this._activeProviderReplies)return ve;const ke=this._activeProviderReplies.get(be);let De=!1;for(let Le=0;Le<be;Le++)this._activeProviderReplies.has(Le)&&!this._activeProviderReplies.get(Le)||(De=!0);if(!De&&ke){const Le=ke.find(Ae=>this._linkAtPosition(Ae.link,we));Le&&(ve=!0,this._handleNewLink(Le))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!ve)for(let Le=0;Le<this._activeProviderReplies.size;Le++){const Ae=(Oe=this._activeProviderReplies.get(Le))==null?void 0:Oe.find(Ie=>this._linkAtPosition(Ie.link,we));if(Ae){ve=!0,this._handleNewLink(Ae);break}}return ve}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(be){if(!this._currentLink)return;const we=this._positionFromMouseEvent(be,this._element,this._mouseService);we&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,we)&&this._currentLink.link.activate(be,this._currentLink.link.text)}_clearCurrentLink(be,we){this._currentLink&&this._lastMouseEvent&&(!be||!we||this._currentLink.link.range.start.y>=be&&this._currentLink.link.range.end.y<=we)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,he.disposeArray)(this._linkCacheDisposables))}_handleNewLink(be){if(!this._lastMouseEvent)return;const we=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);we&&this._linkAtPosition(be.link,we)&&(this._currentLink=be,this._currentLink.state={decorations:{underline:be.link.decorations===void 0||be.link.decorations.underline,pointerCursor:be.link.decorations===void 0||be.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,be.link,this._lastMouseEvent),be.link.decorations={},Object.defineProperties(be.link.decorations,{pointerCursor:{get:()=>{var ve,ke;return(ke=(ve=this._currentLink)==null?void 0:ve.state)==null?void 0:ke.decorations.pointerCursor},set:ve=>{var ke;(ke=this._currentLink)!=null&&ke.state&&this._currentLink.state.decorations.pointerCursor!==ve&&(this._currentLink.state.decorations.pointerCursor=ve,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",ve))}},underline:{get:()=>{var ve,ke;return(ke=(ve=this._currentLink)==null?void 0:ve.state)==null?void 0:ke.decorations.underline},set:ve=>{var ke,De,Oe;(ke=this._currentLink)!=null&&ke.state&&((Oe=(De=this._currentLink)==null?void 0:De.state)==null?void 0:Oe.decorations.underline)!==ve&&(this._currentLink.state.decorations.underline=ve,this._currentLink.state.isHovered&&this._fireUnderlineEvent(be.link,ve))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(ve=>{if(!this._currentLink)return;const ke=ve.start===0?0:ve.start+1+this._bufferService.buffer.ydisp,De=this._bufferService.buffer.ydisp+1+ve.end;if(this._currentLink.link.range.start.y>=ke&&this._currentLink.link.range.end.y<=De&&(this._clearCurrentLink(ke,De),this._lastMouseEvent)){const Oe=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);Oe&&this._askForLink(Oe,!1)}})))}_linkHover(be,we,ve){var ke;(ke=this._currentLink)!=null&&ke.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(we,!0),this._currentLink.state.decorations.pointerCursor&&be.classList.add("xterm-cursor-pointer")),we.hover&&we.hover(ve,we.text)}_fireUnderlineEvent(be,we){const ve=be.range,ke=this._bufferService.buffer.ydisp,De=this._createLinkUnderlineEvent(ve.start.x-1,ve.start.y-ke-1,ve.end.x,ve.end.y-ke-1,void 0);(we?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(De)}_linkLeave(be,we,ve){var ke;(ke=this._currentLink)!=null&&ke.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(we,!1),this._currentLink.state.decorations.pointerCursor&&be.classList.remove("xterm-cursor-pointer")),we.leave&&we.leave(ve,we.text)}_linkAtPosition(be,we){const ve=be.range.start.y*this._bufferService.cols+be.range.start.x,ke=be.range.end.y*this._bufferService.cols+be.range.end.x,De=we.y*this._bufferService.cols+we.x;return ve<=De&&De<=ke}_positionFromMouseEvent(be,we,ve){const ke=ve.getCoords(be,we,this._bufferService.cols,this._bufferService.rows);if(ke)return{x:ke[0],y:ke[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(be,we,ve,ke,De){return{x1:be,y1:we,x2:ve,y2:ke,cols:this._bufferService.cols,fg:De}}};l.Linkifier=xe=m([y(1,Ee.IMouseService),y(2,Ee.IRenderService),y(3,Ce.IBufferService),y(4,Ee.ILinkProviderService)],xe)},9042:(u,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.tooMuchOutput=l.promptLabel=void 0,l.promptLabel="Terminal input",l.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(u,l,d){var m=this&&this.__decorate||function(Ee,xe,be,we){var ve,ke=arguments.length,De=ke<3?xe:we===null?we=Object.getOwnPropertyDescriptor(xe,be):we;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")De=Reflect.decorate(Ee,xe,be,we);else for(var Oe=Ee.length-1;Oe>=0;Oe--)(ve=Ee[Oe])&&(De=(ke<3?ve(De):ke>3?ve(xe,be,De):ve(xe,be))||De);return ke>3&&De&&Object.defineProperty(xe,be,De),De},y=this&&this.__param||function(Ee,xe){return function(be,we){xe(be,we,Ee)}};Object.defineProperty(l,"__esModule",{value:!0}),l.OscLinkProvider=void 0;const S=d(511),X=d(2585);let he=l.OscLinkProvider=class{constructor(Ee,xe,be){this._bufferService=Ee,this._optionsService=xe,this._oscLinkService=be}provideLinks(Ee,xe){var Ie;const be=this._bufferService.buffer.lines.get(Ee-1);if(!be)return void xe(void 0);const we=[],ve=this._optionsService.rawOptions.linkHandler,ke=new S.CellData,De=be.getTrimmedLength();let Oe=-1,Le=-1,Ae=!1;for(let Ue=0;Ue<De;Ue++)if(Le!==-1||be.hasContent(Ue)){if(be.loadCell(Ue,ke),ke.hasExtendedAttrs()&&ke.extended.urlId){if(Le===-1){Le=Ue,Oe=ke.extended.urlId;continue}Ae=ke.extended.urlId!==Oe}else Le!==-1&&(Ae=!0);if(Ae||Le!==-1&&Ue===De-1){const ze=(Ie=this._oscLinkService.getLinkData(Oe))==null?void 0:Ie.uri;if(ze){const Ye={start:{x:Le+1,y:Ee},end:{x:Ue+(Ae||Ue!==De-1?0:1),y:Ee}};let Xe=!1;if(!(ve!=null&&ve.allowNonHttpProtocols))try{const tt=new URL(ze);["http:","https:"].includes(tt.protocol)||(Xe=!0)}catch{Xe=!0}Xe||we.push({text:ze,range:Ye,activate:(tt,lt)=>ve?ve.activate(tt,lt,Ye):Ce(0,lt),hover:(tt,lt)=>{var _t;return(_t=ve==null?void 0:ve.hover)==null?void 0:_t.call(ve,tt,lt,Ye)},leave:(tt,lt)=>{var _t;return(_t=ve==null?void 0:ve.leave)==null?void 0:_t.call(ve,tt,lt,Ye)}})}Ae=!1,ke.hasExtendedAttrs()&&ke.extended.urlId?(Le=Ue,Oe=ke.extended.urlId):(Le=-1,Oe=-1)}}xe(we)}};function Ce(Ee,xe){if(confirm(`Do you want to navigate to ${xe}?

WARNING: This link could potentially be dangerous`)){const be=window.open();if(be){try{be.opener=null}catch{}be.location.href=xe}else console.warn("Opening link blocked as opener could not be cleared")}}l.OscLinkProvider=he=m([y(0,X.IBufferService),y(1,X.IOptionsService),y(2,X.IOscLinkService)],he)},6193:(u,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.RenderDebouncer=void 0,l.RenderDebouncer=class{constructor(d,m){this._renderCallback=d,this._coreBrowserService=m,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(d){return this._refreshCallbacks.push(d),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(d,m,y){this._rowCount=y,d=d!==void 0?d:0,m=m!==void 0?m:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,d):d,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,m):m,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const d=Math.max(this._rowStart,0),m=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(d,m),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const d of this._refreshCallbacks)d(0);this._refreshCallbacks=[]}}},3236:(u,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Terminal=void 0;const m=d(3614),y=d(3656),S=d(3551),X=d(9042),he=d(3730),Ce=d(1680),Ee=d(3107),xe=d(5744),be=d(2950),we=d(1296),ve=d(428),ke=d(4269),De=d(5114),Oe=d(8934),Le=d(3230),Ae=d(9312),Ie=d(4725),Ue=d(6731),ze=d(8055),Ye=d(8969),Xe=d(8460),tt=d(844),lt=d(6114),_t=d(8437),bt=d(2584),rt=d(7399),He=d(5941),We=d(9074),qe=d(2585),Ke=d(5435),st=d(4567),ut=d(779);class nt extends Ye.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(it={}){super(it),this.browser=lt,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new tt.MutableDisposable),this._onCursorMove=this.register(new Xe.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new Xe.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new Xe.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new Xe.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new Xe.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new Xe.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new Xe.EventEmitter),this._onBlur=this.register(new Xe.EventEmitter),this._onA11yCharEmitter=this.register(new Xe.EventEmitter),this._onA11yTabEmitter=this.register(new Xe.EventEmitter),this._onWillOpen=this.register(new Xe.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(We.DecorationService),this._instantiationService.setService(qe.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(ut.LinkProviderService),this._instantiationService.setService(Ie.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(he.OscLinkProvider)),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((Ve,ht)=>this.refresh(Ve,ht))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(Ve=>this._reportWindowsOptions(Ve))),this.register(this._inputHandler.onColor(Ve=>this._handleColorEvent(Ve))),this.register((0,Xe.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,Xe.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,Xe.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,Xe.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(Ve=>this._afterResize(Ve.cols,Ve.rows))),this.register((0,tt.toDisposable)(()=>{var Ve,ht;this._customKeyEventHandler=void 0,(ht=(Ve=this.element)==null?void 0:Ve.parentNode)==null||ht.removeChild(this.element)}))}_handleColorEvent(it){if(this._themeService)for(const Ve of it){let ht,ct="";switch(Ve.index){case 256:ht="foreground",ct="10";break;case 257:ht="background",ct="11";break;case 258:ht="cursor",ct="12";break;default:ht="ansi",ct="4;"+Ve.index}switch(Ve.type){case 0:const St=ze.color.toColorRGB(ht==="ansi"?this._themeService.colors.ansi[Ve.index]:this._themeService.colors[ht]);this.coreService.triggerDataEvent(`${bt.C0.ESC}]${ct};${(0,He.toRgbString)(St)}${bt.C1_ESCAPED.ST}`);break;case 1:if(ht==="ansi")this._themeService.modifyColors(Ct=>Ct.ansi[Ve.index]=ze.channels.toColor(...Ve.color));else{const Ct=ht;this._themeService.modifyColors(Dt=>Dt[Ct]=ze.channels.toColor(...Ve.color))}break;case 2:this._themeService.restoreColor(Ve.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(it){it?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(st.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(it){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(bt.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var it;return(it=this.textarea)==null?void 0:it.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(bt.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const it=this.buffer.ybase+this.buffer.y,Ve=this.buffer.lines.get(it);if(!Ve)return;const ht=Math.min(this.buffer.x,this.cols-1),ct=this._renderService.dimensions.css.cell.height,St=Ve.getWidth(ht),Ct=this._renderService.dimensions.css.cell.width*St,Dt=this.buffer.y*this._renderService.dimensions.css.cell.height,Tt=ht*this._renderService.dimensions.css.cell.width;this.textarea.style.left=Tt+"px",this.textarea.style.top=Dt+"px",this.textarea.style.width=Ct+"px",this.textarea.style.height=ct+"px",this.textarea.style.lineHeight=ct+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,y.addDisposableDomListener)(this.element,"copy",Ve=>{this.hasSelection()&&(0,m.copyHandler)(Ve,this._selectionService)}));const it=Ve=>(0,m.handlePasteEvent)(Ve,this.textarea,this.coreService,this.optionsService);this.register((0,y.addDisposableDomListener)(this.textarea,"paste",it)),this.register((0,y.addDisposableDomListener)(this.element,"paste",it)),lt.isFirefox?this.register((0,y.addDisposableDomListener)(this.element,"mousedown",Ve=>{Ve.button===2&&(0,m.rightClickHandler)(Ve,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,y.addDisposableDomListener)(this.element,"contextmenu",Ve=>{(0,m.rightClickHandler)(Ve,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),lt.isLinux&&this.register((0,y.addDisposableDomListener)(this.element,"auxclick",Ve=>{Ve.button===1&&(0,m.moveTextAreaUnderMouseCursor)(Ve,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,y.addDisposableDomListener)(this.textarea,"keyup",it=>this._keyUp(it),!0)),this.register((0,y.addDisposableDomListener)(this.textarea,"keydown",it=>this._keyDown(it),!0)),this.register((0,y.addDisposableDomListener)(this.textarea,"keypress",it=>this._keyPress(it),!0)),this.register((0,y.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,y.addDisposableDomListener)(this.textarea,"compositionupdate",it=>this._compositionHelper.compositionupdate(it))),this.register((0,y.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,y.addDisposableDomListener)(this.textarea,"input",it=>this._inputEvent(it),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(it){var ht;if(!it)throw new Error("Terminal requires a parent element.");if(it.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),((ht=this.element)==null?void 0:ht.ownerDocument.defaultView)&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=it.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),it.appendChild(this.element);const Ve=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),Ve.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,y.addDisposableDomListener)(this.screenElement,"mousemove",ct=>this.updateCursorStyle(ct))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),Ve.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",X.promptLabel),lt.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(De.CoreBrowserService,this.textarea,it.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(Ie.ICoreBrowserService,this._coreBrowserService),this.register((0,y.addDisposableDomListener)(this.textarea,"focus",ct=>this._handleTextAreaFocus(ct))),this.register((0,y.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(ve.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(Ie.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(Ue.ThemeService),this._instantiationService.setService(Ie.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(ke.CharacterJoinerService),this._instantiationService.setService(Ie.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(Le.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(Ie.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(ct=>this._onRender.fire(ct))),this.onResize(ct=>this._renderService.resize(ct.cols,ct.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(be.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(Oe.MouseService),this._instantiationService.setService(Ie.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(S.Linkifier,this.screenElement)),this.element.appendChild(Ve);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(Ce.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(ct=>this.scrollLines(ct.amount,ct.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(Ae.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(Ie.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(ct=>this.scrollLines(ct.amount,ct.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(ct=>this._renderService.handleSelectionChanged(ct.start,ct.end,ct.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(ct=>{this.textarea.value=ct,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(ct=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,y.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.register(this._instantiationService.createInstance(Ee.BufferDecorationRenderer,this.screenElement)),this.register((0,y.addDisposableDomListener)(this.element,"mousedown",ct=>this._selectionService.handleMouseDown(ct))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(st.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",ct=>this._handleScreenReaderModeOptionChange(ct))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(xe.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",ct=>{!this._overviewRulerRenderer&&ct&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(xe.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(we.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const it=this,Ve=this.element;function ht(Ct){const Dt=it._mouseService.getMouseReportCoords(Ct,it.screenElement);if(!Dt)return!1;let Tt,At;switch(Ct.overrideType||Ct.type){case"mousemove":At=32,Ct.buttons===void 0?(Tt=3,Ct.button!==void 0&&(Tt=Ct.button<3?Ct.button:3)):Tt=1&Ct.buttons?0:4&Ct.buttons?1:2&Ct.buttons?2:3;break;case"mouseup":At=0,Tt=Ct.button<3?Ct.button:3;break;case"mousedown":At=1,Tt=Ct.button<3?Ct.button:3;break;case"wheel":if(it._customWheelEventHandler&&it._customWheelEventHandler(Ct)===!1||it.viewport.getLinesScrolled(Ct)===0)return!1;At=Ct.deltaY<0?0:1,Tt=4;break;default:return!1}return!(At===void 0||Tt===void 0||Tt>4)&&it.coreMouseService.triggerMouseEvent({col:Dt.col,row:Dt.row,x:Dt.x,y:Dt.y,button:Tt,action:At,ctrl:Ct.ctrlKey,alt:Ct.altKey,shift:Ct.shiftKey})}const ct={mouseup:null,wheel:null,mousedrag:null,mousemove:null},St={mouseup:Ct=>(ht(Ct),Ct.buttons||(this._document.removeEventListener("mouseup",ct.mouseup),ct.mousedrag&&this._document.removeEventListener("mousemove",ct.mousedrag)),this.cancel(Ct)),wheel:Ct=>(ht(Ct),this.cancel(Ct,!0)),mousedrag:Ct=>{Ct.buttons&&ht(Ct)},mousemove:Ct=>{Ct.buttons||ht(Ct)}};this.register(this.coreMouseService.onProtocolChange(Ct=>{Ct?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(Ct)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&Ct?ct.mousemove||(Ve.addEventListener("mousemove",St.mousemove),ct.mousemove=St.mousemove):(Ve.removeEventListener("mousemove",ct.mousemove),ct.mousemove=null),16&Ct?ct.wheel||(Ve.addEventListener("wheel",St.wheel,{passive:!1}),ct.wheel=St.wheel):(Ve.removeEventListener("wheel",ct.wheel),ct.wheel=null),2&Ct?ct.mouseup||(ct.mouseup=St.mouseup):(this._document.removeEventListener("mouseup",ct.mouseup),ct.mouseup=null),4&Ct?ct.mousedrag||(ct.mousedrag=St.mousedrag):(this._document.removeEventListener("mousemove",ct.mousedrag),ct.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,y.addDisposableDomListener)(Ve,"mousedown",Ct=>{if(Ct.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(Ct))return ht(Ct),ct.mouseup&&this._document.addEventListener("mouseup",ct.mouseup),ct.mousedrag&&this._document.addEventListener("mousemove",ct.mousedrag),this.cancel(Ct)})),this.register((0,y.addDisposableDomListener)(Ve,"wheel",Ct=>{if(!ct.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(Ct)===!1)return!1;if(!this.buffer.hasScrollback){const Dt=this.viewport.getLinesScrolled(Ct);if(Dt===0)return;const Tt=bt.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(Ct.deltaY<0?"A":"B");let At="";for(let sr=0;sr<Math.abs(Dt);sr++)At+=Tt;return this.coreService.triggerDataEvent(At,!0),this.cancel(Ct,!0)}return this.viewport.handleWheel(Ct)?this.cancel(Ct):void 0}},{passive:!1})),this.register((0,y.addDisposableDomListener)(Ve,"touchstart",Ct=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(Ct),this.cancel(Ct)},{passive:!0})),this.register((0,y.addDisposableDomListener)(Ve,"touchmove",Ct=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(Ct)?void 0:this.cancel(Ct)},{passive:!1}))}refresh(it,Ve){var ht;(ht=this._renderService)==null||ht.refreshRows(it,Ve)}updateCursorStyle(it){var Ve;(Ve=this._selectionService)!=null&&Ve.shouldColumnSelect(it)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(it,Ve,ht=0){var ct;ht===1?(super.scrollLines(it,Ve,ht),this.refresh(0,this.rows-1)):(ct=this.viewport)==null||ct.scrollLines(it)}paste(it){(0,m.paste)(it,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(it){this._customKeyEventHandler=it}attachCustomWheelEventHandler(it){this._customWheelEventHandler=it}registerLinkProvider(it){return this._linkProviderService.registerLinkProvider(it)}registerCharacterJoiner(it){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const Ve=this._characterJoinerService.register(it);return this.refresh(0,this.rows-1),Ve}deregisterCharacterJoiner(it){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(it)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(it){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+it)}registerDecoration(it){return this._decorationService.registerDecoration(it)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(it,Ve,ht){this._selectionService.setSelection(it,Ve,ht)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var it;(it=this._selectionService)==null||it.clearSelection()}selectAll(){var it;(it=this._selectionService)==null||it.selectAll()}selectLines(it,Ve){var ht;(ht=this._selectionService)==null||ht.selectLines(it,Ve)}_keyDown(it){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(it)===!1)return!1;const Ve=this.browser.isMac&&this.options.macOptionIsMeta&&it.altKey;if(!Ve&&!this._compositionHelper.keydown(it))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;Ve||it.key!=="Dead"&&it.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const ht=(0,rt.evaluateKeyboardEvent)(it,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(it),ht.type===3||ht.type===2){const ct=this.rows-1;return this.scrollLines(ht.type===2?-ct:ct),this.cancel(it,!0)}return ht.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,it)||(ht.cancel&&this.cancel(it,!0),!ht.key||!!(it.key&&!it.ctrlKey&&!it.altKey&&!it.metaKey&&it.key.length===1&&it.key.charCodeAt(0)>=65&&it.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(ht.key!==bt.C0.ETX&&ht.key!==bt.C0.CR||(this.textarea.value=""),this._onKey.fire({key:ht.key,domEvent:it}),this._showCursor(),this.coreService.triggerDataEvent(ht.key,!0),!this.optionsService.rawOptions.screenReaderMode||it.altKey||it.ctrlKey?this.cancel(it,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(it,Ve){const ht=it.isMac&&!this.options.macOptionIsMeta&&Ve.altKey&&!Ve.ctrlKey&&!Ve.metaKey||it.isWindows&&Ve.altKey&&Ve.ctrlKey&&!Ve.metaKey||it.isWindows&&Ve.getModifierState("AltGraph");return Ve.type==="keypress"?ht:ht&&(!Ve.keyCode||Ve.keyCode>47)}_keyUp(it){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(it)===!1||(function(Ve){return Ve.keyCode===16||Ve.keyCode===17||Ve.keyCode===18}(it)||this.focus(),this.updateCursorStyle(it),this._keyPressHandled=!1)}_keyPress(it){let Ve;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(it)===!1)return!1;if(this.cancel(it),it.charCode)Ve=it.charCode;else if(it.which===null||it.which===void 0)Ve=it.keyCode;else{if(it.which===0||it.charCode===0)return!1;Ve=it.which}return!(!Ve||(it.altKey||it.ctrlKey||it.metaKey)&&!this._isThirdLevelShift(this.browser,it)||(Ve=String.fromCharCode(Ve),this._onKey.fire({key:Ve,domEvent:it}),this._showCursor(),this.coreService.triggerDataEvent(Ve,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(it){if(it.data&&it.inputType==="insertText"&&(!it.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const Ve=it.data;return this.coreService.triggerDataEvent(Ve,!0),this.cancel(it),!0}return!1}resize(it,Ve){it!==this.cols||Ve!==this.rows?super.resize(it,Ve):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(it,Ve){var ht,ct;(ht=this._charSizeService)==null||ht.measure(),(ct=this.viewport)==null||ct.syncScrollArea(!0)}clear(){var it;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let Ve=1;Ve<this.rows;Ve++)this.buffer.lines.push(this.buffer.getBlankLine(_t.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(it=this.viewport)==null||it.reset(),this.refresh(0,this.rows-1)}}reset(){var Ve,ht;this.options.rows=this.rows,this.options.cols=this.cols;const it=this._customKeyEventHandler;this._setup(),super.reset(),(Ve=this._selectionService)==null||Ve.reset(),this._decorationService.reset(),(ht=this.viewport)==null||ht.reset(),this._customKeyEventHandler=it,this.refresh(0,this.rows-1)}clearTextureAtlas(){var it;(it=this._renderService)==null||it.clearTextureAtlas()}_reportFocus(){var it;(it=this.element)!=null&&it.classList.contains("focus")?this.coreService.triggerDataEvent(bt.C0.ESC+"[I"):this.coreService.triggerDataEvent(bt.C0.ESC+"[O")}_reportWindowsOptions(it){if(this._renderService)switch(it){case Ke.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const Ve=this._renderService.dimensions.css.canvas.width.toFixed(0),ht=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${bt.C0.ESC}[4;${ht};${Ve}t`);break;case Ke.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const ct=this._renderService.dimensions.css.cell.width.toFixed(0),St=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${bt.C0.ESC}[6;${St};${ct}t`)}}cancel(it,Ve){if(this.options.cancelEvents||Ve)return it.preventDefault(),it.stopPropagation(),!1}}l.Terminal=nt},9924:(u,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.TimeBasedDebouncer=void 0,l.TimeBasedDebouncer=class{constructor(d,m=1e3){this._renderCallback=d,this._debounceThresholdMS=m,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(d,m,y){this._rowCount=y,d=d!==void 0?d:0,m=m!==void 0?m:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,d):d,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,m):m;const S=Date.now();if(S-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=S,this._innerRefresh();else if(!this._additionalRefreshRequested){const X=S-this._lastRefreshMs,he=this._debounceThresholdMS-X;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},he)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const d=Math.max(this._rowStart,0),m=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(d,m)}}},1680:function(u,l,d){var m=this&&this.__decorate||function(be,we,ve,ke){var De,Oe=arguments.length,Le=Oe<3?we:ke===null?ke=Object.getOwnPropertyDescriptor(we,ve):ke;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Le=Reflect.decorate(be,we,ve,ke);else for(var Ae=be.length-1;Ae>=0;Ae--)(De=be[Ae])&&(Le=(Oe<3?De(Le):Oe>3?De(we,ve,Le):De(we,ve))||Le);return Oe>3&&Le&&Object.defineProperty(we,ve,Le),Le},y=this&&this.__param||function(be,we){return function(ve,ke){we(ve,ke,be)}};Object.defineProperty(l,"__esModule",{value:!0}),l.Viewport=void 0;const S=d(3656),X=d(4725),he=d(8460),Ce=d(844),Ee=d(2585);let xe=l.Viewport=class extends Ce.Disposable{constructor(be,we,ve,ke,De,Oe,Le,Ae){super(),this._viewportElement=be,this._scrollArea=we,this._bufferService=ve,this._optionsService=ke,this._charSizeService=De,this._renderService=Oe,this._coreBrowserService=Le,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new he.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,S.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(Ie=>this._activeBuffer=Ie.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(Ie=>this._renderDimensions=Ie)),this._handleThemeChange(Ae.colors),this.register(Ae.onChangeColors(Ie=>this._handleThemeChange(Ie))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(be){this._viewportElement.style.backgroundColor=be.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(be){if(be)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const we=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==we&&(this._lastRecordedBufferHeight=we,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const be=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==be&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=be),this._refreshAnimationFrame=null}syncScrollArea(be=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(be);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(be)}_handleScroll(be){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const we=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:we,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const be=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(be*(this._smoothScrollState.target-this._smoothScrollState.origin)),be<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(be,we){const ve=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(we<0&&this._viewportElement.scrollTop!==0||we>0&&ve<this._lastRecordedBufferHeight)||(be.cancelable&&be.preventDefault(),!1)}handleWheel(be){const we=this._getPixelsScrolled(be);return we!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+we:this._smoothScrollState.target+=we,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=we,this._bubbleScroll(be,we))}scrollLines(be){if(be!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const we=be*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+we,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:be,suppressScrollEvent:!1})}_getPixelsScrolled(be){if(be.deltaY===0||be.shiftKey)return 0;let we=this._applyScrollModifier(be.deltaY,be);return be.deltaMode===WheelEvent.DOM_DELTA_LINE?we*=this._currentRowHeight:be.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(we*=this._currentRowHeight*this._bufferService.rows),we}getBufferElements(be,we){var Ae;let ve,ke="";const De=[],Oe=we??this._bufferService.buffer.lines.length,Le=this._bufferService.buffer.lines;for(let Ie=be;Ie<Oe;Ie++){const Ue=Le.get(Ie);if(!Ue)continue;const ze=(Ae=Le.get(Ie+1))==null?void 0:Ae.isWrapped;if(ke+=Ue.translateToString(!ze),!ze||Ie===Le.length-1){const Ye=document.createElement("div");Ye.textContent=ke,De.push(Ye),ke.length>0&&(ve=Ye),ke=""}}return{bufferElements:De,cursorElement:ve}}getLinesScrolled(be){if(be.deltaY===0||be.shiftKey)return 0;let we=this._applyScrollModifier(be.deltaY,be);return be.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(we/=this._currentRowHeight+0,this._wheelPartialScroll+=we,we=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):be.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(we*=this._bufferService.rows),we}_applyScrollModifier(be,we){const ve=this._optionsService.rawOptions.fastScrollModifier;return ve==="alt"&&we.altKey||ve==="ctrl"&&we.ctrlKey||ve==="shift"&&we.shiftKey?be*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:be*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(be){this._lastTouchY=be.touches[0].pageY}handleTouchMove(be){const we=this._lastTouchY-be.touches[0].pageY;return this._lastTouchY=be.touches[0].pageY,we!==0&&(this._viewportElement.scrollTop+=we,this._bubbleScroll(be,we))}};l.Viewport=xe=m([y(2,Ee.IBufferService),y(3,Ee.IOptionsService),y(4,X.ICharSizeService),y(5,X.IRenderService),y(6,X.ICoreBrowserService),y(7,X.IThemeService)],xe)},3107:function(u,l,d){var m=this&&this.__decorate||function(Ee,xe,be,we){var ve,ke=arguments.length,De=ke<3?xe:we===null?we=Object.getOwnPropertyDescriptor(xe,be):we;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")De=Reflect.decorate(Ee,xe,be,we);else for(var Oe=Ee.length-1;Oe>=0;Oe--)(ve=Ee[Oe])&&(De=(ke<3?ve(De):ke>3?ve(xe,be,De):ve(xe,be))||De);return ke>3&&De&&Object.defineProperty(xe,be,De),De},y=this&&this.__param||function(Ee,xe){return function(be,we){xe(be,we,Ee)}};Object.defineProperty(l,"__esModule",{value:!0}),l.BufferDecorationRenderer=void 0;const S=d(4725),X=d(844),he=d(2585);let Ce=l.BufferDecorationRenderer=class extends X.Disposable{constructor(Ee,xe,be,we,ve){super(),this._screenElement=Ee,this._bufferService=xe,this._coreBrowserService=be,this._decorationService=we,this._renderService=ve,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(ke=>this._removeDecoration(ke))),this.register((0,X.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const Ee of this._decorationService.decorations)this._renderDecoration(Ee);this._dimensionsChanged=!1}_renderDecoration(Ee){this._refreshStyle(Ee),this._dimensionsChanged&&this._refreshXPosition(Ee)}_createElement(Ee){var we;const xe=this._coreBrowserService.mainDocument.createElement("div");xe.classList.add("xterm-decoration"),xe.classList.toggle("xterm-decoration-top-layer",((we=Ee==null?void 0:Ee.options)==null?void 0:we.layer)==="top"),xe.style.width=`${Math.round((Ee.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,xe.style.height=(Ee.options.height||1)*this._renderService.dimensions.css.cell.height+"px",xe.style.top=(Ee.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",xe.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const be=Ee.options.x??0;return be&&be>this._bufferService.cols&&(xe.style.display="none"),this._refreshXPosition(Ee,xe),xe}_refreshStyle(Ee){const xe=Ee.marker.line-this._bufferService.buffers.active.ydisp;if(xe<0||xe>=this._bufferService.rows)Ee.element&&(Ee.element.style.display="none",Ee.onRenderEmitter.fire(Ee.element));else{let be=this._decorationElements.get(Ee);be||(be=this._createElement(Ee),Ee.element=be,this._decorationElements.set(Ee,be),this._container.appendChild(be),Ee.onDispose(()=>{this._decorationElements.delete(Ee),be.remove()})),be.style.top=xe*this._renderService.dimensions.css.cell.height+"px",be.style.display=this._altBufferIsActive?"none":"block",Ee.onRenderEmitter.fire(be)}}_refreshXPosition(Ee,xe=Ee.element){if(!xe)return;const be=Ee.options.x??0;(Ee.options.anchor||"left")==="right"?xe.style.right=be?be*this._renderService.dimensions.css.cell.width+"px":"":xe.style.left=be?be*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(Ee){var xe;(xe=this._decorationElements.get(Ee))==null||xe.remove(),this._decorationElements.delete(Ee),Ee.dispose()}};l.BufferDecorationRenderer=Ce=m([y(1,he.IBufferService),y(2,S.ICoreBrowserService),y(3,he.IDecorationService),y(4,S.IRenderService)],Ce)},5871:(u,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ColorZoneStore=void 0,l.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(d){if(d.options.overviewRulerOptions){for(const m of this._zones)if(m.color===d.options.overviewRulerOptions.color&&m.position===d.options.overviewRulerOptions.position){if(this._lineIntersectsZone(m,d.marker.line))return;if(this._lineAdjacentToZone(m,d.marker.line,d.options.overviewRulerOptions.position))return void this._addLineToZone(m,d.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=d.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=d.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=d.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=d.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:d.options.overviewRulerOptions.color,position:d.options.overviewRulerOptions.position,startBufferLine:d.marker.line,endBufferLine:d.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(d){this._linePadding=d}_lineIntersectsZone(d,m){return m>=d.startBufferLine&&m<=d.endBufferLine}_lineAdjacentToZone(d,m,y){return m>=d.startBufferLine-this._linePadding[y||"full"]&&m<=d.endBufferLine+this._linePadding[y||"full"]}_addLineToZone(d,m){d.startBufferLine=Math.min(d.startBufferLine,m),d.endBufferLine=Math.max(d.endBufferLine,m)}}},5744:function(u,l,d){var m=this&&this.__decorate||function(ve,ke,De,Oe){var Le,Ae=arguments.length,Ie=Ae<3?ke:Oe===null?Oe=Object.getOwnPropertyDescriptor(ke,De):Oe;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Ie=Reflect.decorate(ve,ke,De,Oe);else for(var Ue=ve.length-1;Ue>=0;Ue--)(Le=ve[Ue])&&(Ie=(Ae<3?Le(Ie):Ae>3?Le(ke,De,Ie):Le(ke,De))||Ie);return Ae>3&&Ie&&Object.defineProperty(ke,De,Ie),Ie},y=this&&this.__param||function(ve,ke){return function(De,Oe){ke(De,Oe,ve)}};Object.defineProperty(l,"__esModule",{value:!0}),l.OverviewRulerRenderer=void 0;const S=d(5871),X=d(4725),he=d(844),Ce=d(2585),Ee={full:0,left:0,center:0,right:0},xe={full:0,left:0,center:0,right:0},be={full:0,left:0,center:0,right:0};let we=l.OverviewRulerRenderer=class extends he.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(ve,ke,De,Oe,Le,Ae,Ie){var ze;super(),this._viewportElement=ve,this._screenElement=ke,this._bufferService=De,this._decorationService=Oe,this._renderService=Le,this._optionsService=Ae,this._coreBrowserService=Ie,this._colorZoneStore=new S.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(ze=this._viewportElement.parentElement)==null||ze.insertBefore(this._canvas,this._viewportElement);const Ue=this._canvas.getContext("2d");if(!Ue)throw new Error("Ctx cannot be null");this._ctx=Ue,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,he.toDisposable)(()=>{var Ye;(Ye=this._canvas)==null||Ye.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const ve=Math.floor(this._canvas.width/3),ke=Math.ceil(this._canvas.width/3);xe.full=this._canvas.width,xe.left=ve,xe.center=ke,xe.right=ve,this._refreshDrawHeightConstants(),be.full=0,be.left=0,be.center=xe.left,be.right=xe.left+xe.center}_refreshDrawHeightConstants(){Ee.full=Math.round(2*this._coreBrowserService.dpr);const ve=this._canvas.height/this._bufferService.buffer.lines.length,ke=Math.round(Math.max(Math.min(ve,12),6)*this._coreBrowserService.dpr);Ee.left=ke,Ee.center=ke,Ee.right=ke}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*Ee.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*Ee.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*Ee.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*Ee.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const ke of this._decorationService.decorations)this._colorZoneStore.addDecoration(ke);this._ctx.lineWidth=1;const ve=this._colorZoneStore.zones;for(const ke of ve)ke.position!=="full"&&this._renderColorZone(ke);for(const ke of ve)ke.position==="full"&&this._renderColorZone(ke);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(ve){this._ctx.fillStyle=ve.color,this._ctx.fillRect(be[ve.position||"full"],Math.round((this._canvas.height-1)*(ve.startBufferLine/this._bufferService.buffers.active.lines.length)-Ee[ve.position||"full"]/2),xe[ve.position||"full"],Math.round((this._canvas.height-1)*((ve.endBufferLine-ve.startBufferLine)/this._bufferService.buffers.active.lines.length)+Ee[ve.position||"full"]))}_queueRefresh(ve,ke){this._shouldUpdateDimensions=ve||this._shouldUpdateDimensions,this._shouldUpdateAnchor=ke||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};l.OverviewRulerRenderer=we=m([y(2,Ce.IBufferService),y(3,Ce.IDecorationService),y(4,X.IRenderService),y(5,Ce.IOptionsService),y(6,X.ICoreBrowserService)],we)},2950:function(u,l,d){var m=this&&this.__decorate||function(Ee,xe,be,we){var ve,ke=arguments.length,De=ke<3?xe:we===null?we=Object.getOwnPropertyDescriptor(xe,be):we;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")De=Reflect.decorate(Ee,xe,be,we);else for(var Oe=Ee.length-1;Oe>=0;Oe--)(ve=Ee[Oe])&&(De=(ke<3?ve(De):ke>3?ve(xe,be,De):ve(xe,be))||De);return ke>3&&De&&Object.defineProperty(xe,be,De),De},y=this&&this.__param||function(Ee,xe){return function(be,we){xe(be,we,Ee)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CompositionHelper=void 0;const S=d(4725),X=d(2585),he=d(2584);let Ce=l.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(Ee,xe,be,we,ve,ke){this._textarea=Ee,this._compositionView=xe,this._bufferService=be,this._optionsService=we,this._coreService=ve,this._renderService=ke,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(Ee){this._compositionView.textContent=Ee.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(Ee){if(this._isComposing||this._isSendingComposition){if(Ee.keyCode===229||Ee.keyCode===16||Ee.keyCode===17||Ee.keyCode===18)return!1;this._finalizeComposition(!1)}return Ee.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(Ee){if(this._compositionView.classList.remove("active"),this._isComposing=!1,Ee){const xe={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let be;this._isSendingComposition=!1,xe.start+=this._dataAlreadySent.length,be=this._isComposing?this._textarea.value.substring(xe.start,xe.end):this._textarea.value.substring(xe.start),be.length>0&&this._coreService.triggerDataEvent(be,!0)}},0)}else{this._isSendingComposition=!1;const xe=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(xe,!0)}}_handleAnyTextareaChanges(){const Ee=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const xe=this._textarea.value,be=xe.replace(Ee,"");this._dataAlreadySent=be,xe.length>Ee.length?this._coreService.triggerDataEvent(be,!0):xe.length<Ee.length?this._coreService.triggerDataEvent(`${he.C0.DEL}`,!0):xe.length===Ee.length&&xe!==Ee&&this._coreService.triggerDataEvent(xe,!0)}},0)}updateCompositionElements(Ee){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const xe=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),be=this._renderService.dimensions.css.cell.height,we=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,ve=xe*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=ve+"px",this._compositionView.style.top=we+"px",this._compositionView.style.height=be+"px",this._compositionView.style.lineHeight=be+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const ke=this._compositionView.getBoundingClientRect();this._textarea.style.left=ve+"px",this._textarea.style.top=we+"px",this._textarea.style.width=Math.max(ke.width,1)+"px",this._textarea.style.height=Math.max(ke.height,1)+"px",this._textarea.style.lineHeight=ke.height+"px"}Ee||setTimeout(()=>this.updateCompositionElements(!0),0)}}};l.CompositionHelper=Ce=m([y(2,X.IBufferService),y(3,X.IOptionsService),y(4,X.ICoreService),y(5,S.IRenderService)],Ce)},9806:(u,l)=>{function d(m,y,S){const X=S.getBoundingClientRect(),he=m.getComputedStyle(S),Ce=parseInt(he.getPropertyValue("padding-left")),Ee=parseInt(he.getPropertyValue("padding-top"));return[y.clientX-X.left-Ce,y.clientY-X.top-Ee]}Object.defineProperty(l,"__esModule",{value:!0}),l.getCoords=l.getCoordsRelativeToElement=void 0,l.getCoordsRelativeToElement=d,l.getCoords=function(m,y,S,X,he,Ce,Ee,xe,be){if(!Ce)return;const we=d(m,y,S);return we?(we[0]=Math.ceil((we[0]+(be?Ee/2:0))/Ee),we[1]=Math.ceil(we[1]/xe),we[0]=Math.min(Math.max(we[0],1),X+(be?1:0)),we[1]=Math.min(Math.max(we[1],1),he),we):void 0}},9504:(u,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.moveToCellSequence=void 0;const m=d(2584);function y(xe,be,we,ve){const ke=xe-S(xe,we),De=be-S(be,we),Oe=Math.abs(ke-De)-function(Le,Ae,Ie){let Ue=0;const ze=Le-S(Le,Ie),Ye=Ae-S(Ae,Ie);for(let Xe=0;Xe<Math.abs(ze-Ye);Xe++){const tt=X(Le,Ae)==="A"?-1:1,lt=Ie.buffer.lines.get(ze+tt*Xe);lt!=null&&lt.isWrapped&&Ue++}return Ue}(xe,be,we);return Ee(Oe,Ce(X(xe,be),ve))}function S(xe,be){let we=0,ve=be.buffer.lines.get(xe),ke=ve==null?void 0:ve.isWrapped;for(;ke&&xe>=0&&xe<be.rows;)we++,ve=be.buffer.lines.get(--xe),ke=ve==null?void 0:ve.isWrapped;return we}function X(xe,be){return xe>be?"A":"B"}function he(xe,be,we,ve,ke,De){let Oe=xe,Le=be,Ae="";for(;Oe!==we||Le!==ve;)Oe+=ke?1:-1,ke&&Oe>De.cols-1?(Ae+=De.buffer.translateBufferLineToString(Le,!1,xe,Oe),Oe=0,xe=0,Le++):!ke&&Oe<0&&(Ae+=De.buffer.translateBufferLineToString(Le,!1,0,xe+1),Oe=De.cols-1,xe=Oe,Le--);return Ae+De.buffer.translateBufferLineToString(Le,!1,xe,Oe)}function Ce(xe,be){const we=be?"O":"[";return m.C0.ESC+we+xe}function Ee(xe,be){xe=Math.floor(xe);let we="";for(let ve=0;ve<xe;ve++)we+=be;return we}l.moveToCellSequence=function(xe,be,we,ve){const ke=we.buffer.x,De=we.buffer.y;if(!we.buffer.hasScrollback)return function(Ae,Ie,Ue,ze,Ye,Xe){return y(Ie,ze,Ye,Xe).length===0?"":Ee(he(Ae,Ie,Ae,Ie-S(Ie,Ye),!1,Ye).length,Ce("D",Xe))}(ke,De,0,be,we,ve)+y(De,be,we,ve)+function(Ae,Ie,Ue,ze,Ye,Xe){let tt;tt=y(Ie,ze,Ye,Xe).length>0?ze-S(ze,Ye):Ie;const lt=ze,_t=function(bt,rt,He,We,qe,Ke){let st;return st=y(He,We,qe,Ke).length>0?We-S(We,qe):rt,bt<He&&st<=We||bt>=He&&st<We?"C":"D"}(Ae,Ie,Ue,ze,Ye,Xe);return Ee(he(Ae,tt,Ue,lt,_t==="C",Ye).length,Ce(_t,Xe))}(ke,De,xe,be,we,ve);let Oe;if(De===be)return Oe=ke>xe?"D":"C",Ee(Math.abs(ke-xe),Ce(Oe,ve));Oe=De>be?"D":"C";const Le=Math.abs(De-be);return Ee(function(Ae,Ie){return Ie.cols-Ae}(De>be?xe:ke,we)+(Le-1)*we.cols+1+((De>be?ke:xe)-1),Ce(Oe,ve))}},1296:function(u,l,d){var m=this&&this.__decorate||function(Xe,tt,lt,_t){var bt,rt=arguments.length,He=rt<3?tt:_t===null?_t=Object.getOwnPropertyDescriptor(tt,lt):_t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")He=Reflect.decorate(Xe,tt,lt,_t);else for(var We=Xe.length-1;We>=0;We--)(bt=Xe[We])&&(He=(rt<3?bt(He):rt>3?bt(tt,lt,He):bt(tt,lt))||He);return rt>3&&He&&Object.defineProperty(tt,lt,He),He},y=this&&this.__param||function(Xe,tt){return function(lt,_t){tt(lt,_t,Xe)}};Object.defineProperty(l,"__esModule",{value:!0}),l.DomRenderer=void 0;const S=d(3787),X=d(2550),he=d(2223),Ce=d(6171),Ee=d(6052),xe=d(4725),be=d(8055),we=d(8460),ve=d(844),ke=d(2585),De="xterm-dom-renderer-owner-",Oe="xterm-rows",Le="xterm-fg-",Ae="xterm-bg-",Ie="xterm-focus",Ue="xterm-selection";let ze=1,Ye=l.DomRenderer=class extends ve.Disposable{constructor(Xe,tt,lt,_t,bt,rt,He,We,qe,Ke,st,ut,nt){super(),this._terminal=Xe,this._document=tt,this._element=lt,this._screenElement=_t,this._viewportElement=bt,this._helperContainer=rt,this._linkifier2=He,this._charSizeService=qe,this._optionsService=Ke,this._bufferService=st,this._coreBrowserService=ut,this._themeService=nt,this._terminalClass=ze++,this._rowElements=[],this._selectionRenderModel=(0,Ee.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new we.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(Oe),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(Ue),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,Ce.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(vt=>this._injectCss(vt))),this._injectCss(this._themeService.colors),this._rowFactory=We.createInstance(S.DomRendererRowFactory,document),this._element.classList.add(De+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(vt=>this._handleLinkHover(vt))),this.register(this._linkifier2.onHideLinkUnderline(vt=>this._handleLinkLeave(vt))),this.register((0,ve.toDisposable)(()=>{this._element.classList.remove(De+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new X.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const Xe=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*Xe,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*Xe),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/Xe),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/Xe),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const lt of this._rowElements)lt.style.width=`${this.dimensions.css.canvas.width}px`,lt.style.height=`${this.dimensions.css.cell.height}px`,lt.style.lineHeight=`${this.dimensions.css.cell.height}px`,lt.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const tt=`${this._terminalSelector} .${Oe} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=tt,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(Xe){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let tt=`${this._terminalSelector} .${Oe} { color: ${Xe.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;tt+=`${this._terminalSelector} .${Oe} .xterm-dim { color: ${be.color.multiplyOpacity(Xe.foreground,.5).css};}`,tt+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const lt=`blink_underline_${this._terminalClass}`,_t=`blink_bar_${this._terminalClass}`,bt=`blink_block_${this._terminalClass}`;tt+=`@keyframes ${lt} { 50% {  border-bottom-style: hidden; }}`,tt+=`@keyframes ${_t} { 50% {  box-shadow: none; }}`,tt+=`@keyframes ${bt} { 0% {  background-color: ${Xe.cursor.css};  color: ${Xe.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${Xe.cursor.css}; }}`,tt+=`${this._terminalSelector} .${Oe}.${Ie} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${lt} 1s step-end infinite;}${this._terminalSelector} .${Oe}.${Ie} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${_t} 1s step-end infinite;}${this._terminalSelector} .${Oe}.${Ie} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${bt} 1s step-end infinite;}${this._terminalSelector} .${Oe} .xterm-cursor.xterm-cursor-block { background-color: ${Xe.cursor.css}; color: ${Xe.cursorAccent.css};}${this._terminalSelector} .${Oe} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${Xe.cursor.css} !important; color: ${Xe.cursorAccent.css} !important;}${this._terminalSelector} .${Oe} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${Xe.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${Oe} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${Xe.cursor.css} inset;}${this._terminalSelector} .${Oe} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${Xe.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,tt+=`${this._terminalSelector} .${Ue} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${Ue} div { position: absolute; background-color: ${Xe.selectionBackgroundOpaque.css};}${this._terminalSelector} .${Ue} div { position: absolute; background-color: ${Xe.selectionInactiveBackgroundOpaque.css};}`;for(const[rt,He]of Xe.ansi.entries())tt+=`${this._terminalSelector} .${Le}${rt} { color: ${He.css}; }${this._terminalSelector} .${Le}${rt}.xterm-dim { color: ${be.color.multiplyOpacity(He,.5).css}; }${this._terminalSelector} .${Ae}${rt} { background-color: ${He.css}; }`;tt+=`${this._terminalSelector} .${Le}${he.INVERTED_DEFAULT_COLOR} { color: ${be.color.opaque(Xe.background).css}; }${this._terminalSelector} .${Le}${he.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${be.color.multiplyOpacity(be.color.opaque(Xe.background),.5).css}; }${this._terminalSelector} .${Ae}${he.INVERTED_DEFAULT_COLOR} { background-color: ${Xe.foreground.css}; }`,this._themeStyleElement.textContent=tt}_setDefaultSpacing(){const Xe=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${Xe}px`,this._rowFactory.defaultSpacing=Xe}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(Xe,tt){for(let lt=this._rowElements.length;lt<=tt;lt++){const _t=this._document.createElement("div");this._rowContainer.appendChild(_t),this._rowElements.push(_t)}for(;this._rowElements.length>tt;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(Xe,tt){this._refreshRowElements(Xe,tt),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(Ie),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(Ie),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(Xe,tt,lt){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(Xe,tt,lt),this.renderRows(0,this._bufferService.rows-1),!Xe||!tt)return;this._selectionRenderModel.update(this._terminal,Xe,tt,lt);const _t=this._selectionRenderModel.viewportStartRow,bt=this._selectionRenderModel.viewportEndRow,rt=this._selectionRenderModel.viewportCappedStartRow,He=this._selectionRenderModel.viewportCappedEndRow;if(rt>=this._bufferService.rows||He<0)return;const We=this._document.createDocumentFragment();if(lt){const qe=Xe[0]>tt[0];We.appendChild(this._createSelectionElement(rt,qe?tt[0]:Xe[0],qe?Xe[0]:tt[0],He-rt+1))}else{const qe=_t===rt?Xe[0]:0,Ke=rt===bt?tt[0]:this._bufferService.cols;We.appendChild(this._createSelectionElement(rt,qe,Ke));const st=He-rt-1;if(We.appendChild(this._createSelectionElement(rt+1,0,this._bufferService.cols,st)),rt!==He){const ut=bt===He?tt[0]:this._bufferService.cols;We.appendChild(this._createSelectionElement(He,0,ut))}}this._selectionContainer.appendChild(We)}_createSelectionElement(Xe,tt,lt,_t=1){const bt=this._document.createElement("div"),rt=tt*this.dimensions.css.cell.width;let He=this.dimensions.css.cell.width*(lt-tt);return rt+He>this.dimensions.css.canvas.width&&(He=this.dimensions.css.canvas.width-rt),bt.style.height=_t*this.dimensions.css.cell.height+"px",bt.style.top=Xe*this.dimensions.css.cell.height+"px",bt.style.left=`${rt}px`,bt.style.width=`${He}px`,bt}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const Xe of this._rowElements)Xe.replaceChildren()}renderRows(Xe,tt){const lt=this._bufferService.buffer,_t=lt.ybase+lt.y,bt=Math.min(lt.x,this._bufferService.cols-1),rt=this._optionsService.rawOptions.cursorBlink,He=this._optionsService.rawOptions.cursorStyle,We=this._optionsService.rawOptions.cursorInactiveStyle;for(let qe=Xe;qe<=tt;qe++){const Ke=qe+lt.ydisp,st=this._rowElements[qe],ut=lt.lines.get(Ke);if(!st||!ut)break;st.replaceChildren(...this._rowFactory.createRow(ut,Ke,Ke===_t,He,We,bt,rt,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${De}${this._terminalClass}`}_handleLinkHover(Xe){this._setCellUnderline(Xe.x1,Xe.x2,Xe.y1,Xe.y2,Xe.cols,!0)}_handleLinkLeave(Xe){this._setCellUnderline(Xe.x1,Xe.x2,Xe.y1,Xe.y2,Xe.cols,!1)}_setCellUnderline(Xe,tt,lt,_t,bt,rt){lt<0&&(Xe=0),_t<0&&(tt=0);const He=this._bufferService.rows-1;lt=Math.max(Math.min(lt,He),0),_t=Math.max(Math.min(_t,He),0),bt=Math.min(bt,this._bufferService.cols);const We=this._bufferService.buffer,qe=We.ybase+We.y,Ke=Math.min(We.x,bt-1),st=this._optionsService.rawOptions.cursorBlink,ut=this._optionsService.rawOptions.cursorStyle,nt=this._optionsService.rawOptions.cursorInactiveStyle;for(let vt=lt;vt<=_t;++vt){const it=vt+We.ydisp,Ve=this._rowElements[vt],ht=We.lines.get(it);if(!Ve||!ht)break;Ve.replaceChildren(...this._rowFactory.createRow(ht,it,it===qe,ut,nt,Ke,st,this.dimensions.css.cell.width,this._widthCache,rt?vt===lt?Xe:0:-1,rt?(vt===_t?tt:bt)-1:-1))}}};l.DomRenderer=Ye=m([y(7,ke.IInstantiationService),y(8,xe.ICharSizeService),y(9,ke.IOptionsService),y(10,ke.IBufferService),y(11,xe.ICoreBrowserService),y(12,xe.IThemeService)],Ye)},3787:function(u,l,d){var m=this&&this.__decorate||function(Oe,Le,Ae,Ie){var Ue,ze=arguments.length,Ye=ze<3?Le:Ie===null?Ie=Object.getOwnPropertyDescriptor(Le,Ae):Ie;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Ye=Reflect.decorate(Oe,Le,Ae,Ie);else for(var Xe=Oe.length-1;Xe>=0;Xe--)(Ue=Oe[Xe])&&(Ye=(ze<3?Ue(Ye):ze>3?Ue(Le,Ae,Ye):Ue(Le,Ae))||Ye);return ze>3&&Ye&&Object.defineProperty(Le,Ae,Ye),Ye},y=this&&this.__param||function(Oe,Le){return function(Ae,Ie){Le(Ae,Ie,Oe)}};Object.defineProperty(l,"__esModule",{value:!0}),l.DomRendererRowFactory=void 0;const S=d(2223),X=d(643),he=d(511),Ce=d(2585),Ee=d(8055),xe=d(4725),be=d(4269),we=d(6171),ve=d(3734);let ke=l.DomRendererRowFactory=class{constructor(Oe,Le,Ae,Ie,Ue,ze,Ye){this._document=Oe,this._characterJoinerService=Le,this._optionsService=Ae,this._coreBrowserService=Ie,this._coreService=Ue,this._decorationService=ze,this._themeService=Ye,this._workCell=new he.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(Oe,Le,Ae){this._selectionStart=Oe,this._selectionEnd=Le,this._columnSelectMode=Ae}createRow(Oe,Le,Ae,Ie,Ue,ze,Ye,Xe,tt,lt,_t){const bt=[],rt=this._characterJoinerService.getJoinedCharacters(Le),He=this._themeService.colors;let We,qe=Oe.getNoBgTrimmedLength();Ae&&qe<ze+1&&(qe=ze+1);let Ke=0,st="",ut=0,nt=0,vt=0,it=!1,Ve=0,ht=!1,ct=0;const St=[],Ct=lt!==-1&&_t!==-1;for(let Dt=0;Dt<qe;Dt++){Oe.loadCell(Dt,this._workCell);let Tt=this._workCell.getWidth();if(Tt===0)continue;let At=!1,sr=Dt,Lt=this._workCell;if(rt.length>0&&Dt===rt[0][0]){At=!0;const Jt=rt.shift();Lt=new be.JoinedCellData(this._workCell,Oe.translateToString(!0,Jt[0],Jt[1]),Jt[1]-Jt[0]),sr=Jt[1]-1,Tt=Lt.getWidth()}const Kt=this._isCellInSelection(Dt,Le),yt=Ae&&Dt===ze,qt=Ct&&Dt>=lt&&Dt<=_t;let Qt=!1;this._decorationService.forEachDecorationAtCell(Dt,Le,void 0,Jt=>{Qt=!0});let rr=Lt.getChars()||X.WHITESPACE_CELL_CHAR;if(rr===" "&&(Lt.isUnderline()||Lt.isOverline())&&(rr=""),ct=Tt*Xe-tt.get(rr,Lt.isBold(),Lt.isItalic()),We){if(Ke&&(Kt&&ht||!Kt&&!ht&&Lt.bg===ut)&&(Kt&&ht&&He.selectionForeground||Lt.fg===nt)&&Lt.extended.ext===vt&&qt===it&&ct===Ve&&!yt&&!At&&!Qt){Lt.isInvisible()?st+=X.WHITESPACE_CELL_CHAR:st+=rr,Ke++;continue}Ke&&(We.textContent=st),We=this._document.createElement("span"),Ke=0,st=""}else We=this._document.createElement("span");if(ut=Lt.bg,nt=Lt.fg,vt=Lt.extended.ext,it=qt,Ve=ct,ht=Kt,At&&ze>=Dt&&ze<=sr&&(ze=Dt),!this._coreService.isCursorHidden&&yt&&this._coreService.isCursorInitialized){if(St.push("xterm-cursor"),this._coreBrowserService.isFocused)Ye&&St.push("xterm-cursor-blink"),St.push(Ie==="bar"?"xterm-cursor-bar":Ie==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(Ue)switch(Ue){case"outline":St.push("xterm-cursor-outline");break;case"block":St.push("xterm-cursor-block");break;case"bar":St.push("xterm-cursor-bar");break;case"underline":St.push("xterm-cursor-underline")}}if(Lt.isBold()&&St.push("xterm-bold"),Lt.isItalic()&&St.push("xterm-italic"),Lt.isDim()&&St.push("xterm-dim"),st=Lt.isInvisible()?X.WHITESPACE_CELL_CHAR:Lt.getChars()||X.WHITESPACE_CELL_CHAR,Lt.isUnderline()&&(St.push(`xterm-underline-${Lt.extended.underlineStyle}`),st===" "&&(st=""),!Lt.isUnderlineColorDefault()))if(Lt.isUnderlineColorRGB())We.style.textDecorationColor=`rgb(${ve.AttributeData.toColorRGB(Lt.getUnderlineColor()).join(",")})`;else{let Jt=Lt.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&Lt.isBold()&&Jt<8&&(Jt+=8),We.style.textDecorationColor=He.ansi[Jt].css}Lt.isOverline()&&(St.push("xterm-overline"),st===" "&&(st="")),Lt.isStrikethrough()&&St.push("xterm-strikethrough"),qt&&(We.style.textDecoration="underline");let It=Lt.getFgColor(),_r=Lt.getFgColorMode(),cr=Lt.getBgColor(),Vt=Lt.getBgColorMode();const Gt=!!Lt.isInverse();if(Gt){const Jt=It;It=cr,cr=Jt;const br=_r;_r=Vt,Vt=br}let er,Yt,ar,yr=!1;switch(this._decorationService.forEachDecorationAtCell(Dt,Le,void 0,Jt=>{Jt.options.layer!=="top"&&yr||(Jt.backgroundColorRGB&&(Vt=50331648,cr=Jt.backgroundColorRGB.rgba>>8&16777215,er=Jt.backgroundColorRGB),Jt.foregroundColorRGB&&(_r=50331648,It=Jt.foregroundColorRGB.rgba>>8&16777215,Yt=Jt.foregroundColorRGB),yr=Jt.options.layer==="top")}),!yr&&Kt&&(er=this._coreBrowserService.isFocused?He.selectionBackgroundOpaque:He.selectionInactiveBackgroundOpaque,cr=er.rgba>>8&16777215,Vt=50331648,yr=!0,He.selectionForeground&&(_r=50331648,It=He.selectionForeground.rgba>>8&16777215,Yt=He.selectionForeground)),yr&&St.push("xterm-decoration-top"),Vt){case 16777216:case 33554432:ar=He.ansi[cr],St.push(`xterm-bg-${cr}`);break;case 50331648:ar=Ee.channels.toColor(cr>>16,cr>>8&255,255&cr),this._addStyle(We,`background-color:#${De((cr>>>0).toString(16),"0",6)}`);break;default:Gt?(ar=He.foreground,St.push(`xterm-bg-${S.INVERTED_DEFAULT_COLOR}`)):ar=He.background}switch(er||Lt.isDim()&&(er=Ee.color.multiplyOpacity(ar,.5)),_r){case 16777216:case 33554432:Lt.isBold()&&It<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(It+=8),this._applyMinimumContrast(We,ar,He.ansi[It],Lt,er,void 0)||St.push(`xterm-fg-${It}`);break;case 50331648:const Jt=Ee.channels.toColor(It>>16&255,It>>8&255,255&It);this._applyMinimumContrast(We,ar,Jt,Lt,er,Yt)||this._addStyle(We,`color:#${De(It.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(We,ar,He.foreground,Lt,er,Yt)||Gt&&St.push(`xterm-fg-${S.INVERTED_DEFAULT_COLOR}`)}St.length&&(We.className=St.join(" "),St.length=0),yt||At||Qt?We.textContent=st:Ke++,ct!==this.defaultSpacing&&(We.style.letterSpacing=`${ct}px`),bt.push(We),Dt=sr}return We&&Ke&&(We.textContent=st),bt}_applyMinimumContrast(Oe,Le,Ae,Ie,Ue,ze){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,we.treatGlyphAsBackgroundColor)(Ie.getCode()))return!1;const Ye=this._getContrastCache(Ie);let Xe;if(Ue||ze||(Xe=Ye.getColor(Le.rgba,Ae.rgba)),Xe===void 0){const tt=this._optionsService.rawOptions.minimumContrastRatio/(Ie.isDim()?2:1);Xe=Ee.color.ensureContrastRatio(Ue||Le,ze||Ae,tt),Ye.setColor((Ue||Le).rgba,(ze||Ae).rgba,Xe??null)}return!!Xe&&(this._addStyle(Oe,`color:${Xe.css}`),!0)}_getContrastCache(Oe){return Oe.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(Oe,Le){Oe.setAttribute("style",`${Oe.getAttribute("style")||""}${Le};`)}_isCellInSelection(Oe,Le){const Ae=this._selectionStart,Ie=this._selectionEnd;return!(!Ae||!Ie)&&(this._columnSelectMode?Ae[0]<=Ie[0]?Oe>=Ae[0]&&Le>=Ae[1]&&Oe<Ie[0]&&Le<=Ie[1]:Oe<Ae[0]&&Le>=Ae[1]&&Oe>=Ie[0]&&Le<=Ie[1]:Le>Ae[1]&&Le<Ie[1]||Ae[1]===Ie[1]&&Le===Ae[1]&&Oe>=Ae[0]&&Oe<Ie[0]||Ae[1]<Ie[1]&&Le===Ie[1]&&Oe<Ie[0]||Ae[1]<Ie[1]&&Le===Ae[1]&&Oe>=Ae[0])}};function De(Oe,Le,Ae){for(;Oe.length<Ae;)Oe=Le+Oe;return Oe}l.DomRendererRowFactory=ke=m([y(1,xe.ICharacterJoinerService),y(2,Ce.IOptionsService),y(3,xe.ICoreBrowserService),y(4,Ce.ICoreService),y(5,Ce.IDecorationService),y(6,xe.IThemeService)],ke)},2550:(u,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.WidthCache=void 0,l.WidthCache=class{constructor(d,m){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=d.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const y=d.createElement("span");y.classList.add("xterm-char-measure-element");const S=d.createElement("span");S.classList.add("xterm-char-measure-element"),S.style.fontWeight="bold";const X=d.createElement("span");X.classList.add("xterm-char-measure-element"),X.style.fontStyle="italic";const he=d.createElement("span");he.classList.add("xterm-char-measure-element"),he.style.fontWeight="bold",he.style.fontStyle="italic",this._measureElements=[y,S,X,he],this._container.appendChild(y),this._container.appendChild(S),this._container.appendChild(X),this._container.appendChild(he),m.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(d,m,y,S){d===this._font&&m===this._fontSize&&y===this._weight&&S===this._weightBold||(this._font=d,this._fontSize=m,this._weight=y,this._weightBold=S,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${y}`,this._measureElements[1].style.fontWeight=`${S}`,this._measureElements[2].style.fontWeight=`${y}`,this._measureElements[3].style.fontWeight=`${S}`,this.clear())}get(d,m,y){let S=0;if(!m&&!y&&d.length===1&&(S=d.charCodeAt(0))<256){if(this._flat[S]!==-9999)return this._flat[S];const Ce=this._measure(d,0);return Ce>0&&(this._flat[S]=Ce),Ce}let X=d;m&&(X+="B"),y&&(X+="I");let he=this._holey.get(X);if(he===void 0){let Ce=0;m&&(Ce|=1),y&&(Ce|=2),he=this._measure(d,Ce),he>0&&this._holey.set(X,he)}return he}_measure(d,m){const y=this._measureElements[m];return y.textContent=d.repeat(32),y.offsetWidth/32}}},2223:(u,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.TEXT_BASELINE=l.DIM_OPACITY=l.INVERTED_DEFAULT_COLOR=void 0;const m=d(6114);l.INVERTED_DEFAULT_COLOR=257,l.DIM_OPACITY=.5,l.TEXT_BASELINE=m.isFirefox||m.isLegacyEdge?"bottom":"ideographic"},6171:(u,l)=>{function d(y){return 57508<=y&&y<=57558}function m(y){return y>=128512&&y<=128591||y>=127744&&y<=128511||y>=128640&&y<=128767||y>=9728&&y<=9983||y>=9984&&y<=10175||y>=65024&&y<=65039||y>=129280&&y<=129535||y>=127462&&y<=127487}Object.defineProperty(l,"__esModule",{value:!0}),l.computeNextVariantOffset=l.createRenderDimensions=l.treatGlyphAsBackgroundColor=l.allowRescaling=l.isEmoji=l.isRestrictedPowerlineGlyph=l.isPowerlineGlyph=l.throwIfFalsy=void 0,l.throwIfFalsy=function(y){if(!y)throw new Error("value must not be falsy");return y},l.isPowerlineGlyph=d,l.isRestrictedPowerlineGlyph=function(y){return 57520<=y&&y<=57527},l.isEmoji=m,l.allowRescaling=function(y,S,X,he){return S===1&&X>Math.ceil(1.5*he)&&y!==void 0&&y>255&&!m(y)&&!d(y)&&!function(Ce){return 57344<=Ce&&Ce<=63743}(y)},l.treatGlyphAsBackgroundColor=function(y){return d(y)||function(S){return 9472<=S&&S<=9631}(y)},l.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},l.computeNextVariantOffset=function(y,S,X=0){return(y-(2*Math.round(S)-X))%(2*Math.round(S))}},6052:(u,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.createSelectionRenderModel=void 0;class d{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(y,S,X,he=!1){if(this.selectionStart=S,this.selectionEnd=X,!S||!X||S[0]===X[0]&&S[1]===X[1])return void this.clear();const Ce=y.buffers.active.ydisp,Ee=S[1]-Ce,xe=X[1]-Ce,be=Math.max(Ee,0),we=Math.min(xe,y.rows-1);be>=y.rows||we<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=he,this.viewportStartRow=Ee,this.viewportEndRow=xe,this.viewportCappedStartRow=be,this.viewportCappedEndRow=we,this.startCol=S[0],this.endCol=X[0])}isCellSelected(y,S,X){return!!this.hasSelection&&(X-=y.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?S>=this.startCol&&X>=this.viewportCappedStartRow&&S<this.endCol&&X<=this.viewportCappedEndRow:S<this.startCol&&X>=this.viewportCappedStartRow&&S>=this.endCol&&X<=this.viewportCappedEndRow:X>this.viewportStartRow&&X<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&X===this.viewportStartRow&&S>=this.startCol&&S<this.endCol||this.viewportStartRow<this.viewportEndRow&&X===this.viewportEndRow&&S<this.endCol||this.viewportStartRow<this.viewportEndRow&&X===this.viewportStartRow&&S>=this.startCol)}}l.createSelectionRenderModel=function(){return new d}},456:(u,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.SelectionModel=void 0,l.SelectionModel=class{constructor(d){this._bufferService=d,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const d=this.selectionStart[0]+this.selectionStartLength;return d>this._bufferService.cols?d%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(d/this._bufferService.cols)-1]:[d%this._bufferService.cols,this.selectionStart[1]+Math.floor(d/this._bufferService.cols)]:[d,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const d=this.selectionStart[0]+this.selectionStartLength;return d>this._bufferService.cols?[d%this._bufferService.cols,this.selectionStart[1]+Math.floor(d/this._bufferService.cols)]:[Math.max(d,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const d=this.selectionStart,m=this.selectionEnd;return!(!d||!m)&&(d[1]>m[1]||d[1]===m[1]&&d[0]>m[0])}handleTrim(d){return this.selectionStart&&(this.selectionStart[1]-=d),this.selectionEnd&&(this.selectionEnd[1]-=d),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(u,l,d){var m=this&&this.__decorate||function(we,ve,ke,De){var Oe,Le=arguments.length,Ae=Le<3?ve:De===null?De=Object.getOwnPropertyDescriptor(ve,ke):De;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Ae=Reflect.decorate(we,ve,ke,De);else for(var Ie=we.length-1;Ie>=0;Ie--)(Oe=we[Ie])&&(Ae=(Le<3?Oe(Ae):Le>3?Oe(ve,ke,Ae):Oe(ve,ke))||Ae);return Le>3&&Ae&&Object.defineProperty(ve,ke,Ae),Ae},y=this&&this.__param||function(we,ve){return function(ke,De){ve(ke,De,we)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CharSizeService=void 0;const S=d(2585),X=d(8460),he=d(844);let Ce=l.CharSizeService=class extends he.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(we,ve,ke){super(),this._optionsService=ke,this.width=0,this.height=0,this._onCharSizeChange=this.register(new X.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new be(this._optionsService))}catch{this._measureStrategy=this.register(new xe(we,ve,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const we=this._measureStrategy.measure();we.width===this.width&&we.height===this.height||(this.width=we.width,this.height=we.height,this._onCharSizeChange.fire())}};l.CharSizeService=Ce=m([y(2,S.IOptionsService)],Ce);class Ee extends he.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(ve,ke){ve!==void 0&&ve>0&&ke!==void 0&&ke>0&&(this._result.width=ve,this._result.height=ke)}}class xe extends Ee{constructor(ve,ke,De){super(),this._document=ve,this._parentElement=ke,this._optionsService=De,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class be extends Ee{constructor(ve){super(),this._optionsService=ve,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const ke=this._ctx.measureText("W");if(!("width"in ke&&"fontBoundingBoxAscent"in ke&&"fontBoundingBoxDescent"in ke))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const ve=this._ctx.measureText("W");return this._validateAndSet(ve.width,ve.fontBoundingBoxAscent+ve.fontBoundingBoxDescent),this._result}}},4269:function(u,l,d){var m=this&&this.__decorate||function(be,we,ve,ke){var De,Oe=arguments.length,Le=Oe<3?we:ke===null?ke=Object.getOwnPropertyDescriptor(we,ve):ke;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Le=Reflect.decorate(be,we,ve,ke);else for(var Ae=be.length-1;Ae>=0;Ae--)(De=be[Ae])&&(Le=(Oe<3?De(Le):Oe>3?De(we,ve,Le):De(we,ve))||Le);return Oe>3&&Le&&Object.defineProperty(we,ve,Le),Le},y=this&&this.__param||function(be,we){return function(ve,ke){we(ve,ke,be)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CharacterJoinerService=l.JoinedCellData=void 0;const S=d(3734),X=d(643),he=d(511),Ce=d(2585);class Ee extends S.AttributeData{constructor(we,ve,ke){super(),this.content=0,this.combinedData="",this.fg=we.fg,this.bg=we.bg,this.combinedData=ve,this._width=ke}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(we){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}l.JoinedCellData=Ee;let xe=l.CharacterJoinerService=class zu{constructor(we){this._bufferService=we,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new he.CellData}register(we){const ve={id:this._nextCharacterJoinerId++,handler:we};return this._characterJoiners.push(ve),ve.id}deregister(we){for(let ve=0;ve<this._characterJoiners.length;ve++)if(this._characterJoiners[ve].id===we)return this._characterJoiners.splice(ve,1),!0;return!1}getJoinedCharacters(we){if(this._characterJoiners.length===0)return[];const ve=this._bufferService.buffer.lines.get(we);if(!ve||ve.length===0)return[];const ke=[],De=ve.translateToString(!0);let Oe=0,Le=0,Ae=0,Ie=ve.getFg(0),Ue=ve.getBg(0);for(let ze=0;ze<ve.getTrimmedLength();ze++)if(ve.loadCell(ze,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==Ie||this._workCell.bg!==Ue){if(ze-Oe>1){const Ye=this._getJoinedRanges(De,Ae,Le,ve,Oe);for(let Xe=0;Xe<Ye.length;Xe++)ke.push(Ye[Xe])}Oe=ze,Ae=Le,Ie=this._workCell.fg,Ue=this._workCell.bg}Le+=this._workCell.getChars().length||X.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-Oe>1){const ze=this._getJoinedRanges(De,Ae,Le,ve,Oe);for(let Ye=0;Ye<ze.length;Ye++)ke.push(ze[Ye])}return ke}_getJoinedRanges(we,ve,ke,De,Oe){const Le=we.substring(ve,ke);let Ae=[];try{Ae=this._characterJoiners[0].handler(Le)}catch(Ie){console.error(Ie)}for(let Ie=1;Ie<this._characterJoiners.length;Ie++)try{const Ue=this._characterJoiners[Ie].handler(Le);for(let ze=0;ze<Ue.length;ze++)zu._mergeRanges(Ae,Ue[ze])}catch(Ue){console.error(Ue)}return this._stringRangesToCellRanges(Ae,De,Oe),Ae}_stringRangesToCellRanges(we,ve,ke){let De=0,Oe=!1,Le=0,Ae=we[De];if(Ae){for(let Ie=ke;Ie<this._bufferService.cols;Ie++){const Ue=ve.getWidth(Ie),ze=ve.getString(Ie).length||X.WHITESPACE_CELL_CHAR.length;if(Ue!==0){if(!Oe&&Ae[0]<=Le&&(Ae[0]=Ie,Oe=!0),Ae[1]<=Le){if(Ae[1]=Ie,Ae=we[++De],!Ae)break;Ae[0]<=Le?(Ae[0]=Ie,Oe=!0):Oe=!1}Le+=ze}}Ae&&(Ae[1]=this._bufferService.cols)}}static _mergeRanges(we,ve){let ke=!1;for(let De=0;De<we.length;De++){const Oe=we[De];if(ke){if(ve[1]<=Oe[0])return we[De-1][1]=ve[1],we;if(ve[1]<=Oe[1])return we[De-1][1]=Math.max(ve[1],Oe[1]),we.splice(De,1),we;we.splice(De,1),De--}else{if(ve[1]<=Oe[0])return we.splice(De,0,ve),we;if(ve[1]<=Oe[1])return Oe[0]=Math.min(ve[0],Oe[0]),we;ve[0]<Oe[1]&&(Oe[0]=Math.min(ve[0],Oe[0]),ke=!0)}}return ke?we[we.length-1][1]=ve[1]:we.push(ve),we}};l.CharacterJoinerService=xe=m([y(0,Ce.IBufferService)],xe)},5114:(u,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CoreBrowserService=void 0;const m=d(844),y=d(8460),S=d(3656);class X extends m.Disposable{constructor(Ee,xe,be){super(),this._textarea=Ee,this._window=xe,this.mainDocument=be,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new he(this._window),this._onDprChange=this.register(new y.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new y.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange(we=>this._screenDprMonitor.setWindow(we))),this.register((0,y.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get window(){return this._window}set window(Ee){this._window!==Ee&&(this._window=Ee,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}l.CoreBrowserService=X;class he extends m.Disposable{constructor(Ee){super(),this._parentWindow=Ee,this._windowResizeListener=this.register(new m.MutableDisposable),this._onDprChange=this.register(new y.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,m.toDisposable)(()=>this.clearListener()))}setWindow(Ee){this._parentWindow=Ee,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,S.addDisposableDomListener)(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){var Ee;this._outerListener&&((Ee=this._resolutionMediaMatchList)==null||Ee.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(u,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.LinkProviderService=void 0;const m=d(844);class y extends m.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,m.toDisposable)(()=>this.linkProviders.length=0))}registerLinkProvider(X){return this.linkProviders.push(X),{dispose:()=>{const he=this.linkProviders.indexOf(X);he!==-1&&this.linkProviders.splice(he,1)}}}}l.LinkProviderService=y},8934:function(u,l,d){var m=this&&this.__decorate||function(Ce,Ee,xe,be){var we,ve=arguments.length,ke=ve<3?Ee:be===null?be=Object.getOwnPropertyDescriptor(Ee,xe):be;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ke=Reflect.decorate(Ce,Ee,xe,be);else for(var De=Ce.length-1;De>=0;De--)(we=Ce[De])&&(ke=(ve<3?we(ke):ve>3?we(Ee,xe,ke):we(Ee,xe))||ke);return ve>3&&ke&&Object.defineProperty(Ee,xe,ke),ke},y=this&&this.__param||function(Ce,Ee){return function(xe,be){Ee(xe,be,Ce)}};Object.defineProperty(l,"__esModule",{value:!0}),l.MouseService=void 0;const S=d(4725),X=d(9806);let he=l.MouseService=class{constructor(Ce,Ee){this._renderService=Ce,this._charSizeService=Ee}getCoords(Ce,Ee,xe,be,we){return(0,X.getCoords)(window,Ce,Ee,xe,be,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,we)}getMouseReportCoords(Ce,Ee){const xe=(0,X.getCoordsRelativeToElement)(window,Ce,Ee);if(this._charSizeService.hasValidSize)return xe[0]=Math.min(Math.max(xe[0],0),this._renderService.dimensions.css.canvas.width-1),xe[1]=Math.min(Math.max(xe[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(xe[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(xe[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(xe[0]),y:Math.floor(xe[1])}}};l.MouseService=he=m([y(0,S.IRenderService),y(1,S.ICharSizeService)],he)},3230:function(u,l,d){var m=this&&this.__decorate||function(we,ve,ke,De){var Oe,Le=arguments.length,Ae=Le<3?ve:De===null?De=Object.getOwnPropertyDescriptor(ve,ke):De;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Ae=Reflect.decorate(we,ve,ke,De);else for(var Ie=we.length-1;Ie>=0;Ie--)(Oe=we[Ie])&&(Ae=(Le<3?Oe(Ae):Le>3?Oe(ve,ke,Ae):Oe(ve,ke))||Ae);return Le>3&&Ae&&Object.defineProperty(ve,ke,Ae),Ae},y=this&&this.__param||function(we,ve){return function(ke,De){ve(ke,De,we)}};Object.defineProperty(l,"__esModule",{value:!0}),l.RenderService=void 0;const S=d(6193),X=d(4725),he=d(8460),Ce=d(844),Ee=d(7226),xe=d(2585);let be=l.RenderService=class extends Ce.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(we,ve,ke,De,Oe,Le,Ae,Ie){super(),this._rowCount=we,this._charSizeService=De,this._renderer=this.register(new Ce.MutableDisposable),this._pausedResizeTask=new Ee.DebouncedIdleTask,this._observerDisposable=this.register(new Ce.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new he.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new he.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new he.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new he.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new S.RenderDebouncer((Ue,ze)=>this._renderRows(Ue,ze),Ae),this.register(this._renderDebouncer),this.register(Ae.onDprChange(()=>this.handleDevicePixelRatioChange())),this.register(Le.onResize(()=>this._fullRefresh())),this.register(Le.buffers.onBufferActivate(()=>{var Ue;return(Ue=this._renderer.value)==null?void 0:Ue.clear()})),this.register(ke.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(Oe.onDecorationRegistered(()=>this._fullRefresh())),this.register(Oe.onDecorationRemoved(()=>this._fullRefresh())),this.register(ke.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(Le.cols,Le.rows),this._fullRefresh()})),this.register(ke.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(Le.buffer.y,Le.buffer.y,!0))),this.register(Ie.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(Ae.window,ve),this.register(Ae.onWindowChange(Ue=>this._registerIntersectionObserver(Ue,ve)))}_registerIntersectionObserver(we,ve){if("IntersectionObserver"in we){const ke=new we.IntersectionObserver(De=>this._handleIntersectionChange(De[De.length-1]),{threshold:0});ke.observe(ve),this._observerDisposable.value=(0,Ce.toDisposable)(()=>ke.disconnect())}}_handleIntersectionChange(we){this._isPaused=we.isIntersecting===void 0?we.intersectionRatio===0:!we.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(we,ve,ke=!1){this._isPaused?this._needsFullRefresh=!0:(ke||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(we,ve,this._rowCount))}_renderRows(we,ve){this._renderer.value&&(we=Math.min(we,this._rowCount-1),ve=Math.min(ve,this._rowCount-1),this._renderer.value.renderRows(we,ve),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:we,end:ve}),this._onRender.fire({start:we,end:ve}),this._isNextRenderRedrawOnly=!0)}resize(we,ve){this._rowCount=ve,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(we){this._renderer.value=we,this._renderer.value&&(this._renderer.value.onRequestRedraw(ve=>this.refreshRows(ve.start,ve.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(we){return this._renderDebouncer.addRefreshCallback(we)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var we,ve;this._renderer.value&&((ve=(we=this._renderer.value).clearTextureAtlas)==null||ve.call(we),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(we,ve){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>{var ke;return(ke=this._renderer.value)==null?void 0:ke.handleResize(we,ve)}):this._renderer.value.handleResize(we,ve),this._fullRefresh())}handleCharSizeChanged(){var we;(we=this._renderer.value)==null||we.handleCharSizeChanged()}handleBlur(){var we;(we=this._renderer.value)==null||we.handleBlur()}handleFocus(){var we;(we=this._renderer.value)==null||we.handleFocus()}handleSelectionChanged(we,ve,ke){var De;this._selectionState.start=we,this._selectionState.end=ve,this._selectionState.columnSelectMode=ke,(De=this._renderer.value)==null||De.handleSelectionChanged(we,ve,ke)}handleCursorMove(){var we;(we=this._renderer.value)==null||we.handleCursorMove()}clear(){var we;(we=this._renderer.value)==null||we.clear()}};l.RenderService=be=m([y(2,xe.IOptionsService),y(3,X.ICharSizeService),y(4,xe.IDecorationService),y(5,xe.IBufferService),y(6,X.ICoreBrowserService),y(7,X.IThemeService)],be)},9312:function(u,l,d){var m=this&&this.__decorate||function(Ae,Ie,Ue,ze){var Ye,Xe=arguments.length,tt=Xe<3?Ie:ze===null?ze=Object.getOwnPropertyDescriptor(Ie,Ue):ze;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")tt=Reflect.decorate(Ae,Ie,Ue,ze);else for(var lt=Ae.length-1;lt>=0;lt--)(Ye=Ae[lt])&&(tt=(Xe<3?Ye(tt):Xe>3?Ye(Ie,Ue,tt):Ye(Ie,Ue))||tt);return Xe>3&&tt&&Object.defineProperty(Ie,Ue,tt),tt},y=this&&this.__param||function(Ae,Ie){return function(Ue,ze){Ie(Ue,ze,Ae)}};Object.defineProperty(l,"__esModule",{value:!0}),l.SelectionService=void 0;const S=d(9806),X=d(9504),he=d(456),Ce=d(4725),Ee=d(8460),xe=d(844),be=d(6114),we=d(4841),ve=d(511),ke=d(2585),De="",Oe=new RegExp(De,"g");let Le=l.SelectionService=class extends xe.Disposable{constructor(Ae,Ie,Ue,ze,Ye,Xe,tt,lt,_t){super(),this._element=Ae,this._screenElement=Ie,this._linkifier=Ue,this._bufferService=ze,this._coreService=Ye,this._mouseService=Xe,this._optionsService=tt,this._renderService=lt,this._coreBrowserService=_t,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new ve.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new Ee.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new Ee.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new Ee.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new Ee.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=bt=>this._handleMouseMove(bt),this._mouseUpListener=bt=>this._handleMouseUp(bt),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(bt=>this._handleTrim(bt)),this.register(this._bufferService.buffers.onBufferActivate(bt=>this._handleBufferActivate(bt))),this.enable(),this._model=new he.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,xe.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const Ae=this._model.finalSelectionStart,Ie=this._model.finalSelectionEnd;return!(!Ae||!Ie||Ae[0]===Ie[0]&&Ae[1]===Ie[1])}get selectionText(){const Ae=this._model.finalSelectionStart,Ie=this._model.finalSelectionEnd;if(!Ae||!Ie)return"";const Ue=this._bufferService.buffer,ze=[];if(this._activeSelectionMode===3){if(Ae[0]===Ie[0])return"";const Ye=Ae[0]<Ie[0]?Ae[0]:Ie[0],Xe=Ae[0]<Ie[0]?Ie[0]:Ae[0];for(let tt=Ae[1];tt<=Ie[1];tt++){const lt=Ue.translateBufferLineToString(tt,!0,Ye,Xe);ze.push(lt)}}else{const Ye=Ae[1]===Ie[1]?Ie[0]:void 0;ze.push(Ue.translateBufferLineToString(Ae[1],!0,Ae[0],Ye));for(let Xe=Ae[1]+1;Xe<=Ie[1]-1;Xe++){const tt=Ue.lines.get(Xe),lt=Ue.translateBufferLineToString(Xe,!0);tt!=null&&tt.isWrapped?ze[ze.length-1]+=lt:ze.push(lt)}if(Ae[1]!==Ie[1]){const Xe=Ue.lines.get(Ie[1]),tt=Ue.translateBufferLineToString(Ie[1],!0,0,Ie[0]);Xe&&Xe.isWrapped?ze[ze.length-1]+=tt:ze.push(tt)}}return ze.map(Ye=>Ye.replace(Oe," ")).join(be.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(Ae){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),be.isLinux&&Ae&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(Ae){const Ie=this._getMouseBufferCoords(Ae),Ue=this._model.finalSelectionStart,ze=this._model.finalSelectionEnd;return!!(Ue&&ze&&Ie)&&this._areCoordsInSelection(Ie,Ue,ze)}isCellInSelection(Ae,Ie){const Ue=this._model.finalSelectionStart,ze=this._model.finalSelectionEnd;return!(!Ue||!ze)&&this._areCoordsInSelection([Ae,Ie],Ue,ze)}_areCoordsInSelection(Ae,Ie,Ue){return Ae[1]>Ie[1]&&Ae[1]<Ue[1]||Ie[1]===Ue[1]&&Ae[1]===Ie[1]&&Ae[0]>=Ie[0]&&Ae[0]<Ue[0]||Ie[1]<Ue[1]&&Ae[1]===Ue[1]&&Ae[0]<Ue[0]||Ie[1]<Ue[1]&&Ae[1]===Ie[1]&&Ae[0]>=Ie[0]}_selectWordAtCursor(Ae,Ie){var Ye,Xe;const Ue=(Xe=(Ye=this._linkifier.currentLink)==null?void 0:Ye.link)==null?void 0:Xe.range;if(Ue)return this._model.selectionStart=[Ue.start.x-1,Ue.start.y-1],this._model.selectionStartLength=(0,we.getRangeLength)(Ue,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const ze=this._getMouseBufferCoords(Ae);return!!ze&&(this._selectWordAt(ze,Ie),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(Ae,Ie){this._model.clearSelection(),Ae=Math.max(Ae,0),Ie=Math.min(Ie,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,Ae],this._model.selectionEnd=[this._bufferService.cols,Ie],this.refresh(),this._onSelectionChange.fire()}_handleTrim(Ae){this._model.handleTrim(Ae)&&this.refresh()}_getMouseBufferCoords(Ae){const Ie=this._mouseService.getCoords(Ae,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(Ie)return Ie[0]--,Ie[1]--,Ie[1]+=this._bufferService.buffer.ydisp,Ie}_getMouseEventScrollAmount(Ae){let Ie=(0,S.getCoordsRelativeToElement)(this._coreBrowserService.window,Ae,this._screenElement)[1];const Ue=this._renderService.dimensions.css.canvas.height;return Ie>=0&&Ie<=Ue?0:(Ie>Ue&&(Ie-=Ue),Ie=Math.min(Math.max(Ie,-50),50),Ie/=50,Ie/Math.abs(Ie)+Math.round(14*Ie))}shouldForceSelection(Ae){return be.isMac?Ae.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:Ae.shiftKey}handleMouseDown(Ae){if(this._mouseDownTimeStamp=Ae.timeStamp,(Ae.button!==2||!this.hasSelection)&&Ae.button===0){if(!this._enabled){if(!this.shouldForceSelection(Ae))return;Ae.stopPropagation()}Ae.preventDefault(),this._dragScrollAmount=0,this._enabled&&Ae.shiftKey?this._handleIncrementalClick(Ae):Ae.detail===1?this._handleSingleClick(Ae):Ae.detail===2?this._handleDoubleClick(Ae):Ae.detail===3&&this._handleTripleClick(Ae),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(Ae){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(Ae))}_handleSingleClick(Ae){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(Ae)?3:0,this._model.selectionStart=this._getMouseBufferCoords(Ae),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const Ie=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);Ie&&Ie.length!==this._model.selectionStart[0]&&Ie.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(Ae){this._selectWordAtCursor(Ae,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(Ae){const Ie=this._getMouseBufferCoords(Ae);Ie&&(this._activeSelectionMode=2,this._selectLineAt(Ie[1]))}shouldColumnSelect(Ae){return Ae.altKey&&!(be.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(Ae){if(Ae.stopImmediatePropagation(),!this._model.selectionStart)return;const Ie=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(Ae),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(Ae),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const Ue=this._bufferService.buffer;if(this._model.selectionEnd[1]<Ue.lines.length){const ze=Ue.lines.get(this._model.selectionEnd[1]);ze&&ze.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}Ie&&Ie[0]===this._model.selectionEnd[0]&&Ie[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const Ae=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(Ae.ydisp+this._bufferService.rows,Ae.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=Ae.ydisp),this.refresh()}}_handleMouseUp(Ae){const Ie=Ae.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&Ie<500&&Ae.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const Ue=this._mouseService.getCoords(Ae,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(Ue&&Ue[0]!==void 0&&Ue[1]!==void 0){const ze=(0,X.moveToCellSequence)(Ue[0]-1,Ue[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(ze,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const Ae=this._model.finalSelectionStart,Ie=this._model.finalSelectionEnd,Ue=!(!Ae||!Ie||Ae[0]===Ie[0]&&Ae[1]===Ie[1]);Ue?Ae&&Ie&&(this._oldSelectionStart&&this._oldSelectionEnd&&Ae[0]===this._oldSelectionStart[0]&&Ae[1]===this._oldSelectionStart[1]&&Ie[0]===this._oldSelectionEnd[0]&&Ie[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(Ae,Ie,Ue)):this._oldHasSelection&&this._fireOnSelectionChange(Ae,Ie,Ue)}_fireOnSelectionChange(Ae,Ie,Ue){this._oldSelectionStart=Ae,this._oldSelectionEnd=Ie,this._oldHasSelection=Ue,this._onSelectionChange.fire()}_handleBufferActivate(Ae){this.clearSelection(),this._trimListener.dispose(),this._trimListener=Ae.activeBuffer.lines.onTrim(Ie=>this._handleTrim(Ie))}_convertViewportColToCharacterIndex(Ae,Ie){let Ue=Ie;for(let ze=0;Ie>=ze;ze++){const Ye=Ae.loadCell(ze,this._workCell).getChars().length;this._workCell.getWidth()===0?Ue--:Ye>1&&Ie!==ze&&(Ue+=Ye-1)}return Ue}setSelection(Ae,Ie,Ue){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[Ae,Ie],this._model.selectionStartLength=Ue,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(Ae){this._isClickInSelection(Ae)||(this._selectWordAtCursor(Ae,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(Ae,Ie,Ue=!0,ze=!0){if(Ae[0]>=this._bufferService.cols)return;const Ye=this._bufferService.buffer,Xe=Ye.lines.get(Ae[1]);if(!Xe)return;const tt=Ye.translateBufferLineToString(Ae[1],!1);let lt=this._convertViewportColToCharacterIndex(Xe,Ae[0]),_t=lt;const bt=Ae[0]-lt;let rt=0,He=0,We=0,qe=0;if(tt.charAt(lt)===" "){for(;lt>0&&tt.charAt(lt-1)===" ";)lt--;for(;_t<tt.length&&tt.charAt(_t+1)===" ";)_t++}else{let ut=Ae[0],nt=Ae[0];Xe.getWidth(ut)===0&&(rt++,ut--),Xe.getWidth(nt)===2&&(He++,nt++);const vt=Xe.getString(nt).length;for(vt>1&&(qe+=vt-1,_t+=vt-1);ut>0&&lt>0&&!this._isCharWordSeparator(Xe.loadCell(ut-1,this._workCell));){Xe.loadCell(ut-1,this._workCell);const it=this._workCell.getChars().length;this._workCell.getWidth()===0?(rt++,ut--):it>1&&(We+=it-1,lt-=it-1),lt--,ut--}for(;nt<Xe.length&&_t+1<tt.length&&!this._isCharWordSeparator(Xe.loadCell(nt+1,this._workCell));){Xe.loadCell(nt+1,this._workCell);const it=this._workCell.getChars().length;this._workCell.getWidth()===2?(He++,nt++):it>1&&(qe+=it-1,_t+=it-1),_t++,nt++}}_t++;let Ke=lt+bt-rt+We,st=Math.min(this._bufferService.cols,_t-lt+rt+He-We-qe);if(Ie||tt.slice(lt,_t).trim()!==""){if(Ue&&Ke===0&&Xe.getCodePoint(0)!==32){const ut=Ye.lines.get(Ae[1]-1);if(ut&&Xe.isWrapped&&ut.getCodePoint(this._bufferService.cols-1)!==32){const nt=this._getWordAt([this._bufferService.cols-1,Ae[1]-1],!1,!0,!1);if(nt){const vt=this._bufferService.cols-nt.start;Ke-=vt,st+=vt}}}if(ze&&Ke+st===this._bufferService.cols&&Xe.getCodePoint(this._bufferService.cols-1)!==32){const ut=Ye.lines.get(Ae[1]+1);if(ut!=null&&ut.isWrapped&&ut.getCodePoint(0)!==32){const nt=this._getWordAt([0,Ae[1]+1],!1,!1,!0);nt&&(st+=nt.length)}}return{start:Ke,length:st}}}_selectWordAt(Ae,Ie){const Ue=this._getWordAt(Ae,Ie);if(Ue){for(;Ue.start<0;)Ue.start+=this._bufferService.cols,Ae[1]--;this._model.selectionStart=[Ue.start,Ae[1]],this._model.selectionStartLength=Ue.length}}_selectToWordAt(Ae){const Ie=this._getWordAt(Ae,!0);if(Ie){let Ue=Ae[1];for(;Ie.start<0;)Ie.start+=this._bufferService.cols,Ue--;if(!this._model.areSelectionValuesReversed())for(;Ie.start+Ie.length>this._bufferService.cols;)Ie.length-=this._bufferService.cols,Ue++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?Ie.start:Ie.start+Ie.length,Ue]}}_isCharWordSeparator(Ae){return Ae.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(Ae.getChars())>=0}_selectLineAt(Ae){const Ie=this._bufferService.buffer.getWrappedRangeForLine(Ae),Ue={start:{x:0,y:Ie.first},end:{x:this._bufferService.cols-1,y:Ie.last}};this._model.selectionStart=[0,Ie.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,we.getRangeLength)(Ue,this._bufferService.cols)}};l.SelectionService=Le=m([y(3,ke.IBufferService),y(4,ke.ICoreService),y(5,Ce.IMouseService),y(6,ke.IOptionsService),y(7,Ce.IRenderService),y(8,Ce.ICoreBrowserService)],Le)},4725:(u,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ILinkProviderService=l.IThemeService=l.ICharacterJoinerService=l.ISelectionService=l.IRenderService=l.IMouseService=l.ICoreBrowserService=l.ICharSizeService=void 0;const m=d(8343);l.ICharSizeService=(0,m.createDecorator)("CharSizeService"),l.ICoreBrowserService=(0,m.createDecorator)("CoreBrowserService"),l.IMouseService=(0,m.createDecorator)("MouseService"),l.IRenderService=(0,m.createDecorator)("RenderService"),l.ISelectionService=(0,m.createDecorator)("SelectionService"),l.ICharacterJoinerService=(0,m.createDecorator)("CharacterJoinerService"),l.IThemeService=(0,m.createDecorator)("ThemeService"),l.ILinkProviderService=(0,m.createDecorator)("LinkProviderService")},6731:function(u,l,d){var m=this&&this.__decorate||function(Le,Ae,Ie,Ue){var ze,Ye=arguments.length,Xe=Ye<3?Ae:Ue===null?Ue=Object.getOwnPropertyDescriptor(Ae,Ie):Ue;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Xe=Reflect.decorate(Le,Ae,Ie,Ue);else for(var tt=Le.length-1;tt>=0;tt--)(ze=Le[tt])&&(Xe=(Ye<3?ze(Xe):Ye>3?ze(Ae,Ie,Xe):ze(Ae,Ie))||Xe);return Ye>3&&Xe&&Object.defineProperty(Ae,Ie,Xe),Xe},y=this&&this.__param||function(Le,Ae){return function(Ie,Ue){Ae(Ie,Ue,Le)}};Object.defineProperty(l,"__esModule",{value:!0}),l.ThemeService=l.DEFAULT_ANSI_COLORS=void 0;const S=d(7239),X=d(8055),he=d(8460),Ce=d(844),Ee=d(2585),xe=X.css.toColor("#ffffff"),be=X.css.toColor("#000000"),we=X.css.toColor("#ffffff"),ve=X.css.toColor("#000000"),ke={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};l.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const Le=[X.css.toColor("#2e3436"),X.css.toColor("#cc0000"),X.css.toColor("#4e9a06"),X.css.toColor("#c4a000"),X.css.toColor("#3465a4"),X.css.toColor("#75507b"),X.css.toColor("#06989a"),X.css.toColor("#d3d7cf"),X.css.toColor("#555753"),X.css.toColor("#ef2929"),X.css.toColor("#8ae234"),X.css.toColor("#fce94f"),X.css.toColor("#729fcf"),X.css.toColor("#ad7fa8"),X.css.toColor("#34e2e2"),X.css.toColor("#eeeeec")],Ae=[0,95,135,175,215,255];for(let Ie=0;Ie<216;Ie++){const Ue=Ae[Ie/36%6|0],ze=Ae[Ie/6%6|0],Ye=Ae[Ie%6];Le.push({css:X.channels.toCss(Ue,ze,Ye),rgba:X.channels.toRgba(Ue,ze,Ye)})}for(let Ie=0;Ie<24;Ie++){const Ue=8+10*Ie;Le.push({css:X.channels.toCss(Ue,Ue,Ue),rgba:X.channels.toRgba(Ue,Ue,Ue)})}return Le})());let De=l.ThemeService=class extends Ce.Disposable{get colors(){return this._colors}constructor(Le){super(),this._optionsService=Le,this._contrastCache=new S.ColorContrastCache,this._halfContrastCache=new S.ColorContrastCache,this._onChangeColors=this.register(new he.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:xe,background:be,cursor:we,cursorAccent:ve,selectionForeground:void 0,selectionBackgroundTransparent:ke,selectionBackgroundOpaque:X.color.blend(be,ke),selectionInactiveBackgroundTransparent:ke,selectionInactiveBackgroundOpaque:X.color.blend(be,ke),ansi:l.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(Le={}){const Ae=this._colors;if(Ae.foreground=Oe(Le.foreground,xe),Ae.background=Oe(Le.background,be),Ae.cursor=Oe(Le.cursor,we),Ae.cursorAccent=Oe(Le.cursorAccent,ve),Ae.selectionBackgroundTransparent=Oe(Le.selectionBackground,ke),Ae.selectionBackgroundOpaque=X.color.blend(Ae.background,Ae.selectionBackgroundTransparent),Ae.selectionInactiveBackgroundTransparent=Oe(Le.selectionInactiveBackground,Ae.selectionBackgroundTransparent),Ae.selectionInactiveBackgroundOpaque=X.color.blend(Ae.background,Ae.selectionInactiveBackgroundTransparent),Ae.selectionForeground=Le.selectionForeground?Oe(Le.selectionForeground,X.NULL_COLOR):void 0,Ae.selectionForeground===X.NULL_COLOR&&(Ae.selectionForeground=void 0),X.color.isOpaque(Ae.selectionBackgroundTransparent)&&(Ae.selectionBackgroundTransparent=X.color.opacity(Ae.selectionBackgroundTransparent,.3)),X.color.isOpaque(Ae.selectionInactiveBackgroundTransparent)&&(Ae.selectionInactiveBackgroundTransparent=X.color.opacity(Ae.selectionInactiveBackgroundTransparent,.3)),Ae.ansi=l.DEFAULT_ANSI_COLORS.slice(),Ae.ansi[0]=Oe(Le.black,l.DEFAULT_ANSI_COLORS[0]),Ae.ansi[1]=Oe(Le.red,l.DEFAULT_ANSI_COLORS[1]),Ae.ansi[2]=Oe(Le.green,l.DEFAULT_ANSI_COLORS[2]),Ae.ansi[3]=Oe(Le.yellow,l.DEFAULT_ANSI_COLORS[3]),Ae.ansi[4]=Oe(Le.blue,l.DEFAULT_ANSI_COLORS[4]),Ae.ansi[5]=Oe(Le.magenta,l.DEFAULT_ANSI_COLORS[5]),Ae.ansi[6]=Oe(Le.cyan,l.DEFAULT_ANSI_COLORS[6]),Ae.ansi[7]=Oe(Le.white,l.DEFAULT_ANSI_COLORS[7]),Ae.ansi[8]=Oe(Le.brightBlack,l.DEFAULT_ANSI_COLORS[8]),Ae.ansi[9]=Oe(Le.brightRed,l.DEFAULT_ANSI_COLORS[9]),Ae.ansi[10]=Oe(Le.brightGreen,l.DEFAULT_ANSI_COLORS[10]),Ae.ansi[11]=Oe(Le.brightYellow,l.DEFAULT_ANSI_COLORS[11]),Ae.ansi[12]=Oe(Le.brightBlue,l.DEFAULT_ANSI_COLORS[12]),Ae.ansi[13]=Oe(Le.brightMagenta,l.DEFAULT_ANSI_COLORS[13]),Ae.ansi[14]=Oe(Le.brightCyan,l.DEFAULT_ANSI_COLORS[14]),Ae.ansi[15]=Oe(Le.brightWhite,l.DEFAULT_ANSI_COLORS[15]),Le.extendedAnsi){const Ie=Math.min(Ae.ansi.length-16,Le.extendedAnsi.length);for(let Ue=0;Ue<Ie;Ue++)Ae.ansi[Ue+16]=Oe(Le.extendedAnsi[Ue],l.DEFAULT_ANSI_COLORS[Ue+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(Le){this._restoreColor(Le),this._onChangeColors.fire(this.colors)}_restoreColor(Le){if(Le!==void 0)switch(Le){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[Le]=this._restoreColors.ansi[Le]}else for(let Ae=0;Ae<this._restoreColors.ansi.length;++Ae)this._colors.ansi[Ae]=this._restoreColors.ansi[Ae]}modifyColors(Le){Le(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function Oe(Le,Ae){if(Le!==void 0)try{return X.css.toColor(Le)}catch{}return Ae}l.ThemeService=De=m([y(0,Ee.IOptionsService)],De)},6349:(u,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CircularList=void 0;const m=d(8460),y=d(844);class S extends y.Disposable{constructor(he){super(),this._maxLength=he,this.onDeleteEmitter=this.register(new m.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new m.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new m.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(he){if(this._maxLength===he)return;const Ce=new Array(he);for(let Ee=0;Ee<Math.min(he,this.length);Ee++)Ce[Ee]=this._array[this._getCyclicIndex(Ee)];this._array=Ce,this._maxLength=he,this._startIndex=0}get length(){return this._length}set length(he){if(he>this._length)for(let Ce=this._length;Ce<he;Ce++)this._array[Ce]=void 0;this._length=he}get(he){return this._array[this._getCyclicIndex(he)]}set(he,Ce){this._array[this._getCyclicIndex(he)]=Ce}push(he){this._array[this._getCyclicIndex(this._length)]=he,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(he,Ce,...Ee){if(Ce){for(let xe=he;xe<this._length-Ce;xe++)this._array[this._getCyclicIndex(xe)]=this._array[this._getCyclicIndex(xe+Ce)];this._length-=Ce,this.onDeleteEmitter.fire({index:he,amount:Ce})}for(let xe=this._length-1;xe>=he;xe--)this._array[this._getCyclicIndex(xe+Ee.length)]=this._array[this._getCyclicIndex(xe)];for(let xe=0;xe<Ee.length;xe++)this._array[this._getCyclicIndex(he+xe)]=Ee[xe];if(Ee.length&&this.onInsertEmitter.fire({index:he,amount:Ee.length}),this._length+Ee.length>this._maxLength){const xe=this._length+Ee.length-this._maxLength;this._startIndex+=xe,this._length=this._maxLength,this.onTrimEmitter.fire(xe)}else this._length+=Ee.length}trimStart(he){he>this._length&&(he=this._length),this._startIndex+=he,this._length-=he,this.onTrimEmitter.fire(he)}shiftElements(he,Ce,Ee){if(!(Ce<=0)){if(he<0||he>=this._length)throw new Error("start argument out of range");if(he+Ee<0)throw new Error("Cannot shift elements in list beyond index 0");if(Ee>0){for(let be=Ce-1;be>=0;be--)this.set(he+be+Ee,this.get(he+be));const xe=he+Ce+Ee-this._length;if(xe>0)for(this._length+=xe;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let xe=0;xe<Ce;xe++)this.set(he+xe+Ee,this.get(he+xe))}}_getCyclicIndex(he){return(this._startIndex+he)%this._maxLength}}l.CircularList=S},1439:(u,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.clone=void 0,l.clone=function d(m,y=5){if(typeof m!="object")return m;const S=Array.isArray(m)?[]:{};for(const X in m)S[X]=y<=1?m[X]:m[X]&&d(m[X],y-1);return S}},8055:(u,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.contrastRatio=l.toPaddedHex=l.rgba=l.rgb=l.css=l.color=l.channels=l.NULL_COLOR=void 0;let d=0,m=0,y=0,S=0;var X,he,Ce,Ee,xe;function be(ve){const ke=ve.toString(16);return ke.length<2?"0"+ke:ke}function we(ve,ke){return ve<ke?(ke+.05)/(ve+.05):(ve+.05)/(ke+.05)}l.NULL_COLOR={css:"#00000000",rgba:0},function(ve){ve.toCss=function(ke,De,Oe,Le){return Le!==void 0?`#${be(ke)}${be(De)}${be(Oe)}${be(Le)}`:`#${be(ke)}${be(De)}${be(Oe)}`},ve.toRgba=function(ke,De,Oe,Le=255){return(ke<<24|De<<16|Oe<<8|Le)>>>0},ve.toColor=function(ke,De,Oe,Le){return{css:ve.toCss(ke,De,Oe,Le),rgba:ve.toRgba(ke,De,Oe,Le)}}}(X||(l.channels=X={})),function(ve){function ke(De,Oe){return S=Math.round(255*Oe),[d,m,y]=xe.toChannels(De.rgba),{css:X.toCss(d,m,y,S),rgba:X.toRgba(d,m,y,S)}}ve.blend=function(De,Oe){if(S=(255&Oe.rgba)/255,S===1)return{css:Oe.css,rgba:Oe.rgba};const Le=Oe.rgba>>24&255,Ae=Oe.rgba>>16&255,Ie=Oe.rgba>>8&255,Ue=De.rgba>>24&255,ze=De.rgba>>16&255,Ye=De.rgba>>8&255;return d=Ue+Math.round((Le-Ue)*S),m=ze+Math.round((Ae-ze)*S),y=Ye+Math.round((Ie-Ye)*S),{css:X.toCss(d,m,y),rgba:X.toRgba(d,m,y)}},ve.isOpaque=function(De){return(255&De.rgba)==255},ve.ensureContrastRatio=function(De,Oe,Le){const Ae=xe.ensureContrastRatio(De.rgba,Oe.rgba,Le);if(Ae)return X.toColor(Ae>>24&255,Ae>>16&255,Ae>>8&255)},ve.opaque=function(De){const Oe=(255|De.rgba)>>>0;return[d,m,y]=xe.toChannels(Oe),{css:X.toCss(d,m,y),rgba:Oe}},ve.opacity=ke,ve.multiplyOpacity=function(De,Oe){return S=255&De.rgba,ke(De,S*Oe/255)},ve.toColorRGB=function(De){return[De.rgba>>24&255,De.rgba>>16&255,De.rgba>>8&255]}}(he||(l.color=he={})),function(ve){let ke,De;try{const Oe=document.createElement("canvas");Oe.width=1,Oe.height=1;const Le=Oe.getContext("2d",{willReadFrequently:!0});Le&&(ke=Le,ke.globalCompositeOperation="copy",De=ke.createLinearGradient(0,0,1,1))}catch{}ve.toColor=function(Oe){if(Oe.match(/#[\da-f]{3,8}/i))switch(Oe.length){case 4:return d=parseInt(Oe.slice(1,2).repeat(2),16),m=parseInt(Oe.slice(2,3).repeat(2),16),y=parseInt(Oe.slice(3,4).repeat(2),16),X.toColor(d,m,y);case 5:return d=parseInt(Oe.slice(1,2).repeat(2),16),m=parseInt(Oe.slice(2,3).repeat(2),16),y=parseInt(Oe.slice(3,4).repeat(2),16),S=parseInt(Oe.slice(4,5).repeat(2),16),X.toColor(d,m,y,S);case 7:return{css:Oe,rgba:(parseInt(Oe.slice(1),16)<<8|255)>>>0};case 9:return{css:Oe,rgba:parseInt(Oe.slice(1),16)>>>0}}const Le=Oe.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(Le)return d=parseInt(Le[1]),m=parseInt(Le[2]),y=parseInt(Le[3]),S=Math.round(255*(Le[5]===void 0?1:parseFloat(Le[5]))),X.toColor(d,m,y,S);if(!ke||!De)throw new Error("css.toColor: Unsupported css format");if(ke.fillStyle=De,ke.fillStyle=Oe,typeof ke.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(ke.fillRect(0,0,1,1),[d,m,y,S]=ke.getImageData(0,0,1,1).data,S!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:X.toRgba(d,m,y,S),css:Oe}}}(Ce||(l.css=Ce={})),function(ve){function ke(De,Oe,Le){const Ae=De/255,Ie=Oe/255,Ue=Le/255;return .2126*(Ae<=.03928?Ae/12.92:Math.pow((Ae+.055)/1.055,2.4))+.7152*(Ie<=.03928?Ie/12.92:Math.pow((Ie+.055)/1.055,2.4))+.0722*(Ue<=.03928?Ue/12.92:Math.pow((Ue+.055)/1.055,2.4))}ve.relativeLuminance=function(De){return ke(De>>16&255,De>>8&255,255&De)},ve.relativeLuminance2=ke}(Ee||(l.rgb=Ee={})),function(ve){function ke(Oe,Le,Ae){const Ie=Oe>>24&255,Ue=Oe>>16&255,ze=Oe>>8&255;let Ye=Le>>24&255,Xe=Le>>16&255,tt=Le>>8&255,lt=we(Ee.relativeLuminance2(Ye,Xe,tt),Ee.relativeLuminance2(Ie,Ue,ze));for(;lt<Ae&&(Ye>0||Xe>0||tt>0);)Ye-=Math.max(0,Math.ceil(.1*Ye)),Xe-=Math.max(0,Math.ceil(.1*Xe)),tt-=Math.max(0,Math.ceil(.1*tt)),lt=we(Ee.relativeLuminance2(Ye,Xe,tt),Ee.relativeLuminance2(Ie,Ue,ze));return(Ye<<24|Xe<<16|tt<<8|255)>>>0}function De(Oe,Le,Ae){const Ie=Oe>>24&255,Ue=Oe>>16&255,ze=Oe>>8&255;let Ye=Le>>24&255,Xe=Le>>16&255,tt=Le>>8&255,lt=we(Ee.relativeLuminance2(Ye,Xe,tt),Ee.relativeLuminance2(Ie,Ue,ze));for(;lt<Ae&&(Ye<255||Xe<255||tt<255);)Ye=Math.min(255,Ye+Math.ceil(.1*(255-Ye))),Xe=Math.min(255,Xe+Math.ceil(.1*(255-Xe))),tt=Math.min(255,tt+Math.ceil(.1*(255-tt))),lt=we(Ee.relativeLuminance2(Ye,Xe,tt),Ee.relativeLuminance2(Ie,Ue,ze));return(Ye<<24|Xe<<16|tt<<8|255)>>>0}ve.blend=function(Oe,Le){if(S=(255&Le)/255,S===1)return Le;const Ae=Le>>24&255,Ie=Le>>16&255,Ue=Le>>8&255,ze=Oe>>24&255,Ye=Oe>>16&255,Xe=Oe>>8&255;return d=ze+Math.round((Ae-ze)*S),m=Ye+Math.round((Ie-Ye)*S),y=Xe+Math.round((Ue-Xe)*S),X.toRgba(d,m,y)},ve.ensureContrastRatio=function(Oe,Le,Ae){const Ie=Ee.relativeLuminance(Oe>>8),Ue=Ee.relativeLuminance(Le>>8);if(we(Ie,Ue)<Ae){if(Ue<Ie){const Xe=ke(Oe,Le,Ae),tt=we(Ie,Ee.relativeLuminance(Xe>>8));if(tt<Ae){const lt=De(Oe,Le,Ae);return tt>we(Ie,Ee.relativeLuminance(lt>>8))?Xe:lt}return Xe}const ze=De(Oe,Le,Ae),Ye=we(Ie,Ee.relativeLuminance(ze>>8));if(Ye<Ae){const Xe=ke(Oe,Le,Ae);return Ye>we(Ie,Ee.relativeLuminance(Xe>>8))?ze:Xe}return ze}},ve.reduceLuminance=ke,ve.increaseLuminance=De,ve.toChannels=function(Oe){return[Oe>>24&255,Oe>>16&255,Oe>>8&255,255&Oe]}}(xe||(l.rgba=xe={})),l.toPaddedHex=be,l.contrastRatio=we},8969:(u,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CoreTerminal=void 0;const m=d(844),y=d(2585),S=d(4348),X=d(7866),he=d(744),Ce=d(7302),Ee=d(6975),xe=d(8460),be=d(1753),we=d(1480),ve=d(7994),ke=d(9282),De=d(5435),Oe=d(5981),Le=d(2660);let Ae=!1;class Ie extends m.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new xe.EventEmitter),this._onScroll.event(ze=>{var Ye;(Ye=this._onScrollApi)==null||Ye.fire(ze.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(ze){for(const Ye in ze)this.optionsService.options[Ye]=ze[Ye]}constructor(ze){super(),this._windowsWrappingHeuristics=this.register(new m.MutableDisposable),this._onBinary=this.register(new xe.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new xe.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new xe.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new xe.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new xe.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new xe.EventEmitter),this._instantiationService=new S.InstantiationService,this.optionsService=this.register(new Ce.OptionsService(ze)),this._instantiationService.setService(y.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(he.BufferService)),this._instantiationService.setService(y.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(X.LogService)),this._instantiationService.setService(y.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(Ee.CoreService)),this._instantiationService.setService(y.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(be.CoreMouseService)),this._instantiationService.setService(y.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(we.UnicodeService)),this._instantiationService.setService(y.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(ve.CharsetService),this._instantiationService.setService(y.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(Le.OscLinkService),this._instantiationService.setService(y.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new De.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,xe.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,xe.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,xe.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,xe.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(Ye=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(Ye=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new Oe.WriteBuffer((Ye,Xe)=>this._inputHandler.parse(Ye,Xe))),this.register((0,xe.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(ze,Ye){this._writeBuffer.write(ze,Ye)}writeSync(ze,Ye){this._logService.logLevel<=y.LogLevelEnum.WARN&&!Ae&&(this._logService.warn("writeSync is unreliable and will be removed soon."),Ae=!0),this._writeBuffer.writeSync(ze,Ye)}input(ze,Ye=!0){this.coreService.triggerDataEvent(ze,Ye)}resize(ze,Ye){isNaN(ze)||isNaN(Ye)||(ze=Math.max(ze,he.MINIMUM_COLS),Ye=Math.max(Ye,he.MINIMUM_ROWS),this._bufferService.resize(ze,Ye))}scroll(ze,Ye=!1){this._bufferService.scroll(ze,Ye)}scrollLines(ze,Ye,Xe){this._bufferService.scrollLines(ze,Ye,Xe)}scrollPages(ze){this.scrollLines(ze*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(ze){const Ye=ze-this._bufferService.buffer.ydisp;Ye!==0&&this.scrollLines(Ye)}registerEscHandler(ze,Ye){return this._inputHandler.registerEscHandler(ze,Ye)}registerDcsHandler(ze,Ye){return this._inputHandler.registerDcsHandler(ze,Ye)}registerCsiHandler(ze,Ye){return this._inputHandler.registerCsiHandler(ze,Ye)}registerOscHandler(ze,Ye){return this._inputHandler.registerOscHandler(ze,Ye)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let ze=!1;const Ye=this.optionsService.rawOptions.windowsPty;Ye&&Ye.buildNumber!==void 0&&Ye.buildNumber!==void 0?ze=Ye.backend==="conpty"&&Ye.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(ze=!0),ze?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const ze=[];ze.push(this.onLineFeed(ke.updateWindowsModeWrappedState.bind(null,this._bufferService))),ze.push(this.registerCsiHandler({final:"H"},()=>((0,ke.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,m.toDisposable)(()=>{for(const Ye of ze)Ye.dispose()})}}}l.CoreTerminal=Ie},8460:(u,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.runAndSubscribe=l.forwardEvent=l.EventEmitter=void 0,l.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=d=>(this._listeners.push(d),{dispose:()=>{if(!this._disposed){for(let m=0;m<this._listeners.length;m++)if(this._listeners[m]===d)return void this._listeners.splice(m,1)}}})),this._event}fire(d,m){const y=[];for(let S=0;S<this._listeners.length;S++)y.push(this._listeners[S]);for(let S=0;S<y.length;S++)y[S].call(void 0,d,m)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},l.forwardEvent=function(d,m){return d(y=>m.fire(y))},l.runAndSubscribe=function(d,m){return m(void 0),d(y=>m(y))}},5435:function(u,l,d){var m=this&&this.__decorate||function(rt,He,We,qe){var Ke,st=arguments.length,ut=st<3?He:qe===null?qe=Object.getOwnPropertyDescriptor(He,We):qe;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ut=Reflect.decorate(rt,He,We,qe);else for(var nt=rt.length-1;nt>=0;nt--)(Ke=rt[nt])&&(ut=(st<3?Ke(ut):st>3?Ke(He,We,ut):Ke(He,We))||ut);return st>3&&ut&&Object.defineProperty(He,We,ut),ut},y=this&&this.__param||function(rt,He){return function(We,qe){He(We,qe,rt)}};Object.defineProperty(l,"__esModule",{value:!0}),l.InputHandler=l.WindowsOptionsReportType=void 0;const S=d(2584),X=d(7116),he=d(2015),Ce=d(844),Ee=d(482),xe=d(8437),be=d(8460),we=d(643),ve=d(511),ke=d(3734),De=d(2585),Oe=d(1480),Le=d(6242),Ae=d(6351),Ie=d(5941),Ue={"(":0,")":1,"*":2,"+":3,"-":1,".":2},ze=131072;function Ye(rt,He){if(rt>24)return He.setWinLines||!1;switch(rt){case 1:return!!He.restoreWin;case 2:return!!He.minimizeWin;case 3:return!!He.setWinPosition;case 4:return!!He.setWinSizePixels;case 5:return!!He.raiseWin;case 6:return!!He.lowerWin;case 7:return!!He.refreshWin;case 8:return!!He.setWinSizeChars;case 9:return!!He.maximizeWin;case 10:return!!He.fullscreenWin;case 11:return!!He.getWinState;case 13:return!!He.getWinPosition;case 14:return!!He.getWinSizePixels;case 15:return!!He.getScreenSizePixels;case 16:return!!He.getCellSizePixels;case 18:return!!He.getWinSizeChars;case 19:return!!He.getScreenSizeChars;case 20:return!!He.getIconTitle;case 21:return!!He.getWinTitle;case 22:return!!He.pushTitle;case 23:return!!He.popTitle;case 24:return!!He.setWinLines}return!1}var Xe;(function(rt){rt[rt.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",rt[rt.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(Xe||(l.WindowsOptionsReportType=Xe={}));let tt=0;class lt extends Ce.Disposable{getAttrData(){return this._curAttrData}constructor(He,We,qe,Ke,st,ut,nt,vt,it=new he.EscapeSequenceParser){super(),this._bufferService=He,this._charsetService=We,this._coreService=qe,this._logService=Ke,this._optionsService=st,this._oscLinkService=ut,this._coreMouseService=nt,this._unicodeService=vt,this._parser=it,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new Ee.StringToUtf32,this._utf8Decoder=new Ee.Utf8ToUtf32,this._workCell=new ve.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=xe.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=xe.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new be.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new be.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new be.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new be.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new be.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new be.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new be.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new be.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new be.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new be.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new be.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new be.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new be.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new _t(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(Ve=>this._activeBuffer=Ve.activeBuffer)),this._parser.setCsiHandlerFallback((Ve,ht)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(Ve),params:ht.toArray()})}),this._parser.setEscHandlerFallback(Ve=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(Ve)})}),this._parser.setExecuteHandlerFallback(Ve=>{this._logService.debug("Unknown EXECUTE code: ",{code:Ve})}),this._parser.setOscHandlerFallback((Ve,ht,ct)=>{this._logService.debug("Unknown OSC code: ",{identifier:Ve,action:ht,data:ct})}),this._parser.setDcsHandlerFallback((Ve,ht,ct)=>{ht==="HOOK"&&(ct=ct.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(Ve),action:ht,payload:ct})}),this._parser.setPrintHandler((Ve,ht,ct)=>this.print(Ve,ht,ct)),this._parser.registerCsiHandler({final:"@"},Ve=>this.insertChars(Ve)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},Ve=>this.scrollLeft(Ve)),this._parser.registerCsiHandler({final:"A"},Ve=>this.cursorUp(Ve)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},Ve=>this.scrollRight(Ve)),this._parser.registerCsiHandler({final:"B"},Ve=>this.cursorDown(Ve)),this._parser.registerCsiHandler({final:"C"},Ve=>this.cursorForward(Ve)),this._parser.registerCsiHandler({final:"D"},Ve=>this.cursorBackward(Ve)),this._parser.registerCsiHandler({final:"E"},Ve=>this.cursorNextLine(Ve)),this._parser.registerCsiHandler({final:"F"},Ve=>this.cursorPrecedingLine(Ve)),this._parser.registerCsiHandler({final:"G"},Ve=>this.cursorCharAbsolute(Ve)),this._parser.registerCsiHandler({final:"H"},Ve=>this.cursorPosition(Ve)),this._parser.registerCsiHandler({final:"I"},Ve=>this.cursorForwardTab(Ve)),this._parser.registerCsiHandler({final:"J"},Ve=>this.eraseInDisplay(Ve,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},Ve=>this.eraseInDisplay(Ve,!0)),this._parser.registerCsiHandler({final:"K"},Ve=>this.eraseInLine(Ve,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},Ve=>this.eraseInLine(Ve,!0)),this._parser.registerCsiHandler({final:"L"},Ve=>this.insertLines(Ve)),this._parser.registerCsiHandler({final:"M"},Ve=>this.deleteLines(Ve)),this._parser.registerCsiHandler({final:"P"},Ve=>this.deleteChars(Ve)),this._parser.registerCsiHandler({final:"S"},Ve=>this.scrollUp(Ve)),this._parser.registerCsiHandler({final:"T"},Ve=>this.scrollDown(Ve)),this._parser.registerCsiHandler({final:"X"},Ve=>this.eraseChars(Ve)),this._parser.registerCsiHandler({final:"Z"},Ve=>this.cursorBackwardTab(Ve)),this._parser.registerCsiHandler({final:"`"},Ve=>this.charPosAbsolute(Ve)),this._parser.registerCsiHandler({final:"a"},Ve=>this.hPositionRelative(Ve)),this._parser.registerCsiHandler({final:"b"},Ve=>this.repeatPrecedingCharacter(Ve)),this._parser.registerCsiHandler({final:"c"},Ve=>this.sendDeviceAttributesPrimary(Ve)),this._parser.registerCsiHandler({prefix:">",final:"c"},Ve=>this.sendDeviceAttributesSecondary(Ve)),this._parser.registerCsiHandler({final:"d"},Ve=>this.linePosAbsolute(Ve)),this._parser.registerCsiHandler({final:"e"},Ve=>this.vPositionRelative(Ve)),this._parser.registerCsiHandler({final:"f"},Ve=>this.hVPosition(Ve)),this._parser.registerCsiHandler({final:"g"},Ve=>this.tabClear(Ve)),this._parser.registerCsiHandler({final:"h"},Ve=>this.setMode(Ve)),this._parser.registerCsiHandler({prefix:"?",final:"h"},Ve=>this.setModePrivate(Ve)),this._parser.registerCsiHandler({final:"l"},Ve=>this.resetMode(Ve)),this._parser.registerCsiHandler({prefix:"?",final:"l"},Ve=>this.resetModePrivate(Ve)),this._parser.registerCsiHandler({final:"m"},Ve=>this.charAttributes(Ve)),this._parser.registerCsiHandler({final:"n"},Ve=>this.deviceStatus(Ve)),this._parser.registerCsiHandler({prefix:"?",final:"n"},Ve=>this.deviceStatusPrivate(Ve)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},Ve=>this.softReset(Ve)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},Ve=>this.setCursorStyle(Ve)),this._parser.registerCsiHandler({final:"r"},Ve=>this.setScrollRegion(Ve)),this._parser.registerCsiHandler({final:"s"},Ve=>this.saveCursor(Ve)),this._parser.registerCsiHandler({final:"t"},Ve=>this.windowOptions(Ve)),this._parser.registerCsiHandler({final:"u"},Ve=>this.restoreCursor(Ve)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},Ve=>this.insertColumns(Ve)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},Ve=>this.deleteColumns(Ve)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},Ve=>this.selectProtected(Ve)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},Ve=>this.requestMode(Ve,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},Ve=>this.requestMode(Ve,!1)),this._parser.setExecuteHandler(S.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(S.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(S.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(S.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(S.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(S.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(S.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(S.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(S.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(S.C1.IND,()=>this.index()),this._parser.setExecuteHandler(S.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(S.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new Le.OscHandler(Ve=>(this.setTitle(Ve),this.setIconName(Ve),!0))),this._parser.registerOscHandler(1,new Le.OscHandler(Ve=>this.setIconName(Ve))),this._parser.registerOscHandler(2,new Le.OscHandler(Ve=>this.setTitle(Ve))),this._parser.registerOscHandler(4,new Le.OscHandler(Ve=>this.setOrReportIndexedColor(Ve))),this._parser.registerOscHandler(8,new Le.OscHandler(Ve=>this.setHyperlink(Ve))),this._parser.registerOscHandler(10,new Le.OscHandler(Ve=>this.setOrReportFgColor(Ve))),this._parser.registerOscHandler(11,new Le.OscHandler(Ve=>this.setOrReportBgColor(Ve))),this._parser.registerOscHandler(12,new Le.OscHandler(Ve=>this.setOrReportCursorColor(Ve))),this._parser.registerOscHandler(104,new Le.OscHandler(Ve=>this.restoreIndexedColor(Ve))),this._parser.registerOscHandler(110,new Le.OscHandler(Ve=>this.restoreFgColor(Ve))),this._parser.registerOscHandler(111,new Le.OscHandler(Ve=>this.restoreBgColor(Ve))),this._parser.registerOscHandler(112,new Le.OscHandler(Ve=>this.restoreCursorColor(Ve))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const Ve in X.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:Ve},()=>this.selectCharset("("+Ve)),this._parser.registerEscHandler({intermediates:")",final:Ve},()=>this.selectCharset(")"+Ve)),this._parser.registerEscHandler({intermediates:"*",final:Ve},()=>this.selectCharset("*"+Ve)),this._parser.registerEscHandler({intermediates:"+",final:Ve},()=>this.selectCharset("+"+Ve)),this._parser.registerEscHandler({intermediates:"-",final:Ve},()=>this.selectCharset("-"+Ve)),this._parser.registerEscHandler({intermediates:".",final:Ve},()=>this.selectCharset("."+Ve)),this._parser.registerEscHandler({intermediates:"/",final:Ve},()=>this.selectCharset("/"+Ve));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(Ve=>(this._logService.error("Parsing error: ",Ve),Ve)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new Ae.DcsHandler((Ve,ht)=>this.requestStatusString(Ve,ht)))}_preserveStack(He,We,qe,Ke){this._parseStack.paused=!0,this._parseStack.cursorStartX=He,this._parseStack.cursorStartY=We,this._parseStack.decodedLength=qe,this._parseStack.position=Ke}_logSlowResolvingAsync(He){this._logService.logLevel<=De.LogLevelEnum.WARN&&Promise.race([He,new Promise((We,qe)=>setTimeout(()=>qe("#SLOW_TIMEOUT"),5e3))]).catch(We=>{if(We!=="#SLOW_TIMEOUT")throw We;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(He,We){let qe,Ke=this._activeBuffer.x,st=this._activeBuffer.y,ut=0;const nt=this._parseStack.paused;if(nt){if(qe=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,We))return this._logSlowResolvingAsync(qe),qe;Ke=this._parseStack.cursorStartX,st=this._parseStack.cursorStartY,this._parseStack.paused=!1,He.length>ze&&(ut=this._parseStack.position+ze)}if(this._logService.logLevel<=De.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof He=="string"?` "${He}"`:` "${Array.prototype.map.call(He,Ve=>String.fromCharCode(Ve)).join("")}"`),typeof He=="string"?He.split("").map(Ve=>Ve.charCodeAt(0)):He),this._parseBuffer.length<He.length&&this._parseBuffer.length<ze&&(this._parseBuffer=new Uint32Array(Math.min(He.length,ze))),nt||this._dirtyRowTracker.clearRange(),He.length>ze)for(let Ve=ut;Ve<He.length;Ve+=ze){const ht=Ve+ze<He.length?Ve+ze:He.length,ct=typeof He=="string"?this._stringDecoder.decode(He.substring(Ve,ht),this._parseBuffer):this._utf8Decoder.decode(He.subarray(Ve,ht),this._parseBuffer);if(qe=this._parser.parse(this._parseBuffer,ct))return this._preserveStack(Ke,st,ct,Ve),this._logSlowResolvingAsync(qe),qe}else if(!nt){const Ve=typeof He=="string"?this._stringDecoder.decode(He,this._parseBuffer):this._utf8Decoder.decode(He,this._parseBuffer);if(qe=this._parser.parse(this._parseBuffer,Ve))return this._preserveStack(Ke,st,Ve,0),this._logSlowResolvingAsync(qe),qe}this._activeBuffer.x===Ke&&this._activeBuffer.y===st||this._onCursorMove.fire();const vt=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),it=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);it<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(it,this._bufferService.rows-1),Math.min(vt,this._bufferService.rows-1))}print(He,We,qe){let Ke,st;const ut=this._charsetService.charset,nt=this._optionsService.rawOptions.screenReaderMode,vt=this._bufferService.cols,it=this._coreService.decPrivateModes.wraparound,Ve=this._coreService.modes.insertMode,ht=this._curAttrData;let ct=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&qe-We>0&&ct.getWidth(this._activeBuffer.x-1)===2&&ct.setCellFromCodepoint(this._activeBuffer.x-1,0,1,ht);let St=this._parser.precedingJoinState;for(let Ct=We;Ct<qe;++Ct){if(Ke=He[Ct],Ke<127&&ut){const sr=ut[String.fromCharCode(Ke)];sr&&(Ke=sr.charCodeAt(0))}const Dt=this._unicodeService.charProperties(Ke,St);st=Oe.UnicodeService.extractWidth(Dt);const Tt=Oe.UnicodeService.extractShouldJoin(Dt),At=Tt?Oe.UnicodeService.extractWidth(St):0;if(St=Dt,nt&&this._onA11yChar.fire((0,Ee.stringFromCodePoint)(Ke)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+st-At>vt){if(it){const sr=ct;let Lt=this._activeBuffer.x-At;for(this._activeBuffer.x=At,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),ct=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),At>0&&ct instanceof xe.BufferLine&&ct.copyCellsFrom(sr,Lt,0,At,!1);Lt<vt;)sr.setCellFromCodepoint(Lt++,0,1,ht)}else if(this._activeBuffer.x=vt-1,st===2)continue}if(Tt&&this._activeBuffer.x){const sr=ct.getWidth(this._activeBuffer.x-1)?1:2;ct.addCodepointToCell(this._activeBuffer.x-sr,Ke,st);for(let Lt=st-At;--Lt>=0;)ct.setCellFromCodepoint(this._activeBuffer.x++,0,0,ht)}else if(Ve&&(ct.insertCells(this._activeBuffer.x,st-At,this._activeBuffer.getNullCell(ht)),ct.getWidth(vt-1)===2&&ct.setCellFromCodepoint(vt-1,we.NULL_CELL_CODE,we.NULL_CELL_WIDTH,ht)),ct.setCellFromCodepoint(this._activeBuffer.x++,Ke,st,ht),st>0)for(;--st;)ct.setCellFromCodepoint(this._activeBuffer.x++,0,0,ht)}this._parser.precedingJoinState=St,this._activeBuffer.x<vt&&qe-We>0&&ct.getWidth(this._activeBuffer.x)===0&&!ct.hasContent(this._activeBuffer.x)&&ct.setCellFromCodepoint(this._activeBuffer.x,0,1,ht),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(He,We){return He.final!=="t"||He.prefix||He.intermediates?this._parser.registerCsiHandler(He,We):this._parser.registerCsiHandler(He,qe=>!Ye(qe.params[0],this._optionsService.rawOptions.windowOptions)||We(qe))}registerDcsHandler(He,We){return this._parser.registerDcsHandler(He,new Ae.DcsHandler(We))}registerEscHandler(He,We){return this._parser.registerEscHandler(He,We)}registerOscHandler(He,We){return this._parser.registerOscHandler(He,new Le.OscHandler(We))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var He;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((He=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))!=null&&He.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const We=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);We.hasWidth(this._activeBuffer.x)&&!We.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const He=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-He),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(He=this._bufferService.cols-1){this._activeBuffer.x=Math.min(He,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(He,We){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=He,this._activeBuffer.y=this._activeBuffer.scrollTop+We):(this._activeBuffer.x=He,this._activeBuffer.y=We),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(He,We){this._restrictCursor(),this._setCursor(this._activeBuffer.x+He,this._activeBuffer.y+We)}cursorUp(He){const We=this._activeBuffer.y-this._activeBuffer.scrollTop;return We>=0?this._moveCursor(0,-Math.min(We,He.params[0]||1)):this._moveCursor(0,-(He.params[0]||1)),!0}cursorDown(He){const We=this._activeBuffer.scrollBottom-this._activeBuffer.y;return We>=0?this._moveCursor(0,Math.min(We,He.params[0]||1)):this._moveCursor(0,He.params[0]||1),!0}cursorForward(He){return this._moveCursor(He.params[0]||1,0),!0}cursorBackward(He){return this._moveCursor(-(He.params[0]||1),0),!0}cursorNextLine(He){return this.cursorDown(He),this._activeBuffer.x=0,!0}cursorPrecedingLine(He){return this.cursorUp(He),this._activeBuffer.x=0,!0}cursorCharAbsolute(He){return this._setCursor((He.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(He){return this._setCursor(He.length>=2?(He.params[1]||1)-1:0,(He.params[0]||1)-1),!0}charPosAbsolute(He){return this._setCursor((He.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(He){return this._moveCursor(He.params[0]||1,0),!0}linePosAbsolute(He){return this._setCursor(this._activeBuffer.x,(He.params[0]||1)-1),!0}vPositionRelative(He){return this._moveCursor(0,He.params[0]||1),!0}hVPosition(He){return this.cursorPosition(He),!0}tabClear(He){const We=He.params[0];return We===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:We===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(He){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let We=He.params[0]||1;for(;We--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(He){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let We=He.params[0]||1;for(;We--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(He){const We=He.params[0];return We===1&&(this._curAttrData.bg|=536870912),We!==2&&We!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(He,We,qe,Ke=!1,st=!1){const ut=this._activeBuffer.lines.get(this._activeBuffer.ybase+He);ut.replaceCells(We,qe,this._activeBuffer.getNullCell(this._eraseAttrData()),st),Ke&&(ut.isWrapped=!1)}_resetBufferLine(He,We=!1){const qe=this._activeBuffer.lines.get(this._activeBuffer.ybase+He);qe&&(qe.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),We),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+He),qe.isWrapped=!1)}eraseInDisplay(He,We=!1){let qe;switch(this._restrictCursor(this._bufferService.cols),He.params[0]){case 0:for(qe=this._activeBuffer.y,this._dirtyRowTracker.markDirty(qe),this._eraseInBufferLine(qe++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,We);qe<this._bufferService.rows;qe++)this._resetBufferLine(qe,We);this._dirtyRowTracker.markDirty(qe);break;case 1:for(qe=this._activeBuffer.y,this._dirtyRowTracker.markDirty(qe),this._eraseInBufferLine(qe,0,this._activeBuffer.x+1,!0,We),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(qe+1).isWrapped=!1);qe--;)this._resetBufferLine(qe,We);this._dirtyRowTracker.markDirty(0);break;case 2:for(qe=this._bufferService.rows,this._dirtyRowTracker.markDirty(qe-1);qe--;)this._resetBufferLine(qe,We);this._dirtyRowTracker.markDirty(0);break;case 3:const Ke=this._activeBuffer.lines.length-this._bufferService.rows;Ke>0&&(this._activeBuffer.lines.trimStart(Ke),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-Ke,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-Ke,0),this._onScroll.fire(0))}return!0}eraseInLine(He,We=!1){switch(this._restrictCursor(this._bufferService.cols),He.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,We);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,We);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,We)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(He){this._restrictCursor();let We=He.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const qe=this._activeBuffer.ybase+this._activeBuffer.y,Ke=this._bufferService.rows-1-this._activeBuffer.scrollBottom,st=this._bufferService.rows-1+this._activeBuffer.ybase-Ke+1;for(;We--;)this._activeBuffer.lines.splice(st-1,1),this._activeBuffer.lines.splice(qe,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(He){this._restrictCursor();let We=He.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const qe=this._activeBuffer.ybase+this._activeBuffer.y;let Ke;for(Ke=this._bufferService.rows-1-this._activeBuffer.scrollBottom,Ke=this._bufferService.rows-1+this._activeBuffer.ybase-Ke;We--;)this._activeBuffer.lines.splice(qe,1),this._activeBuffer.lines.splice(Ke,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(He){this._restrictCursor();const We=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return We&&(We.insertCells(this._activeBuffer.x,He.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(He){this._restrictCursor();const We=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return We&&(We.deleteCells(this._activeBuffer.x,He.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(He){let We=He.params[0]||1;for(;We--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(He){let We=He.params[0]||1;for(;We--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(xe.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(He){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const We=He.params[0]||1;for(let qe=this._activeBuffer.scrollTop;qe<=this._activeBuffer.scrollBottom;++qe){const Ke=this._activeBuffer.lines.get(this._activeBuffer.ybase+qe);Ke.deleteCells(0,We,this._activeBuffer.getNullCell(this._eraseAttrData())),Ke.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(He){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const We=He.params[0]||1;for(let qe=this._activeBuffer.scrollTop;qe<=this._activeBuffer.scrollBottom;++qe){const Ke=this._activeBuffer.lines.get(this._activeBuffer.ybase+qe);Ke.insertCells(0,We,this._activeBuffer.getNullCell(this._eraseAttrData())),Ke.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(He){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const We=He.params[0]||1;for(let qe=this._activeBuffer.scrollTop;qe<=this._activeBuffer.scrollBottom;++qe){const Ke=this._activeBuffer.lines.get(this._activeBuffer.ybase+qe);Ke.insertCells(this._activeBuffer.x,We,this._activeBuffer.getNullCell(this._eraseAttrData())),Ke.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(He){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const We=He.params[0]||1;for(let qe=this._activeBuffer.scrollTop;qe<=this._activeBuffer.scrollBottom;++qe){const Ke=this._activeBuffer.lines.get(this._activeBuffer.ybase+qe);Ke.deleteCells(this._activeBuffer.x,We,this._activeBuffer.getNullCell(this._eraseAttrData())),Ke.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(He){this._restrictCursor();const We=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return We&&(We.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(He.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(He){const We=this._parser.precedingJoinState;if(!We)return!0;const qe=He.params[0]||1,Ke=Oe.UnicodeService.extractWidth(We),st=this._activeBuffer.x-Ke,ut=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(st),nt=new Uint32Array(ut.length*qe);let vt=0;for(let Ve=0;Ve<ut.length;){const ht=ut.codePointAt(Ve)||0;nt[vt++]=ht,Ve+=ht>65535?2:1}let it=vt;for(let Ve=1;Ve<qe;++Ve)nt.copyWithin(it,0,vt),it+=vt;return this.print(nt,0,it),!0}sendDeviceAttributesPrimary(He){return He.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(S.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(S.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(He){return He.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(S.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(S.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(He.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(S.C0.ESC+"[>83;40003;0c")),!0}_is(He){return(this._optionsService.rawOptions.termName+"").indexOf(He)===0}setMode(He){for(let We=0;We<He.length;We++)switch(He.params[We]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(He){for(let We=0;We<He.length;We++)switch(He.params[We]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,X.DEFAULT_CHARSET),this._charsetService.setgCharset(1,X.DEFAULT_CHARSET),this._charsetService.setgCharset(2,X.DEFAULT_CHARSET),this._charsetService.setgCharset(3,X.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(He){for(let We=0;We<He.length;We++)switch(He.params[We]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(He){for(let We=0;We<He.length;We++)switch(He.params[We]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),He.params[We]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(He,We){const qe=this._coreService.decPrivateModes,{activeProtocol:Ke,activeEncoding:st}=this._coreMouseService,ut=this._coreService,{buffers:nt,cols:vt}=this._bufferService,{active:it,alt:Ve}=nt,ht=this._optionsService.rawOptions,ct=Tt=>Tt?1:2,St=He.params[0];return Ct=St,Dt=We?St===2?4:St===4?ct(ut.modes.insertMode):St===12?3:St===20?ct(ht.convertEol):0:St===1?ct(qe.applicationCursorKeys):St===3?ht.windowOptions.setWinLines?vt===80?2:vt===132?1:0:0:St===6?ct(qe.origin):St===7?ct(qe.wraparound):St===8?3:St===9?ct(Ke==="X10"):St===12?ct(ht.cursorBlink):St===25?ct(!ut.isCursorHidden):St===45?ct(qe.reverseWraparound):St===66?ct(qe.applicationKeypad):St===67?4:St===1e3?ct(Ke==="VT200"):St===1002?ct(Ke==="DRAG"):St===1003?ct(Ke==="ANY"):St===1004?ct(qe.sendFocus):St===1005?4:St===1006?ct(st==="SGR"):St===1015?4:St===1016?ct(st==="SGR_PIXELS"):St===1048?1:St===47||St===1047||St===1049?ct(it===Ve):St===2004?ct(qe.bracketedPasteMode):0,ut.triggerDataEvent(`${S.C0.ESC}[${We?"":"?"}${Ct};${Dt}$y`),!0;var Ct,Dt}_updateAttrColor(He,We,qe,Ke,st){return We===2?(He|=50331648,He&=-16777216,He|=ke.AttributeData.fromColorRGB([qe,Ke,st])):We===5&&(He&=-50331904,He|=33554432|255&qe),He}_extractColor(He,We,qe){const Ke=[0,0,-1,0,0,0];let st=0,ut=0;do{if(Ke[ut+st]=He.params[We+ut],He.hasSubParams(We+ut)){const nt=He.getSubParams(We+ut);let vt=0;do Ke[1]===5&&(st=1),Ke[ut+vt+1+st]=nt[vt];while(++vt<nt.length&&vt+ut+1+st<Ke.length);break}if(Ke[1]===5&&ut+st>=2||Ke[1]===2&&ut+st>=5)break;Ke[1]&&(st=1)}while(++ut+We<He.length&&ut+st<Ke.length);for(let nt=2;nt<Ke.length;++nt)Ke[nt]===-1&&(Ke[nt]=0);switch(Ke[0]){case 38:qe.fg=this._updateAttrColor(qe.fg,Ke[1],Ke[3],Ke[4],Ke[5]);break;case 48:qe.bg=this._updateAttrColor(qe.bg,Ke[1],Ke[3],Ke[4],Ke[5]);break;case 58:qe.extended=qe.extended.clone(),qe.extended.underlineColor=this._updateAttrColor(qe.extended.underlineColor,Ke[1],Ke[3],Ke[4],Ke[5])}return ut}_processUnderline(He,We){We.extended=We.extended.clone(),(!~He||He>5)&&(He=1),We.extended.underlineStyle=He,We.fg|=268435456,He===0&&(We.fg&=-268435457),We.updateExtended()}_processSGR0(He){He.fg=xe.DEFAULT_ATTR_DATA.fg,He.bg=xe.DEFAULT_ATTR_DATA.bg,He.extended=He.extended.clone(),He.extended.underlineStyle=0,He.extended.underlineColor&=-67108864,He.updateExtended()}charAttributes(He){if(He.length===1&&He.params[0]===0)return this._processSGR0(this._curAttrData),!0;const We=He.length;let qe;const Ke=this._curAttrData;for(let st=0;st<We;st++)qe=He.params[st],qe>=30&&qe<=37?(Ke.fg&=-50331904,Ke.fg|=16777216|qe-30):qe>=40&&qe<=47?(Ke.bg&=-50331904,Ke.bg|=16777216|qe-40):qe>=90&&qe<=97?(Ke.fg&=-50331904,Ke.fg|=16777224|qe-90):qe>=100&&qe<=107?(Ke.bg&=-50331904,Ke.bg|=16777224|qe-100):qe===0?this._processSGR0(Ke):qe===1?Ke.fg|=134217728:qe===3?Ke.bg|=67108864:qe===4?(Ke.fg|=268435456,this._processUnderline(He.hasSubParams(st)?He.getSubParams(st)[0]:1,Ke)):qe===5?Ke.fg|=536870912:qe===7?Ke.fg|=67108864:qe===8?Ke.fg|=1073741824:qe===9?Ke.fg|=2147483648:qe===2?Ke.bg|=134217728:qe===21?this._processUnderline(2,Ke):qe===22?(Ke.fg&=-134217729,Ke.bg&=-134217729):qe===23?Ke.bg&=-67108865:qe===24?(Ke.fg&=-268435457,this._processUnderline(0,Ke)):qe===25?Ke.fg&=-536870913:qe===27?Ke.fg&=-67108865:qe===28?Ke.fg&=-1073741825:qe===29?Ke.fg&=2147483647:qe===39?(Ke.fg&=-67108864,Ke.fg|=16777215&xe.DEFAULT_ATTR_DATA.fg):qe===49?(Ke.bg&=-67108864,Ke.bg|=16777215&xe.DEFAULT_ATTR_DATA.bg):qe===38||qe===48||qe===58?st+=this._extractColor(He,st,Ke):qe===53?Ke.bg|=1073741824:qe===55?Ke.bg&=-1073741825:qe===59?(Ke.extended=Ke.extended.clone(),Ke.extended.underlineColor=-1,Ke.updateExtended()):qe===100?(Ke.fg&=-67108864,Ke.fg|=16777215&xe.DEFAULT_ATTR_DATA.fg,Ke.bg&=-67108864,Ke.bg|=16777215&xe.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",qe);return!0}deviceStatus(He){switch(He.params[0]){case 5:this._coreService.triggerDataEvent(`${S.C0.ESC}[0n`);break;case 6:const We=this._activeBuffer.y+1,qe=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${S.C0.ESC}[${We};${qe}R`)}return!0}deviceStatusPrivate(He){if(He.params[0]===6){const We=this._activeBuffer.y+1,qe=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${S.C0.ESC}[?${We};${qe}R`)}return!0}softReset(He){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=xe.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(He){const We=He.params[0]||1;switch(We){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const qe=We%2==1;return this._optionsService.options.cursorBlink=qe,!0}setScrollRegion(He){const We=He.params[0]||1;let qe;return(He.length<2||(qe=He.params[1])>this._bufferService.rows||qe===0)&&(qe=this._bufferService.rows),qe>We&&(this._activeBuffer.scrollTop=We-1,this._activeBuffer.scrollBottom=qe-1,this._setCursor(0,0)),!0}windowOptions(He){if(!Ye(He.params[0],this._optionsService.rawOptions.windowOptions))return!0;const We=He.length>1?He.params[1]:0;switch(He.params[0]){case 14:We!==2&&this._onRequestWindowsOptionsReport.fire(Xe.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(Xe.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${S.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:We!==0&&We!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),We!==0&&We!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:We!==0&&We!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),We!==0&&We!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(He){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(He){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(He){return this._windowTitle=He,this._onTitleChange.fire(He),!0}setIconName(He){return this._iconName=He,!0}setOrReportIndexedColor(He){const We=[],qe=He.split(";");for(;qe.length>1;){const Ke=qe.shift(),st=qe.shift();if(/^\d+$/.exec(Ke)){const ut=parseInt(Ke);if(bt(ut))if(st==="?")We.push({type:0,index:ut});else{const nt=(0,Ie.parseColor)(st);nt&&We.push({type:1,index:ut,color:nt})}}}return We.length&&this._onColor.fire(We),!0}setHyperlink(He){const We=He.split(";");return!(We.length<2)&&(We[1]?this._createHyperlink(We[0],We[1]):!We[0]&&this._finishHyperlink())}_createHyperlink(He,We){this._getCurrentLinkId()&&this._finishHyperlink();const qe=He.split(":");let Ke;const st=qe.findIndex(ut=>ut.startsWith("id="));return st!==-1&&(Ke=qe[st].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:Ke,uri:We}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(He,We){const qe=He.split(";");for(let Ke=0;Ke<qe.length&&!(We>=this._specialColors.length);++Ke,++We)if(qe[Ke]==="?")this._onColor.fire([{type:0,index:this._specialColors[We]}]);else{const st=(0,Ie.parseColor)(qe[Ke]);st&&this._onColor.fire([{type:1,index:this._specialColors[We],color:st}])}return!0}setOrReportFgColor(He){return this._setOrReportSpecialColor(He,0)}setOrReportBgColor(He){return this._setOrReportSpecialColor(He,1)}setOrReportCursorColor(He){return this._setOrReportSpecialColor(He,2)}restoreIndexedColor(He){if(!He)return this._onColor.fire([{type:2}]),!0;const We=[],qe=He.split(";");for(let Ke=0;Ke<qe.length;++Ke)if(/^\d+$/.exec(qe[Ke])){const st=parseInt(qe[Ke]);bt(st)&&We.push({type:2,index:st})}return We.length&&this._onColor.fire(We),!0}restoreFgColor(He){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(He){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(He){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,X.DEFAULT_CHARSET),!0}selectCharset(He){return He.length!==2?(this.selectDefaultCharset(),!0):(He[0]==="/"||this._charsetService.setgCharset(Ue[He[0]],X.CHARSETS[He[1]]||X.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const He=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,He,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=xe.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=xe.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(He){return this._charsetService.setgLevel(He),!0}screenAlignmentPattern(){const He=new ve.CellData;He.content=4194373,He.fg=this._curAttrData.fg,He.bg=this._curAttrData.bg,this._setCursor(0,0);for(let We=0;We<this._bufferService.rows;++We){const qe=this._activeBuffer.ybase+this._activeBuffer.y+We,Ke=this._activeBuffer.lines.get(qe);Ke&&(Ke.fill(He),Ke.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(He,We){const qe=this._bufferService.buffer,Ke=this._optionsService.rawOptions;return(st=>(this._coreService.triggerDataEvent(`${S.C0.ESC}${st}${S.C0.ESC}\\`),!0))(He==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:He==='"p'?'P1$r61;1"p':He==="r"?`P1$r${qe.scrollTop+1};${qe.scrollBottom+1}r`:He==="m"?"P1$r0m":He===" q"?`P1$r${{block:2,underline:4,bar:6}[Ke.cursorStyle]-(Ke.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(He,We){this._dirtyRowTracker.markRangeDirty(He,We)}}l.InputHandler=lt;let _t=class{constructor(rt){this._bufferService=rt,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(rt){rt<this.start?this.start=rt:rt>this.end&&(this.end=rt)}markRangeDirty(rt,He){rt>He&&(tt=rt,rt=He,He=tt),rt<this.start&&(this.start=rt),He>this.end&&(this.end=He)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function bt(rt){return 0<=rt&&rt<256}_t=m([y(0,De.IBufferService)],_t)},844:(u,l)=>{function d(m){for(const y of m)y.dispose();m.length=0}Object.defineProperty(l,"__esModule",{value:!0}),l.getDisposeArrayDisposable=l.disposeArray=l.toDisposable=l.MutableDisposable=l.Disposable=void 0,l.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const m of this._disposables)m.dispose();this._disposables.length=0}register(m){return this._disposables.push(m),m}unregister(m){const y=this._disposables.indexOf(m);y!==-1&&this._disposables.splice(y,1)}},l.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(m){var y;this._isDisposed||m===this._value||((y=this._value)==null||y.dispose(),this._value=m)}clear(){this.value=void 0}dispose(){var m;this._isDisposed=!0,(m=this._value)==null||m.dispose(),this._value=void 0}},l.toDisposable=function(m){return{dispose:m}},l.disposeArray=d,l.getDisposeArrayDisposable=function(m){return{dispose:()=>d(m)}}},1505:(u,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.FourKeyMap=l.TwoKeyMap=void 0;class d{constructor(){this._data={}}set(y,S,X){this._data[y]||(this._data[y]={}),this._data[y][S]=X}get(y,S){return this._data[y]?this._data[y][S]:void 0}clear(){this._data={}}}l.TwoKeyMap=d,l.FourKeyMap=class{constructor(){this._data=new d}set(m,y,S,X,he){this._data.get(m,y)||this._data.set(m,y,new d),this._data.get(m,y).set(S,X,he)}get(m,y,S,X){var he;return(he=this._data.get(m,y))==null?void 0:he.get(S,X)}clear(){this._data.clear()}}},6114:(u,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.isChromeOS=l.isLinux=l.isWindows=l.isIphone=l.isIpad=l.isMac=l.getSafariVersion=l.isSafari=l.isLegacyEdge=l.isFirefox=l.isNode=void 0,l.isNode=typeof process<"u"&&"title"in process;const d=l.isNode?"node":navigator.userAgent,m=l.isNode?"node":navigator.platform;l.isFirefox=d.includes("Firefox"),l.isLegacyEdge=d.includes("Edge"),l.isSafari=/^((?!chrome|android).)*safari/i.test(d),l.getSafariVersion=function(){if(!l.isSafari)return 0;const y=d.match(/Version\/(\d+)/);return y===null||y.length<2?0:parseInt(y[1])},l.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(m),l.isIpad=m==="iPad",l.isIphone=m==="iPhone",l.isWindows=["Windows","Win16","Win32","WinCE"].includes(m),l.isLinux=m.indexOf("Linux")>=0,l.isChromeOS=/\bCrOS\b/.test(d)},6106:(u,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.SortedList=void 0;let d=0;l.SortedList=class{constructor(m){this._getKey=m,this._array=[]}clear(){this._array.length=0}insert(m){this._array.length!==0?(d=this._search(this._getKey(m)),this._array.splice(d,0,m)):this._array.push(m)}delete(m){if(this._array.length===0)return!1;const y=this._getKey(m);if(y===void 0||(d=this._search(y),d===-1)||this._getKey(this._array[d])!==y)return!1;do if(this._array[d]===m)return this._array.splice(d,1),!0;while(++d<this._array.length&&this._getKey(this._array[d])===y);return!1}*getKeyIterator(m){if(this._array.length!==0&&(d=this._search(m),!(d<0||d>=this._array.length)&&this._getKey(this._array[d])===m))do yield this._array[d];while(++d<this._array.length&&this._getKey(this._array[d])===m)}forEachByKey(m,y){if(this._array.length!==0&&(d=this._search(m),!(d<0||d>=this._array.length)&&this._getKey(this._array[d])===m))do y(this._array[d]);while(++d<this._array.length&&this._getKey(this._array[d])===m)}values(){return[...this._array].values()}_search(m){let y=0,S=this._array.length-1;for(;S>=y;){let X=y+S>>1;const he=this._getKey(this._array[X]);if(he>m)S=X-1;else{if(!(he<m)){for(;X>0&&this._getKey(this._array[X-1])===m;)X--;return X}y=X+1}}return y}}},7226:(u,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DebouncedIdleTask=l.IdleTaskQueue=l.PriorityTaskQueue=void 0;const m=d(6114);class y{constructor(){this._tasks=[],this._i=0}enqueue(he){this._tasks.push(he),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(he){this._idleCallback=void 0;let Ce=0,Ee=0,xe=he.timeRemaining(),be=0;for(;this._i<this._tasks.length;){if(Ce=Date.now(),this._tasks[this._i]()||this._i++,Ce=Math.max(1,Date.now()-Ce),Ee=Math.max(Ce,Ee),be=he.timeRemaining(),1.5*Ee>be)return xe-Ce<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(xe-Ce))}ms`),void this._start();xe=be}this.clear()}}class S extends y{_requestCallback(he){return setTimeout(()=>he(this._createDeadline(16)))}_cancelCallback(he){clearTimeout(he)}_createDeadline(he){const Ce=Date.now()+he;return{timeRemaining:()=>Math.max(0,Ce-Date.now())}}}l.PriorityTaskQueue=S,l.IdleTaskQueue=!m.isNode&&"requestIdleCallback"in window?class extends y{_requestCallback(X){return requestIdleCallback(X)}_cancelCallback(X){cancelIdleCallback(X)}}:S,l.DebouncedIdleTask=class{constructor(){this._queue=new l.IdleTaskQueue}set(X){this._queue.clear(),this._queue.enqueue(X)}flush(){this._queue.flush()}}},9282:(u,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.updateWindowsModeWrappedState=void 0;const m=d(643);l.updateWindowsModeWrappedState=function(y){const S=y.buffer.lines.get(y.buffer.ybase+y.buffer.y-1),X=S==null?void 0:S.get(y.cols-1),he=y.buffer.lines.get(y.buffer.ybase+y.buffer.y);he&&X&&(he.isWrapped=X[m.CHAR_DATA_CODE_INDEX]!==m.NULL_CELL_CODE&&X[m.CHAR_DATA_CODE_INDEX]!==m.WHITESPACE_CELL_CODE)}},3734:(u,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ExtendedAttrs=l.AttributeData=void 0;class d{constructor(){this.fg=0,this.bg=0,this.extended=new m}static toColorRGB(S){return[S>>>16&255,S>>>8&255,255&S]}static fromColorRGB(S){return(255&S[0])<<16|(255&S[1])<<8|255&S[2]}clone(){const S=new d;return S.fg=this.fg,S.bg=this.bg,S.extended=this.extended.clone(),S}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}l.AttributeData=d;class m{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(S){this._ext=S}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(S){this._ext&=-469762049,this._ext|=S<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(S){this._ext&=-67108864,this._ext|=67108863&S}get urlId(){return this._urlId}set urlId(S){this._urlId=S}get underlineVariantOffset(){const S=(3758096384&this._ext)>>29;return S<0?4294967288^S:S}set underlineVariantOffset(S){this._ext&=536870911,this._ext|=S<<29&3758096384}constructor(S=0,X=0){this._ext=0,this._urlId=0,this._ext=S,this._urlId=X}clone(){return new m(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}l.ExtendedAttrs=m},9092:(u,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Buffer=l.MAX_BUFFER_SIZE=void 0;const m=d(6349),y=d(7226),S=d(3734),X=d(8437),he=d(4634),Ce=d(511),Ee=d(643),xe=d(4863),be=d(7116);l.MAX_BUFFER_SIZE=4294967295,l.Buffer=class{constructor(we,ve,ke){this._hasScrollback=we,this._optionsService=ve,this._bufferService=ke,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=X.DEFAULT_ATTR_DATA.clone(),this.savedCharset=be.DEFAULT_CHARSET,this.markers=[],this._nullCell=Ce.CellData.fromCharData([0,Ee.NULL_CELL_CHAR,Ee.NULL_CELL_WIDTH,Ee.NULL_CELL_CODE]),this._whitespaceCell=Ce.CellData.fromCharData([0,Ee.WHITESPACE_CELL_CHAR,Ee.WHITESPACE_CELL_WIDTH,Ee.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new y.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new m.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(we){return we?(this._nullCell.fg=we.fg,this._nullCell.bg=we.bg,this._nullCell.extended=we.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new S.ExtendedAttrs),this._nullCell}getWhitespaceCell(we){return we?(this._whitespaceCell.fg=we.fg,this._whitespaceCell.bg=we.bg,this._whitespaceCell.extended=we.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new S.ExtendedAttrs),this._whitespaceCell}getBlankLine(we,ve){return new X.BufferLine(this._bufferService.cols,this.getNullCell(we),ve)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const we=this.ybase+this.y-this.ydisp;return we>=0&&we<this._rows}_getCorrectBufferLength(we){if(!this._hasScrollback)return we;const ve=we+this._optionsService.rawOptions.scrollback;return ve>l.MAX_BUFFER_SIZE?l.MAX_BUFFER_SIZE:ve}fillViewportRows(we){if(this.lines.length===0){we===void 0&&(we=X.DEFAULT_ATTR_DATA);let ve=this._rows;for(;ve--;)this.lines.push(this.getBlankLine(we))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new m.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(we,ve){const ke=this.getNullCell(X.DEFAULT_ATTR_DATA);let De=0;const Oe=this._getCorrectBufferLength(ve);if(Oe>this.lines.maxLength&&(this.lines.maxLength=Oe),this.lines.length>0){if(this._cols<we)for(let Ae=0;Ae<this.lines.length;Ae++)De+=+this.lines.get(Ae).resize(we,ke);let Le=0;if(this._rows<ve)for(let Ae=this._rows;Ae<ve;Ae++)this.lines.length<ve+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new X.BufferLine(we,ke)):this.ybase>0&&this.lines.length<=this.ybase+this.y+Le+1?(this.ybase--,Le++,this.ydisp>0&&this.ydisp--):this.lines.push(new X.BufferLine(we,ke)));else for(let Ae=this._rows;Ae>ve;Ae--)this.lines.length>ve+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(Oe<this.lines.maxLength){const Ae=this.lines.length-Oe;Ae>0&&(this.lines.trimStart(Ae),this.ybase=Math.max(this.ybase-Ae,0),this.ydisp=Math.max(this.ydisp-Ae,0),this.savedY=Math.max(this.savedY-Ae,0)),this.lines.maxLength=Oe}this.x=Math.min(this.x,we-1),this.y=Math.min(this.y,ve-1),Le&&(this.y+=Le),this.savedX=Math.min(this.savedX,we-1),this.scrollTop=0}if(this.scrollBottom=ve-1,this._isReflowEnabled&&(this._reflow(we,ve),this._cols>we))for(let Le=0;Le<this.lines.length;Le++)De+=+this.lines.get(Le).resize(we,ke);this._cols=we,this._rows=ve,this._memoryCleanupQueue.clear(),De>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let we=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,we=!1);let ve=0;for(;this._memoryCleanupPosition<this.lines.length;)if(ve+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),ve>100)return!0;return we}get _isReflowEnabled(){const we=this._optionsService.rawOptions.windowsPty;return we&&we.buildNumber?this._hasScrollback&&we.backend==="conpty"&&we.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(we,ve){this._cols!==we&&(we>this._cols?this._reflowLarger(we,ve):this._reflowSmaller(we,ve))}_reflowLarger(we,ve){const ke=(0,he.reflowLargerGetLinesToRemove)(this.lines,this._cols,we,this.ybase+this.y,this.getNullCell(X.DEFAULT_ATTR_DATA));if(ke.length>0){const De=(0,he.reflowLargerCreateNewLayout)(this.lines,ke);(0,he.reflowLargerApplyNewLayout)(this.lines,De.layout),this._reflowLargerAdjustViewport(we,ve,De.countRemoved)}}_reflowLargerAdjustViewport(we,ve,ke){const De=this.getNullCell(X.DEFAULT_ATTR_DATA);let Oe=ke;for(;Oe-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<ve&&this.lines.push(new X.BufferLine(we,De))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-ke,0)}_reflowSmaller(we,ve){const ke=this.getNullCell(X.DEFAULT_ATTR_DATA),De=[];let Oe=0;for(let Le=this.lines.length-1;Le>=0;Le--){let Ae=this.lines.get(Le);if(!Ae||!Ae.isWrapped&&Ae.getTrimmedLength()<=we)continue;const Ie=[Ae];for(;Ae.isWrapped&&Le>0;)Ae=this.lines.get(--Le),Ie.unshift(Ae);const Ue=this.ybase+this.y;if(Ue>=Le&&Ue<Le+Ie.length)continue;const ze=Ie[Ie.length-1].getTrimmedLength(),Ye=(0,he.reflowSmallerGetNewLineLengths)(Ie,this._cols,we),Xe=Ye.length-Ie.length;let tt;tt=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+Xe):Math.max(0,this.lines.length-this.lines.maxLength+Xe);const lt=[];for(let qe=0;qe<Xe;qe++){const Ke=this.getBlankLine(X.DEFAULT_ATTR_DATA,!0);lt.push(Ke)}lt.length>0&&(De.push({start:Le+Ie.length+Oe,newLines:lt}),Oe+=lt.length),Ie.push(...lt);let _t=Ye.length-1,bt=Ye[_t];bt===0&&(_t--,bt=Ye[_t]);let rt=Ie.length-Xe-1,He=ze;for(;rt>=0;){const qe=Math.min(He,bt);if(Ie[_t]===void 0)break;if(Ie[_t].copyCellsFrom(Ie[rt],He-qe,bt-qe,qe,!0),bt-=qe,bt===0&&(_t--,bt=Ye[_t]),He-=qe,He===0){rt--;const Ke=Math.max(rt,0);He=(0,he.getWrappedLineTrimmedLength)(Ie,Ke,this._cols)}}for(let qe=0;qe<Ie.length;qe++)Ye[qe]<we&&Ie[qe].setCell(Ye[qe],ke);let We=Xe-tt;for(;We-- >0;)this.ybase===0?this.y<ve-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+Oe)-ve&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+Xe,this.ybase+ve-1)}if(De.length>0){const Le=[],Ae=[];for(let _t=0;_t<this.lines.length;_t++)Ae.push(this.lines.get(_t));const Ie=this.lines.length;let Ue=Ie-1,ze=0,Ye=De[ze];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+Oe);let Xe=0;for(let _t=Math.min(this.lines.maxLength-1,Ie+Oe-1);_t>=0;_t--)if(Ye&&Ye.start>Ue+Xe){for(let bt=Ye.newLines.length-1;bt>=0;bt--)this.lines.set(_t--,Ye.newLines[bt]);_t++,Le.push({index:Ue+1,amount:Ye.newLines.length}),Xe+=Ye.newLines.length,Ye=De[++ze]}else this.lines.set(_t,Ae[Ue--]);let tt=0;for(let _t=Le.length-1;_t>=0;_t--)Le[_t].index+=tt,this.lines.onInsertEmitter.fire(Le[_t]),tt+=Le[_t].amount;const lt=Math.max(0,Ie+Oe-this.lines.maxLength);lt>0&&this.lines.onTrimEmitter.fire(lt)}}translateBufferLineToString(we,ve,ke=0,De){const Oe=this.lines.get(we);return Oe?Oe.translateToString(ve,ke,De):""}getWrappedRangeForLine(we){let ve=we,ke=we;for(;ve>0&&this.lines.get(ve).isWrapped;)ve--;for(;ke+1<this.lines.length&&this.lines.get(ke+1).isWrapped;)ke++;return{first:ve,last:ke}}setupTabStops(we){for(we!=null?this.tabs[we]||(we=this.prevStop(we)):(this.tabs={},we=0);we<this._cols;we+=this._optionsService.rawOptions.tabStopWidth)this.tabs[we]=!0}prevStop(we){for(we==null&&(we=this.x);!this.tabs[--we]&&we>0;);return we>=this._cols?this._cols-1:we<0?0:we}nextStop(we){for(we==null&&(we=this.x);!this.tabs[++we]&&we<this._cols;);return we>=this._cols?this._cols-1:we<0?0:we}clearMarkers(we){this._isClearing=!0;for(let ve=0;ve<this.markers.length;ve++)this.markers[ve].line===we&&(this.markers[ve].dispose(),this.markers.splice(ve--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let we=0;we<this.markers.length;we++)this.markers[we].dispose(),this.markers.splice(we--,1);this._isClearing=!1}addMarker(we){const ve=new xe.Marker(we);return this.markers.push(ve),ve.register(this.lines.onTrim(ke=>{ve.line-=ke,ve.line<0&&ve.dispose()})),ve.register(this.lines.onInsert(ke=>{ve.line>=ke.index&&(ve.line+=ke.amount)})),ve.register(this.lines.onDelete(ke=>{ve.line>=ke.index&&ve.line<ke.index+ke.amount&&ve.dispose(),ve.line>ke.index&&(ve.line-=ke.amount)})),ve.register(ve.onDispose(()=>this._removeMarker(ve))),ve}_removeMarker(we){this._isClearing||this.markers.splice(this.markers.indexOf(we),1)}}},8437:(u,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferLine=l.DEFAULT_ATTR_DATA=void 0;const m=d(3734),y=d(511),S=d(643),X=d(482);l.DEFAULT_ATTR_DATA=Object.freeze(new m.AttributeData);let he=0;class Ce{constructor(xe,be,we=!1){this.isWrapped=we,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*xe);const ve=be||y.CellData.fromCharData([0,S.NULL_CELL_CHAR,S.NULL_CELL_WIDTH,S.NULL_CELL_CODE]);for(let ke=0;ke<xe;++ke)this.setCell(ke,ve);this.length=xe}get(xe){const be=this._data[3*xe+0],we=2097151&be;return[this._data[3*xe+1],2097152&be?this._combined[xe]:we?(0,X.stringFromCodePoint)(we):"",be>>22,2097152&be?this._combined[xe].charCodeAt(this._combined[xe].length-1):we]}set(xe,be){this._data[3*xe+1]=be[S.CHAR_DATA_ATTR_INDEX],be[S.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[xe]=be[1],this._data[3*xe+0]=2097152|xe|be[S.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*xe+0]=be[S.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|be[S.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(xe){return this._data[3*xe+0]>>22}hasWidth(xe){return 12582912&this._data[3*xe+0]}getFg(xe){return this._data[3*xe+1]}getBg(xe){return this._data[3*xe+2]}hasContent(xe){return 4194303&this._data[3*xe+0]}getCodePoint(xe){const be=this._data[3*xe+0];return 2097152&be?this._combined[xe].charCodeAt(this._combined[xe].length-1):2097151&be}isCombined(xe){return 2097152&this._data[3*xe+0]}getString(xe){const be=this._data[3*xe+0];return 2097152&be?this._combined[xe]:2097151&be?(0,X.stringFromCodePoint)(2097151&be):""}isProtected(xe){return 536870912&this._data[3*xe+2]}loadCell(xe,be){return he=3*xe,be.content=this._data[he+0],be.fg=this._data[he+1],be.bg=this._data[he+2],2097152&be.content&&(be.combinedData=this._combined[xe]),268435456&be.bg&&(be.extended=this._extendedAttrs[xe]),be}setCell(xe,be){2097152&be.content&&(this._combined[xe]=be.combinedData),268435456&be.bg&&(this._extendedAttrs[xe]=be.extended),this._data[3*xe+0]=be.content,this._data[3*xe+1]=be.fg,this._data[3*xe+2]=be.bg}setCellFromCodepoint(xe,be,we,ve){268435456&ve.bg&&(this._extendedAttrs[xe]=ve.extended),this._data[3*xe+0]=be|we<<22,this._data[3*xe+1]=ve.fg,this._data[3*xe+2]=ve.bg}addCodepointToCell(xe,be,we){let ve=this._data[3*xe+0];2097152&ve?this._combined[xe]+=(0,X.stringFromCodePoint)(be):2097151&ve?(this._combined[xe]=(0,X.stringFromCodePoint)(2097151&ve)+(0,X.stringFromCodePoint)(be),ve&=-2097152,ve|=2097152):ve=be|4194304,we&&(ve&=-12582913,ve|=we<<22),this._data[3*xe+0]=ve}insertCells(xe,be,we){if((xe%=this.length)&&this.getWidth(xe-1)===2&&this.setCellFromCodepoint(xe-1,0,1,we),be<this.length-xe){const ve=new y.CellData;for(let ke=this.length-xe-be-1;ke>=0;--ke)this.setCell(xe+be+ke,this.loadCell(xe+ke,ve));for(let ke=0;ke<be;++ke)this.setCell(xe+ke,we)}else for(let ve=xe;ve<this.length;++ve)this.setCell(ve,we);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,we)}deleteCells(xe,be,we){if(xe%=this.length,be<this.length-xe){const ve=new y.CellData;for(let ke=0;ke<this.length-xe-be;++ke)this.setCell(xe+ke,this.loadCell(xe+be+ke,ve));for(let ke=this.length-be;ke<this.length;++ke)this.setCell(ke,we)}else for(let ve=xe;ve<this.length;++ve)this.setCell(ve,we);xe&&this.getWidth(xe-1)===2&&this.setCellFromCodepoint(xe-1,0,1,we),this.getWidth(xe)!==0||this.hasContent(xe)||this.setCellFromCodepoint(xe,0,1,we)}replaceCells(xe,be,we,ve=!1){if(ve)for(xe&&this.getWidth(xe-1)===2&&!this.isProtected(xe-1)&&this.setCellFromCodepoint(xe-1,0,1,we),be<this.length&&this.getWidth(be-1)===2&&!this.isProtected(be)&&this.setCellFromCodepoint(be,0,1,we);xe<be&&xe<this.length;)this.isProtected(xe)||this.setCell(xe,we),xe++;else for(xe&&this.getWidth(xe-1)===2&&this.setCellFromCodepoint(xe-1,0,1,we),be<this.length&&this.getWidth(be-1)===2&&this.setCellFromCodepoint(be,0,1,we);xe<be&&xe<this.length;)this.setCell(xe++,we)}resize(xe,be){if(xe===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const we=3*xe;if(xe>this.length){if(this._data.buffer.byteLength>=4*we)this._data=new Uint32Array(this._data.buffer,0,we);else{const ve=new Uint32Array(we);ve.set(this._data),this._data=ve}for(let ve=this.length;ve<xe;++ve)this.setCell(ve,be)}else{this._data=this._data.subarray(0,we);const ve=Object.keys(this._combined);for(let De=0;De<ve.length;De++){const Oe=parseInt(ve[De],10);Oe>=xe&&delete this._combined[Oe]}const ke=Object.keys(this._extendedAttrs);for(let De=0;De<ke.length;De++){const Oe=parseInt(ke[De],10);Oe>=xe&&delete this._extendedAttrs[Oe]}}return this.length=xe,4*we*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const xe=new Uint32Array(this._data.length);return xe.set(this._data),this._data=xe,1}return 0}fill(xe,be=!1){if(be)for(let we=0;we<this.length;++we)this.isProtected(we)||this.setCell(we,xe);else{this._combined={},this._extendedAttrs={};for(let we=0;we<this.length;++we)this.setCell(we,xe)}}copyFrom(xe){this.length!==xe.length?this._data=new Uint32Array(xe._data):this._data.set(xe._data),this.length=xe.length,this._combined={};for(const be in xe._combined)this._combined[be]=xe._combined[be];this._extendedAttrs={};for(const be in xe._extendedAttrs)this._extendedAttrs[be]=xe._extendedAttrs[be];this.isWrapped=xe.isWrapped}clone(){const xe=new Ce(0);xe._data=new Uint32Array(this._data),xe.length=this.length;for(const be in this._combined)xe._combined[be]=this._combined[be];for(const be in this._extendedAttrs)xe._extendedAttrs[be]=this._extendedAttrs[be];return xe.isWrapped=this.isWrapped,xe}getTrimmedLength(){for(let xe=this.length-1;xe>=0;--xe)if(4194303&this._data[3*xe+0])return xe+(this._data[3*xe+0]>>22);return 0}getNoBgTrimmedLength(){for(let xe=this.length-1;xe>=0;--xe)if(4194303&this._data[3*xe+0]||50331648&this._data[3*xe+2])return xe+(this._data[3*xe+0]>>22);return 0}copyCellsFrom(xe,be,we,ve,ke){const De=xe._data;if(ke)for(let Le=ve-1;Le>=0;Le--){for(let Ae=0;Ae<3;Ae++)this._data[3*(we+Le)+Ae]=De[3*(be+Le)+Ae];268435456&De[3*(be+Le)+2]&&(this._extendedAttrs[we+Le]=xe._extendedAttrs[be+Le])}else for(let Le=0;Le<ve;Le++){for(let Ae=0;Ae<3;Ae++)this._data[3*(we+Le)+Ae]=De[3*(be+Le)+Ae];268435456&De[3*(be+Le)+2]&&(this._extendedAttrs[we+Le]=xe._extendedAttrs[be+Le])}const Oe=Object.keys(xe._combined);for(let Le=0;Le<Oe.length;Le++){const Ae=parseInt(Oe[Le],10);Ae>=be&&(this._combined[Ae-be+we]=xe._combined[Ae])}}translateToString(xe,be,we,ve){be=be??0,we=we??this.length,xe&&(we=Math.min(we,this.getTrimmedLength())),ve&&(ve.length=0);let ke="";for(;be<we;){const De=this._data[3*be+0],Oe=2097151&De,Le=2097152&De?this._combined[be]:Oe?(0,X.stringFromCodePoint)(Oe):S.WHITESPACE_CELL_CHAR;if(ke+=Le,ve)for(let Ae=0;Ae<Le.length;++Ae)ve.push(be);be+=De>>22||1}return ve&&ve.push(be),ke}}l.BufferLine=Ce},4841:(u,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.getRangeLength=void 0,l.getRangeLength=function(d,m){if(d.start.y>d.end.y)throw new Error(`Buffer range end (${d.end.x}, ${d.end.y}) cannot be before start (${d.start.x}, ${d.start.y})`);return m*(d.end.y-d.start.y)+(d.end.x-d.start.x+1)}},4634:(u,l)=>{function d(m,y,S){if(y===m.length-1)return m[y].getTrimmedLength();const X=!m[y].hasContent(S-1)&&m[y].getWidth(S-1)===1,he=m[y+1].getWidth(0)===2;return X&&he?S-1:S}Object.defineProperty(l,"__esModule",{value:!0}),l.getWrappedLineTrimmedLength=l.reflowSmallerGetNewLineLengths=l.reflowLargerApplyNewLayout=l.reflowLargerCreateNewLayout=l.reflowLargerGetLinesToRemove=void 0,l.reflowLargerGetLinesToRemove=function(m,y,S,X,he){const Ce=[];for(let Ee=0;Ee<m.length-1;Ee++){let xe=Ee,be=m.get(++xe);if(!be.isWrapped)continue;const we=[m.get(Ee)];for(;xe<m.length&&be.isWrapped;)we.push(be),be=m.get(++xe);if(X>=Ee&&X<xe){Ee+=we.length-1;continue}let ve=0,ke=d(we,ve,y),De=1,Oe=0;for(;De<we.length;){const Ae=d(we,De,y),Ie=Ae-Oe,Ue=S-ke,ze=Math.min(Ie,Ue);we[ve].copyCellsFrom(we[De],Oe,ke,ze,!1),ke+=ze,ke===S&&(ve++,ke=0),Oe+=ze,Oe===Ae&&(De++,Oe=0),ke===0&&ve!==0&&we[ve-1].getWidth(S-1)===2&&(we[ve].copyCellsFrom(we[ve-1],S-1,ke++,1,!1),we[ve-1].setCell(S-1,he))}we[ve].replaceCells(ke,S,he);let Le=0;for(let Ae=we.length-1;Ae>0&&(Ae>ve||we[Ae].getTrimmedLength()===0);Ae--)Le++;Le>0&&(Ce.push(Ee+we.length-Le),Ce.push(Le)),Ee+=we.length-1}return Ce},l.reflowLargerCreateNewLayout=function(m,y){const S=[];let X=0,he=y[X],Ce=0;for(let Ee=0;Ee<m.length;Ee++)if(he===Ee){const xe=y[++X];m.onDeleteEmitter.fire({index:Ee-Ce,amount:xe}),Ee+=xe-1,Ce+=xe,he=y[++X]}else S.push(Ee);return{layout:S,countRemoved:Ce}},l.reflowLargerApplyNewLayout=function(m,y){const S=[];for(let X=0;X<y.length;X++)S.push(m.get(y[X]));for(let X=0;X<S.length;X++)m.set(X,S[X]);m.length=y.length},l.reflowSmallerGetNewLineLengths=function(m,y,S){const X=[],he=m.map((be,we)=>d(m,we,y)).reduce((be,we)=>be+we);let Ce=0,Ee=0,xe=0;for(;xe<he;){if(he-xe<S){X.push(he-xe);break}Ce+=S;const be=d(m,Ee,y);Ce>be&&(Ce-=be,Ee++);const we=m[Ee].getWidth(Ce-1)===2;we&&Ce--;const ve=we?S-1:S;X.push(ve),xe+=ve}return X},l.getWrappedLineTrimmedLength=d},5295:(u,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferSet=void 0;const m=d(8460),y=d(844),S=d(9092);class X extends y.Disposable{constructor(Ce,Ee){super(),this._optionsService=Ce,this._bufferService=Ee,this._onBufferActivate=this.register(new m.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new S.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new S.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(Ce){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(Ce),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(Ce,Ee){this._normal.resize(Ce,Ee),this._alt.resize(Ce,Ee),this.setupTabStops(Ce)}setupTabStops(Ce){this._normal.setupTabStops(Ce),this._alt.setupTabStops(Ce)}}l.BufferSet=X},511:(u,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CellData=void 0;const m=d(482),y=d(643),S=d(3734);class X extends S.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new S.ExtendedAttrs,this.combinedData=""}static fromCharData(Ce){const Ee=new X;return Ee.setFromCharData(Ce),Ee}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,m.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(Ce){this.fg=Ce[y.CHAR_DATA_ATTR_INDEX],this.bg=0;let Ee=!1;if(Ce[y.CHAR_DATA_CHAR_INDEX].length>2)Ee=!0;else if(Ce[y.CHAR_DATA_CHAR_INDEX].length===2){const xe=Ce[y.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=xe&&xe<=56319){const be=Ce[y.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=be&&be<=57343?this.content=1024*(xe-55296)+be-56320+65536|Ce[y.CHAR_DATA_WIDTH_INDEX]<<22:Ee=!0}else Ee=!0}else this.content=Ce[y.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|Ce[y.CHAR_DATA_WIDTH_INDEX]<<22;Ee&&(this.combinedData=Ce[y.CHAR_DATA_CHAR_INDEX],this.content=2097152|Ce[y.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}l.CellData=X},643:(u,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.WHITESPACE_CELL_CODE=l.WHITESPACE_CELL_WIDTH=l.WHITESPACE_CELL_CHAR=l.NULL_CELL_CODE=l.NULL_CELL_WIDTH=l.NULL_CELL_CHAR=l.CHAR_DATA_CODE_INDEX=l.CHAR_DATA_WIDTH_INDEX=l.CHAR_DATA_CHAR_INDEX=l.CHAR_DATA_ATTR_INDEX=l.DEFAULT_EXT=l.DEFAULT_ATTR=l.DEFAULT_COLOR=void 0,l.DEFAULT_COLOR=0,l.DEFAULT_ATTR=256|l.DEFAULT_COLOR<<9,l.DEFAULT_EXT=0,l.CHAR_DATA_ATTR_INDEX=0,l.CHAR_DATA_CHAR_INDEX=1,l.CHAR_DATA_WIDTH_INDEX=2,l.CHAR_DATA_CODE_INDEX=3,l.NULL_CELL_CHAR="",l.NULL_CELL_WIDTH=1,l.NULL_CELL_CODE=0,l.WHITESPACE_CELL_CHAR=" ",l.WHITESPACE_CELL_WIDTH=1,l.WHITESPACE_CELL_CODE=32},4863:(u,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Marker=void 0;const m=d(8460),y=d(844);class S{get id(){return this._id}constructor(he){this.line=he,this.isDisposed=!1,this._disposables=[],this._id=S._nextId++,this._onDispose=this.register(new m.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,y.disposeArray)(this._disposables),this._disposables.length=0)}register(he){return this._disposables.push(he),he}}l.Marker=S,S._nextId=1},7116:(u,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DEFAULT_CHARSET=l.CHARSETS=void 0,l.CHARSETS={},l.DEFAULT_CHARSET=l.CHARSETS.B,l.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},l.CHARSETS.A={"#":""},l.CHARSETS.B=void 0,l.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},l.CHARSETS.C=l.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},l.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},l.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},l.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},l.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},l.CHARSETS.E=l.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},l.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},l.CHARSETS.H=l.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},l.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(u,l)=>{var d,m,y;Object.defineProperty(l,"__esModule",{value:!0}),l.C1_ESCAPED=l.C1=l.C0=void 0,function(S){S.NUL="\0",S.SOH="",S.STX="",S.ETX="",S.EOT="",S.ENQ="",S.ACK="",S.BEL="\x07",S.BS="\b",S.HT="	",S.LF=`
`,S.VT="\v",S.FF="\f",S.CR="\r",S.SO="",S.SI="",S.DLE="",S.DC1="",S.DC2="",S.DC3="",S.DC4="",S.NAK="",S.SYN="",S.ETB="",S.CAN="",S.EM="",S.SUB="",S.ESC="\x1B",S.FS="",S.GS="",S.RS="",S.US="",S.SP=" ",S.DEL=""}(d||(l.C0=d={})),function(S){S.PAD="",S.HOP="",S.BPH="",S.NBH="",S.IND="",S.NEL="",S.SSA="",S.ESA="",S.HTS="",S.HTJ="",S.VTS="",S.PLD="",S.PLU="",S.RI="",S.SS2="",S.SS3="",S.DCS="",S.PU1="",S.PU2="",S.STS="",S.CCH="",S.MW="",S.SPA="",S.EPA="",S.SOS="",S.SGCI="",S.SCI="",S.CSI="",S.ST="",S.OSC="",S.PM="",S.APC=""}(m||(l.C1=m={})),function(S){S.ST=`${d.ESC}\\`}(y||(l.C1_ESCAPED=y={}))},7399:(u,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.evaluateKeyboardEvent=void 0;const m=d(2584),y={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};l.evaluateKeyboardEvent=function(S,X,he,Ce){const Ee={type:0,cancel:!1,key:void 0},xe=(S.shiftKey?1:0)|(S.altKey?2:0)|(S.ctrlKey?4:0)|(S.metaKey?8:0);switch(S.keyCode){case 0:S.key==="UIKeyInputUpArrow"?Ee.key=X?m.C0.ESC+"OA":m.C0.ESC+"[A":S.key==="UIKeyInputLeftArrow"?Ee.key=X?m.C0.ESC+"OD":m.C0.ESC+"[D":S.key==="UIKeyInputRightArrow"?Ee.key=X?m.C0.ESC+"OC":m.C0.ESC+"[C":S.key==="UIKeyInputDownArrow"&&(Ee.key=X?m.C0.ESC+"OB":m.C0.ESC+"[B");break;case 8:Ee.key=S.ctrlKey?"\b":m.C0.DEL,S.altKey&&(Ee.key=m.C0.ESC+Ee.key);break;case 9:if(S.shiftKey){Ee.key=m.C0.ESC+"[Z";break}Ee.key=m.C0.HT,Ee.cancel=!0;break;case 13:Ee.key=S.altKey?m.C0.ESC+m.C0.CR:m.C0.CR,Ee.cancel=!0;break;case 27:Ee.key=m.C0.ESC,S.altKey&&(Ee.key=m.C0.ESC+m.C0.ESC),Ee.cancel=!0;break;case 37:if(S.metaKey)break;xe?(Ee.key=m.C0.ESC+"[1;"+(xe+1)+"D",Ee.key===m.C0.ESC+"[1;3D"&&(Ee.key=m.C0.ESC+(he?"b":"[1;5D"))):Ee.key=X?m.C0.ESC+"OD":m.C0.ESC+"[D";break;case 39:if(S.metaKey)break;xe?(Ee.key=m.C0.ESC+"[1;"+(xe+1)+"C",Ee.key===m.C0.ESC+"[1;3C"&&(Ee.key=m.C0.ESC+(he?"f":"[1;5C"))):Ee.key=X?m.C0.ESC+"OC":m.C0.ESC+"[C";break;case 38:if(S.metaKey)break;xe?(Ee.key=m.C0.ESC+"[1;"+(xe+1)+"A",he||Ee.key!==m.C0.ESC+"[1;3A"||(Ee.key=m.C0.ESC+"[1;5A")):Ee.key=X?m.C0.ESC+"OA":m.C0.ESC+"[A";break;case 40:if(S.metaKey)break;xe?(Ee.key=m.C0.ESC+"[1;"+(xe+1)+"B",he||Ee.key!==m.C0.ESC+"[1;3B"||(Ee.key=m.C0.ESC+"[1;5B")):Ee.key=X?m.C0.ESC+"OB":m.C0.ESC+"[B";break;case 45:S.shiftKey||S.ctrlKey||(Ee.key=m.C0.ESC+"[2~");break;case 46:Ee.key=xe?m.C0.ESC+"[3;"+(xe+1)+"~":m.C0.ESC+"[3~";break;case 36:Ee.key=xe?m.C0.ESC+"[1;"+(xe+1)+"H":X?m.C0.ESC+"OH":m.C0.ESC+"[H";break;case 35:Ee.key=xe?m.C0.ESC+"[1;"+(xe+1)+"F":X?m.C0.ESC+"OF":m.C0.ESC+"[F";break;case 33:S.shiftKey?Ee.type=2:S.ctrlKey?Ee.key=m.C0.ESC+"[5;"+(xe+1)+"~":Ee.key=m.C0.ESC+"[5~";break;case 34:S.shiftKey?Ee.type=3:S.ctrlKey?Ee.key=m.C0.ESC+"[6;"+(xe+1)+"~":Ee.key=m.C0.ESC+"[6~";break;case 112:Ee.key=xe?m.C0.ESC+"[1;"+(xe+1)+"P":m.C0.ESC+"OP";break;case 113:Ee.key=xe?m.C0.ESC+"[1;"+(xe+1)+"Q":m.C0.ESC+"OQ";break;case 114:Ee.key=xe?m.C0.ESC+"[1;"+(xe+1)+"R":m.C0.ESC+"OR";break;case 115:Ee.key=xe?m.C0.ESC+"[1;"+(xe+1)+"S":m.C0.ESC+"OS";break;case 116:Ee.key=xe?m.C0.ESC+"[15;"+(xe+1)+"~":m.C0.ESC+"[15~";break;case 117:Ee.key=xe?m.C0.ESC+"[17;"+(xe+1)+"~":m.C0.ESC+"[17~";break;case 118:Ee.key=xe?m.C0.ESC+"[18;"+(xe+1)+"~":m.C0.ESC+"[18~";break;case 119:Ee.key=xe?m.C0.ESC+"[19;"+(xe+1)+"~":m.C0.ESC+"[19~";break;case 120:Ee.key=xe?m.C0.ESC+"[20;"+(xe+1)+"~":m.C0.ESC+"[20~";break;case 121:Ee.key=xe?m.C0.ESC+"[21;"+(xe+1)+"~":m.C0.ESC+"[21~";break;case 122:Ee.key=xe?m.C0.ESC+"[23;"+(xe+1)+"~":m.C0.ESC+"[23~";break;case 123:Ee.key=xe?m.C0.ESC+"[24;"+(xe+1)+"~":m.C0.ESC+"[24~";break;default:if(!S.ctrlKey||S.shiftKey||S.altKey||S.metaKey)if(he&&!Ce||!S.altKey||S.metaKey)!he||S.altKey||S.ctrlKey||S.shiftKey||!S.metaKey?S.key&&!S.ctrlKey&&!S.altKey&&!S.metaKey&&S.keyCode>=48&&S.key.length===1?Ee.key=S.key:S.key&&S.ctrlKey&&(S.key==="_"&&(Ee.key=m.C0.US),S.key==="@"&&(Ee.key=m.C0.NUL)):S.keyCode===65&&(Ee.type=1);else{const be=y[S.keyCode],we=be==null?void 0:be[S.shiftKey?1:0];if(we)Ee.key=m.C0.ESC+we;else if(S.keyCode>=65&&S.keyCode<=90){const ve=S.ctrlKey?S.keyCode-64:S.keyCode+32;let ke=String.fromCharCode(ve);S.shiftKey&&(ke=ke.toUpperCase()),Ee.key=m.C0.ESC+ke}else if(S.keyCode===32)Ee.key=m.C0.ESC+(S.ctrlKey?m.C0.NUL:" ");else if(S.key==="Dead"&&S.code.startsWith("Key")){let ve=S.code.slice(3,4);S.shiftKey||(ve=ve.toLowerCase()),Ee.key=m.C0.ESC+ve,Ee.cancel=!0}}else S.keyCode>=65&&S.keyCode<=90?Ee.key=String.fromCharCode(S.keyCode-64):S.keyCode===32?Ee.key=m.C0.NUL:S.keyCode>=51&&S.keyCode<=55?Ee.key=String.fromCharCode(S.keyCode-51+27):S.keyCode===56?Ee.key=m.C0.DEL:S.keyCode===219?Ee.key=m.C0.ESC:S.keyCode===220?Ee.key=m.C0.FS:S.keyCode===221&&(Ee.key=m.C0.GS)}return Ee}},482:(u,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Utf8ToUtf32=l.StringToUtf32=l.utf32ToString=l.stringFromCodePoint=void 0,l.stringFromCodePoint=function(d){return d>65535?(d-=65536,String.fromCharCode(55296+(d>>10))+String.fromCharCode(d%1024+56320)):String.fromCharCode(d)},l.utf32ToString=function(d,m=0,y=d.length){let S="";for(let X=m;X<y;++X){let he=d[X];he>65535?(he-=65536,S+=String.fromCharCode(55296+(he>>10))+String.fromCharCode(he%1024+56320)):S+=String.fromCharCode(he)}return S},l.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(d,m){const y=d.length;if(!y)return 0;let S=0,X=0;if(this._interim){const he=d.charCodeAt(X++);56320<=he&&he<=57343?m[S++]=1024*(this._interim-55296)+he-56320+65536:(m[S++]=this._interim,m[S++]=he),this._interim=0}for(let he=X;he<y;++he){const Ce=d.charCodeAt(he);if(55296<=Ce&&Ce<=56319){if(++he>=y)return this._interim=Ce,S;const Ee=d.charCodeAt(he);56320<=Ee&&Ee<=57343?m[S++]=1024*(Ce-55296)+Ee-56320+65536:(m[S++]=Ce,m[S++]=Ee)}else Ce!==65279&&(m[S++]=Ce)}return S}},l.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(d,m){const y=d.length;if(!y)return 0;let S,X,he,Ce,Ee=0,xe=0,be=0;if(this.interim[0]){let ke=!1,De=this.interim[0];De&=(224&De)==192?31:(240&De)==224?15:7;let Oe,Le=0;for(;(Oe=63&this.interim[++Le])&&Le<4;)De<<=6,De|=Oe;const Ae=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,Ie=Ae-Le;for(;be<Ie;){if(be>=y)return 0;if(Oe=d[be++],(192&Oe)!=128){be--,ke=!0;break}this.interim[Le++]=Oe,De<<=6,De|=63&Oe}ke||(Ae===2?De<128?be--:m[Ee++]=De:Ae===3?De<2048||De>=55296&&De<=57343||De===65279||(m[Ee++]=De):De<65536||De>1114111||(m[Ee++]=De)),this.interim.fill(0)}const we=y-4;let ve=be;for(;ve<y;){for(;!(!(ve<we)||128&(S=d[ve])||128&(X=d[ve+1])||128&(he=d[ve+2])||128&(Ce=d[ve+3]));)m[Ee++]=S,m[Ee++]=X,m[Ee++]=he,m[Ee++]=Ce,ve+=4;if(S=d[ve++],S<128)m[Ee++]=S;else if((224&S)==192){if(ve>=y)return this.interim[0]=S,Ee;if(X=d[ve++],(192&X)!=128){ve--;continue}if(xe=(31&S)<<6|63&X,xe<128){ve--;continue}m[Ee++]=xe}else if((240&S)==224){if(ve>=y)return this.interim[0]=S,Ee;if(X=d[ve++],(192&X)!=128){ve--;continue}if(ve>=y)return this.interim[0]=S,this.interim[1]=X,Ee;if(he=d[ve++],(192&he)!=128){ve--;continue}if(xe=(15&S)<<12|(63&X)<<6|63&he,xe<2048||xe>=55296&&xe<=57343||xe===65279)continue;m[Ee++]=xe}else if((248&S)==240){if(ve>=y)return this.interim[0]=S,Ee;if(X=d[ve++],(192&X)!=128){ve--;continue}if(ve>=y)return this.interim[0]=S,this.interim[1]=X,Ee;if(he=d[ve++],(192&he)!=128){ve--;continue}if(ve>=y)return this.interim[0]=S,this.interim[1]=X,this.interim[2]=he,Ee;if(Ce=d[ve++],(192&Ce)!=128){ve--;continue}if(xe=(7&S)<<18|(63&X)<<12|(63&he)<<6|63&Ce,xe<65536||xe>1114111)continue;m[Ee++]=xe}}return Ee}}},225:(u,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.UnicodeV6=void 0;const m=d(1480),y=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],S=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let X;l.UnicodeV6=class{constructor(){if(this.version="6",!X){X=new Uint8Array(65536),X.fill(1),X[0]=0,X.fill(0,1,32),X.fill(0,127,160),X.fill(2,4352,4448),X[9001]=2,X[9002]=2,X.fill(2,11904,42192),X[12351]=1,X.fill(2,44032,55204),X.fill(2,63744,64256),X.fill(2,65040,65050),X.fill(2,65072,65136),X.fill(2,65280,65377),X.fill(2,65504,65511);for(let he=0;he<y.length;++he)X.fill(0,y[he][0],y[he][1]+1)}}wcwidth(he){return he<32?0:he<127?1:he<65536?X[he]:function(Ce,Ee){let xe,be=0,we=Ee.length-1;if(Ce<Ee[0][0]||Ce>Ee[we][1])return!1;for(;we>=be;)if(xe=be+we>>1,Ce>Ee[xe][1])be=xe+1;else{if(!(Ce<Ee[xe][0]))return!0;we=xe-1}return!1}(he,S)?0:he>=131072&&he<=196605||he>=196608&&he<=262141?2:1}charProperties(he,Ce){let Ee=this.wcwidth(he),xe=Ee===0&&Ce!==0;if(xe){const be=m.UnicodeService.extractWidth(Ce);be===0?xe=!1:be>Ee&&(Ee=be)}return m.UnicodeService.createPropertyValue(0,Ee,xe)}}},5981:(u,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.WriteBuffer=void 0;const m=d(8460),y=d(844);class S extends y.Disposable{constructor(he){super(),this._action=he,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new m.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(he,Ce){if(Ce!==void 0&&this._syncCalls>Ce)return void(this._syncCalls=0);if(this._pendingData+=he.length,this._writeBuffer.push(he),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let Ee;for(this._isSyncWriting=!0;Ee=this._writeBuffer.shift();){this._action(Ee);const xe=this._callbacks.shift();xe&&xe()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(he,Ce){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=he.length,this._writeBuffer.push(he),this._callbacks.push(Ce),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=he.length,this._writeBuffer.push(he),this._callbacks.push(Ce)}_innerWrite(he=0,Ce=!0){const Ee=he||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const xe=this._writeBuffer[this._bufferOffset],be=this._action(xe,Ce);if(be){const ve=ke=>Date.now()-Ee>=12?setTimeout(()=>this._innerWrite(0,ke)):this._innerWrite(Ee,ke);return void be.catch(ke=>(queueMicrotask(()=>{throw ke}),Promise.resolve(!1))).then(ve)}const we=this._callbacks[this._bufferOffset];if(we&&we(),this._bufferOffset++,this._pendingData-=xe.length,Date.now()-Ee>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}l.WriteBuffer=S},5941:(u,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.toRgbString=l.parseColor=void 0;const d=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,m=/^[\da-f]+$/;function y(S,X){const he=S.toString(16),Ce=he.length<2?"0"+he:he;switch(X){case 4:return he[0];case 8:return Ce;case 12:return(Ce+Ce).slice(0,3);default:return Ce+Ce}}l.parseColor=function(S){if(!S)return;let X=S.toLowerCase();if(X.indexOf("rgb:")===0){X=X.slice(4);const he=d.exec(X);if(he){const Ce=he[1]?15:he[4]?255:he[7]?4095:65535;return[Math.round(parseInt(he[1]||he[4]||he[7]||he[10],16)/Ce*255),Math.round(parseInt(he[2]||he[5]||he[8]||he[11],16)/Ce*255),Math.round(parseInt(he[3]||he[6]||he[9]||he[12],16)/Ce*255)]}}else if(X.indexOf("#")===0&&(X=X.slice(1),m.exec(X)&&[3,6,9,12].includes(X.length))){const he=X.length/3,Ce=[0,0,0];for(let Ee=0;Ee<3;++Ee){const xe=parseInt(X.slice(he*Ee,he*Ee+he),16);Ce[Ee]=he===1?xe<<4:he===2?xe:he===3?xe>>4:xe>>8}return Ce}},l.toRgbString=function(S,X=16){const[he,Ce,Ee]=S;return`rgb:${y(he,X)}/${y(Ce,X)}/${y(Ee,X)}`}},5770:(u,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.PAYLOAD_LIMIT=void 0,l.PAYLOAD_LIMIT=1e7},6351:(u,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DcsHandler=l.DcsParser=void 0;const m=d(482),y=d(8742),S=d(5770),X=[];l.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=X,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=X}registerHandler(Ce,Ee){this._handlers[Ce]===void 0&&(this._handlers[Ce]=[]);const xe=this._handlers[Ce];return xe.push(Ee),{dispose:()=>{const be=xe.indexOf(Ee);be!==-1&&xe.splice(be,1)}}}clearHandler(Ce){this._handlers[Ce]&&delete this._handlers[Ce]}setHandlerFallback(Ce){this._handlerFb=Ce}reset(){if(this._active.length)for(let Ce=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;Ce>=0;--Ce)this._active[Ce].unhook(!1);this._stack.paused=!1,this._active=X,this._ident=0}hook(Ce,Ee){if(this.reset(),this._ident=Ce,this._active=this._handlers[Ce]||X,this._active.length)for(let xe=this._active.length-1;xe>=0;xe--)this._active[xe].hook(Ee);else this._handlerFb(this._ident,"HOOK",Ee)}put(Ce,Ee,xe){if(this._active.length)for(let be=this._active.length-1;be>=0;be--)this._active[be].put(Ce,Ee,xe);else this._handlerFb(this._ident,"PUT",(0,m.utf32ToString)(Ce,Ee,xe))}unhook(Ce,Ee=!0){if(this._active.length){let xe=!1,be=this._active.length-1,we=!1;if(this._stack.paused&&(be=this._stack.loopPosition-1,xe=Ee,we=this._stack.fallThrough,this._stack.paused=!1),!we&&xe===!1){for(;be>=0&&(xe=this._active[be].unhook(Ce),xe!==!0);be--)if(xe instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=be,this._stack.fallThrough=!1,xe;be--}for(;be>=0;be--)if(xe=this._active[be].unhook(!1),xe instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=be,this._stack.fallThrough=!0,xe}else this._handlerFb(this._ident,"UNHOOK",Ce);this._active=X,this._ident=0}};const he=new y.Params;he.addParam(0),l.DcsHandler=class{constructor(Ce){this._handler=Ce,this._data="",this._params=he,this._hitLimit=!1}hook(Ce){this._params=Ce.length>1||Ce.params[0]?Ce.clone():he,this._data="",this._hitLimit=!1}put(Ce,Ee,xe){this._hitLimit||(this._data+=(0,m.utf32ToString)(Ce,Ee,xe),this._data.length>S.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(Ce){let Ee=!1;if(this._hitLimit)Ee=!1;else if(Ce&&(Ee=this._handler(this._data,this._params),Ee instanceof Promise))return Ee.then(xe=>(this._params=he,this._data="",this._hitLimit=!1,xe));return this._params=he,this._data="",this._hitLimit=!1,Ee}}},2015:(u,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.EscapeSequenceParser=l.VT500_TRANSITION_TABLE=l.TransitionTable=void 0;const m=d(844),y=d(8742),S=d(6242),X=d(6351);class he{constructor(be){this.table=new Uint8Array(be)}setDefault(be,we){this.table.fill(be<<4|we)}add(be,we,ve,ke){this.table[we<<8|be]=ve<<4|ke}addMany(be,we,ve,ke){for(let De=0;De<be.length;De++)this.table[we<<8|be[De]]=ve<<4|ke}}l.TransitionTable=he;const Ce=160;l.VT500_TRANSITION_TABLE=function(){const xe=new he(4095),be=Array.apply(null,Array(256)).map((Le,Ae)=>Ae),we=(Le,Ae)=>be.slice(Le,Ae),ve=we(32,127),ke=we(0,24);ke.push(25),ke.push.apply(ke,we(28,32));const De=we(0,14);let Oe;for(Oe in xe.setDefault(1,0),xe.addMany(ve,0,2,0),De)xe.addMany([24,26,153,154],Oe,3,0),xe.addMany(we(128,144),Oe,3,0),xe.addMany(we(144,152),Oe,3,0),xe.add(156,Oe,0,0),xe.add(27,Oe,11,1),xe.add(157,Oe,4,8),xe.addMany([152,158,159],Oe,0,7),xe.add(155,Oe,11,3),xe.add(144,Oe,11,9);return xe.addMany(ke,0,3,0),xe.addMany(ke,1,3,1),xe.add(127,1,0,1),xe.addMany(ke,8,0,8),xe.addMany(ke,3,3,3),xe.add(127,3,0,3),xe.addMany(ke,4,3,4),xe.add(127,4,0,4),xe.addMany(ke,6,3,6),xe.addMany(ke,5,3,5),xe.add(127,5,0,5),xe.addMany(ke,2,3,2),xe.add(127,2,0,2),xe.add(93,1,4,8),xe.addMany(ve,8,5,8),xe.add(127,8,5,8),xe.addMany([156,27,24,26,7],8,6,0),xe.addMany(we(28,32),8,0,8),xe.addMany([88,94,95],1,0,7),xe.addMany(ve,7,0,7),xe.addMany(ke,7,0,7),xe.add(156,7,0,0),xe.add(127,7,0,7),xe.add(91,1,11,3),xe.addMany(we(64,127),3,7,0),xe.addMany(we(48,60),3,8,4),xe.addMany([60,61,62,63],3,9,4),xe.addMany(we(48,60),4,8,4),xe.addMany(we(64,127),4,7,0),xe.addMany([60,61,62,63],4,0,6),xe.addMany(we(32,64),6,0,6),xe.add(127,6,0,6),xe.addMany(we(64,127),6,0,0),xe.addMany(we(32,48),3,9,5),xe.addMany(we(32,48),5,9,5),xe.addMany(we(48,64),5,0,6),xe.addMany(we(64,127),5,7,0),xe.addMany(we(32,48),4,9,5),xe.addMany(we(32,48),1,9,2),xe.addMany(we(32,48),2,9,2),xe.addMany(we(48,127),2,10,0),xe.addMany(we(48,80),1,10,0),xe.addMany(we(81,88),1,10,0),xe.addMany([89,90,92],1,10,0),xe.addMany(we(96,127),1,10,0),xe.add(80,1,11,9),xe.addMany(ke,9,0,9),xe.add(127,9,0,9),xe.addMany(we(28,32),9,0,9),xe.addMany(we(32,48),9,9,12),xe.addMany(we(48,60),9,8,10),xe.addMany([60,61,62,63],9,9,10),xe.addMany(ke,11,0,11),xe.addMany(we(32,128),11,0,11),xe.addMany(we(28,32),11,0,11),xe.addMany(ke,10,0,10),xe.add(127,10,0,10),xe.addMany(we(28,32),10,0,10),xe.addMany(we(48,60),10,8,10),xe.addMany([60,61,62,63],10,0,11),xe.addMany(we(32,48),10,9,12),xe.addMany(ke,12,0,12),xe.add(127,12,0,12),xe.addMany(we(28,32),12,0,12),xe.addMany(we(32,48),12,9,12),xe.addMany(we(48,64),12,0,11),xe.addMany(we(64,127),12,12,13),xe.addMany(we(64,127),10,12,13),xe.addMany(we(64,127),9,12,13),xe.addMany(ke,13,13,13),xe.addMany(ve,13,13,13),xe.add(127,13,0,13),xe.addMany([27,156,24,26],13,14,0),xe.add(Ce,0,2,0),xe.add(Ce,8,5,8),xe.add(Ce,6,0,6),xe.add(Ce,11,0,11),xe.add(Ce,13,13,13),xe}();class Ee extends m.Disposable{constructor(be=l.VT500_TRANSITION_TABLE){super(),this._transitions=be,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new y.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(we,ve,ke)=>{},this._executeHandlerFb=we=>{},this._csiHandlerFb=(we,ve)=>{},this._escHandlerFb=we=>{},this._errorHandlerFb=we=>we,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,m.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new S.OscParser),this._dcsParser=this.register(new X.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(be,we=[64,126]){let ve=0;if(be.prefix){if(be.prefix.length>1)throw new Error("only one byte as prefix supported");if(ve=be.prefix.charCodeAt(0),ve&&60>ve||ve>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(be.intermediates){if(be.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let De=0;De<be.intermediates.length;++De){const Oe=be.intermediates.charCodeAt(De);if(32>Oe||Oe>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");ve<<=8,ve|=Oe}}if(be.final.length!==1)throw new Error("final must be a single byte");const ke=be.final.charCodeAt(0);if(we[0]>ke||ke>we[1])throw new Error(`final must be in range ${we[0]} .. ${we[1]}`);return ve<<=8,ve|=ke,ve}identToString(be){const we=[];for(;be;)we.push(String.fromCharCode(255&be)),be>>=8;return we.reverse().join("")}setPrintHandler(be){this._printHandler=be}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(be,we){const ve=this._identifier(be,[48,126]);this._escHandlers[ve]===void 0&&(this._escHandlers[ve]=[]);const ke=this._escHandlers[ve];return ke.push(we),{dispose:()=>{const De=ke.indexOf(we);De!==-1&&ke.splice(De,1)}}}clearEscHandler(be){this._escHandlers[this._identifier(be,[48,126])]&&delete this._escHandlers[this._identifier(be,[48,126])]}setEscHandlerFallback(be){this._escHandlerFb=be}setExecuteHandler(be,we){this._executeHandlers[be.charCodeAt(0)]=we}clearExecuteHandler(be){this._executeHandlers[be.charCodeAt(0)]&&delete this._executeHandlers[be.charCodeAt(0)]}setExecuteHandlerFallback(be){this._executeHandlerFb=be}registerCsiHandler(be,we){const ve=this._identifier(be);this._csiHandlers[ve]===void 0&&(this._csiHandlers[ve]=[]);const ke=this._csiHandlers[ve];return ke.push(we),{dispose:()=>{const De=ke.indexOf(we);De!==-1&&ke.splice(De,1)}}}clearCsiHandler(be){this._csiHandlers[this._identifier(be)]&&delete this._csiHandlers[this._identifier(be)]}setCsiHandlerFallback(be){this._csiHandlerFb=be}registerDcsHandler(be,we){return this._dcsParser.registerHandler(this._identifier(be),we)}clearDcsHandler(be){this._dcsParser.clearHandler(this._identifier(be))}setDcsHandlerFallback(be){this._dcsParser.setHandlerFallback(be)}registerOscHandler(be,we){return this._oscParser.registerHandler(be,we)}clearOscHandler(be){this._oscParser.clearHandler(be)}setOscHandlerFallback(be){this._oscParser.setHandlerFallback(be)}setErrorHandler(be){this._errorHandler=be}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(be,we,ve,ke,De){this._parseStack.state=be,this._parseStack.handlers=we,this._parseStack.handlerPos=ve,this._parseStack.transition=ke,this._parseStack.chunkPos=De}parse(be,we,ve){let ke,De=0,Oe=0,Le=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,Le=this._parseStack.chunkPos+1;else{if(ve===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const Ae=this._parseStack.handlers;let Ie=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(ve===!1&&Ie>-1){for(;Ie>=0&&(ke=Ae[Ie](this._params),ke!==!0);Ie--)if(ke instanceof Promise)return this._parseStack.handlerPos=Ie,ke}this._parseStack.handlers=[];break;case 4:if(ve===!1&&Ie>-1){for(;Ie>=0&&(ke=Ae[Ie](),ke!==!0);Ie--)if(ke instanceof Promise)return this._parseStack.handlerPos=Ie,ke}this._parseStack.handlers=[];break;case 6:if(De=be[this._parseStack.chunkPos],ke=this._dcsParser.unhook(De!==24&&De!==26,ve),ke)return ke;De===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(De=be[this._parseStack.chunkPos],ke=this._oscParser.end(De!==24&&De!==26,ve),ke)return ke;De===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,Le=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let Ae=Le;Ae<we;++Ae){switch(De=be[Ae],Oe=this._transitions.table[this.currentState<<8|(De<160?De:Ce)],Oe>>4){case 2:for(let Xe=Ae+1;;++Xe){if(Xe>=we||(De=be[Xe])<32||De>126&&De<Ce){this._printHandler(be,Ae,Xe),Ae=Xe-1;break}if(++Xe>=we||(De=be[Xe])<32||De>126&&De<Ce){this._printHandler(be,Ae,Xe),Ae=Xe-1;break}if(++Xe>=we||(De=be[Xe])<32||De>126&&De<Ce){this._printHandler(be,Ae,Xe),Ae=Xe-1;break}if(++Xe>=we||(De=be[Xe])<32||De>126&&De<Ce){this._printHandler(be,Ae,Xe),Ae=Xe-1;break}}break;case 3:this._executeHandlers[De]?this._executeHandlers[De]():this._executeHandlerFb(De),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:Ae,code:De,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const Ie=this._csiHandlers[this._collect<<8|De];let Ue=Ie?Ie.length-1:-1;for(;Ue>=0&&(ke=Ie[Ue](this._params),ke!==!0);Ue--)if(ke instanceof Promise)return this._preserveStack(3,Ie,Ue,Oe,Ae),ke;Ue<0&&this._csiHandlerFb(this._collect<<8|De,this._params),this.precedingJoinState=0;break;case 8:do switch(De){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(De-48)}while(++Ae<we&&(De=be[Ae])>47&&De<60);Ae--;break;case 9:this._collect<<=8,this._collect|=De;break;case 10:const ze=this._escHandlers[this._collect<<8|De];let Ye=ze?ze.length-1:-1;for(;Ye>=0&&(ke=ze[Ye](),ke!==!0);Ye--)if(ke instanceof Promise)return this._preserveStack(4,ze,Ye,Oe,Ae),ke;Ye<0&&this._escHandlerFb(this._collect<<8|De),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|De,this._params);break;case 13:for(let Xe=Ae+1;;++Xe)if(Xe>=we||(De=be[Xe])===24||De===26||De===27||De>127&&De<Ce){this._dcsParser.put(be,Ae,Xe),Ae=Xe-1;break}break;case 14:if(ke=this._dcsParser.unhook(De!==24&&De!==26),ke)return this._preserveStack(6,[],0,Oe,Ae),ke;De===27&&(Oe|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let Xe=Ae+1;;Xe++)if(Xe>=we||(De=be[Xe])<32||De>127&&De<Ce){this._oscParser.put(be,Ae,Xe),Ae=Xe-1;break}break;case 6:if(ke=this._oscParser.end(De!==24&&De!==26),ke)return this._preserveStack(5,[],0,Oe,Ae),ke;De===27&&(Oe|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&Oe}}}l.EscapeSequenceParser=Ee},6242:(u,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.OscHandler=l.OscParser=void 0;const m=d(5770),y=d(482),S=[];l.OscParser=class{constructor(){this._state=0,this._active=S,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(X,he){this._handlers[X]===void 0&&(this._handlers[X]=[]);const Ce=this._handlers[X];return Ce.push(he),{dispose:()=>{const Ee=Ce.indexOf(he);Ee!==-1&&Ce.splice(Ee,1)}}}clearHandler(X){this._handlers[X]&&delete this._handlers[X]}setHandlerFallback(X){this._handlerFb=X}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=S}reset(){if(this._state===2)for(let X=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;X>=0;--X)this._active[X].end(!1);this._stack.paused=!1,this._active=S,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||S,this._active.length)for(let X=this._active.length-1;X>=0;X--)this._active[X].start();else this._handlerFb(this._id,"START")}_put(X,he,Ce){if(this._active.length)for(let Ee=this._active.length-1;Ee>=0;Ee--)this._active[Ee].put(X,he,Ce);else this._handlerFb(this._id,"PUT",(0,y.utf32ToString)(X,he,Ce))}start(){this.reset(),this._state=1}put(X,he,Ce){if(this._state!==3){if(this._state===1)for(;he<Ce;){const Ee=X[he++];if(Ee===59){this._state=2,this._start();break}if(Ee<48||57<Ee)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+Ee-48}this._state===2&&Ce-he>0&&this._put(X,he,Ce)}}end(X,he=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let Ce=!1,Ee=this._active.length-1,xe=!1;if(this._stack.paused&&(Ee=this._stack.loopPosition-1,Ce=he,xe=this._stack.fallThrough,this._stack.paused=!1),!xe&&Ce===!1){for(;Ee>=0&&(Ce=this._active[Ee].end(X),Ce!==!0);Ee--)if(Ce instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=Ee,this._stack.fallThrough=!1,Ce;Ee--}for(;Ee>=0;Ee--)if(Ce=this._active[Ee].end(!1),Ce instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=Ee,this._stack.fallThrough=!0,Ce}else this._handlerFb(this._id,"END",X);this._active=S,this._id=-1,this._state=0}}},l.OscHandler=class{constructor(X){this._handler=X,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(X,he,Ce){this._hitLimit||(this._data+=(0,y.utf32ToString)(X,he,Ce),this._data.length>m.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(X){let he=!1;if(this._hitLimit)he=!1;else if(X&&(he=this._handler(this._data),he instanceof Promise))return he.then(Ce=>(this._data="",this._hitLimit=!1,Ce));return this._data="",this._hitLimit=!1,he}}},8742:(u,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Params=void 0;const d=2147483647;class m{static fromArray(S){const X=new m;if(!S.length)return X;for(let he=Array.isArray(S[0])?1:0;he<S.length;++he){const Ce=S[he];if(Array.isArray(Ce))for(let Ee=0;Ee<Ce.length;++Ee)X.addSubParam(Ce[Ee]);else X.addParam(Ce)}return X}constructor(S=32,X=32){if(this.maxLength=S,this.maxSubParamsLength=X,X>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(S),this.length=0,this._subParams=new Int32Array(X),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(S),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const S=new m(this.maxLength,this.maxSubParamsLength);return S.params.set(this.params),S.length=this.length,S._subParams.set(this._subParams),S._subParamsLength=this._subParamsLength,S._subParamsIdx.set(this._subParamsIdx),S._rejectDigits=this._rejectDigits,S._rejectSubDigits=this._rejectSubDigits,S._digitIsSub=this._digitIsSub,S}toArray(){const S=[];for(let X=0;X<this.length;++X){S.push(this.params[X]);const he=this._subParamsIdx[X]>>8,Ce=255&this._subParamsIdx[X];Ce-he>0&&S.push(Array.prototype.slice.call(this._subParams,he,Ce))}return S}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(S){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(S<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=S>d?d:S}}addSubParam(S){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(S<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=S>d?d:S,this._subParamsIdx[this.length-1]++}}hasSubParams(S){return(255&this._subParamsIdx[S])-(this._subParamsIdx[S]>>8)>0}getSubParams(S){const X=this._subParamsIdx[S]>>8,he=255&this._subParamsIdx[S];return he-X>0?this._subParams.subarray(X,he):null}getSubParamsAll(){const S={};for(let X=0;X<this.length;++X){const he=this._subParamsIdx[X]>>8,Ce=255&this._subParamsIdx[X];Ce-he>0&&(S[X]=this._subParams.slice(he,Ce))}return S}addDigit(S){let X;if(this._rejectDigits||!(X=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const he=this._digitIsSub?this._subParams:this.params,Ce=he[X-1];he[X-1]=~Ce?Math.min(10*Ce+S,d):S}}l.Params=m},5741:(u,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.AddonManager=void 0,l.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let d=this._addons.length-1;d>=0;d--)this._addons[d].instance.dispose()}loadAddon(d,m){const y={instance:m,dispose:m.dispose,isDisposed:!1};this._addons.push(y),m.dispose=()=>this._wrappedAddonDispose(y),m.activate(d)}_wrappedAddonDispose(d){if(d.isDisposed)return;let m=-1;for(let y=0;y<this._addons.length;y++)if(this._addons[y]===d){m=y;break}if(m===-1)throw new Error("Could not dispose an addon that has not been loaded");d.isDisposed=!0,d.dispose.apply(d.instance),this._addons.splice(m,1)}}},8771:(u,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferApiView=void 0;const m=d(3785),y=d(511);l.BufferApiView=class{constructor(S,X){this._buffer=S,this.type=X}init(S){return this._buffer=S,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(S){const X=this._buffer.lines.get(S);if(X)return new m.BufferLineApiView(X)}getNullCell(){return new y.CellData}}},3785:(u,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferLineApiView=void 0;const m=d(511);l.BufferLineApiView=class{constructor(y){this._line=y}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(y,S){if(!(y<0||y>=this._line.length))return S?(this._line.loadCell(y,S),S):this._line.loadCell(y,new m.CellData)}translateToString(y,S,X){return this._line.translateToString(y,S,X)}}},8285:(u,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferNamespaceApi=void 0;const m=d(8771),y=d(8460),S=d(844);class X extends S.Disposable{constructor(Ce){super(),this._core=Ce,this._onBufferChange=this.register(new y.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new m.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new m.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}l.BufferNamespaceApi=X},7975:(u,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ParserApi=void 0,l.ParserApi=class{constructor(d){this._core=d}registerCsiHandler(d,m){return this._core.registerCsiHandler(d,y=>m(y.toArray()))}addCsiHandler(d,m){return this.registerCsiHandler(d,m)}registerDcsHandler(d,m){return this._core.registerDcsHandler(d,(y,S)=>m(y,S.toArray()))}addDcsHandler(d,m){return this.registerDcsHandler(d,m)}registerEscHandler(d,m){return this._core.registerEscHandler(d,m)}addEscHandler(d,m){return this.registerEscHandler(d,m)}registerOscHandler(d,m){return this._core.registerOscHandler(d,m)}addOscHandler(d,m){return this.registerOscHandler(d,m)}}},7090:(u,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.UnicodeApi=void 0,l.UnicodeApi=class{constructor(d){this._core=d}register(d){this._core.unicodeService.register(d)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(d){this._core.unicodeService.activeVersion=d}}},744:function(u,l,d){var m=this&&this.__decorate||function(xe,be,we,ve){var ke,De=arguments.length,Oe=De<3?be:ve===null?ve=Object.getOwnPropertyDescriptor(be,we):ve;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Oe=Reflect.decorate(xe,be,we,ve);else for(var Le=xe.length-1;Le>=0;Le--)(ke=xe[Le])&&(Oe=(De<3?ke(Oe):De>3?ke(be,we,Oe):ke(be,we))||Oe);return De>3&&Oe&&Object.defineProperty(be,we,Oe),Oe},y=this&&this.__param||function(xe,be){return function(we,ve){be(we,ve,xe)}};Object.defineProperty(l,"__esModule",{value:!0}),l.BufferService=l.MINIMUM_ROWS=l.MINIMUM_COLS=void 0;const S=d(8460),X=d(844),he=d(5295),Ce=d(2585);l.MINIMUM_COLS=2,l.MINIMUM_ROWS=1;let Ee=l.BufferService=class extends X.Disposable{get buffer(){return this.buffers.active}constructor(xe){super(),this.isUserScrolling=!1,this._onResize=this.register(new S.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new S.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(xe.rawOptions.cols||0,l.MINIMUM_COLS),this.rows=Math.max(xe.rawOptions.rows||0,l.MINIMUM_ROWS),this.buffers=this.register(new he.BufferSet(xe,this))}resize(xe,be){this.cols=xe,this.rows=be,this.buffers.resize(xe,be),this._onResize.fire({cols:xe,rows:be})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(xe,be=!1){const we=this.buffer;let ve;ve=this._cachedBlankLine,ve&&ve.length===this.cols&&ve.getFg(0)===xe.fg&&ve.getBg(0)===xe.bg||(ve=we.getBlankLine(xe,be),this._cachedBlankLine=ve),ve.isWrapped=be;const ke=we.ybase+we.scrollTop,De=we.ybase+we.scrollBottom;if(we.scrollTop===0){const Oe=we.lines.isFull;De===we.lines.length-1?Oe?we.lines.recycle().copyFrom(ve):we.lines.push(ve.clone()):we.lines.splice(De+1,0,ve.clone()),Oe?this.isUserScrolling&&(we.ydisp=Math.max(we.ydisp-1,0)):(we.ybase++,this.isUserScrolling||we.ydisp++)}else{const Oe=De-ke+1;we.lines.shiftElements(ke+1,Oe-1,-1),we.lines.set(De,ve.clone())}this.isUserScrolling||(we.ydisp=we.ybase),this._onScroll.fire(we.ydisp)}scrollLines(xe,be,we){const ve=this.buffer;if(xe<0){if(ve.ydisp===0)return;this.isUserScrolling=!0}else xe+ve.ydisp>=ve.ybase&&(this.isUserScrolling=!1);const ke=ve.ydisp;ve.ydisp=Math.max(Math.min(ve.ydisp+xe,ve.ybase),0),ke!==ve.ydisp&&(be||this._onScroll.fire(ve.ydisp))}};l.BufferService=Ee=m([y(0,Ce.IOptionsService)],Ee)},7994:(u,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CharsetService=void 0,l.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(d){this.glevel=d,this.charset=this._charsets[d]}setgCharset(d,m){this._charsets[d]=m,this.glevel===d&&(this.charset=m)}}},1753:function(u,l,d){var m=this&&this.__decorate||function(ve,ke,De,Oe){var Le,Ae=arguments.length,Ie=Ae<3?ke:Oe===null?Oe=Object.getOwnPropertyDescriptor(ke,De):Oe;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Ie=Reflect.decorate(ve,ke,De,Oe);else for(var Ue=ve.length-1;Ue>=0;Ue--)(Le=ve[Ue])&&(Ie=(Ae<3?Le(Ie):Ae>3?Le(ke,De,Ie):Le(ke,De))||Ie);return Ae>3&&Ie&&Object.defineProperty(ke,De,Ie),Ie},y=this&&this.__param||function(ve,ke){return function(De,Oe){ke(De,Oe,ve)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CoreMouseService=void 0;const S=d(2585),X=d(8460),he=d(844),Ce={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:ve=>ve.button!==4&&ve.action===1&&(ve.ctrl=!1,ve.alt=!1,ve.shift=!1,!0)},VT200:{events:19,restrict:ve=>ve.action!==32},DRAG:{events:23,restrict:ve=>ve.action!==32||ve.button!==3},ANY:{events:31,restrict:ve=>!0}};function Ee(ve,ke){let De=(ve.ctrl?16:0)|(ve.shift?4:0)|(ve.alt?8:0);return ve.button===4?(De|=64,De|=ve.action):(De|=3&ve.button,4&ve.button&&(De|=64),8&ve.button&&(De|=128),ve.action===32?De|=32:ve.action!==0||ke||(De|=3)),De}const xe=String.fromCharCode,be={DEFAULT:ve=>{const ke=[Ee(ve,!1)+32,ve.col+32,ve.row+32];return ke[0]>255||ke[1]>255||ke[2]>255?"":`\x1B[M${xe(ke[0])}${xe(ke[1])}${xe(ke[2])}`},SGR:ve=>{const ke=ve.action===0&&ve.button!==4?"m":"M";return`\x1B[<${Ee(ve,!0)};${ve.col};${ve.row}${ke}`},SGR_PIXELS:ve=>{const ke=ve.action===0&&ve.button!==4?"m":"M";return`\x1B[<${Ee(ve,!0)};${ve.x};${ve.y}${ke}`}};let we=l.CoreMouseService=class extends he.Disposable{constructor(ve,ke){super(),this._bufferService=ve,this._coreService=ke,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new X.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const De of Object.keys(Ce))this.addProtocol(De,Ce[De]);for(const De of Object.keys(be))this.addEncoding(De,be[De]);this.reset()}addProtocol(ve,ke){this._protocols[ve]=ke}addEncoding(ve,ke){this._encodings[ve]=ke}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(ve){if(!this._protocols[ve])throw new Error(`unknown protocol "${ve}"`);this._activeProtocol=ve,this._onProtocolChange.fire(this._protocols[ve].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(ve){if(!this._encodings[ve])throw new Error(`unknown encoding "${ve}"`);this._activeEncoding=ve}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(ve){if(ve.col<0||ve.col>=this._bufferService.cols||ve.row<0||ve.row>=this._bufferService.rows||ve.button===4&&ve.action===32||ve.button===3&&ve.action!==32||ve.button!==4&&(ve.action===2||ve.action===3)||(ve.col++,ve.row++,ve.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,ve,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(ve))return!1;const ke=this._encodings[this._activeEncoding](ve);return ke&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(ke):this._coreService.triggerDataEvent(ke,!0)),this._lastEvent=ve,!0}explainEvents(ve){return{down:!!(1&ve),up:!!(2&ve),drag:!!(4&ve),move:!!(8&ve),wheel:!!(16&ve)}}_equalEvents(ve,ke,De){if(De){if(ve.x!==ke.x||ve.y!==ke.y)return!1}else if(ve.col!==ke.col||ve.row!==ke.row)return!1;return ve.button===ke.button&&ve.action===ke.action&&ve.ctrl===ke.ctrl&&ve.alt===ke.alt&&ve.shift===ke.shift}};l.CoreMouseService=we=m([y(0,S.IBufferService),y(1,S.ICoreService)],we)},6975:function(u,l,d){var m=this&&this.__decorate||function(we,ve,ke,De){var Oe,Le=arguments.length,Ae=Le<3?ve:De===null?De=Object.getOwnPropertyDescriptor(ve,ke):De;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Ae=Reflect.decorate(we,ve,ke,De);else for(var Ie=we.length-1;Ie>=0;Ie--)(Oe=we[Ie])&&(Ae=(Le<3?Oe(Ae):Le>3?Oe(ve,ke,Ae):Oe(ve,ke))||Ae);return Le>3&&Ae&&Object.defineProperty(ve,ke,Ae),Ae},y=this&&this.__param||function(we,ve){return function(ke,De){ve(ke,De,we)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CoreService=void 0;const S=d(1439),X=d(8460),he=d(844),Ce=d(2585),Ee=Object.freeze({insertMode:!1}),xe=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let be=l.CoreService=class extends he.Disposable{constructor(we,ve,ke){super(),this._bufferService=we,this._logService=ve,this._optionsService=ke,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new X.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new X.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new X.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new X.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,S.clone)(Ee),this.decPrivateModes=(0,S.clone)(xe)}reset(){this.modes=(0,S.clone)(Ee),this.decPrivateModes=(0,S.clone)(xe)}triggerDataEvent(we,ve=!1){if(this._optionsService.rawOptions.disableStdin)return;const ke=this._bufferService.buffer;ve&&this._optionsService.rawOptions.scrollOnUserInput&&ke.ybase!==ke.ydisp&&this._onRequestScrollToBottom.fire(),ve&&this._onUserInput.fire(),this._logService.debug(`sending data "${we}"`,()=>we.split("").map(De=>De.charCodeAt(0))),this._onData.fire(we)}triggerBinaryEvent(we){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${we}"`,()=>we.split("").map(ve=>ve.charCodeAt(0))),this._onBinary.fire(we))}};l.CoreService=be=m([y(0,Ce.IBufferService),y(1,Ce.ILogService),y(2,Ce.IOptionsService)],be)},9074:(u,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DecorationService=void 0;const m=d(8055),y=d(8460),S=d(844),X=d(6106);let he=0,Ce=0;class Ee extends S.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new X.SortedList(we=>we==null?void 0:we.marker.line),this._onDecorationRegistered=this.register(new y.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new y.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,S.toDisposable)(()=>this.reset()))}registerDecoration(we){if(we.marker.isDisposed)return;const ve=new xe(we);if(ve){const ke=ve.marker.onDispose(()=>ve.dispose());ve.onDispose(()=>{ve&&(this._decorations.delete(ve)&&this._onDecorationRemoved.fire(ve),ke.dispose())}),this._decorations.insert(ve),this._onDecorationRegistered.fire(ve)}return ve}reset(){for(const we of this._decorations.values())we.dispose();this._decorations.clear()}*getDecorationsAtCell(we,ve,ke){let De=0,Oe=0;for(const Le of this._decorations.getKeyIterator(ve))De=Le.options.x??0,Oe=De+(Le.options.width??1),we>=De&&we<Oe&&(!ke||(Le.options.layer??"bottom")===ke)&&(yield Le)}forEachDecorationAtCell(we,ve,ke,De){this._decorations.forEachByKey(ve,Oe=>{he=Oe.options.x??0,Ce=he+(Oe.options.width??1),we>=he&&we<Ce&&(!ke||(Oe.options.layer??"bottom")===ke)&&De(Oe)})}}l.DecorationService=Ee;class xe extends S.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=m.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=m.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(we){super(),this.options=we,this.onRenderEmitter=this.register(new y.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new y.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=we.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(u,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.InstantiationService=l.ServiceCollection=void 0;const m=d(2585),y=d(8343);class S{constructor(...he){this._entries=new Map;for(const[Ce,Ee]of he)this.set(Ce,Ee)}set(he,Ce){const Ee=this._entries.get(he);return this._entries.set(he,Ce),Ee}forEach(he){for(const[Ce,Ee]of this._entries.entries())he(Ce,Ee)}has(he){return this._entries.has(he)}get(he){return this._entries.get(he)}}l.ServiceCollection=S,l.InstantiationService=class{constructor(){this._services=new S,this._services.set(m.IInstantiationService,this)}setService(X,he){this._services.set(X,he)}getService(X){return this._services.get(X)}createInstance(X,...he){const Ce=(0,y.getServiceDependencies)(X).sort((be,we)=>be.index-we.index),Ee=[];for(const be of Ce){const we=this._services.get(be.id);if(!we)throw new Error(`[createInstance] ${X.name} depends on UNKNOWN service ${be.id}.`);Ee.push(we)}const xe=Ce.length>0?Ce[0].index:he.length;if(he.length!==xe)throw new Error(`[createInstance] First service dependency of ${X.name} at position ${xe+1} conflicts with ${he.length} static arguments`);return new X(...he,...Ee)}}},7866:function(u,l,d){var m=this&&this.__decorate||function(xe,be,we,ve){var ke,De=arguments.length,Oe=De<3?be:ve===null?ve=Object.getOwnPropertyDescriptor(be,we):ve;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Oe=Reflect.decorate(xe,be,we,ve);else for(var Le=xe.length-1;Le>=0;Le--)(ke=xe[Le])&&(Oe=(De<3?ke(Oe):De>3?ke(be,we,Oe):ke(be,we))||Oe);return De>3&&Oe&&Object.defineProperty(be,we,Oe),Oe},y=this&&this.__param||function(xe,be){return function(we,ve){be(we,ve,xe)}};Object.defineProperty(l,"__esModule",{value:!0}),l.traceCall=l.setTraceLogger=l.LogService=void 0;const S=d(844),X=d(2585),he={trace:X.LogLevelEnum.TRACE,debug:X.LogLevelEnum.DEBUG,info:X.LogLevelEnum.INFO,warn:X.LogLevelEnum.WARN,error:X.LogLevelEnum.ERROR,off:X.LogLevelEnum.OFF};let Ce,Ee=l.LogService=class extends S.Disposable{get logLevel(){return this._logLevel}constructor(xe){super(),this._optionsService=xe,this._logLevel=X.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),Ce=this}_updateLogLevel(){this._logLevel=he[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(xe){for(let be=0;be<xe.length;be++)typeof xe[be]=="function"&&(xe[be]=xe[be]())}_log(xe,be,we){this._evalLazyOptionalParams(we),xe.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+be,...we)}trace(xe,...be){var we;this._logLevel<=X.LogLevelEnum.TRACE&&this._log(((we=this._optionsService.options.logger)==null?void 0:we.trace.bind(this._optionsService.options.logger))??console.log,xe,be)}debug(xe,...be){var we;this._logLevel<=X.LogLevelEnum.DEBUG&&this._log(((we=this._optionsService.options.logger)==null?void 0:we.debug.bind(this._optionsService.options.logger))??console.log,xe,be)}info(xe,...be){var we;this._logLevel<=X.LogLevelEnum.INFO&&this._log(((we=this._optionsService.options.logger)==null?void 0:we.info.bind(this._optionsService.options.logger))??console.info,xe,be)}warn(xe,...be){var we;this._logLevel<=X.LogLevelEnum.WARN&&this._log(((we=this._optionsService.options.logger)==null?void 0:we.warn.bind(this._optionsService.options.logger))??console.warn,xe,be)}error(xe,...be){var we;this._logLevel<=X.LogLevelEnum.ERROR&&this._log(((we=this._optionsService.options.logger)==null?void 0:we.error.bind(this._optionsService.options.logger))??console.error,xe,be)}};l.LogService=Ee=m([y(0,X.IOptionsService)],Ee),l.setTraceLogger=function(xe){Ce=xe},l.traceCall=function(xe,be,we){if(typeof we.value!="function")throw new Error("not supported");const ve=we.value;we.value=function(...ke){if(Ce.logLevel!==X.LogLevelEnum.TRACE)return ve.apply(this,ke);Ce.trace(`GlyphRenderer#${ve.name}(${ke.map(Oe=>JSON.stringify(Oe)).join(", ")})`);const De=ve.apply(this,ke);return Ce.trace(`GlyphRenderer#${ve.name} return`,De),De}}},7302:(u,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.OptionsService=l.DEFAULT_OPTIONS=void 0;const m=d(8460),y=d(844),S=d(6114);l.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:S.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const X=["normal","bold","100","200","300","400","500","600","700","800","900"];class he extends y.Disposable{constructor(Ee){super(),this._onOptionChange=this.register(new m.EventEmitter),this.onOptionChange=this._onOptionChange.event;const xe={...l.DEFAULT_OPTIONS};for(const be in Ee)if(be in xe)try{const we=Ee[be];xe[be]=this._sanitizeAndValidateOption(be,we)}catch(we){console.error(we)}this.rawOptions=xe,this.options={...xe},this._setupOptions(),this.register((0,y.toDisposable)(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(Ee,xe){return this.onOptionChange(be=>{be===Ee&&xe(this.rawOptions[Ee])})}onMultipleOptionChange(Ee,xe){return this.onOptionChange(be=>{Ee.indexOf(be)!==-1&&xe()})}_setupOptions(){const Ee=be=>{if(!(be in l.DEFAULT_OPTIONS))throw new Error(`No option with key "${be}"`);return this.rawOptions[be]},xe=(be,we)=>{if(!(be in l.DEFAULT_OPTIONS))throw new Error(`No option with key "${be}"`);we=this._sanitizeAndValidateOption(be,we),this.rawOptions[be]!==we&&(this.rawOptions[be]=we,this._onOptionChange.fire(be))};for(const be in this.rawOptions){const we={get:Ee.bind(this,be),set:xe.bind(this,be)};Object.defineProperty(this.options,be,we)}}_sanitizeAndValidateOption(Ee,xe){switch(Ee){case"cursorStyle":if(xe||(xe=l.DEFAULT_OPTIONS[Ee]),!function(be){return be==="block"||be==="underline"||be==="bar"}(xe))throw new Error(`"${xe}" is not a valid value for ${Ee}`);break;case"wordSeparator":xe||(xe=l.DEFAULT_OPTIONS[Ee]);break;case"fontWeight":case"fontWeightBold":if(typeof xe=="number"&&1<=xe&&xe<=1e3)break;xe=X.includes(xe)?xe:l.DEFAULT_OPTIONS[Ee];break;case"cursorWidth":xe=Math.floor(xe);case"lineHeight":case"tabStopWidth":if(xe<1)throw new Error(`${Ee} cannot be less than 1, value: ${xe}`);break;case"minimumContrastRatio":xe=Math.max(1,Math.min(21,Math.round(10*xe)/10));break;case"scrollback":if((xe=Math.min(xe,4294967295))<0)throw new Error(`${Ee} cannot be less than 0, value: ${xe}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(xe<=0)throw new Error(`${Ee} cannot be less than or equal to 0, value: ${xe}`);break;case"rows":case"cols":if(!xe&&xe!==0)throw new Error(`${Ee} must be numeric, value: ${xe}`);break;case"windowsPty":xe=xe??{}}return xe}}l.OptionsService=he},2660:function(u,l,d){var m=this&&this.__decorate||function(he,Ce,Ee,xe){var be,we=arguments.length,ve=we<3?Ce:xe===null?xe=Object.getOwnPropertyDescriptor(Ce,Ee):xe;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ve=Reflect.decorate(he,Ce,Ee,xe);else for(var ke=he.length-1;ke>=0;ke--)(be=he[ke])&&(ve=(we<3?be(ve):we>3?be(Ce,Ee,ve):be(Ce,Ee))||ve);return we>3&&ve&&Object.defineProperty(Ce,Ee,ve),ve},y=this&&this.__param||function(he,Ce){return function(Ee,xe){Ce(Ee,xe,he)}};Object.defineProperty(l,"__esModule",{value:!0}),l.OscLinkService=void 0;const S=d(2585);let X=l.OscLinkService=class{constructor(he){this._bufferService=he,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(he){const Ce=this._bufferService.buffer;if(he.id===void 0){const ke=Ce.addMarker(Ce.ybase+Ce.y),De={data:he,id:this._nextId++,lines:[ke]};return ke.onDispose(()=>this._removeMarkerFromLink(De,ke)),this._dataByLinkId.set(De.id,De),De.id}const Ee=he,xe=this._getEntryIdKey(Ee),be=this._entriesWithId.get(xe);if(be)return this.addLineToLink(be.id,Ce.ybase+Ce.y),be.id;const we=Ce.addMarker(Ce.ybase+Ce.y),ve={id:this._nextId++,key:this._getEntryIdKey(Ee),data:Ee,lines:[we]};return we.onDispose(()=>this._removeMarkerFromLink(ve,we)),this._entriesWithId.set(ve.key,ve),this._dataByLinkId.set(ve.id,ve),ve.id}addLineToLink(he,Ce){const Ee=this._dataByLinkId.get(he);if(Ee&&Ee.lines.every(xe=>xe.line!==Ce)){const xe=this._bufferService.buffer.addMarker(Ce);Ee.lines.push(xe),xe.onDispose(()=>this._removeMarkerFromLink(Ee,xe))}}getLinkData(he){var Ce;return(Ce=this._dataByLinkId.get(he))==null?void 0:Ce.data}_getEntryIdKey(he){return`${he.id};;${he.uri}`}_removeMarkerFromLink(he,Ce){const Ee=he.lines.indexOf(Ce);Ee!==-1&&(he.lines.splice(Ee,1),he.lines.length===0&&(he.data.id!==void 0&&this._entriesWithId.delete(he.key),this._dataByLinkId.delete(he.id)))}};l.OscLinkService=X=m([y(0,S.IBufferService)],X)},8343:(u,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.createDecorator=l.getServiceDependencies=l.serviceRegistry=void 0;const d="di$target",m="di$dependencies";l.serviceRegistry=new Map,l.getServiceDependencies=function(y){return y[m]||[]},l.createDecorator=function(y){if(l.serviceRegistry.has(y))return l.serviceRegistry.get(y);const S=function(X,he,Ce){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(Ee,xe,be){xe[d]===xe?xe[m].push({id:Ee,index:be}):(xe[m]=[{id:Ee,index:be}],xe[d]=xe)})(S,X,Ce)};return S.toString=()=>y,l.serviceRegistry.set(y,S),S}},2585:(u,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.IDecorationService=l.IUnicodeService=l.IOscLinkService=l.IOptionsService=l.ILogService=l.LogLevelEnum=l.IInstantiationService=l.ICharsetService=l.ICoreService=l.ICoreMouseService=l.IBufferService=void 0;const m=d(8343);var y;l.IBufferService=(0,m.createDecorator)("BufferService"),l.ICoreMouseService=(0,m.createDecorator)("CoreMouseService"),l.ICoreService=(0,m.createDecorator)("CoreService"),l.ICharsetService=(0,m.createDecorator)("CharsetService"),l.IInstantiationService=(0,m.createDecorator)("InstantiationService"),function(S){S[S.TRACE=0]="TRACE",S[S.DEBUG=1]="DEBUG",S[S.INFO=2]="INFO",S[S.WARN=3]="WARN",S[S.ERROR=4]="ERROR",S[S.OFF=5]="OFF"}(y||(l.LogLevelEnum=y={})),l.ILogService=(0,m.createDecorator)("LogService"),l.IOptionsService=(0,m.createDecorator)("OptionsService"),l.IOscLinkService=(0,m.createDecorator)("OscLinkService"),l.IUnicodeService=(0,m.createDecorator)("UnicodeService"),l.IDecorationService=(0,m.createDecorator)("DecorationService")},1480:(u,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.UnicodeService=void 0;const m=d(8460),y=d(225);class S{static extractShouldJoin(he){return(1&he)!=0}static extractWidth(he){return he>>1&3}static extractCharKind(he){return he>>3}static createPropertyValue(he,Ce,Ee=!1){return(16777215&he)<<3|(3&Ce)<<1|(Ee?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new m.EventEmitter,this.onChange=this._onChange.event;const he=new y.UnicodeV6;this.register(he),this._active=he.version,this._activeProvider=he}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(he){if(!this._providers[he])throw new Error(`unknown Unicode version "${he}"`);this._active=he,this._activeProvider=this._providers[he],this._onChange.fire(he)}register(he){this._providers[he.version]=he}wcwidth(he){return this._activeProvider.wcwidth(he)}getStringCellWidth(he){let Ce=0,Ee=0;const xe=he.length;for(let be=0;be<xe;++be){let we=he.charCodeAt(be);if(55296<=we&&we<=56319){if(++be>=xe)return Ce+this.wcwidth(we);const De=he.charCodeAt(be);56320<=De&&De<=57343?we=1024*(we-55296)+De-56320+65536:Ce+=this.wcwidth(De)}const ve=this.charProperties(we,Ee);let ke=S.extractWidth(ve);S.extractShouldJoin(ve)&&(ke-=S.extractWidth(Ee)),Ce+=ke,Ee=ve}return Ce}charProperties(he,Ce){return this._activeProvider.charProperties(he,Ce)}}l.UnicodeService=S}},i={};function s(u){var l=i[u];if(l!==void 0)return l.exports;var d=i[u]={exports:{}};return e[u].call(d.exports,d,d.exports,s),d.exports}var o={};return(()=>{var u=o;Object.defineProperty(u,"__esModule",{value:!0}),u.Terminal=void 0;const l=s(9042),d=s(3236),m=s(844),y=s(5741),S=s(8285),X=s(7975),he=s(7090),Ce=["cols","rows"];class Ee extends m.Disposable{constructor(be){super(),this._core=this.register(new d.Terminal(be)),this._addonManager=this.register(new y.AddonManager),this._publicOptions={...this._core.options};const we=ke=>this._core.options[ke],ve=(ke,De)=>{this._checkReadonlyOptions(ke),this._core.options[ke]=De};for(const ke in this._core.options){const De={get:we.bind(this,ke),set:ve.bind(this,ke)};Object.defineProperty(this._publicOptions,ke,De)}}_checkReadonlyOptions(be){if(Ce.includes(be))throw new Error(`Option "${be}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new X.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new he.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new S.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const be=this._core.coreService.decPrivateModes;let we="none";switch(this._core.coreMouseService.activeProtocol){case"X10":we="x10";break;case"VT200":we="vt200";break;case"DRAG":we="drag";break;case"ANY":we="any"}return{applicationCursorKeysMode:be.applicationCursorKeys,applicationKeypadMode:be.applicationKeypad,bracketedPasteMode:be.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:we,originMode:be.origin,reverseWraparoundMode:be.reverseWraparound,sendFocusMode:be.sendFocus,wraparoundMode:be.wraparound}}get options(){return this._publicOptions}set options(be){for(const we in be)this._publicOptions[we]=be[we]}blur(){this._core.blur()}focus(){this._core.focus()}input(be,we=!0){this._core.input(be,we)}resize(be,we){this._verifyIntegers(be,we),this._core.resize(be,we)}open(be){this._core.open(be)}attachCustomKeyEventHandler(be){this._core.attachCustomKeyEventHandler(be)}attachCustomWheelEventHandler(be){this._core.attachCustomWheelEventHandler(be)}registerLinkProvider(be){return this._core.registerLinkProvider(be)}registerCharacterJoiner(be){return this._checkProposedApi(),this._core.registerCharacterJoiner(be)}deregisterCharacterJoiner(be){this._checkProposedApi(),this._core.deregisterCharacterJoiner(be)}registerMarker(be=0){return this._verifyIntegers(be),this._core.registerMarker(be)}registerDecoration(be){return this._checkProposedApi(),this._verifyPositiveIntegers(be.x??0,be.width??0,be.height??0),this._core.registerDecoration(be)}hasSelection(){return this._core.hasSelection()}select(be,we,ve){this._verifyIntegers(be,we,ve),this._core.select(be,we,ve)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(be,we){this._verifyIntegers(be,we),this._core.selectLines(be,we)}dispose(){super.dispose()}scrollLines(be){this._verifyIntegers(be),this._core.scrollLines(be)}scrollPages(be){this._verifyIntegers(be),this._core.scrollPages(be)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(be){this._verifyIntegers(be),this._core.scrollToLine(be)}clear(){this._core.clear()}write(be,we){this._core.write(be,we)}writeln(be,we){this._core.write(be),this._core.write(`\r
`,we)}paste(be){this._core.paste(be)}refresh(be,we){this._verifyIntegers(be,we),this._core.refresh(be,we)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(be){this._addonManager.loadAddon(this,be)}static get strings(){return l}_verifyIntegers(...be){for(const we of be)if(we===1/0||isNaN(we)||we%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...be){for(const we of be)if(we&&(we===1/0||isNaN(we)||we%1!=0||we<0))throw new Error("This API only accepts positive integers")}}u.Terminal=Ee})(),o})())}(xterm)),xterm.exports}var xtermExports=requireXterm();class XTerm extends reactExports.Component{constructor(n){super(n),this.elementRef=reactExports.createRef()}componentDidMount(){var n;if(this.terminal=new xtermExports.Terminal(this.props.options),this.onBell=this.onBell.bind(this),this.onBinary=this.onBinary.bind(this),this.onCursorMove=this.onCursorMove.bind(this),this.onData=this.onData.bind(this),this.onKey=this.onKey.bind(this),this.onLineFeed=this.onLineFeed.bind(this),this.onRender=this.onRender.bind(this),this.onWriteParsed=this.onWriteParsed.bind(this),this.onResize=this.onResize.bind(this),this.onScroll=this.onScroll.bind(this),this.onSelectionChange=this.onSelectionChange.bind(this),this.onTitleChange=this.onTitleChange.bind(this),this.terminal.onBell(this.onBell),this.terminal.onBinary(this.onBinary),this.terminal.onCursorMove(this.onCursorMove),this.terminal.onData(this.onData),this.terminal.onKey(this.onKey),this.terminal.onLineFeed(this.onLineFeed),this.terminal.onScroll(this.onScroll),this.terminal.onWriteParsed(this.onWriteParsed),this.terminal.onSelectionChange(this.onSelectionChange),this.terminal.onRender(this.onRender),this.terminal.onResize(this.onResize),this.terminal.onTitleChange(this.onTitleChange),(n=this.props.addons)==null||n.forEach(e=>{this.terminal.loadAddon(e)}),this.props.customKeyEventHandler&&this.terminal.attachCustomKeyEventHandler(this.props.customKeyEventHandler),this.props.customWheelEventHandler&&this.terminal.attachCustomWheelEventHandler(this.props.customWheelEventHandler),this.props.linkProvider&&this.terminal.registerLinkProvider(this.props.linkProvider),this.props.characterJoiner&&this.terminal.registerCharacterJoiner(this.props.characterJoiner),this.elementRef.current===null||this.elementRef.current===void 0)throw new Error("XTerm-React: The container element is not defined.");this.terminal.open(this.elementRef.current)}componentWillUnmount(){this.terminal.dispose()}render(){return jsxRuntimeExports.jsx("div",{className:this.props.className,ref:this.elementRef})}blur(){return this.terminal.blur()}focus(){return this.terminal.focus()}input(n,e){return this.terminal.input(n,e)}resize(n,e){return this.terminal.resize(n,e)}hasSelection(){return this.terminal.hasSelection()}getSelection(){return this.terminal.getSelection()}getSelectionPosition(){return this.terminal.getSelectionPosition()}clearSelection(){return this.terminal.clearSelection()}select(n,e,i){return this.terminal.select(n,e,i)}selectAll(){return this.terminal.selectAll()}selectLines(n,e){return this.terminal.selectLines(n,e)}scrollLines(n){return this.terminal.scrollLines(n)}scrollPages(n){return this.terminal.scrollPages(n)}scrollToTop(){return this.terminal.scrollToTop()}scrollToBottom(){return this.terminal.scrollToBottom()}scrollToLine(n){return this.terminal.scrollToLine(n)}clear(){return this.terminal.clear()}write(n,e){return this.terminal.write(n,e)}writeln(n,e){return this.terminal.writeln(n,e)}paste(n){return this.terminal.paste(n)}refresh(n,e){return this.terminal.refresh(n,e)}clearTextureAtlas(){return this.terminal.clearTextureAtlas()}reset(){return this.terminal.reset()}onBell(){this.props.onBell&&this.props.onBell()}onBinary(n){this.props.onBinary&&this.props.onBinary(n)}onCursorMove(){this.props.onCursorMove&&this.props.onCursorMove()}onData(n){this.props.onData&&this.props.onData(n)}onKey(n){this.props.onKey&&this.props.onKey(n)}onLineFeed(){this.props.onLineFeed&&this.props.onLineFeed()}onRender(n){this.props.onRender&&this.props.onRender(n)}onWriteParsed(){this.props.onWriteParsed&&this.props.onWriteParsed()}onResize(n){this.props.onResize&&this.props.onResize(n)}onScroll(n){this.props.onScroll&&this.props.onScroll(n)}onSelectionChange(){this.props.onSelectionChange&&this.props.onSelectionChange()}onTitleChange(n){this.props.onTitleChange&&this.props.onTitleChange(n)}}const scriptRel="modulepreload",assetsURL=function(r){return"/"+r},seen={},__vitePreload=function r(n,e,i){let s=Promise.resolve();if(e&&e.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),l=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));s=Promise.allSettled(e.map(d=>{if(d=assetsURL(d),d in seen)return;seen[d]=!0;const m=d.endsWith(".css"),y=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${y}`))return;const S=document.createElement("link");if(S.rel=m?"stylesheet":scriptRel,m||(S.as="script"),S.crossOrigin="",S.href=d,l&&S.setAttribute("nonce",l),document.head.appendChild(S),m)return new Promise((X,he)=>{S.addEventListener("load",X),S.addEventListener("error",()=>he(new Error(`Unable to preload CSS for ${d}`)))})}))}function o(u){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=u,window.dispatchEvent(l),!l.defaultPrevented)throw u}return s.then(u=>{for(const l of u||[])l.status==="rejected"&&o(l.reason);return n().catch(o)})};var Q=Object.defineProperty,c=(r,n)=>Q(r,"name",{value:n,configurable:!0}),I=(r=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(r,{get:(n,e)=>(typeof require<"u"?require:n)[e]}):r)(function(r){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+r+'" is not supported')});function Z(r){return!isNaN(parseFloat(r))&&isFinite(r)}c(Z,"_isNumber");function E(r){return r.charAt(0).toUpperCase()+r.substring(1)}c(E,"_capitalize");function P(r){return function(){return this[r]}}c(P,"_getter");var w=["isConstructor","isEval","isNative","isToplevel"],N=["columnNumber","lineNumber"],_=["fileName","functionName","source"],ee=["args"],te=["evalOrigin"],O=w.concat(N,_,ee,te);function p(r){if(r)for(var n=0;n<O.length;n++)r[O[n]]!==void 0&&this["set"+E(O[n])](r[O[n]])}c(p,"StackFrame");p.prototype={getArgs:function(){return this.args},setArgs:function(r){if(Object.prototype.toString.call(r)!=="[object Array]")throw new TypeError("Args must be an Array");this.args=r},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(r){if(r instanceof p)this.evalOrigin=r;else if(r instanceof Object)this.evalOrigin=new p(r);else throw new TypeError("Eval Origin must be an Object or StackFrame")},toString:function(){var r=this.getFileName()||"",n=this.getLineNumber()||"",e=this.getColumnNumber()||"",i=this.getFunctionName()||"";return this.getIsEval()?r?"[eval] ("+r+":"+n+":"+e+")":"[eval]:"+n+":"+e:i?i+" ("+r+":"+n+":"+e+")":r+":"+n+":"+e}};p.fromString=c(function(r){var n=r.indexOf("("),e=r.lastIndexOf(")"),i=r.substring(0,n),s=r.substring(n+1,e).split(","),o=r.substring(e+1);if(o.indexOf("@")===0)var u=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(o,""),l=u[1],d=u[2],m=u[3];return new p({functionName:i,args:s||void 0,fileName:l,lineNumber:d||void 0,columnNumber:m||void 0})},"StackFrame$$fromString");for(b=0;b<w.length;b++)p.prototype["get"+E(w[b])]=P(w[b]),p.prototype["set"+E(w[b])]=function(r){return function(n){this[r]=!!n}}(w[b]);var b;for(v=0;v<N.length;v++)p.prototype["get"+E(N[v])]=P(N[v]),p.prototype["set"+E(N[v])]=function(r){return function(n){if(!Z(n))throw new TypeError(r+" must be a Number");this[r]=Number(n)}}(N[v]);var v;for(h=0;h<_.length;h++)p.prototype["get"+E(_[h])]=P(_[h]),p.prototype["set"+E(_[h])]=function(r){return function(n){this[r]=String(n)}}(_[h]);var h,x=p;function ne(){var r=/^\s*at .*(\S+:\d+|\(native\))/m,n=/^(eval@)?(\[native code])?$/;return{parse:c(function(e){if(e.stack&&e.stack.match(r))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error("Cannot parse given Error object")},"ErrorStackParser$$parse"),extractLocation:c(function(e){if(e.indexOf(":")===-1)return[e];var i=/(.+?)(?::(\d+))?(?::(\d+))?$/,s=i.exec(e.replace(/[()]/g,""));return[s[1],s[2]||void 0,s[3]||void 0]},"ErrorStackParser$$extractLocation"),parseV8OrIE:c(function(e){var i=e.stack.split(`
`).filter(function(s){return!!s.match(r)},this);return i.map(function(s){s.indexOf("(eval ")>-1&&(s=s.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(,.*$)/g,""));var o=s.replace(/^\s+/,"").replace(/\(eval code/g,"(").replace(/^.*?\s+/,""),u=o.match(/ (\(.+\)$)/);o=u?o.replace(u[0],""):o;var l=this.extractLocation(u?u[1]:o),d=u&&o||void 0,m=["eval","<anonymous>"].indexOf(l[0])>-1?void 0:l[0];return new x({functionName:d,fileName:m,lineNumber:l[1],columnNumber:l[2],source:s})},this)},"ErrorStackParser$$parseV8OrIE"),parseFFOrSafari:c(function(e){var i=e.stack.split(`
`).filter(function(s){return!s.match(n)},this);return i.map(function(s){if(s.indexOf(" > eval")>-1&&(s=s.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),s.indexOf("@")===-1&&s.indexOf(":")===-1)return new x({functionName:s});var o=/((.*".+"[^@]*)?[^@]*)(?:@)/,u=s.match(o),l=u&&u[1]?u[1]:void 0,d=this.extractLocation(s.replace(o,""));return new x({functionName:l,fileName:d[0],lineNumber:d[1],columnNumber:d[2],source:s})},this)},"ErrorStackParser$$parseFFOrSafari")}}c(ne,"ErrorStackParser");var re=new ne,M=re,g=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&!process.browser,A=g&&typeof module<"u"&&typeof module.exports<"u"&&typeof I<"u"&&typeof __dirname<"u",W=g&&!A,ie=typeof Deno<"u",B=!g&&!ie,$=B&&typeof window=="object"&&typeof document=="object"&&typeof document.createElement=="function"&&"sessionStorage"in window&&typeof importScripts!="function",j=B&&typeof importScripts=="function"&&typeof self=="object";typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Chrome")==-1&&navigator.userAgent.indexOf("Safari")>-1;var z,D,V,H,L;async function T(){if(!g||(z=(await __vitePreload(async()=>{const{default:o}=await import("./__vite-browser-external-BIHI7g3E.js");return{default:o}},[])).default,H=await __vitePreload(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),L=await __vitePreload(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),V=(await __vitePreload(async()=>{const{default:o}=await import("./__vite-browser-external-BIHI7g3E.js");return{default:o}},[])).default,D=await __vitePreload(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),U=D.sep,typeof I<"u"))return;let r=H,n=await __vitePreload(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),e=await __vitePreload(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),i=await __vitePreload(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),s={fs:r,crypto:n,ws:e,child_process:i};globalThis.require=function(o){return s[o]}}c(T,"initNodeModules");function oe(r,n){return D.resolve(n||".",r)}c(oe,"node_resolvePath");function ae(r,n){return n===void 0&&(n=location),new URL(r,n).toString()}c(ae,"browser_resolvePath");var k;g?k=oe:k=ae;var U;g||(U="/");function se(r,n){return r.startsWith("file://")&&(r=r.slice(7)),r.includes("://")?{response:fetch(r)}:{binary:L.readFile(r).then(e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}}c(se,"node_getBinaryResponse");function ce(r,n){let e=new URL(r,location);return{response:fetch(e,n?{integrity:n}:{})}}c(ce,"browser_getBinaryResponse");var R;g?R=se:R=ce;async function q(r,n){let{response:e,binary:i}=R(r,n);if(i)return i;let s=await e;if(!s.ok)throw new Error(`Failed to load '${r}': request failed.`);return new Uint8Array(await s.arrayBuffer())}c(q,"loadBinaryFile");var F;if($)F=c(async r=>await import(r),"loadScript");else if(j)F=c(async r=>{try{globalThis.importScripts(r)}catch(n){if(n instanceof TypeError)await import(r);else throw n}},"loadScript");else if(g)F=le;else throw new Error("Cannot determine runtime environment");async function le(r){r.startsWith("file://")&&(r=r.slice(7)),r.includes("://")?V.runInThisContext(await(await fetch(r)).text()):await import(z.pathToFileURL(r).href)}c(le,"nodeLoadScript");async function J(r){if(g){await T();let n=await L.readFile(r,{encoding:"utf8"});return JSON.parse(n)}else return await(await fetch(r)).json()}c(J,"loadLockFile");async function K(){if(A)return __dirname;let r;try{throw new Error}catch(i){r=i}let n=M.parse(r)[0].fileName;if(g&&!n.startsWith("file://")&&(n=`file://${n}`),W){let i=await __vitePreload(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);return(await __vitePreload(async()=>{const{fileURLToPath:s}=await import("./__vite-browser-external-BIHI7g3E.js");return{fileURLToPath:s}},[])).fileURLToPath(i.dirname(n))}let e=n.lastIndexOf(U);if(e===-1)throw new Error("Could not extract indexURL path from pyodide module location");return n.slice(0,e)}c(K,"calculateDirname");function Y(r){let n=r.FS,e=r.FS.filesystems.MEMFS,i=r.PATH,s={DIR_MODE:16895,FILE_MODE:33279,mount:function(o){if(!o.opts.fileSystemHandle)throw new Error("opts.fileSystemHandle is required");return e.mount.apply(null,arguments)},syncfs:async(o,u,l)=>{try{let d=s.getLocalSet(o),m=await s.getRemoteSet(o),y=u?m:d,S=u?d:m;await s.reconcile(o,y,S),l(null)}catch(d){l(d)}},getLocalSet:o=>{let u=Object.create(null);function l(y){return y!=="."&&y!==".."}c(l,"isRealDir");function d(y){return S=>i.join2(y,S)}c(d,"toAbsolute");let m=n.readdir(o.mountpoint).filter(l).map(d(o.mountpoint));for(;m.length;){let y=m.pop(),S=n.stat(y);n.isDir(S.mode)&&m.push.apply(m,n.readdir(y).filter(l).map(d(y))),u[y]={timestamp:S.mtime,mode:S.mode}}return{type:"local",entries:u}},getRemoteSet:async o=>{let u=Object.create(null),l=await de(o.opts.fileSystemHandle);for(let[d,m]of l)d!=="."&&(u[i.join2(o.mountpoint,d)]={timestamp:m.kind==="file"?(await m.getFile()).lastModifiedDate:new Date,mode:m.kind==="file"?s.FILE_MODE:s.DIR_MODE});return{type:"remote",entries:u,handles:l}},loadLocalEntry:o=>{let u=n.lookupPath(o).node,l=n.stat(o);if(n.isDir(l.mode))return{timestamp:l.mtime,mode:l.mode};if(n.isFile(l.mode))return u.contents=e.getFileDataAsTypedArray(u),{timestamp:l.mtime,mode:l.mode,contents:u.contents};throw new Error("node type not supported")},storeLocalEntry:(o,u)=>{if(n.isDir(u.mode))n.mkdirTree(o,u.mode);else if(n.isFile(u.mode))n.writeFile(o,u.contents,{canOwn:!0});else throw new Error("node type not supported");n.chmod(o,u.mode),n.utime(o,u.timestamp,u.timestamp)},removeLocalEntry:o=>{var u=n.stat(o);n.isDir(u.mode)?n.rmdir(o):n.isFile(u.mode)&&n.unlink(o)},loadRemoteEntry:async o=>{if(o.kind==="file"){let u=await o.getFile();return{contents:new Uint8Array(await u.arrayBuffer()),mode:s.FILE_MODE,timestamp:u.lastModifiedDate}}else{if(o.kind==="directory")return{mode:s.DIR_MODE,timestamp:new Date};throw new Error("unknown kind: "+o.kind)}},storeRemoteEntry:async(o,u,l)=>{let d=o.get(i.dirname(u)),m=n.isFile(l.mode)?await d.getFileHandle(i.basename(u),{create:!0}):await d.getDirectoryHandle(i.basename(u),{create:!0});if(m.kind==="file"){let y=await m.createWritable();await y.write(l.contents),await y.close()}o.set(u,m)},removeRemoteEntry:async(o,u)=>{await o.get(i.dirname(u)).removeEntry(i.basename(u)),o.delete(u)},reconcile:async(o,u,l)=>{let d=0,m=[];Object.keys(u.entries).forEach(function(X){let he=u.entries[X],Ce=l.entries[X];(!Ce||n.isFile(he.mode)&&he.timestamp.getTime()>Ce.timestamp.getTime())&&(m.push(X),d++)}),m.sort();let y=[];if(Object.keys(l.entries).forEach(function(X){u.entries[X]||(y.push(X),d++)}),y.sort().reverse(),!d)return;let S=u.type==="remote"?u.handles:l.handles;for(let X of m){let he=i.normalize(X.replace(o.mountpoint,"/")).substring(1);if(l.type==="local"){let Ce=S.get(he),Ee=await s.loadRemoteEntry(Ce);s.storeLocalEntry(X,Ee)}else{let Ce=s.loadLocalEntry(X);await s.storeRemoteEntry(S,he,Ce)}}for(let X of y)if(l.type==="local")s.removeLocalEntry(X);else{let he=i.normalize(X.replace(o.mountpoint,"/")).substring(1);await s.removeRemoteEntry(S,he)}}};r.FS.filesystems.NATIVEFS_ASYNC=s}c(Y,"initializeNativeFS");var de=c(async r=>{let n=[];async function e(s){for await(let o of s.values())n.push(o),o.kind==="directory"&&await e(o)}c(e,"collect"),await e(r);let i=new Map;i.set(".",r);for(let s of n){let o=(await r.resolve(s)).join("/");i.set(o,s)}return i},"getFsHandles");function G(r){let n={noImageDecoding:!0,noAudioDecoding:!0,noWasmDecoding:!1,preRun:ge(r),quit(e,i){throw n.exited={status:e,toThrow:i},i},print:r.stdout,printErr:r.stderr,arguments:r.args,API:{config:r},locateFile:e=>r.indexURL+e,instantiateWasm:ye(r.indexURL)};return n}c(G,"createSettings");function ue(r){return function(n){let e="/";try{n.FS.mkdirTree(r)}catch(i){console.error(`Error occurred while making a home directory '${r}':`),console.error(i),console.error(`Using '${e}' for a home directory instead`),r=e}n.FS.chdir(r)}}c(ue,"createHomeDirectory");function fe(r){return function(n){Object.assign(n.ENV,r)}}c(fe,"setEnvironment");function me(r){return n=>{for(let e of r)n.FS.mkdirTree(e),n.FS.mount(n.FS.filesystems.NODEFS,{root:e},e)}}c(me,"mountLocalDirectories");function pe(r){let n=q(r);return e=>{let i=e._py_version_major(),s=e._py_version_minor();e.FS.mkdirTree("/lib"),e.FS.mkdirTree(`/lib/python${i}.${s}/site-packages`),e.addRunDependency("install-stdlib"),n.then(o=>{e.FS.writeFile(`/lib/python${i}${s}.zip`,o)}).catch(o=>{console.error("Error occurred while installing the standard library:"),console.error(o)}).finally(()=>{e.removeRunDependency("install-stdlib")})}}c(pe,"installStdlib");function ge(r){let n;return r.stdLibURL!=null?n=r.stdLibURL:n=r.indexURL+"python_stdlib.zip",[pe(n),ue(r.env.HOME),fe(r.env),me(r._node_mounts),Y]}c(ge,"getFileSystemInitializationFuncs");function ye(r){let{binary:n,response:e}=R(r+"pyodide.asm.wasm");return function(i,s){return async function(){try{let o;e?o=await WebAssembly.instantiateStreaming(e,i):o=await WebAssembly.instantiate(await n,i);let{instance:u,module:l}=o;typeof WasmOffsetConverter<"u"&&(wasmOffsetConverter=new WasmOffsetConverter(wasmBinary,l)),s(u,l)}catch(o){console.warn("wasm instantiation failed!"),console.warn(o)}}(),{}}}c(ye,"getInstantiateWasmFunc");var C="0.27.0";async function $e(r={}){var n,e;await T();let i=r.indexURL||await K();i=k(i),i.endsWith("/")||(i+="/"),r.indexURL=i;let s={fullStdLib:!1,jsglobals:globalThis,stdin:globalThis.prompt?globalThis.prompt:void 0,lockFileURL:i+"pyodide-lock.json",args:[],_node_mounts:[],env:{},packageCacheDir:i,packages:[],enableRunUntilComplete:!1,checkAPIVersion:!0,BUILD_ID:"8f254d3346bd62b9d3eb64ff47e12c292072a672346cdf144e38e4e3f6572e16"},o=Object.assign(s,r);(n=o.env).HOME??(n.HOME="/home/pyodide"),(e=o.env).PYTHONINSPECT??(e.PYTHONINSPECT="1");let u=G(o),l=u.API;if(l.lockFilePromise=J(o.lockFileURL),typeof _createPyodideModule!="function"){let X=`${o.indexURL}pyodide.asm.js`;await F(X)}let d;if(r._loadSnapshot){let X=await r._loadSnapshot;ArrayBuffer.isView(X)?d=X:d=new Uint8Array(X),u.noInitialRun=!0,u.INITIAL_MEMORY=d.length}let m=await _createPyodideModule(u);if(u.exited)throw u.exited.toThrow;if(r.pyproxyToStringRepr&&l.setPyProxyToStringMethod(!0),l.version!==C&&o.checkAPIVersion)throw new Error(`Pyodide version does not match: '${C}' <==> '${l.version}'. If you updated the Pyodide version, make sure you also updated the 'indexURL' parameter passed to loadPyodide.`);m.locateFile=X=>{throw new Error("Didn't expect to load any more file_packager files!")};let y;d&&(y=l.restoreSnapshot(d));let S=l.finalizeBootstrap(y,r._snapshotDeserializer);return l.sys.path.insert(0,l.config.env.HOME),S.version.includes("dev")||l.setCdnUrl(`https://cdn.jsdelivr.net/pyodide/v${S.version}/full/`),l._pyodide.set_excepthook(),await l.packageIndexReady,l.initializeStreams(o.stdin,o.stdout,o.stderr),S}c($e,"loadPyodide");function ElementFromProps(r){if(!r.get("tag"))return document.createTextNode(r.get("text"));const e=document.createElement(r.get("tag"));for(const[i,s]of r.get("props"))e.setAttribute(i,s);for(const i of r.get("children"))e.appendChild(ElementFromProps(i));return e}window.addEventListener("load",async()=>{window.pyodide=await $e({indexURL:"/Pyodide"}),pyodide.setStdin({stdin:()=>prompt(window.pythonPromptString||"Python code is asking for a value:")}),pyodide.registerJsModule("fractaltree",{prePrompt:r=>{window.pythonPromptString=r}}),pyodide.registerJsModule("basthon",{kernel:{display_event:r=>{window.enableGUIOutput(),document.getElementById("guiOutputWindow").innerHTML=ElementFromProps(r.toJs().get("content")).outerHTML},locals:()=>pyodide.runPython("globals()")}}),await pyodide.loadPackage("/Pyodide/turtle-0.0.1-py3-none-any.whl"),window.doneInitStep()});var postInjectedPythonLib=`
import basthon
import sys

# If the user includes the turtle module, show the GUI window
if 'turtle' in sys.modules:
    print("[Python Engine] Displaying Turtle UI")
    import turtle # Reimport it in case the user imported with "from turtle import *" (which won't work for this)
    svg_dict = turtle.Screen().show_scene()
    basthon.kernel.display_event({ "display_type": "turtle", "content": svg_dict })
    turtle.restart()
    sys.modules.pop('turtle')
`,injectedPythonLib=`
import builtins
import time
from fractaltree import prePrompt


def input(prompt):
    prePrompt(prompt)
    time.sleep(0)
    value = builtins.input(prompt)
    print("")
    return value

`;async function ExecutePython(r,n){n("\x1B[2J\x1B[H"),n("\x1B[38;5;232m"),pyodide.setStdout({batched:e=>n(e+`\r
`)});try{await pyodide.runPythonAsync(injectedPythonLib+r+postInjectedPythonLib)}catch(e){n("\x1B[38;5;196m"),n(e.toString())}}function ExecuteJavaScript(code,stdOut){stdOut("\x1B[2J\x1B[H"),stdOut("\x1B[38;5;232m"),window.jsStubOut=r=>stdOut(r.toString()),window.input=prompt,window.print=jsStubOut,code=code.replaceAll("console.log","window.jsStubOut");try{eval(code)}catch(r){stdOut("\x1B[38;5;196m"),stdOut(r.toString())}}function CodeEditor(){var r=reactExports.useRef(null),[n,e]=reactExports.useState(!1),[i,s]=reactExports.useState({}),[o,u]=reactExports.useState([]),l=reactExports.useRef(null);window.openCodeEditor=(S,X)=>{s(S),u([X]),e(!0)},window.enableGUIOutput=()=>{var S;(S=l.current)==null||S.classList.add("enabledOutput")},window.disableGUIOutput=()=>{var S;(S=l.current)==null||S.setAttribute("class","guiOutputWindow")};var d=S=>{i.code=S,s(Object.assign({},i))},m=()=>i.language=="python"?prismCoreExports.languages.python:prismCoreExports.languages.js,y=()=>{window.disableGUIOutput(),i.language=="python"?ExecutePython(i.code,S=>r.current.write(S)):i.language=="javascript"&&ExecuteJavaScript(i.code,S=>r.current.write(S))};return jsxRuntimeExports.jsxs(Sidebar,{style:{height:"100vh",width:"100vw"},className:"codeEditorContainer",position:"right",visible:n,onHide:()=>e(!1),children:[jsxRuntimeExports.jsx(Header,{onBack:()=>e(!1),children:t("ACTION_EDITRUN")}),jsxRuntimeExports.jsxs("div",{className:"codeEditorScroller",children:[jsxRuntimeExports.jsx(Editor,{value:(i==null?void 0:i.code)||"",className:"codeEditor overrideFont",onValueChange:d,padding:10,highlight:()=>prismCoreExports.highlight((i==null?void 0:i.code)||"",m())}),jsxRuntimeExports.jsxs(Button,{onClick:y,className:"editorRun",children:[jsxRuntimeExports.jsx(IconPlayerPlay,{}),"",t("ACTION_RUN")]}),jsxRuntimeExports.jsx("div",{ref:l,id:"guiOutputWindow",className:"guiOutputWindow"}),jsxRuntimeExports.jsx(XTerm,{ref:r,options:{cols:35}})]})]})}const isString=r=>typeof r=="string",defer=()=>{let r,n;const e=new Promise((i,s)=>{r=i,n=s});return e.resolve=r,e.reject=n,e},makeString=r=>r==null?"":""+r,copy=(r,n,e)=>{r.forEach(i=>{n[i]&&(e[i]=n[i])})},lastOfPathSeparatorRegExp=/###/g,cleanKey=r=>r&&r.indexOf("###")>-1?r.replace(lastOfPathSeparatorRegExp,"."):r,canNotTraverseDeeper=r=>!r||isString(r),getLastOfPath=(r,n,e)=>{const i=isString(n)?n.split("."):n;let s=0;for(;s<i.length-1;){if(canNotTraverseDeeper(r))return{};const o=cleanKey(i[s]);!r[o]&&e&&(r[o]=new e),Object.prototype.hasOwnProperty.call(r,o)?r=r[o]:r={},++s}return canNotTraverseDeeper(r)?{}:{obj:r,k:cleanKey(i[s])}},setPath=(r,n,e)=>{const{obj:i,k:s}=getLastOfPath(r,n,Object);if(i!==void 0||n.length===1){i[s]=e;return}let o=n[n.length-1],u=n.slice(0,n.length-1),l=getLastOfPath(r,u,Object);for(;l.obj===void 0&&u.length;)o=`${u[u.length-1]}.${o}`,u=u.slice(0,u.length-1),l=getLastOfPath(r,u,Object),l!=null&&l.obj&&typeof l.obj[`${l.k}.${o}`]<"u"&&(l.obj=void 0);l.obj[`${l.k}.${o}`]=e},pushPath=(r,n,e,i)=>{const{obj:s,k:o}=getLastOfPath(r,n,Object);s[o]=s[o]||[],s[o].push(e)},getPath=(r,n)=>{const{obj:e,k:i}=getLastOfPath(r,n);if(e&&Object.prototype.hasOwnProperty.call(e,i))return e[i]},getPathWithDefaults=(r,n,e)=>{const i=getPath(r,e);return i!==void 0?i:getPath(n,e)},deepExtend=(r,n,e)=>{for(const i in n)i!=="__proto__"&&i!=="constructor"&&(i in r?isString(r[i])||r[i]instanceof String||isString(n[i])||n[i]instanceof String?e&&(r[i]=n[i]):deepExtend(r[i],n[i],e):r[i]=n[i]);return r},regexEscape=r=>r.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var _entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const escape=r=>isString(r)?r.replace(/[&<>"'\/]/g,n=>_entityMap[n]):r;class RegExpCache{constructor(n){this.capacity=n,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(n){const e=this.regExpMap.get(n);if(e!==void 0)return e;const i=new RegExp(n);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(n,i),this.regExpQueue.push(n),i}}const chars=[" ",",","?","!",";"],looksLikeObjectPathRegExpCache=new RegExpCache(20),looksLikeObjectPath=(r,n,e)=>{n=n||"",e=e||"";const i=chars.filter(u=>n.indexOf(u)<0&&e.indexOf(u)<0);if(i.length===0)return!0;const s=looksLikeObjectPathRegExpCache.getRegExp(`(${i.map(u=>u==="?"?"\\?":u).join("|")})`);let o=!s.test(r);if(!o){const u=r.indexOf(e);u>0&&!s.test(r.substring(0,u))&&(o=!0)}return o},deepFind=function(r,n){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!r)return;if(r[n])return Object.prototype.hasOwnProperty.call(r,n)?r[n]:void 0;const i=n.split(e);let s=r;for(let o=0;o<i.length;){if(!s||typeof s!="object")return;let u,l="";for(let d=o;d<i.length;++d)if(d!==o&&(l+=e),l+=i[d],u=s[l],u!==void 0){if(["string","number","boolean"].indexOf(typeof u)>-1&&d<i.length-1)continue;o+=d-o+1;break}s=u}return s},getCleanedCode=r=>r==null?void 0:r.replace("_","-"),consoleLogger={type:"logger",log(r){this.output("log",r)},warn(r){this.output("warn",r)},error(r){this.output("error",r)},output(r,n){var e,i;(i=(e=console==null?void 0:console[r])==null?void 0:e.apply)==null||i.call(e,console,n)}};class Logger{constructor(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(n,e)}init(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=e.prefix||"i18next:",this.logger=n||consoleLogger,this.options=e,this.debug=e.debug}log(){for(var n=arguments.length,e=new Array(n),i=0;i<n;i++)e[i]=arguments[i];return this.forward(e,"log","",!0)}warn(){for(var n=arguments.length,e=new Array(n),i=0;i<n;i++)e[i]=arguments[i];return this.forward(e,"warn","",!0)}error(){for(var n=arguments.length,e=new Array(n),i=0;i<n;i++)e[i]=arguments[i];return this.forward(e,"error","")}deprecate(){for(var n=arguments.length,e=new Array(n),i=0;i<n;i++)e[i]=arguments[i];return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(n,e,i,s){return s&&!this.debug?null:(isString(n[0])&&(n[0]=`${i}${this.prefix} ${n[0]}`),this.logger[e](n))}create(n){return new Logger(this.logger,{prefix:`${this.prefix}:${n}:`,...this.options})}clone(n){return n=n||this.options,n.prefix=n.prefix||this.prefix,new Logger(this.logger,n)}}var baseLogger=new Logger;class EventEmitter{constructor(){this.observers={}}on(n,e){return n.split(" ").forEach(i=>{this.observers[i]||(this.observers[i]=new Map);const s=this.observers[i].get(e)||0;this.observers[i].set(e,s+1)}),this}off(n,e){if(this.observers[n]){if(!e){delete this.observers[n];return}this.observers[n].delete(e)}}emit(n){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];this.observers[n]&&Array.from(this.observers[n].entries()).forEach(u=>{let[l,d]=u;for(let m=0;m<d;m++)l(...i)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(u=>{let[l,d]=u;for(let m=0;m<d;m++)l.apply(l,[n,...i])})}}class ResourceStore extends EventEmitter{constructor(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=n||{},this.options=e,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(n){this.options.ns.indexOf(n)<0&&this.options.ns.push(n)}removeNamespaces(n){const e=this.options.ns.indexOf(n);e>-1&&this.options.ns.splice(e,1)}getResource(n,e,i){var m,y;let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const o=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,u=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure;let l;n.indexOf(".")>-1?l=n.split("."):(l=[n,e],i&&(Array.isArray(i)?l.push(...i):isString(i)&&o?l.push(...i.split(o)):l.push(i)));const d=getPath(this.data,l);return!d&&!e&&!i&&n.indexOf(".")>-1&&(n=l[0],e=l[1],i=l.slice(2).join(".")),d||!u||!isString(i)?d:deepFind((y=(m=this.data)==null?void 0:m[n])==null?void 0:y[e],i,o)}addResource(n,e,i,s){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const u=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let l=[n,e];i&&(l=l.concat(u?i.split(u):i)),n.indexOf(".")>-1&&(l=n.split("."),s=e,e=l[1]),this.addNamespaces(e),setPath(this.data,l,s),o.silent||this.emit("added",n,e,i,s)}addResources(n,e,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const o in i)(isString(i[o])||Array.isArray(i[o]))&&this.addResource(n,e,o,i[o],{silent:!0});s.silent||this.emit("added",n,e,i)}addResourceBundle(n,e,i,s,o){let u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},l=[n,e];n.indexOf(".")>-1&&(l=n.split("."),s=i,i=e,e=l[1]),this.addNamespaces(e);let d=getPath(this.data,l)||{};u.skipCopy||(i=JSON.parse(JSON.stringify(i))),s?deepExtend(d,i,o):d={...d,...i},setPath(this.data,l,d),u.silent||this.emit("added",n,e,i)}removeResourceBundle(n,e){this.hasResourceBundle(n,e)&&delete this.data[n][e],this.removeNamespaces(e),this.emit("removed",n,e)}hasResourceBundle(n,e){return this.getResource(n,e)!==void 0}getResourceBundle(n,e){return e||(e=this.options.defaultNS),this.getResource(n,e)}getDataByLanguage(n){return this.data[n]}hasLanguageSomeTranslations(n){const e=this.getDataByLanguage(n);return!!(e&&Object.keys(e)||[]).find(s=>e[s]&&Object.keys(e[s]).length>0)}toJSON(){return this.data}}var postProcessor={processors:{},addPostProcessor(r){this.processors[r.name]=r},handle(r,n,e,i,s){return r.forEach(o=>{var u;n=((u=this.processors[o])==null?void 0:u.process(n,e,i,s))??n}),n}};const checkedLoadedFor={};class Translator extends EventEmitter{constructor(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),copy(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],n,this),this.options=e,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=baseLogger.create("translator")}changeLanguage(n){n&&(this.language=n)}exists(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(n==null)return!1;const i=this.resolve(n,e);return(i==null?void 0:i.res)!==void 0}extractFromKey(n,e){let i=e.nsSeparator!==void 0?e.nsSeparator:this.options.nsSeparator;i===void 0&&(i=":");const s=e.keySeparator!==void 0?e.keySeparator:this.options.keySeparator;let o=e.ns||this.options.defaultNS||[];const u=i&&n.indexOf(i)>-1,l=!this.options.userDefinedKeySeparator&&!e.keySeparator&&!this.options.userDefinedNsSeparator&&!e.nsSeparator&&!looksLikeObjectPath(n,i,s);if(u&&!l){const d=n.match(this.interpolator.nestingRegexp);if(d&&d.length>0)return{key:n,namespaces:isString(o)?[o]:o};const m=n.split(i);(i!==s||i===s&&this.options.ns.indexOf(m[0])>-1)&&(o=m.shift()),n=m.join(s)}return{key:n,namespaces:isString(o)?[o]:o}}translate(n,e,i){if(typeof e!="object"&&this.options.overloadTranslationOptionHandler&&(e=this.options.overloadTranslationOptionHandler(arguments)),typeof e=="object"&&(e={...e}),e||(e={}),n==null)return"";Array.isArray(n)||(n=[String(n)]);const s=e.returnDetails!==void 0?e.returnDetails:this.options.returnDetails,o=e.keySeparator!==void 0?e.keySeparator:this.options.keySeparator,{key:u,namespaces:l}=this.extractFromKey(n[n.length-1],e),d=l[l.length-1],m=e.lng||this.language,y=e.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((m==null?void 0:m.toLowerCase())==="cimode"){if(y){const ke=e.nsSeparator||this.options.nsSeparator;return s?{res:`${d}${ke}${u}`,usedKey:u,exactUsedKey:u,usedLng:m,usedNS:d,usedParams:this.getUsedParamsDetails(e)}:`${d}${ke}${u}`}return s?{res:u,usedKey:u,exactUsedKey:u,usedLng:m,usedNS:d,usedParams:this.getUsedParamsDetails(e)}:u}const S=this.resolve(n,e);let X=S==null?void 0:S.res;const he=(S==null?void 0:S.usedKey)||u,Ce=(S==null?void 0:S.exactUsedKey)||u,Ee=Object.prototype.toString.apply(X),xe=["[object Number]","[object Function]","[object RegExp]"],be=e.joinArrays!==void 0?e.joinArrays:this.options.joinArrays,we=!this.i18nFormat||this.i18nFormat.handleAsObject,ve=!isString(X)&&typeof X!="boolean"&&typeof X!="number";if(we&&X&&ve&&xe.indexOf(Ee)<0&&!(isString(be)&&Array.isArray(X))){if(!e.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const ke=this.options.returnedObjectHandler?this.options.returnedObjectHandler(he,X,{...e,ns:l}):`key '${u} (${this.language})' returned an object instead of string.`;return s?(S.res=ke,S.usedParams=this.getUsedParamsDetails(e),S):ke}if(o){const ke=Array.isArray(X),De=ke?[]:{},Oe=ke?Ce:he;for(const Le in X)if(Object.prototype.hasOwnProperty.call(X,Le)){const Ae=`${Oe}${o}${Le}`;De[Le]=this.translate(Ae,{...e,joinArrays:!1,ns:l}),De[Le]===Ae&&(De[Le]=X[Le])}X=De}}else if(we&&isString(be)&&Array.isArray(X))X=X.join(be),X&&(X=this.extendTranslation(X,n,e,i));else{let ke=!1,De=!1;const Oe=e.count!==void 0&&!isString(e.count),Le=Translator.hasDefaultValue(e),Ae=Oe?this.pluralResolver.getSuffix(m,e.count,e):"",Ie=e.ordinal&&Oe?this.pluralResolver.getSuffix(m,e.count,{ordinal:!1}):"",Ue=Oe&&!e.ordinal&&e.count===0,ze=Ue&&e[`defaultValue${this.options.pluralSeparator}zero`]||e[`defaultValue${Ae}`]||e[`defaultValue${Ie}`]||e.defaultValue;!this.isValidLookup(X)&&Le&&(ke=!0,X=ze),this.isValidLookup(X)||(De=!0,X=u);const Xe=(e.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&De?void 0:X,tt=Le&&ze!==X&&this.options.updateMissing;if(De||ke||tt){if(this.logger.log(tt?"updateKey":"missingKey",m,d,u,tt?ze:X),o){const rt=this.resolve(u,{...e,keySeparator:!1});rt&&rt.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let lt=[];const _t=this.languageUtils.getFallbackCodes(this.options.fallbackLng,e.lng||this.language);if(this.options.saveMissingTo==="fallback"&&_t&&_t[0])for(let rt=0;rt<_t.length;rt++)lt.push(_t[rt]);else this.options.saveMissingTo==="all"?lt=this.languageUtils.toResolveHierarchy(e.lng||this.language):lt.push(e.lng||this.language);const bt=(rt,He,We)=>{var Ke;const qe=Le&&We!==X?We:Xe;this.options.missingKeyHandler?this.options.missingKeyHandler(rt,d,He,qe,tt,e):(Ke=this.backendConnector)!=null&&Ke.saveMissing&&this.backendConnector.saveMissing(rt,d,He,qe,tt,e),this.emit("missingKey",rt,d,He,X)};this.options.saveMissing&&(this.options.saveMissingPlurals&&Oe?lt.forEach(rt=>{const He=this.pluralResolver.getSuffixes(rt,e);Ue&&e[`defaultValue${this.options.pluralSeparator}zero`]&&He.indexOf(`${this.options.pluralSeparator}zero`)<0&&He.push(`${this.options.pluralSeparator}zero`),He.forEach(We=>{bt([rt],u+We,e[`defaultValue${We}`]||ze)})}):bt(lt,u,ze))}X=this.extendTranslation(X,n,e,S,i),De&&X===u&&this.options.appendNamespaceToMissingKey&&(X=`${d}:${u}`),(De||ke)&&this.options.parseMissingKeyHandler&&(X=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${d}:${u}`:u,ke?X:void 0))}return s?(S.res=X,S.usedParams=this.getUsedParamsDetails(e),S):X}extendTranslation(n,e,i,s,o){var m,y;var u=this;if((m=this.i18nFormat)!=null&&m.parse)n=this.i18nFormat.parse(n,{...this.options.interpolation.defaultVariables,...i},i.lng||this.language||s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!i.skipInterpolation){i.interpolation&&this.interpolator.init({...i,interpolation:{...this.options.interpolation,...i.interpolation}});const S=isString(n)&&(((y=i==null?void 0:i.interpolation)==null?void 0:y.skipOnVariables)!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let X;if(S){const Ce=n.match(this.interpolator.nestingRegexp);X=Ce&&Ce.length}let he=i.replace&&!isString(i.replace)?i.replace:i;if(this.options.interpolation.defaultVariables&&(he={...this.options.interpolation.defaultVariables,...he}),n=this.interpolator.interpolate(n,he,i.lng||this.language||s.usedLng,i),S){const Ce=n.match(this.interpolator.nestingRegexp),Ee=Ce&&Ce.length;X<Ee&&(i.nest=!1)}!i.lng&&s&&s.res&&(i.lng=this.language||s.usedLng),i.nest!==!1&&(n=this.interpolator.nest(n,function(){for(var Ce=arguments.length,Ee=new Array(Ce),xe=0;xe<Ce;xe++)Ee[xe]=arguments[xe];return(o==null?void 0:o[0])===Ee[0]&&!i.context?(u.logger.warn(`It seems you are nesting recursively key: ${Ee[0]} in key: ${e[0]}`),null):u.translate(...Ee,e)},i)),i.interpolation&&this.interpolator.reset()}const l=i.postProcess||this.options.postProcess,d=isString(l)?[l]:l;return n!=null&&(d!=null&&d.length)&&i.applyPostProcessor!==!1&&(n=postProcessor.handle(d,n,e,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...s,usedParams:this.getUsedParamsDetails(i)},...i}:i,this)),n}resolve(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i,s,o,u,l;return isString(n)&&(n=[n]),n.forEach(d=>{if(this.isValidLookup(i))return;const m=this.extractFromKey(d,e),y=m.key;s=y;let S=m.namespaces;this.options.fallbackNS&&(S=S.concat(this.options.fallbackNS));const X=e.count!==void 0&&!isString(e.count),he=X&&!e.ordinal&&e.count===0,Ce=e.context!==void 0&&(isString(e.context)||typeof e.context=="number")&&e.context!=="",Ee=e.lngs?e.lngs:this.languageUtils.toResolveHierarchy(e.lng||this.language,e.fallbackLng);S.forEach(xe=>{var be,we;this.isValidLookup(i)||(l=xe,!checkedLoadedFor[`${Ee[0]}-${xe}`]&&((be=this.utils)!=null&&be.hasLoadedNamespace)&&!((we=this.utils)!=null&&we.hasLoadedNamespace(l))&&(checkedLoadedFor[`${Ee[0]}-${xe}`]=!0,this.logger.warn(`key "${s}" for languages "${Ee.join(", ")}" won't get resolved as namespace "${l}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),Ee.forEach(ve=>{var Oe;if(this.isValidLookup(i))return;u=ve;const ke=[y];if((Oe=this.i18nFormat)!=null&&Oe.addLookupKeys)this.i18nFormat.addLookupKeys(ke,y,ve,xe,e);else{let Le;X&&(Le=this.pluralResolver.getSuffix(ve,e.count,e));const Ae=`${this.options.pluralSeparator}zero`,Ie=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(X&&(ke.push(y+Le),e.ordinal&&Le.indexOf(Ie)===0&&ke.push(y+Le.replace(Ie,this.options.pluralSeparator)),he&&ke.push(y+Ae)),Ce){const Ue=`${y}${this.options.contextSeparator}${e.context}`;ke.push(Ue),X&&(ke.push(Ue+Le),e.ordinal&&Le.indexOf(Ie)===0&&ke.push(Ue+Le.replace(Ie,this.options.pluralSeparator)),he&&ke.push(Ue+Ae))}}let De;for(;De=ke.pop();)this.isValidLookup(i)||(o=De,i=this.getResource(ve,xe,De,e))}))})}),{res:i,usedKey:s,exactUsedKey:o,usedLng:u,usedNS:l}}isValidLookup(n){return n!==void 0&&!(!this.options.returnNull&&n===null)&&!(!this.options.returnEmptyString&&n==="")}getResource(n,e,i){var o;let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return(o=this.i18nFormat)!=null&&o.getResource?this.i18nFormat.getResource(n,e,i,s):this.resourceStore.getResource(n,e,i,s)}getUsedParamsDetails(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],i=n.replace&&!isString(n.replace);let s=i?n.replace:n;if(i&&typeof n.count<"u"&&(s.count=n.count),this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),!i){s={...s};for(const o of e)delete s[o]}return s}static hasDefaultValue(n){const e="defaultValue";for(const i in n)if(Object.prototype.hasOwnProperty.call(n,i)&&e===i.substring(0,e.length)&&n[i]!==void 0)return!0;return!1}}class LanguageUtil{constructor(n){this.options=n,this.supportedLngs=this.options.supportedLngs||!1,this.logger=baseLogger.create("languageUtils")}getScriptPartFromCode(n){if(n=getCleanedCode(n),!n||n.indexOf("-")<0)return null;const e=n.split("-");return e.length===2||(e.pop(),e[e.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(e.join("-"))}getLanguagePartFromCode(n){if(n=getCleanedCode(n),!n||n.indexOf("-")<0)return n;const e=n.split("-");return this.formatLanguageCode(e[0])}formatLanguageCode(n){if(isString(n)&&n.indexOf("-")>-1){let e;try{e=Intl.getCanonicalLocales(n)[0]}catch{}return e&&this.options.lowerCaseLng&&(e=e.toLowerCase()),e||(this.options.lowerCaseLng?n.toLowerCase():n)}return this.options.cleanCode||this.options.lowerCaseLng?n.toLowerCase():n}isSupportedCode(n){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(n=this.getLanguagePartFromCode(n)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(n)>-1}getBestMatchFromCodes(n){if(!n)return null;let e;return n.forEach(i=>{if(e)return;const s=this.formatLanguageCode(i);(!this.options.supportedLngs||this.isSupportedCode(s))&&(e=s)}),!e&&this.options.supportedLngs&&n.forEach(i=>{if(e)return;const s=this.getLanguagePartFromCode(i);if(this.isSupportedCode(s))return e=s;e=this.options.supportedLngs.find(o=>{if(o===s)return o;if(!(o.indexOf("-")<0&&s.indexOf("-")<0)&&(o.indexOf("-")>0&&s.indexOf("-")<0&&o.substring(0,o.indexOf("-"))===s||o.indexOf(s)===0&&s.length>1))return o})}),e||(e=this.getFallbackCodes(this.options.fallbackLng)[0]),e}getFallbackCodes(n,e){if(!n)return[];if(typeof n=="function"&&(n=n(e)),isString(n)&&(n=[n]),Array.isArray(n))return n;if(!e)return n.default||[];let i=n[e];return i||(i=n[this.getScriptPartFromCode(e)]),i||(i=n[this.formatLanguageCode(e)]),i||(i=n[this.getLanguagePartFromCode(e)]),i||(i=n.default),i||[]}toResolveHierarchy(n,e){const i=this.getFallbackCodes(e||this.options.fallbackLng||[],n),s=[],o=u=>{u&&(this.isSupportedCode(u)?s.push(u):this.logger.warn(`rejecting language code not found in supportedLngs: ${u}`))};return isString(n)&&(n.indexOf("-")>-1||n.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(n)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(n)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(n))):isString(n)&&o(this.formatLanguageCode(n)),i.forEach(u=>{s.indexOf(u)<0&&o(this.formatLanguageCode(u))}),s}}const suffixesOrder={zero:0,one:1,two:2,few:3,many:4,other:5},dummyRule={select:r=>r===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class PluralResolver{constructor(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=n,this.options=e,this.logger=baseLogger.create("pluralResolver"),this.pluralRulesCache={}}addRule(n,e){this.rules[n]=e}clearCache(){this.pluralRulesCache={}}getRule(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=getCleanedCode(n==="dev"?"en":n),s=e.ordinal?"ordinal":"cardinal",o=JSON.stringify({cleanedCode:i,type:s});if(o in this.pluralRulesCache)return this.pluralRulesCache[o];let u;try{u=new Intl.PluralRules(i,{type:s})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),dummyRule;if(!n.match(/-|_/))return dummyRule;const d=this.languageUtils.getLanguagePartFromCode(n);u=this.getRule(d,e)}return this.pluralRulesCache[o]=u,u}needsPlural(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this.getRule(n,e);return i||(i=this.getRule("dev",e)),(i==null?void 0:i.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(n,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(n,i).map(s=>`${e}${s}`)}getSuffixes(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this.getRule(n,e);return i||(i=this.getRule("dev",e)),i?i.resolvedOptions().pluralCategories.sort((s,o)=>suffixesOrder[s]-suffixesOrder[o]).map(s=>`${this.options.prepend}${e.ordinal?`ordinal${this.options.prepend}`:""}${s}`):[]}getSuffix(n,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=this.getRule(n,i);return s?`${this.options.prepend}${i.ordinal?`ordinal${this.options.prepend}`:""}${s.select(e)}`:(this.logger.warn(`no plural rule found for: ${n}`),this.getSuffix("dev",e,i))}}const deepFindWithDefaults=function(r,n,e){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=getPathWithDefaults(r,n,e);return!o&&s&&isString(e)&&(o=deepFind(r,e,i),o===void 0&&(o=deepFind(n,e,i))),o},regexSafe=r=>r.replace(/\$/g,"$$$$");class Interpolator{constructor(){var e;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=baseLogger.create("interpolator"),this.options=n,this.format=((e=n==null?void 0:n.interpolation)==null?void 0:e.format)||(i=>i),this.init(n)}init(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};n.interpolation||(n.interpolation={escapeValue:!0});const{escape:e,escapeValue:i,useRawValueToEscape:s,prefix:o,prefixEscaped:u,suffix:l,suffixEscaped:d,formatSeparator:m,unescapeSuffix:y,unescapePrefix:S,nestingPrefix:X,nestingPrefixEscaped:he,nestingSuffix:Ce,nestingSuffixEscaped:Ee,nestingOptionsSeparator:xe,maxReplaces:be,alwaysFormat:we}=n.interpolation;this.escape=e!==void 0?e:escape,this.escapeValue=i!==void 0?i:!0,this.useRawValueToEscape=s!==void 0?s:!1,this.prefix=o?regexEscape(o):u||"{{",this.suffix=l?regexEscape(l):d||"}}",this.formatSeparator=m||",",this.unescapePrefix=y?"":S||"-",this.unescapeSuffix=this.unescapePrefix?"":y||"",this.nestingPrefix=X?regexEscape(X):he||regexEscape("$t("),this.nestingSuffix=Ce?regexEscape(Ce):Ee||regexEscape(")"),this.nestingOptionsSeparator=xe||",",this.maxReplaces=be||1e3,this.alwaysFormat=we!==void 0?we:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const n=(e,i)=>(e==null?void 0:e.source)===i?(e.lastIndex=0,e):new RegExp(i,"g");this.regexp=n(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=n(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=n(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(n,e,i,s){var he;let o,u,l;const d=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},m=Ce=>{if(Ce.indexOf(this.formatSeparator)<0){const we=deepFindWithDefaults(e,d,Ce,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(we,void 0,i,{...s,...e,interpolationkey:Ce}):we}const Ee=Ce.split(this.formatSeparator),xe=Ee.shift().trim(),be=Ee.join(this.formatSeparator).trim();return this.format(deepFindWithDefaults(e,d,xe,this.options.keySeparator,this.options.ignoreJSONStructure),be,i,{...s,...e,interpolationkey:xe})};this.resetRegExp();const y=(s==null?void 0:s.missingInterpolationHandler)||this.options.missingInterpolationHandler,S=((he=s==null?void 0:s.interpolation)==null?void 0:he.skipOnVariables)!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:Ce=>regexSafe(Ce)},{regex:this.regexp,safeValue:Ce=>this.escapeValue?regexSafe(this.escape(Ce)):regexSafe(Ce)}].forEach(Ce=>{for(l=0;o=Ce.regex.exec(n);){const Ee=o[1].trim();if(u=m(Ee),u===void 0)if(typeof y=="function"){const be=y(n,o,s);u=isString(be)?be:""}else if(s&&Object.prototype.hasOwnProperty.call(s,Ee))u="";else if(S){u=o[0];continue}else this.logger.warn(`missed to pass in variable ${Ee} for interpolating ${n}`),u="";else!isString(u)&&!this.useRawValueToEscape&&(u=makeString(u));const xe=Ce.safeValue(u);if(n=n.replace(o[0],xe),S?(Ce.regex.lastIndex+=u.length,Ce.regex.lastIndex-=o[0].length):Ce.regex.lastIndex=0,l++,l>=this.maxReplaces)break}}),n}nest(n,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s,o,u;const l=(d,m)=>{const y=this.nestingOptionsSeparator;if(d.indexOf(y)<0)return d;const S=d.split(new RegExp(`${y}[ ]*{`));let X=`{${S[1]}`;d=S[0],X=this.interpolate(X,u);const he=X.match(/'/g),Ce=X.match(/"/g);(((he==null?void 0:he.length)??0)%2===0&&!Ce||Ce.length%2!==0)&&(X=X.replace(/'/g,'"'));try{u=JSON.parse(X),m&&(u={...m,...u})}catch(Ee){return this.logger.warn(`failed parsing options string in nesting for key ${d}`,Ee),`${d}${y}${X}`}return u.defaultValue&&u.defaultValue.indexOf(this.prefix)>-1&&delete u.defaultValue,d};for(;s=this.nestingRegexp.exec(n);){let d=[];u={...i},u=u.replace&&!isString(u.replace)?u.replace:u,u.applyPostProcessor=!1,delete u.defaultValue;let m=!1;if(s[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(s[1])){const y=s[1].split(this.formatSeparator).map(S=>S.trim());s[1]=y.shift(),d=y,m=!0}if(o=e(l.call(this,s[1].trim(),u),u),o&&s[0]===n&&!isString(o))return o;isString(o)||(o=makeString(o)),o||(this.logger.warn(`missed to resolve ${s[1]} for nesting ${n}`),o=""),m&&(o=d.reduce((y,S)=>this.format(y,S,i.lng,{...i,interpolationkey:s[1].trim()}),o.trim())),n=n.replace(s[0],o),this.regexp.lastIndex=0}return n}}const parseFormatStr=r=>{let n=r.toLowerCase().trim();const e={};if(r.indexOf("(")>-1){const i=r.split("(");n=i[0].toLowerCase().trim();const s=i[1].substring(0,i[1].length-1);n==="currency"&&s.indexOf(":")<0?e.currency||(e.currency=s.trim()):n==="relativetime"&&s.indexOf(":")<0?e.range||(e.range=s.trim()):s.split(";").forEach(u=>{if(u){const[l,...d]=u.split(":"),m=d.join(":").trim().replace(/^'+|'+$/g,""),y=l.trim();e[y]||(e[y]=m),m==="false"&&(e[y]=!1),m==="true"&&(e[y]=!0),isNaN(m)||(e[y]=parseInt(m,10))}})}return{formatName:n,formatOptions:e}},createCachedFormatter=r=>{const n={};return(e,i,s)=>{let o=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(o={...o,[s.interpolationkey]:void 0});const u=i+JSON.stringify(o);let l=n[u];return l||(l=r(getCleanedCode(i),s),n[u]=l),l(e)}};class Formatter{constructor(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=baseLogger.create("formatter"),this.options=n,this.formats={number:createCachedFormatter((e,i)=>{const s=new Intl.NumberFormat(e,{...i});return o=>s.format(o)}),currency:createCachedFormatter((e,i)=>{const s=new Intl.NumberFormat(e,{...i,style:"currency"});return o=>s.format(o)}),datetime:createCachedFormatter((e,i)=>{const s=new Intl.DateTimeFormat(e,{...i});return o=>s.format(o)}),relativetime:createCachedFormatter((e,i)=>{const s=new Intl.RelativeTimeFormat(e,{...i});return o=>s.format(o,i.range||"day")}),list:createCachedFormatter((e,i)=>{const s=new Intl.ListFormat(e,{...i});return o=>s.format(o)})},this.init(n)}init(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=e.interpolation.formatSeparator||","}add(n,e){this.formats[n.toLowerCase().trim()]=e}addCached(n,e){this.formats[n.toLowerCase().trim()]=createCachedFormatter(e)}format(n,e,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const o=e.split(this.formatSeparator);if(o.length>1&&o[0].indexOf("(")>1&&o[0].indexOf(")")<0&&o.find(l=>l.indexOf(")")>-1)){const l=o.findIndex(d=>d.indexOf(")")>-1);o[0]=[o[0],...o.splice(1,l)].join(this.formatSeparator)}return o.reduce((l,d)=>{var S;const{formatName:m,formatOptions:y}=parseFormatStr(d);if(this.formats[m]){let X=l;try{const he=((S=s==null?void 0:s.formatParams)==null?void 0:S[s.interpolationkey])||{},Ce=he.locale||he.lng||s.locale||s.lng||i;X=this.formats[m](l,Ce,{...y,...s,...he})}catch(he){this.logger.warn(he)}return X}else this.logger.warn(`there was no format function for ${m}`);return l},n)}}const removePending=(r,n)=>{r.pending[n]!==void 0&&(delete r.pending[n],r.pendingCount--)};class Connector extends EventEmitter{constructor(n,e,i){var o,u;let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=n,this.store=e,this.services=i,this.languageUtils=i.languageUtils,this.options=s,this.logger=baseLogger.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=s.maxParallelReads||10,this.readingCalls=0,this.maxRetries=s.maxRetries>=0?s.maxRetries:5,this.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,this.state={},this.queue=[],(u=(o=this.backend)==null?void 0:o.init)==null||u.call(o,i,s.backend,s)}queueLoad(n,e,i,s){const o={},u={},l={},d={};return n.forEach(m=>{let y=!0;e.forEach(S=>{const X=`${m}|${S}`;!i.reload&&this.store.hasResourceBundle(m,S)?this.state[X]=2:this.state[X]<0||(this.state[X]===1?u[X]===void 0&&(u[X]=!0):(this.state[X]=1,y=!1,u[X]===void 0&&(u[X]=!0),o[X]===void 0&&(o[X]=!0),d[S]===void 0&&(d[S]=!0)))}),y||(l[m]=!0)}),(Object.keys(o).length||Object.keys(u).length)&&this.queue.push({pending:u,pendingCount:Object.keys(u).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(o),pending:Object.keys(u),toLoadLanguages:Object.keys(l),toLoadNamespaces:Object.keys(d)}}loaded(n,e,i){const s=n.split("|"),o=s[0],u=s[1];e&&this.emit("failedLoading",o,u,e),!e&&i&&this.store.addResourceBundle(o,u,i,void 0,void 0,{skipCopy:!0}),this.state[n]=e?-1:2,e&&i&&(this.state[n]=0);const l={};this.queue.forEach(d=>{pushPath(d.loaded,[o],u),removePending(d,n),e&&d.errors.push(e),d.pendingCount===0&&!d.done&&(Object.keys(d.loaded).forEach(m=>{l[m]||(l[m]={});const y=d.loaded[m];y.length&&y.forEach(S=>{l[m][S]===void 0&&(l[m][S]=!0)})}),d.done=!0,d.errors.length?d.callback(d.errors):d.callback())}),this.emit("loaded",l),this.queue=this.queue.filter(d=>!d.done)}read(n,e,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,u=arguments.length>5?arguments[5]:void 0;if(!n.length)return u(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:n,ns:e,fcName:i,tried:s,wait:o,callback:u});return}this.readingCalls++;const l=(m,y)=>{if(this.readingCalls--,this.waitingReads.length>0){const S=this.waitingReads.shift();this.read(S.lng,S.ns,S.fcName,S.tried,S.wait,S.callback)}if(m&&y&&s<this.maxRetries){setTimeout(()=>{this.read.call(this,n,e,i,s+1,o*2,u)},o);return}u(m,y)},d=this.backend[i].bind(this.backend);if(d.length===2){try{const m=d(n,e);m&&typeof m.then=="function"?m.then(y=>l(null,y)).catch(l):l(null,m)}catch(m){l(m)}return}return d(n,e,l)}prepareLoading(n,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();isString(n)&&(n=this.languageUtils.toResolveHierarchy(n)),isString(e)&&(e=[e]);const o=this.queueLoad(n,e,i,s);if(!o.toLoad.length)return o.pending.length||s(),null;o.toLoad.forEach(u=>{this.loadOne(u)})}load(n,e,i){this.prepareLoading(n,e,{},i)}reload(n,e,i){this.prepareLoading(n,e,{reload:!0},i)}loadOne(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const i=n.split("|"),s=i[0],o=i[1];this.read(s,o,"read",void 0,void 0,(u,l)=>{u&&this.logger.warn(`${e}loading namespace ${o} for language ${s} failed`,u),!u&&l&&this.logger.log(`${e}loaded namespace ${o} for language ${s}`,l),this.loaded(n,u,l)})}saveMissing(n,e,i,s,o){var d,m,y,S,X;let u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if((m=(d=this.services)==null?void 0:d.utils)!=null&&m.hasLoadedNamespace&&!((S=(y=this.services)==null?void 0:y.utils)!=null&&S.hasLoadedNamespace(e))){this.logger.warn(`did not save key "${i}" as the namespace "${e}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(i==null||i==="")){if((X=this.backend)!=null&&X.create){const he={...u,isUpdate:o},Ce=this.backend.create.bind(this.backend);if(Ce.length<6)try{let Ee;Ce.length===5?Ee=Ce(n,e,i,s,he):Ee=Ce(n,e,i,s),Ee&&typeof Ee.then=="function"?Ee.then(xe=>l(null,xe)).catch(l):l(null,Ee)}catch(Ee){l(Ee)}else Ce(n,e,i,s,l,he)}!n||!n[0]||this.store.addResource(n[0],e,i,s)}}}const get=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:r=>{let n={};if(typeof r[1]=="object"&&(n=r[1]),isString(r[1])&&(n.defaultValue=r[1]),isString(r[2])&&(n.tDescription=r[2]),typeof r[2]=="object"||typeof r[3]=="object"){const e=r[3]||r[2];Object.keys(e).forEach(i=>{n[i]=e[i]})}return n},interpolation:{escapeValue:!0,format:r=>r,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),transformOptions=r=>{var n,e;return isString(r.ns)&&(r.ns=[r.ns]),isString(r.fallbackLng)&&(r.fallbackLng=[r.fallbackLng]),isString(r.fallbackNS)&&(r.fallbackNS=[r.fallbackNS]),((e=(n=r.supportedLngs)==null?void 0:n.indexOf)==null?void 0:e.call(n,"cimode"))<0&&(r.supportedLngs=r.supportedLngs.concat(["cimode"])),typeof r.initImmediate=="boolean"&&(r.initAsync=r.initImmediate),r},noop=()=>{},bindMemberFunctions=r=>{Object.getOwnPropertyNames(Object.getPrototypeOf(r)).forEach(e=>{typeof r[e]=="function"&&(r[e]=r[e].bind(r))})};class I18n extends EventEmitter{constructor(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;if(super(),this.options=transformOptions(n),this.services={},this.logger=baseLogger,this.modules={external:[]},bindMemberFunctions(this),e&&!this.isInitialized&&!n.isClone){if(!this.options.initAsync)return this.init(n,e),this;setTimeout(()=>{this.init(n,e)},0)}}init(){var n=this;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof e=="function"&&(i=e,e={}),e.defaultNS==null&&e.ns&&(isString(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const s=get();this.options={...s,...this.options,...transformOptions(e)},this.options.interpolation={...s.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const o=y=>y?typeof y=="function"?new y:y:null;if(!this.options.isClone){this.modules.logger?baseLogger.init(o(this.modules.logger),this.options):baseLogger.init(null,this.options);let y;this.modules.formatter?y=this.modules.formatter:y=Formatter;const S=new LanguageUtil(this.options);this.store=new ResourceStore(this.options.resources,this.options);const X=this.services;X.logger=baseLogger,X.resourceStore=this.store,X.languageUtils=S,X.pluralResolver=new PluralResolver(S,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),y&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(X.formatter=o(y),X.formatter.init(X,this.options),this.options.interpolation.format=X.formatter.format.bind(X.formatter)),X.interpolator=new Interpolator(this.options),X.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},X.backendConnector=new Connector(o(this.modules.backend),X.resourceStore,X,this.options),X.backendConnector.on("*",function(he){for(var Ce=arguments.length,Ee=new Array(Ce>1?Ce-1:0),xe=1;xe<Ce;xe++)Ee[xe-1]=arguments[xe];n.emit(he,...Ee)}),this.modules.languageDetector&&(X.languageDetector=o(this.modules.languageDetector),X.languageDetector.init&&X.languageDetector.init(X,this.options.detection,this.options)),this.modules.i18nFormat&&(X.i18nFormat=o(this.modules.i18nFormat),X.i18nFormat.init&&X.i18nFormat.init(this)),this.translator=new Translator(this.services,this.options),this.translator.on("*",function(he){for(var Ce=arguments.length,Ee=new Array(Ce>1?Ce-1:0),xe=1;xe<Ce;xe++)Ee[xe-1]=arguments[xe];n.emit(he,...Ee)}),this.modules.external.forEach(he=>{he.init&&he.init(this)})}if(this.format=this.options.interpolation.format,i||(i=noop),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const y=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);y.length>0&&y[0]!=="dev"&&(this.options.lng=y[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(y=>{this[y]=function(){return n.store[y](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(y=>{this[y]=function(){return n.store[y](...arguments),n}});const d=defer(),m=()=>{const y=(S,X)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),d.resolve(X),i(S,X)};if(this.languages&&!this.isInitialized)return y(null,this.t.bind(this));this.changeLanguage(this.options.lng,y)};return this.options.resources||!this.options.initAsync?m():setTimeout(m,0),d}loadResources(n){var o,u;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:noop;const s=isString(n)?n:this.language;if(typeof n=="function"&&(i=n),!this.options.resources||this.options.partialBundledLanguages){if((s==null?void 0:s.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return i();const l=[],d=m=>{if(!m||m==="cimode")return;this.services.languageUtils.toResolveHierarchy(m).forEach(S=>{S!=="cimode"&&l.indexOf(S)<0&&l.push(S)})};s?d(s):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(y=>d(y)),(u=(o=this.options.preload)==null?void 0:o.forEach)==null||u.call(o,m=>d(m)),this.services.backendConnector.load(l,this.options.ns,m=>{!m&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),i(m)})}else i(null)}reloadResources(n,e,i){const s=defer();return typeof n=="function"&&(i=n,n=void 0),typeof e=="function"&&(i=e,e=void 0),n||(n=this.languages),e||(e=this.options.ns),i||(i=noop),this.services.backendConnector.reload(n,e,o=>{s.resolve(),i(o)}),s}use(n){if(!n)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!n.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return n.type==="backend"&&(this.modules.backend=n),(n.type==="logger"||n.log&&n.warn&&n.error)&&(this.modules.logger=n),n.type==="languageDetector"&&(this.modules.languageDetector=n),n.type==="i18nFormat"&&(this.modules.i18nFormat=n),n.type==="postProcessor"&&postProcessor.addPostProcessor(n),n.type==="formatter"&&(this.modules.formatter=n),n.type==="3rdParty"&&this.modules.external.push(n),this}setResolvedLanguage(n){if(!(!n||!this.languages)&&!(["cimode","dev"].indexOf(n)>-1))for(let e=0;e<this.languages.length;e++){const i=this.languages[e];if(!(["cimode","dev"].indexOf(i)>-1)&&this.store.hasLanguageSomeTranslations(i)){this.resolvedLanguage=i;break}}}changeLanguage(n,e){var i=this;this.isLanguageChangingTo=n;const s=defer();this.emit("languageChanging",n);const o=d=>{this.language=d,this.languages=this.services.languageUtils.toResolveHierarchy(d),this.resolvedLanguage=void 0,this.setResolvedLanguage(d)},u=(d,m)=>{m?(o(m),this.translator.changeLanguage(m),this.isLanguageChangingTo=void 0,this.emit("languageChanged",m),this.logger.log("languageChanged",m)):this.isLanguageChangingTo=void 0,s.resolve(function(){return i.t(...arguments)}),e&&e(d,function(){return i.t(...arguments)})},l=d=>{var y,S;!n&&!d&&this.services.languageDetector&&(d=[]);const m=isString(d)?d:this.services.languageUtils.getBestMatchFromCodes(d);m&&(this.language||o(m),this.translator.language||this.translator.changeLanguage(m),(S=(y=this.services.languageDetector)==null?void 0:y.cacheUserLanguage)==null||S.call(y,m)),this.loadResources(m,X=>{u(X,m)})};return!n&&this.services.languageDetector&&!this.services.languageDetector.async?l(this.services.languageDetector.detect()):!n&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(l):this.services.languageDetector.detect(l):l(n),s}getFixedT(n,e,i){var s=this;const o=function(u,l){let d;if(typeof l!="object"){for(var m=arguments.length,y=new Array(m>2?m-2:0),S=2;S<m;S++)y[S-2]=arguments[S];d=s.options.overloadTranslationOptionHandler([u,l].concat(y))}else d={...l};d.lng=d.lng||o.lng,d.lngs=d.lngs||o.lngs,d.ns=d.ns||o.ns,d.keyPrefix!==""&&(d.keyPrefix=d.keyPrefix||i||o.keyPrefix);const X=s.options.keySeparator||".";let he;return d.keyPrefix&&Array.isArray(u)?he=u.map(Ce=>`${d.keyPrefix}${X}${Ce}`):he=d.keyPrefix?`${d.keyPrefix}${X}${u}`:u,s.t(he,d)};return isString(n)?o.lng=n:o.lngs=n,o.ns=e,o.keyPrefix=i,o}t(){var s;for(var n=arguments.length,e=new Array(n),i=0;i<n;i++)e[i]=arguments[i];return(s=this.translator)==null?void 0:s.translate(...e)}exists(){var s;for(var n=arguments.length,e=new Array(n),i=0;i<n;i++)e[i]=arguments[i];return(s=this.translator)==null?void 0:s.exists(...e)}setDefaultNamespace(n){this.options.defaultNS=n}hasLoadedNamespace(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const i=e.lng||this.resolvedLanguage||this.languages[0],s=this.options?this.options.fallbackLng:!1,o=this.languages[this.languages.length-1];if(i.toLowerCase()==="cimode")return!0;const u=(l,d)=>{const m=this.services.backendConnector.state[`${l}|${d}`];return m===-1||m===0||m===2};if(e.precheck){const l=e.precheck(this,u);if(l!==void 0)return l}return!!(this.hasResourceBundle(i,n)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||u(i,n)&&(!s||u(o,n)))}loadNamespaces(n,e){const i=defer();return this.options.ns?(isString(n)&&(n=[n]),n.forEach(s=>{this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}),this.loadResources(s=>{i.resolve(),e&&e(s)}),i):(e&&e(),Promise.resolve())}loadLanguages(n,e){const i=defer();isString(n)&&(n=[n]);const s=this.options.preload||[],o=n.filter(u=>s.indexOf(u)<0&&this.services.languageUtils.isSupportedCode(u));return o.length?(this.options.preload=s.concat(o),this.loadResources(u=>{i.resolve(),e&&e(u)}),i):(e&&e(),Promise.resolve())}dir(n){var s,o;if(n||(n=this.resolvedLanguage||(((s=this.languages)==null?void 0:s.length)>0?this.languages[0]:this.language)),!n)return"rtl";const e=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],i=((o=this.services)==null?void 0:o.languageUtils)||new LanguageUtil(get());return e.indexOf(i.getLanguagePartFromCode(n))>-1||n.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return new I18n(n,e)}cloneInstance(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:noop;const i=n.forkResourceStore;i&&delete n.forkResourceStore;const s={...this.options,...n,isClone:!0},o=new I18n(s);if((n.debug!==void 0||n.prefix!==void 0)&&(o.logger=o.logger.clone(n)),["store","services","language"].forEach(l=>{o[l]=this[l]}),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},i){const l=Object.keys(this.store.data).reduce((d,m)=>(d[m]={...this.store.data[m]},Object.keys(d[m]).reduce((y,S)=>(y[S]={...d[m][S]},y),{})),{});o.store=new ResourceStore(l,s),o.services.resourceStore=o.store}return o.translator=new Translator(o.services,s),o.translator.on("*",function(l){for(var d=arguments.length,m=new Array(d>1?d-1:0),y=1;y<d;y++)m[y-1]=arguments[y];o.emit(l,...m)}),o.init(s,e),o.translator.options=s,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const instance=I18n.createInstance();instance.createInstance=I18n.createInstance;instance.createInstance;instance.dir;instance.init;instance.loadResources;instance.reloadResources;instance.use;instance.changeLanguage;instance.getFixedT;instance.t;instance.exists;instance.setDefaultNamespace;instance.hasLoadedNamespace;instance.loadNamespaces;instance.loadLanguages;function _typeof$2(r){"@babel/helpers - typeof";return _typeof$2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$2(r)}function hasXMLHttpRequest(){return typeof XMLHttpRequest=="function"||(typeof XMLHttpRequest>"u"?"undefined":_typeof$2(XMLHttpRequest))==="object"}function isPromise(r){return!!r&&typeof r.then=="function"}function makePromise(r){return isPromise(r)?r:Promise.resolve(r)}function ownKeys$1(r,n){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);n&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),e.push.apply(e,i)}return e}function _objectSpread$1(r){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};n%2?ownKeys$1(Object(e),!0).forEach(function(i){_defineProperty$1(r,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):ownKeys$1(Object(e)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(e,i))})}return r}function _defineProperty$1(r,n,e){return(n=_toPropertyKey$1(n))in r?Object.defineProperty(r,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[n]=e,r}function _toPropertyKey$1(r){var n=_toPrimitive$1(r,"string");return _typeof$1(n)=="symbol"?n:n+""}function _toPrimitive$1(r,n){if(_typeof$1(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var i=e.call(r,n||"default");if(_typeof$1(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}function _typeof$1(r){"@babel/helpers - typeof";return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$1(r)}var fetchApi;typeof fetch=="function"&&(typeof global<"u"&&global.fetch?fetchApi=global.fetch:typeof window<"u"&&window.fetch?fetchApi=window.fetch:fetchApi=fetch);var XmlHttpRequestApi;hasXMLHttpRequest()&&(typeof global<"u"&&global.XMLHttpRequest?XmlHttpRequestApi=global.XMLHttpRequest:typeof window<"u"&&window.XMLHttpRequest&&(XmlHttpRequestApi=window.XMLHttpRequest));var ActiveXObjectApi;typeof ActiveXObject=="function"&&(typeof global<"u"&&global.ActiveXObject?ActiveXObjectApi=global.ActiveXObject:typeof window<"u"&&window.ActiveXObject&&(ActiveXObjectApi=window.ActiveXObject));typeof fetchApi!="function"&&(fetchApi=void 0);if(!fetchApi&&!XmlHttpRequestApi&&!ActiveXObjectApi)try{__vitePreload(()=>import("./browser-ponyfill-DMp7Ywrs.js").then(r=>r.b),[]).then(function(r){fetchApi=r.default}).catch(function(){})}catch{}var addQueryString=function r(n,e){if(e&&_typeof$1(e)==="object"){var i="";for(var s in e)i+="&"+encodeURIComponent(s)+"="+encodeURIComponent(e[s]);if(!i)return n;n=n+(n.indexOf("?")!==-1?"&":"?")+i.slice(1)}return n},fetchIt=function r(n,e,i,s){var o=function(d){if(!d.ok)return i(d.statusText||"Error",{status:d.status});d.text().then(function(m){i(null,{status:d.status,data:m})}).catch(i)};if(s){var u=s(n,e);if(u instanceof Promise){u.then(o).catch(i);return}}typeof fetch=="function"?fetch(n,e).then(o).catch(i):fetchApi(n,e).then(o).catch(i)},omitFetchOptions=!1,requestWithFetch=function r(n,e,i,s){n.queryStringParams&&(e=addQueryString(e,n.queryStringParams));var o=_objectSpread$1({},typeof n.customHeaders=="function"?n.customHeaders():n.customHeaders);typeof window>"u"&&typeof global<"u"&&typeof global.process<"u"&&global.process.versions&&global.process.versions.node&&(o["User-Agent"]="i18next-http-backend (node/".concat(global.process.version,"; ").concat(global.process.platform," ").concat(global.process.arch,")")),i&&(o["Content-Type"]="application/json");var u=typeof n.requestOptions=="function"?n.requestOptions(i):n.requestOptions,l=_objectSpread$1({method:i?"POST":"GET",body:i?n.stringify(i):void 0,headers:o},omitFetchOptions?{}:u),d=typeof n.alternateFetch=="function"&&n.alternateFetch.length>=1?n.alternateFetch:void 0;try{fetchIt(e,l,s,d)}catch(m){if(!u||Object.keys(u).length===0||!m.message||m.message.indexOf("not implemented")<0)return s(m);try{Object.keys(u).forEach(function(y){delete l[y]}),fetchIt(e,l,s,d),omitFetchOptions=!0}catch(y){s(y)}}},requestWithXmlHttpRequest=function r(n,e,i,s){i&&_typeof$1(i)==="object"&&(i=addQueryString("",i).slice(1)),n.queryStringParams&&(e=addQueryString(e,n.queryStringParams));try{var o=XmlHttpRequestApi?new XmlHttpRequestApi:new ActiveXObjectApi("MSXML2.XMLHTTP.3.0");o.open(i?"POST":"GET",e,1),n.crossDomain||o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.withCredentials=!!n.withCredentials,i&&o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.overrideMimeType&&o.overrideMimeType("application/json");var u=n.customHeaders;if(u=typeof u=="function"?u():u,u)for(var l in u)o.setRequestHeader(l,u[l]);o.onreadystatechange=function(){o.readyState>3&&s(o.status>=400?o.statusText:null,{status:o.status,data:o.responseText})},o.send(i)}catch(d){console&&console.log(d)}},request=function r(n,e,i,s){if(typeof i=="function"&&(s=i,i=void 0),s=s||function(){},fetchApi&&e.indexOf("file:")!==0)return requestWithFetch(n,e,i,s);if(hasXMLHttpRequest()||typeof ActiveXObject=="function")return requestWithXmlHttpRequest(n,e,i,s);s(new Error("No fetch and no xhr implementation found!"))};function _typeof(r){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof(r)}function ownKeys(r,n){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);n&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),e.push.apply(e,i)}return e}function _objectSpread(r){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};n%2?ownKeys(Object(e),!0).forEach(function(i){_defineProperty(r,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):ownKeys(Object(e)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(e,i))})}return r}function _classCallCheck(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(r,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,_toPropertyKey(i.key),i)}}function _createClass(r,n,e){return n&&_defineProperties(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function _defineProperty(r,n,e){return(n=_toPropertyKey(n))in r?Object.defineProperty(r,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[n]=e,r}function _toPropertyKey(r){var n=_toPrimitive(r,"string");return _typeof(n)=="symbol"?n:n+""}function _toPrimitive(r,n){if(_typeof(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var i=e.call(r,n||"default");if(_typeof(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}var getDefaults$1=function r(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",parse:function(e){return JSON.parse(e)},stringify:JSON.stringify,parsePayload:function(e,i,s){return _defineProperty({},i,s||"")},parseLoadPayload:function(e,i){},request,reloadInterval:typeof window<"u"?!1:60*60*1e3,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}},Backend=function(){function r(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};_classCallCheck(this,r),this.services=n,this.options=e,this.allOptions=i,this.type="backend",this.init(n,e,i)}return _createClass(r,[{key:"init",value:function(e){var i=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.services=e,this.options=_objectSpread(_objectSpread(_objectSpread({},getDefaults$1()),this.options||{}),s),this.allOptions=o,this.services&&this.options.reloadInterval){var u=setInterval(function(){return i.reload()},this.options.reloadInterval);_typeof(u)==="object"&&typeof u.unref=="function"&&u.unref()}}},{key:"readMulti",value:function(e,i,s){this._readAny(e,e,i,i,s)}},{key:"read",value:function(e,i,s){this._readAny([e],e,[i],i,s)}},{key:"_readAny",value:function(e,i,s,o,u){var l=this,d=this.options.loadPath;typeof this.options.loadPath=="function"&&(d=this.options.loadPath(e,s)),d=makePromise(d),d.then(function(m){if(!m)return u(null,{});var y=l.services.interpolator.interpolate(m,{lng:e.join("+"),ns:s.join("+")});l.loadUrl(y,u,i,o)})}},{key:"loadUrl",value:function(e,i,s,o){var u=this,l=typeof s=="string"?[s]:s,d=typeof o=="string"?[o]:o,m=this.options.parseLoadPayload(l,d);this.options.request(this.options,e,m,function(y,S){if(S&&(S.status>=500&&S.status<600||!S.status))return i("failed loading "+e+"; status code: "+S.status,!0);if(S&&S.status>=400&&S.status<500)return i("failed loading "+e+"; status code: "+S.status,!1);if(!S&&y&&y.message){var X=y.message.toLowerCase(),he=["failed","fetch","network","load"].find(function(xe){return X.indexOf(xe)>-1});if(he)return i("failed loading "+e+": "+y.message,!0)}if(y)return i(y,!1);var Ce,Ee;try{typeof S.data=="string"?Ce=u.options.parse(S.data,s,o):Ce=S.data}catch{Ee="failed parsing "+e+" to json"}if(Ee)return i(Ee,!1);i(null,Ce)})}},{key:"create",value:function(e,i,s,o,u){var l=this;if(this.options.addPath){typeof e=="string"&&(e=[e]);var d=this.options.parsePayload(i,s,o),m=0,y=[],S=[];e.forEach(function(X){var he=l.options.addPath;typeof l.options.addPath=="function"&&(he=l.options.addPath(X,i));var Ce=l.services.interpolator.interpolate(he,{lng:X,ns:i});l.options.request(l.options,Ce,d,function(Ee,xe){m+=1,y.push(Ee),S.push(xe),m===e.length&&typeof u=="function"&&u(y,S)})})}}},{key:"reload",value:function(){var e=this,i=this.services,s=i.backendConnector,o=i.languageUtils,u=i.logger,l=s.language;if(!(l&&l.toLowerCase()==="cimode")){var d=[],m=function(S){var X=o.toResolveHierarchy(S);X.forEach(function(he){d.indexOf(he)<0&&d.push(he)})};m(l),this.allOptions.preload&&this.allOptions.preload.forEach(function(y){return m(y)}),d.forEach(function(y){e.allOptions.ns.forEach(function(S){s.read(y,S,"read",null,null,function(X,he){X&&u.warn("loading namespace ".concat(S," for language ").concat(y," failed"),X),!X&&he&&u.log("loaded namespace ".concat(S," for language ").concat(y),he),s.loaded("".concat(y,"|").concat(S),X,he)})})})}}}])}();Backend.type="backend";function registerSW(r={}){const{immediate:n=!1,onNeedRefresh:e,onOfflineReady:i,onRegistered:s,onRegisteredSW:o,onRegisterError:u}=r;let l,d;const m=async(S=!0)=>{await d};async function y(){if("serviceWorker"in navigator){if(l=await __vitePreload(async()=>{const{Workbox:S}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:S}},[]).then(({Workbox:S})=>new S("/sw.js",{scope:"/",type:"classic"})).catch(S=>{u==null||u(S)}),!l)return;l.addEventListener("activated",S=>{(S.isUpdate||S.isExternal)&&window.location.reload()}),l.addEventListener("installed",S=>{S.isUpdate||i==null||i()}),l.register({immediate:n}).then(S=>{o?o("/sw.js",S):s==null||s(S)}).catch(S=>{u==null||u(S)})}}return d=y(),m}const{slice,forEach}=[];function defaults(r){return forEach.call(slice.call(arguments,1),n=>{if(n)for(const e in n)r[e]===void 0&&(r[e]=n[e])}),r}const fieldContentRegExp=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,serializeCookie=function(r,n){const i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},s=encodeURIComponent(n);let o=`${r}=${s}`;if(i.maxAge>0){const u=i.maxAge-0;if(Number.isNaN(u))throw new Error("maxAge should be a Number");o+=`; Max-Age=${Math.floor(u)}`}if(i.domain){if(!fieldContentRegExp.test(i.domain))throw new TypeError("option domain is invalid");o+=`; Domain=${i.domain}`}if(i.path){if(!fieldContentRegExp.test(i.path))throw new TypeError("option path is invalid");o+=`; Path=${i.path}`}if(i.expires){if(typeof i.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+=`; Expires=${i.expires.toUTCString()}`}if(i.httpOnly&&(o+="; HttpOnly"),i.secure&&(o+="; Secure"),i.sameSite)switch(typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return o},cookie={create(r,n,e,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};e&&(s.expires=new Date,s.expires.setTime(s.expires.getTime()+e*60*1e3)),i&&(s.domain=i),document.cookie=serializeCookie(r,encodeURIComponent(n),s)},read(r){const n=`${r}=`,e=document.cookie.split(";");for(let i=0;i<e.length;i++){let s=e[i];for(;s.charAt(0)===" ";)s=s.substring(1,s.length);if(s.indexOf(n)===0)return s.substring(n.length,s.length)}return null},remove(r){this.create(r,"",-1)}};var cookie$1={name:"cookie",lookup(r){let{lookupCookie:n}=r;if(n&&typeof document<"u")return cookie.read(n)||void 0},cacheUserLanguage(r,n){let{lookupCookie:e,cookieMinutes:i,cookieDomain:s,cookieOptions:o}=n;e&&typeof document<"u"&&cookie.create(e,r,i,s,o)}},querystring={name:"querystring",lookup(r){var i;let{lookupQuerystring:n}=r,e;if(typeof window<"u"){let{search:s}=window.location;!window.location.search&&((i=window.location.hash)==null?void 0:i.indexOf("?"))>-1&&(s=window.location.hash.substring(window.location.hash.indexOf("?")));const u=s.substring(1).split("&");for(let l=0;l<u.length;l++){const d=u[l].indexOf("=");d>0&&u[l].substring(0,d)===n&&(e=u[l].substring(d+1))}}return e}};let hasLocalStorageSupport=null;const localStorageAvailable=()=>{if(hasLocalStorageSupport!==null)return hasLocalStorageSupport;try{hasLocalStorageSupport=window!=="undefined"&&window.localStorage!==null;const r="i18next.translate.boo";window.localStorage.setItem(r,"foo"),window.localStorage.removeItem(r)}catch{hasLocalStorageSupport=!1}return hasLocalStorageSupport};var localStorage$1={name:"localStorage",lookup(r){let{lookupLocalStorage:n}=r;if(n&&localStorageAvailable())return window.localStorage.getItem(n)||void 0},cacheUserLanguage(r,n){let{lookupLocalStorage:e}=n;e&&localStorageAvailable()&&window.localStorage.setItem(e,r)}};let hasSessionStorageSupport=null;const sessionStorageAvailable=()=>{if(hasSessionStorageSupport!==null)return hasSessionStorageSupport;try{hasSessionStorageSupport=window!=="undefined"&&window.sessionStorage!==null;const r="i18next.translate.boo";window.sessionStorage.setItem(r,"foo"),window.sessionStorage.removeItem(r)}catch{hasSessionStorageSupport=!1}return hasSessionStorageSupport};var sessionStorage={name:"sessionStorage",lookup(r){let{lookupSessionStorage:n}=r;if(n&&sessionStorageAvailable())return window.sessionStorage.getItem(n)||void 0},cacheUserLanguage(r,n){let{lookupSessionStorage:e}=n;e&&sessionStorageAvailable()&&window.sessionStorage.setItem(e,r)}},navigator$1={name:"navigator",lookup(r){const n=[];if(typeof navigator<"u"){const{languages:e,userLanguage:i,language:s}=navigator;if(e)for(let o=0;o<e.length;o++)n.push(e[o]);i&&n.push(i),s&&n.push(s)}return n.length>0?n:void 0}},htmlTag={name:"htmlTag",lookup(r){let{htmlTag:n}=r,e;const i=n||(typeof document<"u"?document.documentElement:null);return i&&typeof i.getAttribute=="function"&&(e=i.getAttribute("lang")),e}},path={name:"path",lookup(r){var s;let{lookupFromPathIndex:n}=r;if(typeof window>"u")return;const e=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(e)?(s=e[typeof n=="number"?n:0])==null?void 0:s.replace("/",""):void 0}},subdomain={name:"subdomain",lookup(r){var s,o;let{lookupFromSubdomainIndex:n}=r;const e=typeof n=="number"?n+1:1,i=typeof window<"u"&&((o=(s=window.location)==null?void 0:s.hostname)==null?void 0:o.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(i)return i[e]}};let canCookies=!1;try{document.cookie,canCookies=!0}catch(r){}const order=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];canCookies||order.splice(1,1);const getDefaults=()=>({order,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:r=>r});class Browser{constructor(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(n,e)}init(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=n,this.options=defaults(e,this.options||{},getDefaults()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=s=>s.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=i,this.addDetector(cookie$1),this.addDetector(querystring),this.addDetector(localStorage$1),this.addDetector(sessionStorage),this.addDetector(navigator$1),this.addDetector(htmlTag),this.addDetector(path),this.addDetector(subdomain)}addDetector(n){return this.detectors[n.name]=n,this}detect(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,e=[];return n.forEach(i=>{if(this.detectors[i]){let s=this.detectors[i].lookup(this.options);s&&typeof s=="string"&&(s=[s]),s&&(e=e.concat(s))}}),e=e.map(i=>this.options.convertDetectedLanguage(i)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?e:e.length>0?e[0]:null}cacheUserLanguage(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;e&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(n)>-1||e.forEach(i=>{this.detectors[i]&&this.detectors[i].cacheUserLanguage(n,this.options)}))}}Browser.type="languageDetector";localStorage.i18nextLng=navigator.language.split("-")[0];navigator.language.toLowerCase().startsWith("ar")&&document.body.setAttribute("dir","rtl");instance.use(Browser).use(Backend).use(initReactI18next).init({fallbackLng:"en",debug:!0,interpolation:{escapeValue:!1}});window.startReact=()=>{clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(Main,{}))};window.doneInitStep();"serviceWorker"in navigator&&(IsDevMode()||registerSW());function Main(){var{t:r}=useTranslation();return window.t=r,jsxRuntimeExports.jsxs(MemoryRouter,{children:[jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(App,{})}),jsxRuntimeExports.jsx(Route,{path:"/sandbox",element:jsxRuntimeExports.jsx(SandboxPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/lessons",element:jsxRuntimeExports.jsx(LessonsPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/snippets",element:jsxRuntimeExports.jsx(SnippetsPage,{})})]}),jsxRuntimeExports.jsx(LanguageSelect,{}),jsxRuntimeExports.jsx(Scanner,{}),jsxRuntimeExports.jsx(CodeEditor,{})]})}export{commonjsGlobal as c,getDefaultExportFromCjs as g};
